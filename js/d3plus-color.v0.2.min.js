(function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("d3-color"),require("d3-scale")):"function"==typeof define&&define.amd?define("d3plus-color",["exports","d3-color","d3-scale"],r):r(e.d3plus_color={},e.d3_color,e.d3_scale)})(this,function(e,r,n){"use strict";function t(e,n){var t=2>=arguments.length||void 0===arguments[2]?1:arguments[2],s=3>=arguments.length||void 0===arguments[3]?1:arguments[3];e=r.hsl(e),n=r.hsl(n);var a=Math.abs(n.h*s-e.h*t);a>180&&(a-=360);var u=(Math.min(e.h,n.h)+a/2)%360,l=e.l+(n.l*s-e.l*t)/2,o=e.s+(n.s*s-e.s*t)/2;return 0>u&&(u+=360),""+r.hsl("hsl("+u+","+100*o+"%,"+100*l+"%)")}function s(e){var r=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];return e in r?r[e]:c[e]}function a(e){var n=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];if([null,void 0].indexOf(e)>=0)return s("missing",n);if(e===!0)return s("on",n);if(e===!1)return s("off",n);var t=r.color(e);return t?""+e:s("scale",n)(e)}function u(e){var n=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];e=r.rgb(e);var t=(299*e.r+587*e.g+114*e.b)/1e3;return t>=128?s("dark",n):s("light",n)}function l(e){return e=r.hsl(e),e.l>.45&&(e.s>.8&&(e.s=.8),e.l=.45),""+e}function o(e){var n=1>=arguments.length||void 0===arguments[1]?.5:arguments[1];return e=r.hsl(e),n*=1-e.l,e.l+=n,e.s-=n,""+e}function i(e,n){var t=2>=arguments.length||void 0===arguments[2]?1:arguments[2],s=3>=arguments.length||void 0===arguments[3]?1:arguments[3];e=r.hsl(e),n=r.hsl(n);var a=n.h*s-e.h*t;Math.abs(a)>180&&(a-=360);var u=(e.h-a)%360,l=e.l-(n.l*s-e.l*t)/2,o=e.s-(n.s*s-e.s*t)/2;return 0>u&&(u+=360),""+r.hsl("hsl("+u+","+100*o+"%,"+100*l+"%)")}var g="0.2.4",c={dark:"#444444",light:"#f7f7f7",missing:"#cccccc",off:"#b22200",on:"#224f20",scale:n.scaleOrdinal().range(["#b22200","#eace3f","#282f6b","#b35c1e","#224f20","#5f487c","#759143","#419391","#993c88","#e89c89","#ffee8d","#afd5e8","#f7ba77","#a5c697","#c5b5e5","#d1d392","#bbefd0","#e099cf"])};e.version=g,e.add=t,e.assign=a,e.contrast=u,e.defaults=c,e.legible=l,e.lighter=o,e.subtract=i});