!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3"),require("d3plus-text"),require("d3plus-color")):"function"==typeof define&&define.amd?define("d3plus-shape",["exports","d3","d3plus-text","d3plus-color"],n):n(t.d3plus_shape={},t.d3,t.d3plus_text,t.d3plus_color)}(this,function(t,n,e,r){"use strict";function u(t){return function(){return t}}function i(t){return t.height}function o(t){return t.id}function c(t,n){return{width:t,height:n,x:-t/2,y:-n/2}}function a(t){return t.width}function f(t){return t.x}function l(t){return t.y}function s(){function t(){var u=m.selectAll(".d3plus-shape-rect").data(s,p),i=u.enter().append("g").attr("class","d3plus-shape-rect").attr("id",function(t){return"d3plus-shape-rect-"+p(t)}).attr("transform",function(t){return"translate("+w(t)+","+b(t)+")"});return i.append("rect").attr("width",0).attr("height",0).attr("x",0).attr("y",0).attr("fill",function(t){return d(t)}),u.transition().duration(y).attr("transform",function(t){return"translate("+w(t)+","+b(t)+")"}),u.selectAll("rect").transition().duration(y).attr("width",function(t){return v(t)}).attr("height",function(t){return h(t)}).attr("x",function(t){return-v(t)/2}).attr("y",function(t){return-h(t)/2}).attr("fill",function(t){return d(t)}),u.exit().transition().delay(y).remove(),u.exit().selectAll("rect").transition().duration(y).attr("width",0).attr("height",0).attr("x",function(t){return w(t)}).attr("y",function(t){return b(t)}),u.each(function(t){if(void 0!==x){var u=g(v(t),h(t));if(u){var i=n.select(this).selectAll("text").data([0]);i.enter().append("text").html(x(t)),e.box().fontColor(function(){return r.contrast(d(t))}).height(u.height).select(i.node()).width(u.width).x(u.x).y(u.y)()}else n.select(this).select("text").remove()}else n.select(this).select("text").remove()}),t}var s=[],d=u("black"),h=i,p=o,g=c,x=void 0,m=void 0,y=600,v=a,w=f,b=l;return t.data=function(n){return arguments.length?(s=n,t):s},t.fill=function(n){return arguments.length?(d="function"==typeof n?n:u(n),t):d},t.height=function(n){return arguments.length?(h="function"==typeof n?n:u(n),t):h},t.id=function(n){return arguments.length?(p=n,t):p},t.innerBounds=function(n){return arguments.length?(g=n,t):g},t.label=function(n){return arguments.length?(x="function"==typeof n?n:u(n),t):x},t.select=function(e){return arguments.length?(m=n.select(e),t):m},t.timing=function(n){return arguments.length?(y=n,t):y},t.width=function(n){return arguments.length?(v="function"==typeof n?n:u(n),t):v},t.x=function(n){return arguments.length?(w="function"==typeof n?n:u(n),t):w},t.y=function(n){return arguments.length?(b="function"==typeof n?n:u(n),t):b},t}n="default"in n?n["default"]:n;var d="0.2.1";t.version=d,t.rect=s});