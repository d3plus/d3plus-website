/*
  d3plus-form v0.2.4
  Javascript rendered input forms.
  Copyright (c) 2017 D3plus - https://d3plus.org
  @license MIT
*/
(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports,require("d3-selection"),require("d3plus-common")):typeof define==="function"&&define.amd?define("d3plus-form",["exports","d3-selection","d3plus-common"],e):e(t.d3plus=t.d3plus||{},t.d3Selection,t.d3plusCommon)})(this,function(t,e,i){"use strict";var n=function(t){function n(){t.call(this);this._buttonStyle={margin:"0 5px"};this._data=[];this._text=i.accessor("text");this._value=i.accessor("value")}if(t)n.__proto__=t;n.prototype=Object.create(t&&t.prototype);n.prototype.constructor=n;n.prototype.render=function t(){var n=this;if(this._container===void 0){this.container(e.select("body").append("div").node())}var o=this._container.selectAll("div#d3plus-Form-"+this._uuid).data([0]);var l=this._container.node().tagName.toLowerCase()==="foreignobject";o=o.enter().append(l?"xhtml:div":"div").attr("id","d3plus-Form-"+this._uuid).attr("class","d3plus-Form d3plus-Form-Button").merge(o);var r=o.selectAll("button").data(this._data,function(t,e){return n._value(t,e)});r.exit().remove();r=r.enter().append("button").attr("class","d3plus-Button").attr("type","button").merge(r).call(i.stylize,this._buttonStyle).html(function(t,e){return n._text(t,e)});for(var s in n._on){if({}.hasOwnProperty.call(n._on,s)){r.on(s,n._on[s])}}return this};n.prototype.buttonStyle=function t(e){return arguments.length?(this._buttonStyle=e,this):this._buttonStyle};n.prototype.container=function t(i){return arguments.length?(this._container=e.select(i),this):this._container};n.prototype.data=function t(e){return arguments.length?(this._data=e,this):this._data};n.prototype.text=function t(e){return arguments.length?(this._text=typeof e==="function"?e:i.constant(e),this):this._text};n.prototype.value=function t(e){return arguments.length?(this._value=e,this):this._value};return n}(i.BaseClass);var o=function(t){function n(){t.call(this);this._labelStyle={"font-family":"Verdana","font-size":"12px","padding-right":"5px"};this._legendStyle={"font-family":"Verdana","font-size":"12px","padding-right":"5px"};this._options=[];this._radioStyle={"margin-right":"10px"};this._text=i.accessor("text");this._value=i.accessor("value")}if(t)n.__proto__=t;n.prototype=Object.create(t&&t.prototype);n.prototype.constructor=n;n.prototype.render=function t(){var n=this;if(this._container===void 0){this.container(e.select("body").append("div").node())}var o=this;var l=this._container.selectAll("div#d3plus-Form-"+this._uuid).data([0]);var r=this._container.node().tagName.toLowerCase()==="foreignobject";l=l.enter().append(r?"xhtml:div":"div").attr("id","d3plus-Form-"+this._uuid).attr("class","d3plus-Form d3plus-Form-Radio").merge(l);var s=l.selectAll("label").data(this._options,function(t,e){return n._value(t,e)});s.exit().each(function(){e.select(this.nextSibling).remove()}).remove();s=s.enter().append("label").attr("class","d3plus-Label").attr("for",function(t,e){return n._uuid+"-"+n._value(t,e)}).each(function(t,e){var i=document.createElement("input");i.setAttribute("type","radio");i.setAttribute("name","d3plus-Radio-"+o._uuid);i.setAttribute("id",o._uuid+"-"+o._value(t,e));i.setAttribute("value",o._value(t,e));this.parentNode.insertBefore(i,this.nextSibling)}).merge(s).call(i.stylize,this._labelStyle).html(function(t,e){return n._text(t,e)}).each(function(t,n){var l=o._checked===void 0?!n:""+o._value(t,n)===""+o._checked;e.select(this).classed("active",l).style("cursor",l?"default":"pointer");var r=e.select(this.nextSibling).property("checked",l).call(i.stylize,o._radioStyle).style("cursor",l?"default":"pointer").on("change.d3plus",function(){o.checked(this.value);s.each(function(t,i){var n=""+o._value(t,i)===""+o._checked;e.select(this).classed("active",n).style("cursor",n?"default":"pointer");e.select(this.nextSibling).style("cursor",n?"default":"pointer")})});for(var a in o._on){if({}.hasOwnProperty.call(o._on,a)){r.on(a,o._on[a])}}});var a=l.selectAll("legend#d3plus-Legend-"+this._uuid).data(this._legend?[0]:[]);a.exit().remove();a.enter().insert("legend",".d3plus-Label").attr("id","d3plus-Legend-"+this._uuid).attr("class","d3plus-Legend").merge(a).call(i.stylize,this._legendStyle).html(this._legend);return this};n.prototype.checked=function t(e){return arguments.length?(this._checked=e,this):this._checked};n.prototype.container=function t(i){return arguments.length?(this._container=e.select(i),this):this._container};n.prototype.labelStyle=function t(e){return arguments.length?(this._labelStyle=e,this):this._labelStyle};n.prototype.legend=function t(e){return arguments.length?(this._legend=e,this):this._legend};n.prototype.legendStyle=function t(e){return arguments.length?(this._legendStyle=e,this):this._legendStyle};n.prototype.options=function t(e){return arguments.length?(this._options=e,this):this._options};n.prototype.radioStyle=function t(e){return arguments.length?(this._radioStyle=e,this):this._radioStyle};n.prototype.text=function t(e){return arguments.length?(this._text=typeof e==="function"?e:i.constant(e),this):this._text};n.prototype.value=function t(e){return arguments.length?(this._value=e,this):this._value};return n}(i.BaseClass);var l=function(t){function n(){t.call(this);this._labelStyle={"font-family":"Verdana","font-size":"12px","margin-right":"5px"};this._options=[];this._optionStyle={"font-family":"Verdana","font-size":"12px"};this._selectStyle={background:"#fafafa",border:"1px solid #ccc","border-radius":"0","font-family":"Verdana","font-size":"12px",outline:"0",padding:"3px 5px 4px"};this._text=i.accessor("text");this._value=i.accessor("value")}if(t)n.__proto__=t;n.prototype=Object.create(t&&t.prototype);n.prototype.constructor=n;n.prototype.render=function t(){var e=this;if(this._container===void 0){this.container(r("body").append("div").node())}var n=this;var o=this._container.selectAll("div#d3plus-Form-"+this._uuid).data([0]);var l=this._container.node().tagName.toLowerCase()==="foreignobject";o=o.enter().append(l?"xhtml:div":"div").attr("id","d3plus-Form-"+this._uuid).attr("class","d3plus-Form d3plus-Form-Select").merge(o);var r=o.selectAll("select#d3plus-Select-"+this._uuid).data([0]);r=r.enter().append("select").attr("id","d3plus-Select-"+this._uuid).attr("class","d3plus-Select").merge(r).call(i.stylize,this._selectStyle).on("change.d3plus",function(){n.selected(this.value)});for(var s in e._on){if({}.hasOwnProperty.call(e._on,s)){r.on(s,e._on[s])}}var a=r.selectAll("option").data(this._options,function(t,i){return e._value(t,i)});a.exit().remove();a.enter().append("option").attr("class","d3plus-Option").merge(a).call(i.stylize,this._optionStyle).attr("value",function(t,i){return e._value(t,i)}).html(function(t,i){return e._text(t,i)}).property("selected",function(t,i){return e._selected===void 0?!i:""+e._value(t,i)===""+e._selected});var u=o.selectAll("label#d3plus-Label-"+this._uuid).data(this._label?[0]:[]);u.exit().remove();u.enter().insert("label","#d3plus-Select-"+this._uuid).attr("id","d3plus-Label-"+this._uuid).attr("class","d3plus-Label").attr("for","d3plus-Select-"+this._uuid).merge(u).call(i.stylize,this._labelStyle).html(this._label);return this};n.prototype.container=function t(i){return arguments.length?(this._container=e.select(i),this):this._container};n.prototype.label=function t(e){return arguments.length?(this._label=e,this):this._label};n.prototype.labelStyle=function t(e){return arguments.length?(this._labelStyle=e,this):this._labelStyle};n.prototype.options=function t(e){return arguments.length?(this._options=e,this):this._options};n.prototype.optionStyle=function t(e){return arguments.length?(this._optionStyle=e,this):this._optionStyle};n.prototype.selected=function t(e){return arguments.length?(this._selected=e,this):this._selected};n.prototype.selectStyle=function t(e){return arguments.length?(this._selectStyle=e,this):this._selectStyle};n.prototype.text=function t(e){return arguments.length?(this._text=typeof e==="function"?e:i.constant(e),this):this._text};n.prototype.value=function t(e){return arguments.length?(this._value=e,this):this._value};return n}(i.BaseClass);t.Button=n;t.Radio=o;t.Select=l;Object.defineProperty(t,"__esModule",{value:true})});