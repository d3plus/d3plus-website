/*
  d3plus-form v0.2.1
  Javascript rendered input forms.
  Copyright (c) 2017 D3plus - https://d3plus.org
  @license MIT
*/
(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports,require("d3-selection"),require("d3plus-common")):typeof define==="function"&&define.amd?define("d3plus-form",["exports","d3-selection","d3plus-common"],e):e(t.d3plus=t.d3plus||{},t.d3Selection,t.d3plusCommon)})(this,function(t,e,i){"use strict";var n=function(t){function n(){t.call(this);this._labelStyle={"font-family":"Verdana","font-size":"12px","padding-right":"5px"};this._legendStyle={"font-family":"Verdana","font-size":"12px","padding-right":"5px"};this._options=[];this._radioStyle={"margin-right":"10px"};this._text=i.accessor("text");this._value=i.accessor("value")}if(t)n.__proto__=t;n.prototype=Object.create(t&&t.prototype);n.prototype.constructor=n;n.prototype.render=function t(){var n=this;if(this._container===void 0){this.container(e.select("body").append("div").node())}var l=this;var o=this._container.selectAll("div#d3plus-Form-"+this._uuid).data([0]);var s=this._container.node().tagName.toLowerCase()==="foreignobject";o=o.enter().append(s?"xhtml:div":"div").attr("id","d3plus-Form-"+this._uuid).attr("class","d3plus-Form d3plus-Form-Radio").merge(o);var r=o.selectAll("label").data(this._options,function(t,e){return n._value(t,e)});r.exit().each(function(){e.select(this.nextSibling).remove()}).remove();r=r.enter().append("label").attr("class","d3plus-Label").attr("for",function(t,e){return n._value(t,e)}).each(function(t,e){var i=document.createElement("input");i.setAttribute("type","radio");i.setAttribute("name","d3plus-Radio-"+l._uuid);i.setAttribute("id",l._value(t,e));i.setAttribute("value",l._value(t,e));this.parentNode.insertBefore(i,this.nextSibling)}).merge(r).call(i.stylize,this._labelStyle).html(function(t,e){return n._text(t,e)}).each(function(t,n){var o=l._checked===void 0?!n:""+l._value(t,n)===""+l._checked;e.select(this).classed("active",o).style("cursor",o?"default":"pointer");var s=e.select(this.nextSibling).property("checked",o).call(i.stylize,l._radioStyle).style("cursor",o?"default":"pointer").on("change.d3plus",function(){l.checked(this.value);r.each(function(t,i){var n=""+l._value(t,i)===""+l._checked;e.select(this).classed("active",n).style("cursor",n?"default":"pointer");e.select(this.nextSibling).style("cursor",n?"default":"pointer")})});for(var a in l._on){if({}.hasOwnProperty.call(l._on,a)){s.on(a,l._on[a])}}});var a=o.selectAll("legend#d3plus-Legend-"+this._uuid).data(this._legend?[0]:[]);a.exit().remove();a.enter().insert("legend",".d3plus-Label").attr("id","d3plus-Legend-"+this._uuid).attr("class","d3plus-Legend").merge(a).call(i.stylize,this._legendStyle).html(this._legend);return this};n.prototype.checked=function t(e){return arguments.length?(this._checked=e,this):this._checked};n.prototype.container=function t(i){return arguments.length?(this._container=e.select(i),this):this._container};n.prototype.labelStyle=function t(e){return arguments.length?(this._labelStyle=e,this):this._labelStyle};n.prototype.legend=function t(e){return arguments.length?(this._legend=e,this):this._legend};n.prototype.legendStyle=function t(e){return arguments.length?(this._legendStyle=e,this):this._legendStyle};n.prototype.options=function t(e){return arguments.length?(this._options=e,this):this._options};n.prototype.radioStyle=function t(e){return arguments.length?(this._radioStyle=e,this):this._radioStyle};n.prototype.text=function t(e){return arguments.length?(this._text=typeof e==="function"?e:i.constant(e),this):this._text};n.prototype.value=function t(e){return arguments.length?(this._value=e,this):this._value};return n}(i.BaseClass);var l=function(t){function n(){t.call(this);this._labelStyle={"font-family":"Verdana","font-size":"12px","margin-right":"5px"};this._options=[];this._optionStyle={"font-family":"Verdana","font-size":"12px"};this._selectStyle={background:"#fafafa",border:"1px solid #ccc","border-radius":"0","font-family":"Verdana","font-size":"12px",outline:"0",padding:"3px 5px 4px"};this._text=i.accessor("text");this._value=i.accessor("value")}if(t)n.__proto__=t;n.prototype=Object.create(t&&t.prototype);n.prototype.constructor=n;n.prototype.render=function t(){var e=this;if(this._container===void 0){this.container(s("body").append("div").node())}var n=this;var l=this._container.selectAll("div#d3plus-Form-"+this._uuid).data([0]);var o=this._container.node().tagName.toLowerCase()==="foreignobject";l=l.enter().append(o?"xhtml:div":"div").attr("id","d3plus-Form-"+this._uuid).attr("class","d3plus-Form d3plus-Form-Select").merge(l);var s=l.selectAll("select#d3plus-Select-"+this._uuid).data([0]);s=s.enter().append("select").attr("id","d3plus-Select-"+this._uuid).attr("class","d3plus-Select").merge(s).call(i.stylize,this._selectStyle).on("change.d3plus",function(){n.selected(this.value)});for(var r in e._on){if({}.hasOwnProperty.call(e._on,r)){s.on(r,e._on[r])}}var a=s.selectAll("option").data(this._options,function(t,i){return e._value(t,i)});a.exit().remove();a.enter().append("option").attr("class","d3plus-Option").merge(a).call(i.stylize,this._optionStyle).attr("value",function(t,i){return e._value(t,i)}).html(function(t,i){return e._text(t,i)}).property("selected",function(t,i){return e._selected===void 0?!i:""+e._value(t,i)===""+e._selected});var u=l.selectAll("label#d3plus-Label-"+this._uuid).data(this._label?[0]:[]);u.exit().remove();u.enter().insert("label","#d3plus-Select-"+this._uuid).attr("id","d3plus-Label-"+this._uuid).attr("class","d3plus-Label").attr("for","d3plus-Select-"+this._uuid).merge(u).call(i.stylize,this._labelStyle).html(this._label);return this};n.prototype.container=function t(i){return arguments.length?(this._container=e.select(i),this):this._container};n.prototype.label=function t(e){return arguments.length?(this._label=e,this):this._label};n.prototype.labelStyle=function t(e){return arguments.length?(this._labelStyle=e,this):this._labelStyle};n.prototype.options=function t(e){return arguments.length?(this._options=e,this):this._options};n.prototype.optionStyle=function t(e){return arguments.length?(this._optionStyle=e,this):this._optionStyle};n.prototype.selected=function t(e){return arguments.length?(this._selected=e,this):this._selected};n.prototype.selectStyle=function t(e){return arguments.length?(this._selectStyle=e,this):this._selectStyle};n.prototype.text=function t(e){return arguments.length?(this._text=typeof e==="function"?e:i.constant(e),this):this._text};n.prototype.value=function t(e){return arguments.length?(this._value=e,this):this._value};return n}(i.BaseClass);t.Radio=n;t.Select=l;Object.defineProperty(t,"__esModule",{value:true})});