/*
  d3plus v2.0.0-alpha.8
  Data visualization made easy. A javascript library that extends the popular D3.js to enable fast and beautiful visualizations.
  Copyright (c) 2016 D3plus - https://d3plus.org
  @license MIT
*/
(function(t,i){typeof exports==="object"&&typeof module!=="undefined"?i(exports):typeof define==="function"&&define.amd?define("d3plus",["exports"],i):i(t.d3plus=t.d3plus||{})})(this,function(t){"use strict";var i="2.0.0-alpha.8";var e=function(t,i){return t<i?-1:t>i?1:t>=i?0:NaN};var n=function(t){if(t.length===1){t=r(t)}return{left:function(i,e,n,r){if(n==null){n=0}if(r==null){r=i.length}while(n<r){var o=n+r>>>1;if(t(i[o],e)<0){n=o+1}else{r=o}}return n},right:function(i,e,n,r){if(n==null){n=0}if(r==null){r=i.length}while(n<r){var o=n+r>>>1;if(t(i[o],e)>0){r=o}else{n=o+1}}return n}}};function r(t){return function(i,n){return e(t(i),n)}}var o=n(e);var s=o.right;var a=function(t){return t===null?NaN:+t};var h=function(t,i){var e=-1,n=t.length,r,o,s;if(i==null){while(++e<n){if((o=t[e])!=null&&o>=o){r=s=o;break}}while(++e<n){if((o=t[e])!=null){if(r>o){r=o}if(s<o){s=o}}}}else{while(++e<n){if((o=i(t[e],e,t))!=null&&o>=o){r=s=o;break}}while(++e<n){if((o=i(t[e],e,t))!=null){if(r>o){r=o}if(s<o){s=o}}}}return[r,s]};var u=Array.prototype;var l=u.slice;var f=u.map;var c=function(t){return function(){return t}};var _=function(t){return t};var p=function(t,i,e){t=+t,i=+i,e=(r=arguments.length)<2?(i=t,t=0,1):r<3?1:+e;var n=-1,r=Math.max(0,Math.ceil((i-t)/e))|0,o=new Array(r);while(++n<r){o[n]=t+n*e}return o};var d=Math.sqrt(50);var g=Math.sqrt(10);var v=Math.sqrt(2);var y=function(t,i,e){var n=m(t,i,e);return p(Math.ceil(t/n)*n,Math.floor(i/n)*n+n/2,n)};function m(t,i,e){var n=Math.abs(i-t)/Math.max(0,e),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),o=n/r;if(o>=d){r*=10}else if(o>=g){r*=5}else if(o>=v){r*=2}return i<t?-r:r}var b=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1};var x=function(t,i,e){if(e==null){e=a}if(!(n=t.length)){return}if((i=+i)<=0||n<2){return+e(t[0],0,t)}if(i>=1){return+e(t[n-1],n-1,t)}var n,r=(n-1)*i,o=Math.floor(r),s=+e(t[o],o,t),h=+e(t[o+1],o+1,t);return s+(h-s)*(r-o)};var w=function(t,i){var e=-1,n=t.length,r,o;if(i==null){while(++e<n){if((o=t[e])!=null&&o>=o){r=o;break}}while(++e<n){if((o=t[e])!=null&&o>r){r=o}}}else{while(++e<n){if((o=i(t[e],e,t))!=null&&o>=o){r=o;break}}while(++e<n){if((o=i(t[e],e,t))!=null&&o>r){r=o}}}return r};var C=function(t,i){var e=0,n=t.length,r,o=-1,s=n;if(i==null){while(++o<n){if(!isNaN(r=a(t[o]))){e+=r}else{--s}}}else{while(++o<n){if(!isNaN(r=a(i(t[o],o,t)))){e+=r}else{--s}}}if(s){return e/s}};var A=function(t){var i=t.length,e,n=-1,r=0,o,s;while(++n<i){r+=t[n].length}o=new Array(r);while(--i>=0){s=t[i];e=s.length;while(--e>=0){o[--r]=s[e]}}return o};var S=function(t,i){var e=-1,n=t.length,r,o;if(i==null){while(++e<n){if((o=t[e])!=null&&o>=o){r=o;break}}while(++e<n){if((o=t[e])!=null&&r>o){r=o}}}else{while(++e<n){if((o=i(t[e],e,t))!=null&&o>=o){r=o;break}}while(++e<n){if((o=i(t[e],e,t))!=null&&r>o){r=o}}}return r};var k=function(t,i){var e=0,n=t.length,r,o=-1;if(i==null){while(++o<n){if(r=+t[o]){e+=r}}}else{while(++o<n){if(r=+i(t[o],o,t)){e+=r}}}return e};function E(t){return t.length}var B="$";function D(){}D.prototype=M.prototype={constructor:D,has:function(t){return B+t in this},get:function(t){return this[B+t]},set:function(t,i){this[B+t]=i;return this},remove:function(t){var i=B+t;return i in this&&delete this[i]},clear:function(){var t=this;for(var i in this){if(i[0]===B){delete t[i]}}},keys:function(){var t=[];for(var i in this){if(i[0]===B){t.push(i.slice(1))}}return t},values:function(){var t=this;var i=[];for(var e in this){if(e[0]===B){i.push(t[e])}}return i},entries:function(){var t=this;var i=[];for(var e in this){if(e[0]===B){i.push({key:e.slice(1),value:t[e]})}}return i},size:function(){var t=0;for(var i in this){if(i[0]===B){++t}}return t},empty:function(){for(var t in this){if(t[0]===B){return false}}return true},each:function(t){var i=this;for(var e in this){if(e[0]===B){t(i[e],e.slice(1),i)}}}};function M(t,i){var e=new D;if(t instanceof D){t.each(function(t,i){e.set(i,t)})}else if(Array.isArray(t)){var n=-1,r=t.length,o;if(i==null){while(++n<r){e.set(n,t[n])}}else{while(++n<r){e.set(i(o=t[n],n,t),o)}}}else if(t){for(var s in t){e.set(s,t[s])}}return e}var z=function(){var t=[],i=[],e,n,r;function o(i,r,s,a){if(r>=t.length){return n!=null?n(i):e!=null?i.sort(e):i}var h=-1,u=i.length,l=t[r++],f,c,_=M(),p,d=s();while(++h<u){if(p=_.get(f=l(c=i[h])+"")){p.push(c)}else{_.set(f,[c])}}_.each(function(t,i){a(d,i,o(t,r,s,a))});return d}function s(e,r){if(++r>t.length){return e}var o,a=i[r-1];if(n!=null&&r>=t.length){o=e.entries()}else{o=[],e.each(function(t,i){o.push({key:i,values:s(t,r)})})}return a!=null?o.sort(function(t,i){return a(t.key,i.key)}):o}return r={object:function(t){return o(t,0,F,O)},map:function(t){return o(t,0,N,T)},entries:function(t){return s(o(t,0,N,T),0)},key:function(i){t.push(i);return r},sortKeys:function(e){i[t.length-1]=e;return r},sortValues:function(t){e=t;return r},rollup:function(t){n=t;return r}}};function F(){return{}}function O(t,i,e){t[i]=e}function N(){return M()}function T(t,i,e){t.set(i,e)}function j(){}var P=M.prototype;j.prototype=H.prototype={constructor:j,has:P.has,add:function(t){t+="";this[B+t]=t;return this},remove:P.remove,clear:P.clear,values:P.keys,size:P.size,empty:P.empty,each:P.each};function H(t,i){var e=new j;if(t instanceof j){t.each(function(t){e.add(t)})}else if(t){var n=-1,r=t.length;if(i==null){while(++n<r){e.add(t[n])}}else{while(++n<r){e.add(i(t[n],n,t))}}}return e}var R=function(t){var i=[];for(var e in t){i.push(e)}return i};var L=Array.prototype;var W=L.map;var G=L.slice;var U={name:"implicit"};function I(t){var i=M(),e=[],n=U;t=t==null?[]:G.call(t);function r(r){var o=r+"",s=i.get(o);if(!s){if(n!==U){return n}i.set(o,s=e.push(r))}return t[(s-1)%t.length]}r.domain=function(t){if(!arguments.length){return e.slice()}e=[],i=M();var n=-1,o=t.length,s,a;while(++n<o){if(!i.has(a=(s=t[n])+"")){i.set(a,e.push(s))}}return r};r.range=function(i){return arguments.length?(t=G.call(i),r):t.slice()};r.unknown=function(t){return arguments.length?(n=t,r):n};r.copy=function(){return I().domain(e).range(t).unknown(n)};return r}function q(){var t=I().unknown(undefined),i=t.domain,e=t.range,n=[0,1],r,o,s=false,a=0,h=0,u=.5;delete t.unknown;function l(){var t=i().length,l=n[1]<n[0],f=n[l-0],c=n[1-l];r=(c-f)/Math.max(1,t-a+h*2);if(s){r=Math.floor(r)}f+=(c-f-r*(t-a))*u;o=r*(1-a);if(s){f=Math.round(f),o=Math.round(o)}var _=p(t).map(function(t){return f+r*t});return e(l?_.reverse():_)}t.domain=function(t){return arguments.length?(i(t),l()):i()};t.range=function(t){return arguments.length?(n=[+t[0],+t[1]],l()):n.slice()};t.rangeRound=function(t){return n=[+t[0],+t[1]],s=true,l()};t.bandwidth=function(){return o};t.step=function(){return r};t.round=function(t){return arguments.length?(s=!!t,l()):s};t.padding=function(t){return arguments.length?(a=h=Math.max(0,Math.min(1,t)),l()):a};t.paddingInner=function(t){return arguments.length?(a=Math.max(0,Math.min(1,t)),l()):a};t.paddingOuter=function(t){return arguments.length?(h=Math.max(0,Math.min(1,t)),l()):h};t.align=function(t){return arguments.length?(u=Math.max(0,Math.min(1,t)),l()):u};t.copy=function(){return q().domain(i()).range(n).round(s).paddingInner(a).paddingOuter(h).align(u)};return l()}function Y(t){var i=t.copy;t.padding=t.paddingOuter;delete t.paddingInner;delete t.paddingOuter;t.copy=function(){return Y(i())};return t}function X(){return Y(q().paddingInner(1))}var V=function(t,i,e){t.prototype=i.prototype=e;e.constructor=t};function J(t,i){var e=Object.create(t.prototype);for(var n in i){e[n]=i[n]}return e}function $(){}var K=.7;var Z=1/K;var Q="\\s*([+-]?\\d+)\\s*";var tt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*";var it="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*";var et=/^#([0-9a-f]{3})$/;var nt=/^#([0-9a-f]{6})$/;var rt=new RegExp("^rgb\\("+[Q,Q,Q]+"\\)$");var ot=new RegExp("^rgb\\("+[it,it,it]+"\\)$");var st=new RegExp("^rgba\\("+[Q,Q,Q,tt]+"\\)$");var at=new RegExp("^rgba\\("+[it,it,it,tt]+"\\)$");var ht=new RegExp("^hsl\\("+[tt,it,it]+"\\)$");var ut=new RegExp("^hsla\\("+[tt,it,it,tt]+"\\)$");var lt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};V($,ft,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}});function ft(t){var i;t=(t+"").trim().toLowerCase();return(i=et.exec(t))?(i=parseInt(i[1],16),new gt(i>>8&15|i>>4&240,i>>4&15|i&240,(i&15)<<4|i&15,1)):(i=nt.exec(t))?ct(parseInt(i[1],16)):(i=rt.exec(t))?new gt(i[1],i[2],i[3],1):(i=ot.exec(t))?new gt(i[1]*255/100,i[2]*255/100,i[3]*255/100,1):(i=st.exec(t))?_t(i[1],i[2],i[3],i[4]):(i=at.exec(t))?_t(i[1]*255/100,i[2]*255/100,i[3]*255/100,i[4]):(i=ht.exec(t))?vt(i[1],i[2]/100,i[3]/100,1):(i=ut.exec(t))?vt(i[1],i[2]/100,i[3]/100,i[4]):lt.hasOwnProperty(t)?ct(lt[t]):t==="transparent"?new gt(NaN,NaN,NaN,0):null}function ct(t){return new gt(t>>16&255,t>>8&255,t&255,1)}function _t(t,i,e,n){if(n<=0){t=i=e=NaN}return new gt(t,i,e,n)}function pt(t){if(!(t instanceof $)){t=ft(t)}if(!t){return new gt}t=t.rgb();return new gt(t.r,t.g,t.b,t.opacity)}function dt(t,i,e,n){return arguments.length===1?pt(t):new gt(t,i,e,n==null?1:n)}function gt(t,i,e,n){this.r=+t;this.g=+i;this.b=+e;this.opacity=+n}V(gt,dt,J($,{brighter:function(t){t=t==null?Z:Math.pow(Z,t);return new gt(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){t=t==null?K:Math.pow(K,t);return new gt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&(0<=this.g&&this.g<=255)&&(0<=this.b&&this.b<=255)&&(0<=this.opacity&&this.opacity<=1)},toString:function(){var t=this.opacity;t=isNaN(t)?1:Math.max(0,Math.min(1,t));return(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}}));function vt(t,i,e,n){if(n<=0){t=i=e=NaN}else if(e<=0||e>=1){t=i=NaN}else if(i<=0){t=NaN}return new bt(t,i,e,n)}function yt(t){if(t instanceof bt){return new bt(t.h,t.s,t.l,t.opacity)}if(!(t instanceof $)){t=ft(t)}if(!t){return new bt}if(t instanceof bt){return t}t=t.rgb();var i=t.r/255,e=t.g/255,n=t.b/255,r=Math.min(i,e,n),o=Math.max(i,e,n),s=NaN,a=o-r,h=(o+r)/2;if(a){if(i===o){s=(e-n)/a+(e<n)*6}else if(e===o){s=(n-i)/a+2}else{s=(i-e)/a+4}a/=h<.5?o+r:2-o-r;s*=60}else{a=h>0&&h<1?0:s}return new bt(s,a,h,t.opacity)}function mt(t,i,e,n){return arguments.length===1?yt(t):new bt(t,i,e,n==null?1:n)}function bt(t,i,e,n){this.h=+t;this.s=+i;this.l=+e;this.opacity=+n}V(bt,mt,J($,{brighter:function(t){t=t==null?Z:Math.pow(Z,t);return new bt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?K:Math.pow(K,t);return new bt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,i=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*i,r=2*e-n;return new gt(xt(t>=240?t-240:t+120,r,n),xt(t,r,n),xt(t<120?t+240:t-120,r,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&(0<=this.l&&this.l<=1)&&(0<=this.opacity&&this.opacity<=1)}}));function xt(t,i,e){return(t<60?i+(e-i)*t/60:t<180?e:t<240?i+(e-i)*(240-t)/60:i)*255}var wt=Math.PI/180;var Ct=180/Math.PI;var At=18;var St=.95047;var kt=1;var Et=1.08883;var Bt=4/29;var Dt=6/29;var Mt=3*Dt*Dt;var zt=Dt*Dt*Dt;function Ft(t){if(t instanceof Nt){return new Nt(t.l,t.a,t.b,t.opacity)}if(t instanceof Wt){var i=t.h*wt;return new Nt(t.l,Math.cos(i)*t.c,Math.sin(i)*t.c,t.opacity)}if(!(t instanceof gt)){t=pt(t)}var e=Ht(t.r),n=Ht(t.g),r=Ht(t.b),o=Tt((.4124564*e+.3575761*n+.1804375*r)/St),s=Tt((.2126729*e+.7151522*n+.072175*r)/kt),a=Tt((.0193339*e+.119192*n+.9503041*r)/Et);return new Nt(116*s-16,500*(o-s),200*(s-a),t.opacity)}function Ot(t,i,e,n){return arguments.length===1?Ft(t):new Nt(t,i,e,n==null?1:n)}function Nt(t,i,e,n){this.l=+t;this.a=+i;this.b=+e;this.opacity=+n}V(Nt,Ot,J($,{brighter:function(t){return new Nt(this.l+At*(t==null?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Nt(this.l-At*(t==null?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,i=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;t=kt*jt(t);i=St*jt(i);e=Et*jt(e);return new gt(Pt(3.2404542*i-1.5371385*t-.4985314*e),Pt(-.969266*i+1.8760108*t+.041556*e),Pt(.0556434*i-.2040259*t+1.0572252*e),this.opacity)}}));function Tt(t){return t>zt?Math.pow(t,1/3):t/Mt+Bt}function jt(t){return t>Dt?t*t*t:Mt*(t-Bt)}function Pt(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function Ht(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Rt(t){if(t instanceof Wt){return new Wt(t.h,t.c,t.l,t.opacity)}if(!(t instanceof Nt)){t=Ft(t)}var i=Math.atan2(t.b,t.a)*Ct;return new Wt(i<0?i+360:i,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Lt(t,i,e,n){return arguments.length===1?Rt(t):new Wt(t,i,e,n==null?1:n)}function Wt(t,i,e,n){this.h=+t;this.c=+i;this.l=+e;this.opacity=+n}V(Wt,Lt,J($,{brighter:function(t){return new Wt(this.h,this.c,this.l+At*(t==null?1:t),this.opacity)},darker:function(t){return new Wt(this.h,this.c,this.l-At*(t==null?1:t),this.opacity)},rgb:function(){return Ft(this).rgb()}}));var Gt=-.14861;var Ut=+1.78277;var It=-.29227;var qt=-.90649;var Yt=+1.97294;var Xt=Yt*qt;var Vt=Yt*Ut;var Jt=Ut*It-qt*Gt;function $t(t){if(t instanceof Zt){return new Zt(t.h,t.s,t.l,t.opacity)}if(!(t instanceof gt)){t=pt(t)}var i=t.r/255,e=t.g/255,n=t.b/255,r=(Jt*n+Xt*i-Vt*e)/(Jt+Xt-Vt),o=n-r,s=(Yt*(e-r)-It*o)/qt,a=Math.sqrt(s*s+o*o)/(Yt*r*(1-r)),h=a?Math.atan2(s,o)*Ct-120:NaN;return new Zt(h<0?h+360:h,a,r,t.opacity)}function Kt(t,i,e,n){return arguments.length===1?$t(t):new Zt(t,i,e,n==null?1:n)}function Zt(t,i,e,n){this.h=+t;this.s=+i;this.l=+e;this.opacity=+n}V(Zt,Kt,J($,{brighter:function(t){t=t==null?Z:Math.pow(Z,t);return new Zt(this.h,this.s,this.l*t,this.opacity)},darker:function(t){t=t==null?K:Math.pow(K,t);return new Zt(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*wt,i=+this.l,e=isNaN(this.s)?0:this.s*i*(1-i),n=Math.cos(t),r=Math.sin(t);return new gt(255*(i+e*(Gt*n+Ut*r)),255*(i+e*(It*n+qt*r)),255*(i+e*(Yt*n)),this.opacity)}}));function Qt(t,i,e,n,r){var o=t*t,s=o*t;return((1-3*t+3*o-s)*i+(4-6*o+3*s)*e+(1+3*t+3*o-3*s)*n+s*r)/6}var ti=function(t){return function(){return t}};function ii(t,i){return function(e){return t+e*i}}function ei(t,i,e){return t=Math.pow(t,e),i=Math.pow(i,e)-t,e=1/e,function(n){return Math.pow(t+n*i,e)}}function ni(t,i){var e=i-t;return e?ii(t,e>180||e<-180?e-360*Math.round(e/360):e):ti(isNaN(t)?i:t)}function ri(t){return(t=+t)===1?oi:function(i,e){return e-i?ei(i,e,t):ti(isNaN(i)?e:i)}}function oi(t,i){var e=i-t;return e?ii(t,e):ti(isNaN(t)?i:t)}var si=function t(i){var e=ri(i);function n(t,i){var n=e((t=dt(t)).r,(i=dt(i)).r),r=e(t.g,i.g),o=e(t.b,i.b),s=e(t.opacity,i.opacity);return function(i){t.r=n(i);t.g=r(i);t.b=o(i);t.opacity=s(i);return t+""}}n.gamma=t;return n}(1);var ai=function(t,i){var e=i?i.length:0,n=t?Math.min(e,t.length):0,r=new Array(e),o=new Array(e),s;for(s=0;s<n;++s){r[s]=gi(t[s],i[s])}for(;s<e;++s){o[s]=i[s]}return function(t){for(s=0;s<n;++s){o[s]=r[s](t)}return o}};var hi=function(t,i){var e=new Date;return t=+t,i-=t,function(n){return e.setTime(t+i*n),e}};var ui=function(t,i){return t=+t,i-=t,function(e){return t+i*e}};var li=function(t,i){var e={},n={},r;if(t===null||typeof t!=="object"){t={}}if(i===null||typeof i!=="object"){i={}}for(r in i){if(r in t){e[r]=gi(t[r],i[r])}else{n[r]=i[r]}}return function(t){for(r in e){n[r]=e[r](t)}return n}};var fi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;var ci=new RegExp(fi.source,"g");function _i(t){return function(){return t}}function pi(t){return function(i){return t(i)+""}}var di=function(t,i){var e=fi.lastIndex=ci.lastIndex=0,n,r,o,s=-1,a=[],h=[];t=t+"",i=i+"";while((n=fi.exec(t))&&(r=ci.exec(i))){if((o=r.index)>e){o=i.slice(e,o);if(a[s]){a[s]+=o}else{a[++s]=o}}if((n=n[0])===(r=r[0])){if(a[s]){a[s]+=r}else{a[++s]=r}}else{a[++s]=null;h.push({i:s,x:ui(n,r)})}e=ci.lastIndex}if(e<i.length){o=i.slice(e);if(a[s]){a[s]+=o}else{a[++s]=o}}return a.length<2?h[0]?pi(h[0].x):_i(i):(i=h.length,function(t){for(var e=0,n;e<i;++e){a[(n=h[e]).i]=n.x(t)}return a.join("")})};var gi=function(t,i){var e=typeof i,n;return i==null||e==="boolean"?ti(i):(e==="number"?ui:e==="string"?(n=ft(i))?(i=n,si):di:i instanceof ft?si:i instanceof Date?hi:Array.isArray(i)?ai:isNaN(i)?li:ui)(t,i)};var vi=function(t,i){return t=+t,i-=t,function(e){return Math.round(t+i*e)}};var yi=180/Math.PI;var mi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};var bi=function(t,i,e,n,r,o){var s,a,h;if(s=Math.sqrt(t*t+i*i)){t/=s,i/=s}if(h=t*e+i*n){e-=t*h,n-=i*h}if(a=Math.sqrt(e*e+n*n)){e/=a,n/=a,h/=a}if(t*n<i*e){t=-t,i=-i,h=-h,s=-s}return{translateX:r,translateY:o,rotate:Math.atan2(i,t)*yi,skewX:Math.atan(h)*yi,scaleX:s,scaleY:a}};var xi;var wi;var Ci;var Ai;function Si(t){if(t==="none"){return mi}if(!xi){xi=document.createElement("DIV"),wi=document.documentElement,Ci=document.defaultView}xi.style.transform=t;t=Ci.getComputedStyle(wi.appendChild(xi),null).getPropertyValue("transform");wi.removeChild(xi);t=t.slice(7,-1).split(",");return bi(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5])}function ki(t){if(t==null){return mi}if(!Ai){Ai=document.createElementNS("http://www.w3.org/2000/svg","g")}Ai.setAttribute("transform",t);if(!(t=Ai.transform.baseVal.consolidate())){return mi}t=t.matrix;return bi(t.a,t.b,t.c,t.d,t.e,t.f)}function Ei(t,i,e,n){function r(t){return t.length?t.pop()+" ":""}function o(t,n,r,o,s,a){if(t!==r||n!==o){var h=s.push("translate(",null,i,null,e);a.push({i:h-4,x:ui(t,r)},{i:h-2,x:ui(n,o)})}else if(r||o){s.push("translate("+r+i+o+e)}}function s(t,i,e,o){if(t!==i){if(t-i>180){i+=360}else if(i-t>180){t+=360}o.push({i:e.push(r(e)+"rotate(",null,n)-2,x:ui(t,i)})}else if(i){e.push(r(e)+"rotate("+i+n)}}function a(t,i,e,o){if(t!==i){o.push({i:e.push(r(e)+"skewX(",null,n)-2,x:ui(t,i)})}else if(i){e.push(r(e)+"skewX("+i+n)}}function h(t,i,e,n,o,s){if(t!==e||i!==n){var a=o.push(r(o)+"scale(",null,",",null,")");s.push({i:a-4,x:ui(t,e)},{i:a-2,x:ui(i,n)})}else if(e!==1||n!==1){o.push(r(o)+"scale("+e+","+n+")")}}return function(i,e){var n=[],r=[];i=t(i),e=t(e);o(i.translateX,i.translateY,e.translateX,e.translateY,n,r);s(i.rotate,e.rotate,n,r);a(i.skewX,e.skewX,n,r);h(i.scaleX,i.scaleY,e.scaleX,e.scaleY,n,r);i=e=null;return function(t){var i=-1,e=r.length,o;while(++i<e){n[(o=r[i]).i]=o.x(t)}return n.join("")}}}var Bi=Ei(Si,"px, ","px)","deg)");var Di=Ei(ki,", ",")",")");var Mi=Math.SQRT2;var zi=2;var Fi=4;var Oi=1e-12;function Ni(t){return((t=Math.exp(t))+1/t)/2}function Ti(t){return((t=Math.exp(t))-1/t)/2}function ji(t){return((t=Math.exp(2*t))-1)/(t+1)}var Pi=function(t,i){var e=t[0],n=t[1],r=t[2],o=i[0],s=i[1],a=i[2],h=o-e,u=s-n,l=h*h+u*u,f,c;if(l<Oi){c=Math.log(a/r)/Mi;f=function(t){return[e+t*h,n+t*u,r*Math.exp(Mi*t*c)]}}else{var _=Math.sqrt(l),p=(a*a-r*r+Fi*l)/(2*r*zi*_),d=(a*a-r*r-Fi*l)/(2*a*zi*_),g=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(d*d+1)-d);c=(v-g)/Mi;f=function(t){var i=t*c,o=Ni(g),s=r/(zi*_)*(o*ji(Mi*i+g)-Ti(g));return[e+s*h,n+s*u,r*o/Ni(Mi*i+g)]}}f.duration=c*1e3;return f};function Hi(t){return function i(e){e=+e;function n(i,n){var r=t((i=Kt(i)).h,(n=Kt(n)).h),o=oi(i.s,n.s),s=oi(i.l,n.l),a=oi(i.opacity,n.opacity);return function(t){i.h=r(t);i.s=o(t);i.l=s(Math.pow(t,e));i.opacity=a(t);return i+""}}n.gamma=i;return n}(1)}Hi(ni);var Ri=Hi(oi);var Li=function(t){return function(){return t}};var Wi=function(t){return+t};var Gi=[0,1];function Ui(t,i){return(i-=t=+t)?function(e){return(e-t)/i}:Li(i)}function Ii(t){return function(i,e){var n=t(i=+i,e=+e);return function(t){return t<=i?0:t>=e?1:n(t)}}}function qi(t){return function(i,e){var n=t(i=+i,e=+e);return function(t){return t<=0?i:t>=1?e:n(t)}}}function Yi(t,i,e,n){var r=t[0],o=t[1],s=i[0],a=i[1];if(o<r){r=e(o,r),s=n(a,s)}else{r=e(r,o),s=n(s,a)}return function(t){return s(r(t))}}function Xi(t,i,e,n){var r=Math.min(t.length,i.length)-1,o=new Array(r),a=new Array(r),h=-1;if(t[r]<t[0]){t=t.slice().reverse();i=i.slice().reverse()}while(++h<r){o[h]=e(t[h],t[h+1]);a[h]=n(i[h],i[h+1])}return function(i){var e=s(t,i,1,r)-1;return a[e](o[e](i))}}function Vi(t,i){return i.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Ji(t,i){var e=Gi,n=Gi,r=gi,o=false,s,a,h;function u(){s=Math.min(e.length,n.length)>2?Xi:Yi;a=h=null;return l}function l(i){return(a||(a=s(e,n,o?Ii(t):t,r)))(+i)}l.invert=function(t){return(h||(h=s(n,e,Ui,o?qi(i):i)))(+t)};l.domain=function(t){return arguments.length?(e=W.call(t,Wi),u()):e.slice()};l.range=function(t){return arguments.length?(n=G.call(t),u()):n.slice()};l.rangeRound=function(t){return n=G.call(t),r=vi,u()};l.clamp=function(t){return arguments.length?(o=!!t,u()):o};l.interpolate=function(t){return arguments.length?(r=t,u()):r};return u()}var $i=function(t,i){if((e=(t=i?t.toExponential(i-1):t.toExponential()).indexOf("e"))<0){return null}var e,n=t.slice(0,e);return[n.length>1?n[0]+n.slice(2):n,+t.slice(e+1)]};var Ki=function(t){return t=$i(Math.abs(t)),t?t[1]:NaN};var Zi=function(t,i){return function(e,n){var r=e.length,o=[],s=0,a=t[0],h=0;while(r>0&&a>0){if(h+a+1>n){a=Math.max(1,n-h)}o.push(e.substring(r-=a,r+a));if((h+=a+1)>n){break}a=t[s=(s+1)%t.length]}return o.reverse().join(i)}};var Qi=function(t,i){t=t.toPrecision(i);t:for(var e=t.length,n=1,r=-1,o;n<e;++n){switch(t[n]){case".":r=o=n;break;case"0":if(r===0){r=n}o=n;break;case"e":break t;default:if(r>0){r=0}break}}return r>0?t.slice(0,r)+t.slice(o+1):t};var te;var ie=function(t,i){var e=$i(t,i);if(!e){return t+""}var n=e[0],r=e[1],o=r-(te=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=n.length;return o===s?n:o>s?n+new Array(o-s+1).join("0"):o>0?n.slice(0,o)+"."+n.slice(o):"0."+new Array(1-o).join("0")+$i(t,Math.max(0,i+o-1))[0]};var ee=function(t,i){var e=$i(t,i);if(!e){return t+""}var n=e[0],r=e[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")};var ne={"":Qi,"%":function(t,i){return(t*100).toFixed(i)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,i){return t.toExponential(i)},f:function(t,i){return t.toFixed(i)},g:function(t,i){return t.toPrecision(i)},o:function(t){return Math.round(t).toString(8)},p:function(t,i){return ee(t*100,i)},r:ee,s:ie,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};var re=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;var oe=function(t){return new se(t)};function se(t){if(!(i=re.exec(t))){throw new Error("invalid format: "+t)}var i,e=i[1]||" ",n=i[2]||">",r=i[3]||"-",o=i[4]||"",s=!!i[5],a=i[6]&&+i[6],h=!!i[7],u=i[8]&&+i[8].slice(1),l=i[9]||"";if(l==="n"){h=true,l="g"}else if(!ne[l]){l=""}if(s||e==="0"&&n==="="){s=true,e="0",n="="}this.fill=e;this.align=n;this.sign=r;this.symbol=o;this.zero=s;this.width=a;this.comma=h;this.precision=u;this.type=l}se.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type};var ae=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function he(t){return t}var ue=function(t){var i=t.grouping&&t.thousands?Zi(t.grouping,t.thousands):he,e=t.currency,n=t.decimal;function r(t){t=oe(t);var r=t.fill,o=t.align,s=t.sign,a=t.symbol,h=t.zero,u=t.width,l=t.comma,f=t.precision,c=t.type;var _=a==="$"?e[0]:a==="#"&&/[boxX]/.test(c)?"0"+c.toLowerCase():"",p=a==="$"?e[1]:/[%p]/.test(c)?"%":"";var d=ne[c],g=!c||/[defgprs%]/.test(c);f=f==null?c?6:12:/[gprs]/.test(c)?Math.max(1,Math.min(21,f)):Math.max(0,Math.min(20,f));function v(t){var e=_,a=p,v,y,m;if(c==="c"){a=d(t)+a;t=""}else{t=+t;var b=(t<0||1/t<0)&&(t*=-1,true);t=d(t,f);if(b){v=-1,y=t.length;b=false;while(++v<y){if(m=t.charCodeAt(v),48<m&&m<58||c==="x"&&96<m&&m<103||c==="X"&&64<m&&m<71){b=true;break}}}e=(b?s==="("?s:"-":s==="-"||s==="("?"":s)+e;a=a+(c==="s"?ae[8+te/3]:"")+(b&&s==="("?")":"");if(g){v=-1,y=t.length;while(++v<y){if(m=t.charCodeAt(v),48>m||m>57){a=(m===46?n+t.slice(v+1):t.slice(v))+a;t=t.slice(0,v);break}}}}if(l&&!h){t=i(t,Infinity)}var x=e.length+t.length+a.length,w=x<u?new Array(u-x+1).join(r):"";if(l&&h){t=i(w+t,w.length?u-a.length:Infinity),w=""}switch(o){case"<":return e+t+a+w;case"=":return e+w+t+a;case"^":return w.slice(0,x=w.length>>1)+e+t+a+w.slice(x)}return w+e+t+a}v.toString=function(){return t+""};return v}function o(t,i){var e=r((t=oe(t),t.type="f",t)),n=Math.max(-8,Math.min(8,Math.floor(Ki(i)/3)))*3,o=Math.pow(10,-n),s=ae[8+n/3];return function(t){return e(o*t)+s}}return{format:r,formatPrefix:o}};var le;var fe;var ce;_e({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function _e(t){le=ue(t);fe=le.format;ce=le.formatPrefix;return le}var pe=function(t){return Math.max(0,-Ki(Math.abs(t)))};var de=function(t,i){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ki(i)/3)))*3-Ki(Math.abs(t)))};var ge=function(t,i){t=Math.abs(t),i=Math.abs(i)-t;return Math.max(0,Ki(i)-Ki(t))+1};var ve=function(t,i,e){var n=t[0],r=t[t.length-1],o=m(n,r,i==null?10:i),s;e=oe(e==null?",f":e);switch(e.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(r));if(e.precision==null&&!isNaN(s=de(o,a))){e.precision=s}return ce(e,a)}case"":case"e":case"g":case"p":case"r":{if(e.precision==null&&!isNaN(s=ge(o,Math.max(Math.abs(n),Math.abs(r))))){e.precision=s-(e.type==="e")}break}case"f":case"%":{if(e.precision==null&&!isNaN(s=pe(o))){e.precision=s-(e.type==="%")*2}break}}return fe(e)};function ye(t){var i=t.domain;t.ticks=function(t){var e=i();return y(e[0],e[e.length-1],t==null?10:t)};t.tickFormat=function(t,e){return ve(i(),t,e)};t.nice=function(e){var n=i(),r=n.length-1,o=e==null?10:e,s=n[0],a=n[r],h=m(s,a,o);if(h){h=m(Math.floor(s/h)*h,Math.ceil(a/h)*h,o);n[0]=Math.floor(s/h)*h;n[r]=Math.ceil(a/h)*h;i(n)}return t};return t}function me(){var t=Ji(Ui,ui);t.copy=function(){return Vi(t,me())};return ye(t)}function be(){var t=[0,1];function i(t){return+t}i.invert=i;i.domain=i.range=function(e){return arguments.length?(t=W.call(e,Wi),i):t.slice()};i.copy=function(){return be().domain(t)};return ye(i)}var xe=function(t,i){t=t.slice();var e=0,n=t.length-1,r=t[e],o=t[n],s;if(o<r){s=e,e=n,n=s;s=r,r=o,o=s}t[e]=i.floor(r);t[n]=i.ceil(o);return t};function we(t,i){return(i=Math.log(i/t))?function(e){return Math.log(e/t)/i}:Li(i)}function Ce(t,i){return t<0?function(e){return-Math.pow(-i,e)*Math.pow(-t,1-e)}:function(e){return Math.pow(i,e)*Math.pow(t,1-e)}}function Ae(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Se(t){return t===10?Ae:t===Math.E?Math.exp:function(i){return Math.pow(t,i)}}function ke(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(i){return Math.log(i)/t})}function Ee(t){return function(i){return-t(-i)}}function Be(){var t=Ji(we,Ce).domain([1,10]),i=t.domain,e=10,n=ke(10),r=Se(10);function o(){n=ke(e),r=Se(e);if(i()[0]<0){n=Ee(n),r=Ee(r)}return t}t.base=function(t){return arguments.length?(e=+t,o()):e};t.domain=function(t){return arguments.length?(i(t),o()):i()};t.ticks=function(t){var o=i(),s=o[0],a=o[o.length-1],h;if(h=a<s){u=s,s=a,a=u}var u=n(s),l=n(a),f,c,_,p=t==null?10:+t,d=[];if(!(e%1)&&l-u<p){u=Math.round(u)-1,l=Math.round(l)+1;if(s>0){for(;u<l;++u){for(c=1,f=r(u);c<e;++c){_=f*c;if(_<s){continue}if(_>a){break}d.push(_)}}}else{for(;u<l;++u){for(c=e-1,f=r(u);c>=1;--c){_=f*c;if(_<s){continue}if(_>a){break}d.push(_)}}}}else{d=y(u,l,Math.min(l-u,p)).map(r)}return h?d.reverse():d};t.tickFormat=function(i,o){if(o==null){o=e===10?".0e":","}if(typeof o!=="function"){o=fe(o)}if(i===Infinity){return o}if(i==null){i=10}var s=Math.max(1,e*i/t.ticks().length);return function(t){var i=t/r(Math.round(n(t)));if(i*e<e-.5){i*=e}return i<=s?o(t):""}};t.nice=function(){return i(xe(i(),{floor:function(t){return r(Math.floor(n(t)))},ceil:function(t){return r(Math.ceil(n(t)))}}))};t.copy=function(){return Vi(t,Be().base(e))};return t}function De(t,i){return t<0?-Math.pow(-t,i):Math.pow(t,i)}function Me(){var t=1,i=Ji(n,r),e=i.domain;function n(i,e){return(e=De(e,t)-(i=De(i,t)))?function(n){return(De(n,t)-i)/e}:Li(e)}function r(i,e){e=De(e,t)-(i=De(i,t));return function(n){return De(i+e*n,1/t)}}i.exponent=function(i){return arguments.length?(t=+i,e(e())):t};i.copy=function(){return Vi(i,Me().exponent(t))};return ye(i)}function ze(){return Me().exponent(.5)}function Fe(){var t=[],i=[],n=[];function r(){var e=0,r=Math.max(1,i.length);n=new Array(r-1);while(++e<r){n[e-1]=x(t,e/r)}return o}function o(t){if(!isNaN(t=+t)){return i[s(n,t)]}}o.invertExtent=function(e){var r=i.indexOf(e);return r<0?[NaN,NaN]:[r>0?n[r-1]:t[0],r<n.length?n[r]:t[t.length-1]]};o.domain=function(i){if(!arguments.length){return t.slice()}t=[];for(var n=0,o=i.length,s;n<o;++n){if(s=i[n],s!=null&&!isNaN(s=+s)){t.push(s)}}t.sort(e);return r()};o.range=function(t){return arguments.length?(i=G.call(t),r()):i.slice()};o.quantiles=function(){return n.slice()};o.copy=function(){return Fe().domain(t).range(i)};return o}function Oe(){var t=0,i=1,e=1,n=[.5],r=[0,1];function o(t){if(t<=t){return r[s(n,t,0,e)]}}function a(){var r=-1;n=new Array(e);while(++r<e){n[r]=((r+1)*i-(r-e)*t)/(e+1)}return o}o.domain=function(e){
return arguments.length?(t=+e[0],i=+e[1],a()):[t,i]};o.range=function(t){return arguments.length?(e=(r=G.call(t)).length-1,a()):r.slice()};o.invertExtent=function(o){var s=r.indexOf(o);return s<0?[NaN,NaN]:s<1?[t,n[0]]:s>=e?[n[e-1],i]:[n[s-1],n[s]]};o.copy=function(){return Oe().domain([t,i]).range(r)};return ye(o)}function Ne(){var t=[.5],i=[0,1],e=1;function n(n){if(n<=n){return i[s(t,n,0,e)]}}n.domain=function(r){return arguments.length?(t=G.call(r),e=Math.min(t.length,i.length-1),n):t.slice()};n.range=function(r){return arguments.length?(i=G.call(r),e=Math.min(t.length,i.length-1),n):i.slice()};n.invertExtent=function(e){var n=i.indexOf(e);return[t[n-1],t[n]]};n.copy=function(){return Ne().domain(t).range(i)};return n}var Te=new Date;var je=new Date;function Pe(t,i,e,n){function r(i){return t(i=new Date(+i)),i}r.floor=r;r.ceil=function(e){return t(e=new Date(e-1)),i(e,1),t(e),e};r.round=function(t){var i=r(t),e=r.ceil(t);return t-i<e-t?i:e};r.offset=function(t,e){return i(t=new Date(+t),e==null?1:Math.floor(e)),t};r.range=function(e,n,o){var s=[];e=r.ceil(e);o=o==null?1:Math.floor(o);if(!(e<n)||!(o>0)){return s}do{s.push(new Date(+e))}while(i(e,o),t(e),e<n);return s};r.filter=function(e){return Pe(function(i){if(i>=i){while(t(i),!e(i)){i.setTime(i-1)}}},function(t,n){if(t>=t){while(--n>=0){while(i(t,1),!e(t)){}}}})};if(e){r.count=function(i,n){Te.setTime(+i),je.setTime(+n);t(Te),t(je);return Math.floor(e(Te,je))};r.every=function(t){t=Math.floor(t);return!isFinite(t)||!(t>0)?null:!(t>1)?r:r.filter(n?function(i){return n(i)%t===0}:function(i){return r.count(0,i)%t===0})}}return r}var He=Pe(function(){},function(t,i){t.setTime(+t+i)},function(t,i){return i-t});He.every=function(t){t=Math.floor(t);if(!isFinite(t)||!(t>0)){return null}if(!(t>1)){return He}return Pe(function(i){i.setTime(Math.floor(i/t)*t)},function(i,e){i.setTime(+i+e*t)},function(i,e){return(e-i)/t})};var Re=1e3;var Le=6e4;var We=36e5;var Ge=864e5;var Ue=6048e5;var Ie=Pe(function(t){t.setTime(Math.floor(t/Re)*Re)},function(t,i){t.setTime(+t+i*Re)},function(t,i){return(i-t)/Re},function(t){return t.getUTCSeconds()});var qe=Pe(function(t){t.setTime(Math.floor(t/Le)*Le)},function(t,i){t.setTime(+t+i*Le)},function(t,i){return(i-t)/Le},function(t){return t.getMinutes()});var Ye=Pe(function(t){var i=t.getTimezoneOffset()*Le%We;if(i<0){i+=We}t.setTime(Math.floor((+t-i)/We)*We+i)},function(t,i){t.setTime(+t+i*We)},function(t,i){return(i-t)/We},function(t){return t.getHours()});var Xe=Pe(function(t){t.setHours(0,0,0,0)},function(t,i){t.setDate(t.getDate()+i)},function(t,i){return(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*Le)/Ge},function(t){return t.getDate()-1});function Ve(t){return Pe(function(i){i.setDate(i.getDate()-(i.getDay()+7-t)%7);i.setHours(0,0,0,0)},function(t,i){t.setDate(t.getDate()+i*7)},function(t,i){return(i-t-(i.getTimezoneOffset()-t.getTimezoneOffset())*Le)/Ue})}var Je=Ve(0);var $e=Ve(1);var Ke=Ve(2);var Ze=Ve(3);var Qe=Ve(4);var tn=Ve(5);var en=Ve(6);var nn=Pe(function(t){t.setDate(1);t.setHours(0,0,0,0)},function(t,i){t.setMonth(t.getMonth()+i)},function(t,i){return i.getMonth()-t.getMonth()+(i.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()});var rn=Pe(function(t){t.setMonth(0,1);t.setHours(0,0,0,0)},function(t,i){t.setFullYear(t.getFullYear()+i)},function(t,i){return i.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});rn.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Pe(function(i){i.setFullYear(Math.floor(i.getFullYear()/t)*t);i.setMonth(0,1);i.setHours(0,0,0,0)},function(i,e){i.setFullYear(i.getFullYear()+e*t)})};var on=Pe(function(t){t.setUTCSeconds(0,0)},function(t,i){t.setTime(+t+i*Le)},function(t,i){return(i-t)/Le},function(t){return t.getUTCMinutes()});var sn=Pe(function(t){t.setUTCMinutes(0,0,0)},function(t,i){t.setTime(+t+i*We)},function(t,i){return(i-t)/We},function(t){return t.getUTCHours()});var an=Pe(function(t){t.setUTCHours(0,0,0,0)},function(t,i){t.setUTCDate(t.getUTCDate()+i)},function(t,i){return(i-t)/Ge},function(t){return t.getUTCDate()-1});function hn(t){return Pe(function(i){i.setUTCDate(i.getUTCDate()-(i.getUTCDay()+7-t)%7);i.setUTCHours(0,0,0,0)},function(t,i){t.setUTCDate(t.getUTCDate()+i*7)},function(t,i){return(i-t)/Ue})}var un=hn(0);var ln=hn(1);var fn=hn(2);var cn=hn(3);var _n=hn(4);var pn=hn(5);var dn=hn(6);var gn=Pe(function(t){t.setUTCDate(1);t.setUTCHours(0,0,0,0)},function(t,i){t.setUTCMonth(t.getUTCMonth()+i)},function(t,i){return i.getUTCMonth()-t.getUTCMonth()+(i.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()});var vn=Pe(function(t){t.setUTCMonth(0,1);t.setUTCHours(0,0,0,0)},function(t,i){t.setUTCFullYear(t.getUTCFullYear()+i)},function(t,i){return i.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});vn.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:Pe(function(i){i.setUTCFullYear(Math.floor(i.getUTCFullYear()/t)*t);i.setUTCMonth(0,1);i.setUTCHours(0,0,0,0)},function(i,e){i.setUTCFullYear(i.getUTCFullYear()+e*t)})};function yn(t){if(0<=t.y&&t.y<100){var i=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);i.setFullYear(t.y);return i}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function mn(t){if(0<=t.y&&t.y<100){var i=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));i.setUTCFullYear(t.y);return i}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function bn(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function xn(t){var i=t.dateTime,e=t.date,n=t.time,r=t.periods,o=t.days,s=t.shortDays,a=t.months,h=t.shortMonths;var u=Bn(r),l=Dn(r),f=Bn(o),c=Dn(o),_=Bn(s),p=Dn(s),d=Bn(a),g=Dn(a),v=Bn(h),y=Dn(h);var m={a:O,A:N,b:T,B:j,c:null,d:In,e:In,H:qn,I:Yn,j:Xn,L:Vn,m:Jn,M:$n,p:P,S:Kn,U:Zn,w:Qn,W:tr,x:null,X:null,y:ir,Y:er,Z:nr,"%":yr};var b={a:H,A:R,b:L,B:W,c:null,d:rr,e:rr,H:or,I:sr,j:ar,L:hr,m:ur,M:lr,p:G,S:fr,U:cr,w:_r,W:pr,x:null,X:null,y:dr,Y:gr,Z:vr,"%":yr};var x={a:k,A:E,b:B,B:D,c:M,d:Pn,e:Pn,H:Rn,I:Rn,j:Hn,L:Gn,m:jn,M:Ln,p:S,S:Wn,U:zn,w:Mn,W:Fn,x:z,X:F,y:Nn,Y:On,Z:Tn,"%":Un};m.x=w(e,m);m.X=w(n,m);m.c=w(i,m);b.x=w(e,b);b.X=w(n,b);b.c=w(i,b);function w(t,i){return function(e){var n=[],r=-1,o=0,s=t.length,a,h,u;if(!(e instanceof Date)){e=new Date(+e)}while(++r<s){if(t.charCodeAt(r)===37){n.push(t.slice(o,r));if((h=wn[a=t.charAt(++r)])!=null){a=t.charAt(++r)}else{h=a==="e"?" ":"0"}if(u=i[a]){a=u(e,h)}n.push(a);o=r+1}}n.push(t.slice(o,r));return n.join("")}}function C(t,i){return function(e){var n=bn(1900),r=A(n,t,e+="",0);if(r!=e.length){return null}if("p"in n){n.H=n.H%12+n.p*12}if("W"in n||"U"in n){if(!("w"in n)){n.w="W"in n?1:0}var o="Z"in n?mn(bn(n.y)).getUTCDay():i(bn(n.y)).getDay();n.m=0;n.d="W"in n?(n.w+6)%7+n.W*7-(o+5)%7:n.w+n.U*7-(o+6)%7}if("Z"in n){n.H+=n.Z/100|0;n.M+=n.Z%100;return mn(n)}return i(n)}}function A(t,i,e,n){var r=0,o=i.length,s=e.length,a,h;while(r<o){if(n>=s){return-1}a=i.charCodeAt(r++);if(a===37){a=i.charAt(r++);h=x[a in wn?i.charAt(r++):a];if(!h||(n=h(t,e,n))<0){return-1}}else if(a!=e.charCodeAt(n++)){return-1}}return n}function S(t,i,e){var n=u.exec(i.slice(e));return n?(t.p=l[n[0].toLowerCase()],e+n[0].length):-1}function k(t,i,e){var n=_.exec(i.slice(e));return n?(t.w=p[n[0].toLowerCase()],e+n[0].length):-1}function E(t,i,e){var n=f.exec(i.slice(e));return n?(t.w=c[n[0].toLowerCase()],e+n[0].length):-1}function B(t,i,e){var n=v.exec(i.slice(e));return n?(t.m=y[n[0].toLowerCase()],e+n[0].length):-1}function D(t,i,e){var n=d.exec(i.slice(e));return n?(t.m=g[n[0].toLowerCase()],e+n[0].length):-1}function M(t,e,n){return A(t,i,e,n)}function z(t,i,n){return A(t,e,i,n)}function F(t,i,e){return A(t,n,i,e)}function O(t){return s[t.getDay()]}function N(t){return o[t.getDay()]}function T(t){return h[t.getMonth()]}function j(t){return a[t.getMonth()]}function P(t){return r[+(t.getHours()>=12)]}function H(t){return s[t.getUTCDay()]}function R(t){return o[t.getUTCDay()]}function L(t){return h[t.getUTCMonth()]}function W(t){return a[t.getUTCMonth()]}function G(t){return r[+(t.getUTCHours()>=12)]}return{format:function(t){var i=w(t+="",m);i.toString=function(){return t};return i},parse:function(t){var i=C(t+="",yn);i.toString=function(){return t};return i},utcFormat:function(t){var i=w(t+="",b);i.toString=function(){return t};return i},utcParse:function(t){var i=C(t,mn);i.toString=function(){return t};return i}}}var wn={"-":"",_:" ",0:"0"};var Cn=/^\s*\d+/;var An=/^%/;var Sn=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;function kn(t,i,e){var n=t<0?"-":"",r=(n?-t:t)+"",o=r.length;return n+(o<e?new Array(e-o+1).join(i)+r:r)}function En(t){return t.replace(Sn,"\\$&")}function Bn(t){return new RegExp("^(?:"+t.map(En).join("|")+")","i")}function Dn(t){var i={},e=-1,n=t.length;while(++e<n){i[t[e].toLowerCase()]=e}return i}function Mn(t,i,e){var n=Cn.exec(i.slice(e,e+1));return n?(t.w=+n[0],e+n[0].length):-1}function zn(t,i,e){var n=Cn.exec(i.slice(e));return n?(t.U=+n[0],e+n[0].length):-1}function Fn(t,i,e){var n=Cn.exec(i.slice(e));return n?(t.W=+n[0],e+n[0].length):-1}function On(t,i,e){var n=Cn.exec(i.slice(e,e+4));return n?(t.y=+n[0],e+n[0].length):-1}function Nn(t,i,e){var n=Cn.exec(i.slice(e,e+2));return n?(t.y=+n[0]+(+n[0]>68?1900:2e3),e+n[0].length):-1}function Tn(t,i,e){var n=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(i.slice(e,e+6));return n?(t.Z=n[1]?0:-(n[2]+(n[3]||"00")),e+n[0].length):-1}function jn(t,i,e){var n=Cn.exec(i.slice(e,e+2));return n?(t.m=n[0]-1,e+n[0].length):-1}function Pn(t,i,e){var n=Cn.exec(i.slice(e,e+2));return n?(t.d=+n[0],e+n[0].length):-1}function Hn(t,i,e){var n=Cn.exec(i.slice(e,e+3));return n?(t.m=0,t.d=+n[0],e+n[0].length):-1}function Rn(t,i,e){var n=Cn.exec(i.slice(e,e+2));return n?(t.H=+n[0],e+n[0].length):-1}function Ln(t,i,e){var n=Cn.exec(i.slice(e,e+2));return n?(t.M=+n[0],e+n[0].length):-1}function Wn(t,i,e){var n=Cn.exec(i.slice(e,e+2));return n?(t.S=+n[0],e+n[0].length):-1}function Gn(t,i,e){var n=Cn.exec(i.slice(e,e+3));return n?(t.L=+n[0],e+n[0].length):-1}function Un(t,i,e){var n=An.exec(i.slice(e,e+1));return n?e+n[0].length:-1}function In(t,i){return kn(t.getDate(),i,2)}function qn(t,i){return kn(t.getHours(),i,2)}function Yn(t,i){return kn(t.getHours()%12||12,i,2)}function Xn(t,i){return kn(1+Xe.count(rn(t),t),i,3)}function Vn(t,i){return kn(t.getMilliseconds(),i,3)}function Jn(t,i){return kn(t.getMonth()+1,i,2)}function $n(t,i){return kn(t.getMinutes(),i,2)}function Kn(t,i){return kn(t.getSeconds(),i,2)}function Zn(t,i){return kn(Je.count(rn(t),t),i,2)}function Qn(t){return t.getDay()}function tr(t,i){return kn($e.count(rn(t),t),i,2)}function ir(t,i){return kn(t.getFullYear()%100,i,2)}function er(t,i){return kn(t.getFullYear()%1e4,i,4)}function nr(t){var i=t.getTimezoneOffset();return(i>0?"-":(i*=-1,"+"))+kn(i/60|0,"0",2)+kn(i%60,"0",2)}function rr(t,i){return kn(t.getUTCDate(),i,2)}function or(t,i){return kn(t.getUTCHours(),i,2)}function sr(t,i){return kn(t.getUTCHours()%12||12,i,2)}function ar(t,i){return kn(1+an.count(vn(t),t),i,3)}function hr(t,i){return kn(t.getUTCMilliseconds(),i,3)}function ur(t,i){return kn(t.getUTCMonth()+1,i,2)}function lr(t,i){return kn(t.getUTCMinutes(),i,2)}function fr(t,i){return kn(t.getUTCSeconds(),i,2)}function cr(t,i){return kn(un.count(vn(t),t),i,2)}function _r(t){return t.getUTCDay()}function pr(t,i){return kn(ln.count(vn(t),t),i,2)}function dr(t,i){return kn(t.getUTCFullYear()%100,i,2)}function gr(t,i){return kn(t.getUTCFullYear()%1e4,i,4)}function vr(){return"+0000"}function yr(){return"%"}var mr;var br;var xr;var wr;var Cr;Ar({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ar(t){mr=xn(t);br=mr.format;xr=mr.parse;wr=mr.utcFormat;Cr=mr.utcParse;return mr}var Sr="%Y-%m-%dT%H:%M:%S.%LZ";function kr(t){return t.toISOString()}var Er=Date.prototype.toISOString?kr:wr(Sr);function Br(t){var i=new Date(t);return isNaN(i)?null:i}var Dr=+new Date("2000-01-01T00:00:00.000Z")?Br:Cr(Sr);var Mr=1e3;var zr=Mr*60;var Fr=zr*60;var Or=Fr*24;var Nr=Or*7;var Tr=Or*30;var jr=Or*365;function Pr(t){return new Date(t)}function Hr(t){return t instanceof Date?+t:+new Date(+t)}function Rr(t,i,e,r,o,s,a,h,u){var l=Ji(Ui,ui),f=l.invert,c=l.domain;var _=u(".%L"),p=u(":%S"),d=u("%I:%M"),g=u("%I %p"),v=u("%a %d"),y=u("%b %d"),b=u("%B"),x=u("%Y");var w=[[a,1,Mr],[a,5,5*Mr],[a,15,15*Mr],[a,30,30*Mr],[s,1,zr],[s,5,5*zr],[s,15,15*zr],[s,30,30*zr],[o,1,Fr],[o,3,3*Fr],[o,6,6*Fr],[o,12,12*Fr],[r,1,Or],[r,2,2*Or],[e,1,Nr],[i,1,Tr],[i,3,3*Tr],[t,1,jr]];function C(n){return(a(n)<n?_:s(n)<n?p:o(n)<n?d:r(n)<n?g:i(n)<n?e(n)<n?v:y:t(n)<n?b:x)(n)}function A(i,e,r,o){if(i==null){i=10}if(typeof i==="number"){var s=Math.abs(r-e)/i,a=n(function(t){return t[2]}).right(w,s);if(a===w.length){o=m(e/jr,r/jr,i);i=t}else if(a){a=w[s/w[a-1][2]<w[a][2]/s?a-1:a];o=a[1];i=a[0]}else{o=m(e,r,i);i=h}}return o==null?i:i.every(o)}l.invert=function(t){return new Date(f(t))};l.domain=function(t){return arguments.length?c(W.call(t,Hr)):c().map(Pr)};l.ticks=function(t,i){var e=c(),n=e[0],r=e[e.length-1],o=r<n,s;if(o){s=n,n=r,r=s}s=A(t,n,r,i);s=s?s.range(n,r+1):[];return o?s.reverse():s};l.tickFormat=function(t,i){return i==null?C:u(i)};l.nice=function(t,i){var e=c();return(t=A(t,e[0],e[e.length-1],i))?c(xe(e,t)):l};l.copy=function(){return Vi(l,Rr(t,i,e,r,o,s,a,h,u))};return l}var Lr=function(){return Rr(rn,nn,Je,Xe,Ye,qe,Ie,He,br).domain([new Date(2e3,0,1),new Date(2e3,0,2)])};var Wr=function(){return Rr(vn,gn,un,an,sn,on,Ie,He,wr).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])};var Gr=function(t){return t.match(/.{6}/g).map(function(t){return"#"+t})};var Ur=Gr("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var Ir=Gr("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6");var qr=Gr("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9");var Yr=Gr("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");var Xr=Ri(Kt(300,.5,0),Kt(-240,.5,1));var Vr=Ri(Kt(-100,.75,.35),Kt(80,1.5,.8));var Jr=Ri(Kt(260,.75,.35),Kt(80,1.5,.8));var $r=Kt();var Kr=function(t){if(t<0||t>1){t-=Math.floor(t)}var i=Math.abs(t-.5);$r.h=360*t-100;$r.s=1.5-1.5*i;$r.l=.8-.9*i;return $r+""};function Zr(t){var i=t.length;return function(e){return t[Math.max(0,Math.min(i-1,Math.floor(e*i)))]}}var Qr=Zr(Gr("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var to=Zr(Gr("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf"));var io=Zr(Gr("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4"));var eo=Zr(Gr("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function no(t){var i=0,e=1,n=false;function r(r){var o=(r-i)/(e-i);return t(n?Math.max(0,Math.min(1,o)):o)}r.domain=function(t){return arguments.length?(i=+t[0],e=+t[1],r):[i,e]};r.clamp=function(t){return arguments.length?(n=!!t,r):n};r.interpolator=function(i){return arguments.length?(t=i,r):t};r.copy=function(){return no(t).domain([i,e]).clamp(n)};return ye(r)}var ro=Object.freeze({scaleBand:q,scalePoint:X,scaleIdentity:be,scaleLinear:me,scaleLog:Be,scaleOrdinal:I,scaleImplicit:U,scalePow:Me,scaleSqrt:ze,scaleQuantile:Fe,scaleQuantize:Oe,scaleThreshold:Ne,scaleTime:Lr,scaleUtc:Wr,schemeCategory10:Ur,schemeCategory20b:Ir,schemeCategory20c:qr,schemeCategory20:Yr,interpolateCubehelixDefault:Xr,interpolateRainbow:Kr,interpolateWarm:Vr,interpolateCool:Jr,interpolateViridis:Qr,interpolateMagma:to,interpolateInferno:io,interpolatePlasma:eo,scaleSequential:no});var oo="http://www.w3.org/1999/xhtml";var so={svg:"http://www.w3.org/2000/svg",xhtml:oo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};var ao=function(t){var i=t+="",e=i.indexOf(":");if(e>=0&&(i=t.slice(0,e))!=="xmlns"){t=t.slice(e+1)}return so.hasOwnProperty(i)?{space:so[i],local:t}:t};function ho(t){return function(){var i=this.ownerDocument,e=this.namespaceURI;return e===oo&&i.documentElement.namespaceURI===oo?i.createElement(t):i.createElementNS(e,t)}}function uo(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var lo=function(t){var i=ao(t);return(i.local?uo:ho)(i)};var fo=0;var co=function(t){return function(){return this.matches(t)}};if(typeof document!=="undefined"){var _o=document.documentElement;if(!_o.matches){var po=_o.webkitMatchesSelector||_o.msMatchesSelector||_o.mozMatchesSelector||_o.oMatchesSelector;co=function(t){return function(){return po.call(this,t)}}}}var go=co;var vo={};var yo=null;if(typeof document!=="undefined"){var mo=document.documentElement;if(!("onmouseenter"in mo)){vo={mouseenter:"mouseover",mouseleave:"mouseout"}}}function bo(t,i,e){t=xo(t,i,e);return function(i){var e=i.relatedTarget;if(!e||e!==this&&!(e.compareDocumentPosition(this)&8)){t.call(this,i)}}}function xo(t,i,e){return function(n){var r=yo;yo=n;try{t.call(this,this.__data__,i,e)}finally{yo=r}}}function wo(t){return t.trim().split(/^|\s+/).map(function(t){var i="",e=t.indexOf(".");if(e>=0){i=t.slice(e+1),t=t.slice(0,e)}return{type:t,name:i}})}function Co(t){return function(){var i=this;var e=this.__on;if(!e){return}for(var n=0,r=-1,o=e.length,s;n<o;++n){if(s=e[n],(!t.type||s.type===t.type)&&s.name===t.name){i.removeEventListener(s.type,s.listener,s.capture)}else{e[++r]=s}}if(++r){e.length=r}else{delete this.__on}}}function Ao(t,i,e){var n=vo.hasOwnProperty(t.type)?bo:xo;return function(r,o,s){var a=this;var h=this.__on,u,l=n(i,o,s);if(h){for(var f=0,c=h.length;f<c;++f){if((u=h[f]).type===t.type&&u.name===t.name){a.removeEventListener(u.type,u.listener,u.capture);a.addEventListener(u.type,u.listener=l,u.capture=e);u.value=i;return}}}this.addEventListener(t.type,l,e);u={type:t.type,name:t.name,value:i,listener:l,capture:e};if(!h){this.__on=[u]}else{h.push(u)}}}var So=function(t,i,e){var n=this;var r=wo(t+""),o,s=r.length,a;if(arguments.length<2){var h=this.node().__on;if(h){for(var u=0,l=h.length,f;u<l;++u){for(o=0,f=h[u];o<s;++o){if((a=r[o]).type===f.type&&a.name===f.name){return f.value}}}}return}h=i?Ao:Co;if(e==null){e=false}for(o=0;o<s;++o){n.each(h(r[o],i,e))}return this};function ko(t,i,e,n){var r=yo;t.sourceEvent=yo;yo=t;try{return i.apply(e,n)}finally{yo=r}}var Eo=function(){var t=yo,i;while(i=t.sourceEvent){t=i}return t};var Bo=function(t,i){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var n=e.createSVGPoint();n.x=i.clientX,n.y=i.clientY;n=n.matrixTransform(t.getScreenCTM().inverse());return[n.x,n.y]}var r=t.getBoundingClientRect();return[i.clientX-r.left-t.clientLeft,i.clientY-r.top-t.clientTop]};var Do=function(t){var i=Eo();if(i.changedTouches){i=i.changedTouches[0]}return Bo(t,i)};function Mo(){}var zo=function(t){return t==null?Mo:function(){return this.querySelector(t)}};var Fo=function(t){if(typeof t!=="function"){t=zo(t)}for(var i=this._groups,e=i.length,n=new Array(e),r=0;r<e;++r){for(var o=i[r],s=o.length,a=n[r]=new Array(s),h,u,l=0;l<s;++l){if((h=o[l])&&(u=t.call(h,h.__data__,l,o))){if("__data__"in h){u.__data__=h.__data__}a[l]=u}}}return new $s(n,this._parents)};function Oo(){return[]}var No=function(t){return t==null?Oo:function(){return this.querySelectorAll(t)}};var To=function(t){if(typeof t!=="function"){t=No(t)}for(var i=this._groups,e=i.length,n=[],r=[],o=0;o<e;++o){for(var s=i[o],a=s.length,h,u=0;u<a;++u){if(h=s[u]){n.push(t.call(h,h.__data__,u,s));r.push(h)}}}return new $s(n,r)};var jo=function(t){if(typeof t!=="function"){t=go(t)}for(var i=this._groups,e=i.length,n=new Array(e),r=0;r<e;++r){for(var o=i[r],s=o.length,a=n[r]=[],h,u=0;u<s;++u){if((h=o[u])&&t.call(h,h.__data__,u,o)){a.push(h)}}}return new $s(n,this._parents)};var Po=function(t){return new Array(t.length)};var Ho=function(){return new $s(this._enter||this._groups.map(Po),this._parents)};function Ro(t,i){this.ownerDocument=t.ownerDocument;this.namespaceURI=t.namespaceURI;this._next=null;this._parent=t;this.__data__=i}Ro.prototype={constructor:Ro,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,i){return this._parent.insertBefore(t,i)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Lo=function(t){return function(){return t}};var Wo="$";function Go(t,i,e,n,r,o){var s=0,a,h=i.length,u=o.length;for(;s<u;++s){if(a=i[s]){a.__data__=o[s];n[s]=a}else{e[s]=new Ro(t,o[s])}}for(;s<h;++s){if(a=i[s]){r[s]=a}}}function Uo(t,i,e,n,r,o,s){var a,h,u={},l=i.length,f=o.length,c=new Array(l),_;for(a=0;a<l;++a){if(h=i[a]){c[a]=_=Wo+s.call(h,h.__data__,a,i);if(_ in u){r[a]=h}else{u[_]=h}}}for(a=0;a<f;++a){_=Wo+s.call(t,o[a],a,o);if(h=u[_]){n[a]=h;h.__data__=o[a];u[_]=null}else{e[a]=new Ro(t,o[a])}}for(a=0;a<l;++a){if((h=i[a])&&u[c[a]]===h){r[a]=h}}}var Io=function(t,i){if(!t){_=new Array(this.size()),u=-1;this.each(function(t){_[++u]=t});return _}var e=i?Uo:Go,n=this._parents,r=this._groups;if(typeof t!=="function"){t=Lo(t)}for(var o=r.length,s=new Array(o),a=new Array(o),h=new Array(o),u=0;u<o;++u){var l=n[u],f=r[u],c=f.length,_=t.call(l,l&&l.__data__,u,n),p=_.length,d=a[u]=new Array(p),g=s[u]=new Array(p),v=h[u]=new Array(c);e(l,f,d,g,v,_,i);for(var y=0,m=0,b,x;y<p;++y){if(b=d[y]){if(y>=m){m=y+1}while(!(x=g[m])&&++m<p){}b._next=x||null}}}s=new $s(s,n);s._enter=a;s._exit=h;return s};var qo=function(){return new $s(this._exit||this._groups.map(Po),this._parents)};var Yo=function(t){for(var i=this._groups,e=t._groups,n=i.length,r=e.length,o=Math.min(n,r),s=new Array(n),a=0;a<o;++a){for(var h=i[a],u=e[a],l=h.length,f=s[a]=new Array(l),c,_=0;_<l;++_){if(c=h[_]||u[_]){f[_]=c}}}for(;a<n;++a){s[a]=i[a]}return new $s(s,this._parents)};var Xo=function(){for(var t=this._groups,i=-1,e=t.length;++i<e;){for(var n=t[i],r=n.length-1,o=n[r],s;--r>=0;){if(s=n[r]){if(o&&o!==s.nextSibling){o.parentNode.insertBefore(s,o)}o=s}}}return this};var Vo=function(t){if(!t){t=Jo}function i(i,e){return i&&e?t(i.__data__,e.__data__):!i-!e}for(var e=this._groups,n=e.length,r=new Array(n),o=0;o<n;++o){for(var s=e[o],a=s.length,h=r[o]=new Array(a),u,l=0;l<a;++l){if(u=s[l]){h[l]=u}}h.sort(i)}return new $s(r,this._parents).order()};function Jo(t,i){return t<i?-1:t>i?1:t>=i?0:NaN}var $o=function(){var t=arguments[0];arguments[0]=this;t.apply(null,arguments);return this};var Ko=function(){var t=new Array(this.size()),i=-1;this.each(function(){t[++i]=this});return t};var Zo=function(){for(var t=this._groups,i=0,e=t.length;i<e;++i){for(var n=t[i],r=0,o=n.length;r<o;++r){var s=n[r];if(s){return s}}}return null};var Qo=function(){var t=0;this.each(function(){++t});return t};var ts=function(){return!this.node()};var is=function(t){for(var i=this._groups,e=0,n=i.length;e<n;++e){for(var r=i[e],o=0,s=r.length,a;o<s;++o){if(a=r[o]){t.call(a,a.__data__,o,r)}}}return this};function es(t){return function(){this.removeAttribute(t)}}function ns(t){return function(){this.removeAttributeNS(t.space,t.local)}}function rs(t,i){return function(){this.setAttribute(t,i)}}function os(t,i){return function(){this.setAttributeNS(t.space,t.local,i)}}function ss(t,i){return function(){var e=i.apply(this,arguments);if(e==null){this.removeAttribute(t)}else{this.setAttribute(t,e)}}}function as(t,i){return function(){var e=i.apply(this,arguments);if(e==null){this.removeAttributeNS(t.space,t.local)}else{this.setAttributeNS(t.space,t.local,e)}}}var hs=function(t,i){var e=ao(t);if(arguments.length<2){var n=this.node();return e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}return this.each((i==null?e.local?ns:es:typeof i==="function"?e.local?as:ss:e.local?os:rs)(e,i))};var us=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function ls(t){return function(){this.style.removeProperty(t)}}function fs(t,i,e){return function(){this.style.setProperty(t,i,e)}}function cs(t,i,e){return function(){var n=i.apply(this,arguments);if(n==null){this.style.removeProperty(t)}else{this.style.setProperty(t,n,e)}}}var _s=function(t,i,e){var n;return arguments.length>1?this.each((i==null?ls:typeof i==="function"?cs:fs)(t,i,e==null?"":e)):us(n=this.node()).getComputedStyle(n,null).getPropertyValue(t)};function ps(t){return function(){delete this[t]}}function ds(t,i){return function(){this[t]=i}}function gs(t,i){return function(){var e=i.apply(this,arguments);if(e==null){delete this[t]}else{this[t]=e}}}var vs=function(t,i){return arguments.length>1?this.each((i==null?ps:typeof i==="function"?gs:ds)(t,i)):this.node()[t]};function ys(t){return t.trim().split(/^|\s+/)}function ms(t){return t.classList||new bs(t)}function bs(t){this._node=t;this._names=ys(t.getAttribute("class")||"")}bs.prototype={add:function(t){var i=this._names.indexOf(t);if(i<0){this._names.push(t);this._node.setAttribute("class",this._names.join(" "))}},remove:function(t){var i=this._names.indexOf(t);if(i>=0){this._names.splice(i,1);this._node.setAttribute("class",this._names.join(" "))}},contains:function(t){return this._names.indexOf(t)>=0}};function xs(t,i){var e=ms(t),n=-1,r=i.length;while(++n<r){e.add(i[n])}}function ws(t,i){var e=ms(t),n=-1,r=i.length;while(++n<r){e.remove(i[n])}}function Cs(t){return function(){xs(this,t)}}function As(t){return function(){ws(this,t)}}function Ss(t,i){return function(){(i.apply(this,arguments)?xs:ws)(this,t)}}var ks=function(t,i){var e=ys(t+"");if(arguments.length<2){var n=ms(this.node()),r=-1,o=e.length;while(++r<o){if(!n.contains(e[r])){return false}}return true}return this.each((typeof i==="function"?Ss:i?Cs:As)(e,i))};function Es(){this.textContent=""}function Bs(t){return function(){this.textContent=t}}function Ds(t){return function(){var i=t.apply(this,arguments);this.textContent=i==null?"":i}}var Ms=function(t){return arguments.length?this.each(t==null?Es:(typeof t==="function"?Ds:Bs)(t)):this.node().textContent;
};function zs(){this.innerHTML=""}function Fs(t){return function(){this.innerHTML=t}}function Os(t){return function(){var i=t.apply(this,arguments);this.innerHTML=i==null?"":i}}var Ns=function(t){return arguments.length?this.each(t==null?zs:(typeof t==="function"?Os:Fs)(t)):this.node().innerHTML};function Ts(){if(this.nextSibling){this.parentNode.appendChild(this)}}var js=function(){return this.each(Ts)};function Ps(){if(this.previousSibling){this.parentNode.insertBefore(this,this.parentNode.firstChild)}}var Hs=function(){return this.each(Ps)};var Rs=function(t){var i=typeof t==="function"?t:lo(t);return this.select(function(){return this.appendChild(i.apply(this,arguments))})};function Ls(){return null}var Ws=function(t,i){var e=typeof t==="function"?t:lo(t),n=i==null?Ls:typeof i==="function"?i:zo(i);return this.select(function(){return this.insertBefore(e.apply(this,arguments),n.apply(this,arguments)||null)})};function Gs(){var t=this.parentNode;if(t){t.removeChild(this)}}var Us=function(){return this.each(Gs)};var Is=function(t){return arguments.length?this.property("__data__",t):this.node().__data__};function qs(t,i,e){var n=us(t),r=n.CustomEvent;if(r){r=new r(i,e)}else{r=n.document.createEvent("Event");if(e){r.initEvent(i,e.bubbles,e.cancelable),r.detail=e.detail}else{r.initEvent(i,false,false)}}t.dispatchEvent(r)}function Ys(t,i){return function(){return qs(this,t,i)}}function Xs(t,i){return function(){return qs(this,t,i.apply(this,arguments))}}var Vs=function(t,i){return this.each((typeof i==="function"?Xs:Ys)(t,i))};var Js=[null];function $s(t,i){this._groups=t;this._parents=i}function Ks(){return new $s([[document.documentElement]],Js)}$s.prototype=Ks.prototype={constructor:$s,select:Fo,selectAll:To,filter:jo,data:Io,enter:Ho,exit:qo,merge:Yo,order:Xo,sort:Vo,call:$o,nodes:Ko,node:Zo,size:Qo,empty:ts,each:is,attr:hs,style:_s,property:vs,classed:ks,text:Ms,html:Ns,raise:js,lower:Hs,append:Rs,insert:Ws,remove:Us,datum:Is,on:So,dispatch:Vs};var Zs=function(t){return typeof t==="string"?new $s([[document.querySelector(t)]],[document.documentElement]):new $s([[t]],Js)};var Qs=function(t){return typeof t==="string"?new $s([document.querySelectorAll(t)],[document.documentElement]):new $s([t==null?[]:t],Js)};var ta=function(t,i,e){if(arguments.length<3){e=i,i=Eo().changedTouches}for(var n=0,r=i?i.length:0,o;n<r;++n){if((o=i[n]).identifier===e){return Bo(t,o)}}return null};var ia={value:function(){}};function ea(){var t=arguments;for(var i=0,e=arguments.length,n={},r;i<e;++i){if(!(r=t[i]+"")||r in n){throw new Error("illegal type: "+r)}n[r]=[]}return new na(n)}function na(t){this._=t}function ra(t,i){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0){e=t.slice(n+1),t=t.slice(0,n)}if(t&&!i.hasOwnProperty(t)){throw new Error("unknown type: "+t)}return{type:t,name:e}})}na.prototype=ea.prototype={constructor:na,on:function(t,i){var e=this._,n=ra(t+"",e),r,o=-1,s=n.length;if(arguments.length<2){while(++o<s){if((r=(t=n[o]).type)&&(r=oa(e[r],t.name))){return r}}return}if(i!=null&&typeof i!=="function"){throw new Error("invalid callback: "+i)}while(++o<s){if(r=(t=n[o]).type){e[r]=sa(e[r],t.name,i)}else if(i==null){for(r in e){e[r]=sa(e[r],t.name,null)}}}return this},copy:function(){var t={},i=this._;for(var e in i){t[e]=i[e].slice()}return new na(t)},call:function(t,i){var e=arguments;if((o=arguments.length-2)>0){for(var n=new Array(o),r=0,o,s;r<o;++r){n[r]=e[r+2]}}if(!this._.hasOwnProperty(t)){throw new Error("unknown type: "+t)}for(s=this._[t],r=0,o=s.length;r<o;++r){s[r].value.apply(i,n)}},apply:function(t,i,e){if(!this._.hasOwnProperty(t)){throw new Error("unknown type: "+t)}for(var n=this._[t],r=0,o=n.length;r<o;++r){n[r].value.apply(i,e)}}};function oa(t,i){for(var e=0,n=t.length,r;e<n;++e){if((r=t[e]).name===i){return r.value}}}function sa(t,i,e){for(var n=0,r=t.length;n<r;++n){if(t[n].name===i){t[n]=ia,t=t.slice(0,n).concat(t.slice(n+1));break}}if(e!=null){t.push({name:i,value:e})}return t}var aa=0;var ha=0;var ua=0;var la=1e3;var fa;var ca;var _a=0;var pa=0;var da=0;var ga=typeof performance==="object"&&performance.now?performance:Date;var va=typeof requestAnimationFrame==="function"?requestAnimationFrame:function(t){setTimeout(t,17)};function ya(){return pa||(va(ma),pa=ga.now()+da)}function ma(){pa=0}function ba(){this._call=this._time=this._next=null}ba.prototype=xa.prototype={constructor:ba,restart:function(t,i,e){if(typeof t!=="function"){throw new TypeError("callback is not a function")}e=(e==null?ya():+e)+(i==null?0:+i);if(!this._next&&ca!==this){if(ca){ca._next=this}else{fa=this}ca=this}this._call=t;this._time=e;ka()},stop:function(){if(this._call){this._call=null;this._time=Infinity;ka()}}};function xa(t,i,e){var n=new ba;n.restart(t,i,e);return n}function wa(){ya();++aa;var t=fa,i;while(t){if((i=pa-t._time)>=0){t._call.call(null,i)}t=t._next}--aa}function Ca(){pa=(_a=ga.now())+da;aa=ha=0;try{wa()}finally{aa=0;Sa();pa=0}}function Aa(){var t=ga.now(),i=t-_a;if(i>la){da-=i,_a=t}}function Sa(){var t,i=fa,e,n=Infinity;while(i){if(i._call){if(n>i._time){n=i._time}t=i,i=i._next}else{e=i._next,i._next=null;i=t?t._next=e:fa=e}}ca=t;ka(n)}function ka(t){if(aa){return}if(ha){ha=clearTimeout(ha)}var i=t-pa;if(i>24){if(t<Infinity){ha=setTimeout(Ca,i)}if(ua){ua=clearInterval(ua)}}else{if(!ua){ua=setInterval(Aa,la)}aa=1,va(Ca)}}var Ea=function(t,i,e){var n=new ba;i=i==null?0:+i;n.restart(function(e){n.stop();t(e+i)},i,e);return n};var Ba=ea("start","end","interrupt");var Da=[];var Ma=0;var za=1;var Fa=2;var Oa=3;var Na=4;var Ta=5;var ja=6;var Pa=function(t,i,e,n,r,o){var s=t.__transition;if(!s){t.__transition={}}else if(e in s){return}Wa(t,e,{name:i,index:n,group:r,on:Ba,tween:Da,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:Ma})};function Ha(t,i){var e=t.__transition;if(!e||!(e=e[i])||e.state>Ma){throw new Error("too late")}return e}function Ra(t,i){var e=t.__transition;if(!e||!(e=e[i])||e.state>Fa){throw new Error("too late")}return e}function La(t,i){var e=t.__transition;if(!e||!(e=e[i])){throw new Error("too late")}return e}function Wa(t,i,e){var n=t.__transition,r;n[i]=e;e.timer=xa(o,0,e.time);function o(t){e.state=za;e.timer.restart(s,e.delay,e.time);if(e.delay<=t){s(t-e.delay)}}function s(o){var u,l,f,c;if(e.state!==za){return h()}for(u in n){c=n[u];if(c.name!==e.name){continue}if(c.state===Oa){return Ea(s)}if(c.state===Na){c.state=ja;c.timer.stop();c.on.call("interrupt",t,t.__data__,c.index,c.group);delete n[u]}else if(+u<i){c.state=ja;c.timer.stop();delete n[u]}}Ea(function(){if(e.state===Oa){e.state=Na;e.timer.restart(a,e.delay,e.time);a(o)}});e.state=Fa;e.on.call("start",t,t.__data__,e.index,e.group);if(e.state!==Fa){return}e.state=Oa;r=new Array(f=e.tween.length);for(u=0,l=-1;u<f;++u){if(c=e.tween[u].value.call(t,t.__data__,e.index,e.group)){r[++l]=c}}r.length=l+1}function a(i){var n=i<e.duration?e.ease.call(null,i/e.duration):(e.timer.restart(h),e.state=Ta,1),o=-1,s=r.length;while(++o<s){r[o].call(null,n)}if(e.state===Ta){e.on.call("end",t,t.__data__,e.index,e.group);h()}}function h(){e.state=ja;e.timer.stop();delete n[i];for(var r in n){return}delete t.__transition}}var Ga=function(t,i){var e=t.__transition,n,r,o=true,s;if(!e){return}i=i==null?null:i+"";for(s in e){if((n=e[s]).name!==i){o=false;continue}r=n.state>Fa&&n.state<Ta;n.state=ja;n.timer.stop();if(r){n.on.call("interrupt",t,t.__data__,n.index,n.group)}delete e[s]}if(o){delete t.__transition}};var Ua=function(t){return this.each(function(){Ga(this,t)})};function Ia(t,i){var e,n;return function(){var r=Ra(this,t),o=r.tween;if(o!==e){n=e=o;for(var s=0,a=n.length;s<a;++s){if(n[s].name===i){n=n.slice();n.splice(s,1);break}}}r.tween=n}}function qa(t,i,e){var n,r;if(typeof e!=="function"){throw new Error}return function(){var o=Ra(this,t),s=o.tween;if(s!==n){r=(n=s).slice();for(var a={name:i,value:e},h=0,u=r.length;h<u;++h){if(r[h].name===i){r[h]=a;break}}if(h===u){r.push(a)}}o.tween=r}}var Ya=function(t,i){var e=this._id;t+="";if(arguments.length<2){var n=La(this.node(),e).tween;for(var r=0,o=n.length,s;r<o;++r){if((s=n[r]).name===t){return s.value}}return null}return this.each((i==null?Ia:qa)(e,t,i))};function Xa(t,i,e){var n=t._id;t.each(function(){var t=Ra(this,n);(t.value||(t.value={}))[i]=e.apply(this,arguments)});return function(t){return La(t,n).value[i]}}var Va=function(t,i){var e;return(typeof i==="number"?ui:i instanceof ft?si:(e=ft(i))?(i=e,si):di)(t,i)};function Ja(t){return function(){this.removeAttribute(t)}}function $a(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ka(t,i,e){var n,r;return function(){var o=this.getAttribute(t);return o===e?null:o===n?r:r=i(n=o,e)}}function Za(t,i,e){var n,r;return function(){var o=this.getAttributeNS(t.space,t.local);return o===e?null:o===n?r:r=i(n=o,e)}}function Qa(t,i,e){var n,r,o;return function(){var s,a=e(this);if(a==null){return void this.removeAttribute(t)}s=this.getAttribute(t);return s===a?null:s===n&&a===r?o:o=i(n=s,r=a)}}function th(t,i,e){var n,r,o;return function(){var s,a=e(this);if(a==null){return void this.removeAttributeNS(t.space,t.local)}s=this.getAttributeNS(t.space,t.local);return s===a?null:s===n&&a===r?o:o=i(n=s,r=a)}}var ih=function(t,i){var e=ao(t),n=e==="transform"?Di:Va;return this.attrTween(t,typeof i==="function"?(e.local?th:Qa)(e,n,Xa(this,"attr."+t,i)):i==null?(e.local?$a:Ja)(e):(e.local?Za:Ka)(e,n,i))};function eh(t,i){function e(){var e=this,n=i.apply(e,arguments);return n&&function(i){e.setAttributeNS(t.space,t.local,n(i))}}e._value=i;return e}function nh(t,i){function e(){var e=this,n=i.apply(e,arguments);return n&&function(i){e.setAttribute(t,n(i))}}e._value=i;return e}var rh=function(t,i){var e="attr."+t;if(arguments.length<2){return(e=this.tween(e))&&e._value}if(i==null){return this.tween(e,null)}if(typeof i!=="function"){throw new Error}var n=ao(t);return this.tween(e,(n.local?eh:nh)(n,i))};function oh(t,i){return function(){Ha(this,t).delay=+i.apply(this,arguments)}}function sh(t,i){return i=+i,function(){Ha(this,t).delay=i}}var ah=function(t){var i=this._id;return arguments.length?this.each((typeof t==="function"?oh:sh)(i,t)):La(this.node(),i).delay};function hh(t,i){return function(){Ra(this,t).duration=+i.apply(this,arguments)}}function uh(t,i){return i=+i,function(){Ra(this,t).duration=i}}var lh=function(t){var i=this._id;return arguments.length?this.each((typeof t==="function"?hh:uh)(i,t)):La(this.node(),i).duration};function fh(t,i){if(typeof i!=="function"){throw new Error}return function(){Ra(this,t).ease=i}}var ch=function(t){var i=this._id;return arguments.length?this.each(fh(i,t)):La(this.node(),i).ease};var _h=function(t){if(typeof t!=="function"){t=go(t)}for(var i=this._groups,e=i.length,n=new Array(e),r=0;r<e;++r){for(var o=i[r],s=o.length,a=n[r]=[],h,u=0;u<s;++u){if((h=o[u])&&t.call(h,h.__data__,u,o)){a.push(h)}}}return new jh(n,this._parents,this._name,this._id)};var ph=function(t){if(t._id!==this._id){throw new Error}for(var i=this._groups,e=t._groups,n=i.length,r=e.length,o=Math.min(n,r),s=new Array(n),a=0;a<o;++a){for(var h=i[a],u=e[a],l=h.length,f=s[a]=new Array(l),c,_=0;_<l;++_){if(c=h[_]||u[_]){f[_]=c}}}for(;a<n;++a){s[a]=i[a]}return new jh(s,this._parents,this._name,this._id)};function dh(t){return(t+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");if(i>=0){t=t.slice(0,i)}return!t||t==="start"})}function gh(t,i,e){var n,r,o=dh(i)?Ha:Ra;return function(){var s=o(this,t),a=s.on;if(a!==n){(r=(n=a).copy()).on(i,e)}s.on=r}}var vh=function(t,i){var e=this._id;return arguments.length<2?La(this.node(),e).on.on(t):this.each(gh(e,t,i))};function yh(t){return function(){var i=this.parentNode;for(var e in this.__transition){if(+e!==t){return}}if(i){i.removeChild(this)}}}var mh=function(){return this.on("end.remove",yh(this._id))};var bh=function(t){var i=this._name,e=this._id;if(typeof t!=="function"){t=zo(t)}for(var n=this._groups,r=n.length,o=new Array(r),s=0;s<r;++s){for(var a=n[s],h=a.length,u=o[s]=new Array(h),l,f,c=0;c<h;++c){if((l=a[c])&&(f=t.call(l,l.__data__,c,a))){if("__data__"in l){f.__data__=l.__data__}u[c]=f;Pa(u[c],i,e,c,u,La(l,e))}}}return new jh(o,this._parents,i,e)};var xh=function(t){var i=this._name,e=this._id;if(typeof t!=="function"){t=No(t)}for(var n=this._groups,r=n.length,o=[],s=[],a=0;a<r;++a){for(var h=n[a],u=h.length,l,f=0;f<u;++f){if(l=h[f]){for(var c=t.call(l,l.__data__,f,h),_,p=La(l,e),d=0,g=c.length;d<g;++d){if(_=c[d]){Pa(_,i,e,d,c,p)}}o.push(c);s.push(l)}}}return new jh(o,s,i,e)};var wh=Ks.prototype.constructor;var Ch=function(){return new wh(this._groups,this._parents)};function Ah(t,i){var e,n,r;return function(){var o=us(this).getComputedStyle(this,null),s=o.getPropertyValue(t),a=(this.style.removeProperty(t),o.getPropertyValue(t));return s===a?null:s===e&&a===n?r:r=i(e=s,n=a)}}function Sh(t){return function(){this.style.removeProperty(t)}}function kh(t,i,e){var n,r;return function(){var o=us(this).getComputedStyle(this,null).getPropertyValue(t);return o===e?null:o===n?r:r=i(n=o,e)}}function Eh(t,i,e){var n,r,o;return function(){var s=us(this).getComputedStyle(this,null),a=s.getPropertyValue(t),h=e(this);if(h==null){h=(this.style.removeProperty(t),s.getPropertyValue(t))}return a===h?null:a===n&&h===r?o:o=i(n=a,r=h)}}var Bh=function(t,i,e){var n=(t+="")==="transform"?Bi:Va;return i==null?this.styleTween(t,Ah(t,n)).on("end.style."+t,Sh(t)):this.styleTween(t,typeof i==="function"?Eh(t,n,Xa(this,"style."+t,i)):kh(t,n,i),e)};function Dh(t,i,e){function n(){var n=this,r=i.apply(n,arguments);return r&&function(i){n.style.setProperty(t,r(i),e)}}n._value=i;return n}var Mh=function(t,i,e){var n="style."+(t+="");if(arguments.length<2){return(n=this.tween(n))&&n._value}if(i==null){return this.tween(n,null)}if(typeof i!=="function"){throw new Error}return this.tween(n,Dh(t,i,e==null?"":e))};function zh(t){return function(){this.textContent=t}}function Fh(t){return function(){var i=t(this);this.textContent=i==null?"":i}}var Oh=function(t){return this.tween("text",typeof t==="function"?Fh(Xa(this,"text",t)):zh(t==null?"":t+""))};var Nh=function(){var t=this._name,i=this._id,e=Hh();for(var n=this._groups,r=n.length,o=0;o<r;++o){for(var s=n[o],a=s.length,h,u=0;u<a;++u){if(h=s[u]){var l=La(h,i);Pa(h,t,e,u,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}}}return new jh(n,this._parents,t,e)};var Th=0;function jh(t,i,e,n){this._groups=t;this._parents=i;this._name=e;this._id=n}function Ph(t){return Ks().transition(t)}function Hh(){return++Th}var Rh=Ks.prototype;jh.prototype=Ph.prototype={constructor:jh,select:bh,selectAll:xh,filter:_h,merge:ph,selection:Ch,transition:Nh,call:Rh.call,nodes:Rh.nodes,node:Rh.node,size:Rh.size,empty:Rh.empty,each:Rh.each,on:vh,attr:ih,attrTween:rh,style:Bh,styleTween:Mh,text:Oh,remove:mh,tween:Ya,delay:ah,duration:lh,ease:ch};function Lh(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Wh=3;var Gh=function t(i){i=+i;function e(t){return Math.pow(t,i)}e.exponent=t;return e}(Wh);var Uh=function t(i){i=+i;function e(t){return 1-Math.pow(1-t,i)}e.exponent=t;return e}(Wh);var Ih=function t(i){i=+i;function e(t){return((t*=2)<=1?Math.pow(t,i):2-Math.pow(2-t,i))/2}e.exponent=t;return e}(Wh);var qh=4/11;var Yh=6/11;var Xh=8/11;var Vh=3/4;var Jh=9/11;var $h=10/11;var Kh=15/16;var Zh=21/22;var Qh=63/64;var tu=1/qh/qh;function iu(t){return(t=+t)<qh?tu*t*t:t<Xh?tu*(t-=Yh)*t+Vh:t<$h?tu*(t-=Jh)*t+Kh:tu*(t-=Zh)*t+Qh}var eu=1.70158;var nu=function t(i){i=+i;function e(t){return t*t*((i+1)*t-i)}e.overshoot=t;return e}(eu);var ru=function t(i){i=+i;function e(t){return--t*t*((i+1)*t+i)+1}e.overshoot=t;return e}(eu);var ou=function t(i){i=+i;function e(t){return((t*=2)<1?t*t*((i+1)*t-i):(t-=2)*t*((i+1)*t+i)+2)/2}e.overshoot=t;return e}(eu);var su=2*Math.PI;var au=1;var hu=.3;var uu=function t(i,e){var n=Math.asin(1/(i=Math.max(1,i)))*(e/=su);function r(t){return i*Math.pow(2,10*--t)*Math.sin((n-t)/e)}r.amplitude=function(i){return t(i,e*su)};r.period=function(e){return t(i,e)};return r}(au,hu);var lu=function t(i,e){var n=Math.asin(1/(i=Math.max(1,i)))*(e/=su);function r(t){return 1-i*Math.pow(2,-10*(t=+t))*Math.sin((t+n)/e)}r.amplitude=function(i){return t(i,e*su)};r.period=function(e){return t(i,e)};return r}(au,hu);var fu=function t(i,e){var n=Math.asin(1/(i=Math.max(1,i)))*(e/=su);function r(t){return((t=t*2-1)<0?i*Math.pow(2,10*t)*Math.sin((n-t)/e):2-i*Math.pow(2,-10*t)*Math.sin((n+t)/e))/2}r.amplitude=function(i){return t(i,e*su)};r.period=function(e){return t(i,e)};return r}(au,hu);var cu={time:null,delay:0,duration:250,ease:Lh};function _u(t,i){var e;while(!(e=t.__transition)||!(e=e[i])){if(!(t=t.parentNode)){return cu.time=ya(),cu}}return e}var pu=function(t){var i,e;if(t instanceof jh){i=t._id,t=t._name}else{i=Hh(),(e=cu).time=ya(),t=t==null?null:t+""}for(var n=this._groups,r=n.length,o=0;o<r;++o){for(var s=n[o],a=s.length,h,u=0;u<a;++u){if(h=s[u]){Pa(h,t,i,u,s,e||_u(h,i))}}}return new jh(n,this._parents,t,i)};Ks.prototype.interrupt=Ua;Ks.prototype.transition=pu;var du=[null];var gu=function(t,i){if(i===void 0){return function(i){return i[t]}}return function(e){return e[t]===void 0?i:e[t]}};var vu=function(t){return t&&typeof t==="object"&&!Array.isArray(t)&&t!==void 0?true:false};function yu(){var t=[],i=arguments.length;while(i--)t[i]=arguments[i];var e=t[0];var n=function(i){var n=t[i];Object.keys(n).forEach(function(t){var i=n[t];if(vu(i)){if(e.hasOwnProperty(t)&&vu(e[t])){e[t]=yu(e[t],i)}else{e[t]=i}}else if(Array.isArray(i)){if(e.hasOwnProperty(t)&&Array.isArray(e[t])){var r=e[t];i.forEach(function(t,i){if(i<r.length){var e=r[i];if(Object.is(e,t)){return}if(vu(e)&&vu(t)||Array.isArray(e)&&Array.isArray(t)){r[i]=yu(e,t)}else{r[i]=t}}else{r.push(t)}})}else{e[t]=i}}else{e[t]=i}})};for(var r=1;r<t.length;r++)n(r);return e}var mu=function(t,i){if(i===void 0)i={};for(var e in i){if({}.hasOwnProperty.call(i,e)){t.attr(e,i[e])}}};function bu(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}var xu=function t(){this._on={};this._uuid=""+bu()+bu()+"-"+bu()+"-"+bu()+"-"+bu()+"-"+bu()+bu()+bu()};xu.prototype.config=function t(i){var e=this;if(arguments.length){for(var n in i){if({}.hasOwnProperty.call(i,n)&&n in e){e[n](i[n])}}return this}else{var t={};for(var r in this.prototype.constructor){if(r!=="config"&&{}.hasOwnProperty.call(e,r)){t[r]=e[r]()}}return t}};xu.prototype.on=function t(i,e){return arguments.length===2?(this._on[i]=e,this):arguments.length?typeof i==="string"?this._on[i]:(this._on=Object.assign({},this._on,i),this):this._on};var wu=function(t,i){return i.reduce(function(i,e){return Math.abs(e-t)<Math.abs(i-t)?e:i})};var Cu=function(t){return function i(){return t}};var Au=function(t,i){i=Object.assign({},{condition:true,enter:{},exit:{},parent:Zs("body"),transition:Ph().duration(0),update:{}},i);var e=/\.([^#]+)/g.exec(t),n=/#([^\.]+)/g.exec(t),r=/^([^.^#]+)/g.exec(t)[1];var o=i.parent.selectAll(t).data(i.condition?[null]:[]);var s=o.enter().append(r).call(mu,i.enter);if(n){s.attr("id",n[1])}if(e){s.attr("class",e[1])}o.exit().transition(i.transition).call(mu,i.exit).remove();var a=s.merge(o);a.transition(i.transition).call(mu,i.update);return a};var Su=Object.assign||function(t){var i=arguments;for(var e=1;e<arguments.length;e++){var n=i[e];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){t[r]=n[r]}}}return t};function ku(t,i){if(!(t instanceof i)){throw new TypeError("Cannot call a class as a function")}}var Eu={type:"logger",log:function t(i){this._output("log",i)},warn:function t(i){this._output("warn",i)},error:function t(i){this._output("error",i)},_output:function t(i,e){if(console&&console[i]){console[i].apply(console,Array.prototype.slice.call(e))}}};var Bu=function(){function t(i){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};ku(this,t);this.subs=[];this.init(i,e)}t.prototype.init=function t(i){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.prefix=e.prefix||"i18next:";this.logger=i||Eu;this.options=e;this.debug=e.debug===false?false:true};t.prototype.setDebug=function t(i){this.debug=i;this.subs.forEach(function(t){t.setDebug(i)})};t.prototype.log=function t(){this.forward(arguments,"log","",true)};t.prototype.warn=function t(){this.forward(arguments,"warn","",true)};t.prototype.error=function t(){this.forward(arguments,"error","")};t.prototype.deprecate=function t(){this.forward(arguments,"warn","WARNING DEPRECATED: ",true)};t.prototype.forward=function t(i,e,n,r){if(r&&!this.debug){return}if(typeof i[0]==="string"){i[0]=n+this.prefix+" "+i[0]}this.logger[e](i)};t.prototype.create=function i(e){var n=new t(this.logger,Su({prefix:this.prefix+":"+e+":"},this.options));this.subs.push(n);return n};return t}();var Du=new Bu;function Mu(t,i){if(!(t instanceof i)){throw new TypeError("Cannot call a class as a function")}}var zu=function(){function t(){Mu(this,t);this.observers={}}t.prototype.on=function t(i,e){var n=this;i.split(" ").forEach(function(t){n.observers[t]=n.observers[t]||[];n.observers[t].push(e)})};t.prototype.off=function t(i,e){var n=this;if(!this.observers[i]){return}this.observers[i].forEach(function(){if(!e){delete n.observers[i]}else{var t=n.observers[i].indexOf(e);if(t>-1){n.observers[i].splice(t,1)}}})};t.prototype.emit=function t(i){var e=arguments;for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++){r[o-1]=e[o]}if(this.observers[i]){this.observers[i].forEach(function(t){t.apply(undefined,r)})}if(this.observers["*"]){this.observers["*"].forEach(function(t){var e;t.apply(t,(e=[i]).concat.apply(e,r))})}};return t}();function Fu(t){if(t==null){return""}return""+t}function Ou(t,i,e){t.forEach(function(t){if(i[t]){e[t]=i[t]}})}function Nu(t,i,e){function n(t){return t&&t.indexOf("###")>-1?t.replace(/###/g,"."):t}var r=typeof i!=="string"?[].concat(i):i.split(".");while(r.length>1){if(!t){return{}}var o=n(r.shift());if(!t[o]&&e){t[o]=new e}t=t[o]}if(!t){return{}}return{obj:t,k:n(r.shift())}}function Tu(t,i,e){var n=Nu(t,i,Object),r=n.obj,o=n.k;r[o]=e}function ju(t,i,e,n){var r=Nu(t,i,Object),o=r.obj,s=r.k;o[s]=o[s]||[];if(n){o[s]=o[s].concat(e)}if(!n){o[s].push(e)}}function Pu(t,i){var e=Nu(t,i),n=e.obj,r=e.k;if(!n){return undefined}return n[r]}function Hu(t,i,e){for(var n in i){if(n in t){if(typeof t[n]==="string"||t[n]instanceof String||typeof i[n]==="string"||i[n]instanceof String){if(e){t[n]=i[n]}}else{Hu(t[n],i[n],e)}}else{t[n]=i[n]}}return t}function Ru(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var Lu={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function Wu(t){if(typeof t==="string"){return t.replace(/[&<>"'\/]/g,function(t){return Lu[t]})}else{return t}}var Gu=Object.assign||function(t){var i=arguments;for(var e=1;e<arguments.length;e++){var n=i[e];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){t[r]=n[r]}}}return t};function Uu(t,i){var e=Object.getOwnPropertyNames(i);for(var n=0;n<e.length;n++){var r=e[n];var o=Object.getOwnPropertyDescriptor(i,r);if(o&&o.configurable&&t[r]===undefined){Object.defineProperty(t,r,o)}}return t}function Iu(t,i){if(!(t instanceof i)){throw new TypeError("Cannot call a class as a function")}}function qu(t,i){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i&&(typeof i==="object"||typeof i==="function")?i:t}function Yu(t,i){if(typeof i!=="function"&&i!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof i)}t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(i){Object.setPrototypeOf?Object.setPrototypeOf(t,i):Uu(t,i)}}var Xu=function(t){Yu(i,t);function i(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{ns:["translation"],defaultNS:"translation"};Iu(this,i);var r=qu(this,t.call(this));r.data=e;r.options=n;return r}i.prototype.addNamespaces=function t(i){if(this.options.ns.indexOf(i)<0){this.options.ns.push(i)}};i.prototype.removeNamespaces=function t(i){var e=this.options.ns.indexOf(i);if(e>-1){this.options.ns.splice(e,1)}};i.prototype.getResource=function t(i,e,n){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};var o=r.keySeparator||this.options.keySeparator;if(o===undefined){o="."}var s=[i,e];if(n&&typeof n!=="string"){s=s.concat(n)}if(n&&typeof n==="string"){s=s.concat(o?n.split(o):n)}if(i.indexOf(".")>-1){s=i.split(".")}return Pu(this.data,s)};i.prototype.addResource=function t(i,e,n,r){var o=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{silent:false};var s=this.options.keySeparator;if(s===undefined){s="."}var a=[i,e];if(n){a=a.concat(s?n.split(s):n)}if(i.indexOf(".")>-1){a=i.split(".");r=e;e=a[1]}this.addNamespaces(e);Tu(this.data,a,r);if(!o.silent){this.emit("added",i,e,n,r)}};i.prototype.addResources=function t(i,e,n){var r=this;for(var o in n){if(typeof n[o]==="string"){r.addResource(i,e,o,n[o],{silent:true})}}this.emit("added",i,e,n)};i.prototype.addResourceBundle=function t(i,e,n,r,o){var s=[i,e];if(i.indexOf(".")>-1){s=i.split(".");r=n;n=e;e=s[1]}this.addNamespaces(e);var a=Pu(this.data,s)||{};if(r){Hu(a,n,o)}else{a=Gu({},a,n)}Tu(this.data,s,a);this.emit("added",i,e,n)};i.prototype.removeResourceBundle=function t(i,e){if(this.hasResourceBundle(i,e)){delete this.data[i][e]}this.removeNamespaces(e);this.emit("removed",i,e)};i.prototype.hasResourceBundle=function t(i,e){return this.getResource(i,e)!==undefined};i.prototype.getResourceBundle=function t(i,e){if(!e){e=this.options.defaultNS}if(this.options.compatibilityAPI==="v1"){return Gu({},this.getResource(i,e))}return this.getResource(i,e)};i.prototype.toJSON=function t(){return this.data};return i}(zu);var Vu={processors:{},addPostProcessor:function t(i){this.processors[i.name]=i},handle:function t(i,e,n,r,o){var s=this;i.forEach(function(t){if(s.processors[t]){e=s.processors[t].process(e,n,r,o)}});return e}};function Ju(t){t.interpolation={unescapeSuffix:"HTML"};t.interpolation.prefix=t.interpolationPrefix||"__";t.interpolation.suffix=t.interpolationSuffix||"__";t.interpolation.escapeValue=t.escapeInterpolation||false;t.interpolation.nestingPrefix=t.reusePrefix||"$t(";t.interpolation.nestingSuffix=t.reuseSuffix||")";return t}function $u(t){if(t.resStore){t.resources=t.resStore}if(t.ns&&t.ns.defaultNs){t.defaultNS=t.ns.defaultNs;t.ns=t.ns.namespaces}else{t.defaultNS=t.ns||"translation"}if(t.fallbackToDefaultNS&&t.defaultNS){t.fallbackNS=t.defaultNS}t.saveMissing=t.sendMissing;t.saveMissingTo=t.sendMissingTo||"current";t.returnNull=t.fallbackOnNull?false:true;t.returnEmptyString=t.fallbackOnEmpty?false:true;t.returnObjects=t.returnObjectTrees;t.joinArrays="\n";t.returnedObjectHandler=t.objectTreeKeyHandler;t.parseMissingKeyHandler=t.parseMissingKey;t.appendNamespaceToMissingKey=true;t.nsSeparator=t.nsseparator;t.keySeparator=t.keyseparator;if(t.shortcutFunction==="sprintf"){t.overloadTranslationOptionHandler=function(t){var i=[];for(var e=1;e<t.length;e++){i.push(t[e])}return{postProcess:"sprintf",sprintf:i}}}t.whitelist=t.lngWhitelist;t.preload=t.preload;if(t.load==="current"){t.load="currentOnly"}if(t.load==="unspecific"){t.load="languageOnly"}t.backend=t.backend||{};t.backend.loadPath=t.resGetPath||"locales/__lng__/__ns__.json";t.backend.addPath=t.resPostPath||"locales/add/__lng__/__ns__";t.backend.allowMultiLoading=t.dynamicLoad;t.cache=t.cache||{};t.cache.prefix="res_";t.cache.expirationTime=7*24*60*60*1e3;t.cache.enabled=t.useLocalStorage?true:false;t=Ju(t);if(t.defaultVariables){t.interpolation.defaultVariables=t.defaultVariables}return t}function Ku(t){t=Ju(t);t.joinArrays="\n";return t}function Zu(t){if(t.interpolationPrefix||t.interpolationSuffix||t.escapeInterpolation){t=Ju(t)}t.nsSeparator=t.nsseparator;t.keySeparator=t.keyseparator;t.returnObjects=t.returnObjectTrees;return t}function Qu(t){t.lng=function(){Du.deprecate("i18next.lng() can be replaced by i18next.language for detected language or i18next.languages for languages ordered by translation lookup.");return t.services.languageUtils.toResolveHierarchy(t.language)[0]};t.preload=function(i,e){Du.deprecate("i18next.preload() can be replaced with i18next.loadLanguages()");t.loadLanguages(i,e)};t.setLng=function(i,e,n){Du.deprecate("i18next.setLng() can be replaced with i18next.changeLanguage() or i18next.getFixedT() to get a translation function with fixed language or namespace.");if(typeof e==="function"){n=e;e={}}if(!e){e={}}if(e.fixLng===true){if(n){return n(null,t.getFixedT(i))}}t.changeLanguage(i,n)};t.addPostProcessor=function(i,e){Du.deprecate("i18next.addPostProcessor() can be replaced by i18next.use({ type: 'postProcessor', name: 'name', process: fc })");t.use({type:"postProcessor",name:i,process:e})}}var tl=Object.assign||function(t){var i=arguments;for(var e=1;e<arguments.length;e++){var n=i[e];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){t[r]=n[r]}}}return t};var il=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function el(t,i){var e=Object.getOwnPropertyNames(i);for(var n=0;n<e.length;n++){var r=e[n];var o=Object.getOwnPropertyDescriptor(i,r);if(o&&o.configurable&&t[r]===undefined){Object.defineProperty(t,r,o)}}return t}function nl(t,i){if(!(t instanceof i)){throw new TypeError("Cannot call a class as a function")}}function rl(t,i){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i&&(typeof i==="object"||typeof i==="function")?i:t}function ol(t,i){if(typeof i!=="function"&&i!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof i)}t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(i){Object.setPrototypeOf?Object.setPrototypeOf(t,i):el(t,i)}}var sl=function(t){ol(i,t);function i(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};nl(this,i);var r=rl(this,t.call(this));Ou(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector"],e,r);r.options=n;r.logger=Du.create("translator");return r}i.prototype.changeLanguage=function t(i){if(i){this.language=i}};i.prototype.exists=function t(i){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{interpolation:{}};if(this.options.compatibilityAPI==="v1"){e=Zu(e)}return this.resolve(i,e)!==undefined};i.prototype.extractFromKey=function t(i,e){var n=e.nsSeparator||this.options.nsSeparator;if(n===undefined){n=":"}var r=e.ns||this.options.defaultNS;if(n&&i.indexOf(n)>-1){var o=i.split(n);r=o[0];i=o[1]}if(typeof r==="string"){r=[r]}return{key:i,namespaces:r}};i.prototype.translate=function t(i){var e=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if((typeof n==="undefined"?"undefined":il(n))!=="object"){n=this.options.overloadTranslationOptionHandler(arguments)}else if(this.options.compatibilityAPI==="v1"){n=Zu(n)}if(i===undefined||i===null||i===""){return""}if(typeof i==="number"){i=String(i)}if(typeof i==="string"){i=[i]}var r=n.lng||this.language;if(r&&r.toLowerCase()==="cimode"){return i[i.length-1]}var o=n.keySeparator||this.options.keySeparator||".";var s=this.extractFromKey(i[i.length-1],n),a=s.key,h=s.namespaces;var u=h[h.length-1];var l=this.resolve(i,n);var f=Object.prototype.toString.apply(l);var c=["[object Number]","[object Function]","[object RegExp]"];var _=n.joinArrays!==undefined?n.joinArrays:this.options.joinArrays;if(l&&typeof l!=="string"&&c.indexOf(f)<0&&!(_&&f==="[object Array]")){if(!n.returnObjects&&!this.options.returnObjects){this.logger.warn("accessing an object - but returnObjects options is not enabled!");return this.options.returnedObjectHandler?this.options.returnedObjectHandler(a,l,n):"key '"+a+" ("+this.language+")' returned an object instead of string."}var p=f==="[object Array]"?[]:{};
for(var d in l){p[d]=e.translate(""+a+o+d,tl({joinArrays:false,ns:h},n))}l=p}else if(_&&f==="[object Array]"){l=l.join(_);if(l){l=this.extendTranslation(l,a,n)}}else{var g=false,v=false;if(!this.isValidLookup(l)&&n.defaultValue!==undefined){g=true;l=n.defaultValue}if(!this.isValidLookup(l)){v=true;l=a}if(v||g){this.logger.log("missingKey",r,u,a,l);var y=[];var m=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&m&&m[0]){for(var b=0;b<m.length;b++){y.push(m[b])}}else if(this.options.saveMissingTo==="all"){y=this.languageUtils.toResolveHierarchy(n.lng||this.language)}else{y.push(n.lng||this.language)}if(this.options.saveMissing){if(this.options.missingKeyHandler){this.options.missingKeyHandler(y,u,a,l)}else if(this.backendConnector&&this.backendConnector.saveMissing){this.backendConnector.saveMissing(y,u,a,l)}}this.emit("missingKey",y,u,a,l)}l=this.extendTranslation(l,a,n);if(v&&l===a&&this.options.appendNamespaceToMissingKey){l=u+":"+a}if(v&&this.options.parseMissingKeyHandler){l=this.options.parseMissingKeyHandler(l)}}return l};i.prototype.extendTranslation=function t(i,e,n){var r=this;if(n.interpolation){this.interpolator.init(tl({},n,{interpolation:tl({},this.options.interpolation,n.interpolation)}))}var o=n.replace&&typeof n.replace!=="string"?n.replace:n;if(this.options.interpolation.defaultVariables){o=tl({},this.options.interpolation.defaultVariables,o)}i=this.interpolator.interpolate(i,o,this.language);i=this.interpolator.nest(i,function(){var t=arguments;for(var i=arguments.length,e=Array(i),n=0;n<i;n++){e[n]=t[n]}return r.translate.apply(r,e)},n);if(n.interpolation){this.interpolator.reset()}var s=n.postProcess||this.options.postProcess;var a=typeof s==="string"?[s]:s;if(i!==undefined&&a&&a.length&&n.applyPostProcessor!==false){i=Vu.handle(a,i,e,n,this)}return i};i.prototype.resolve=function t(i){var e=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var r=void 0;if(typeof i==="string"){i=[i]}i.forEach(function(t){if(e.isValidLookup(r)){return}var i=e.extractFromKey(t,n),o=i.key,s=i.namespaces;if(e.options.fallbackNS){s=s.concat(e.options.fallbackNS)}var a=n.count!==undefined&&typeof n.count!=="string";var h=n.context!==undefined&&typeof n.context==="string"&&n.context!=="";var u=n.lngs?n.lngs:e.languageUtils.toResolveHierarchy(n.lng||e.language);s.forEach(function(t){if(e.isValidLookup(r)){return}u.forEach(function(i){if(e.isValidLookup(r)){return}var s=o;var u=[s];var l=void 0;if(a){l=e.pluralResolver.getSuffix(i,n.count)}if(a&&h){u.push(s+l)}if(h){u.push(s+=""+e.options.contextSeparator+n.context)}if(a){u.push(s+=l)}var f=void 0;while(f=u.pop()){if(e.isValidLookup(r)){continue}r=e.getResource(i,t,f,n)}})})});return r};i.prototype.isValidLookup=function t(i){return i!==undefined&&!(!this.options.returnNull&&i===null)&&!(!this.options.returnEmptyString&&i==="")};i.prototype.getResource=function t(i,e,n){var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};return this.resourceStore.getResource(i,e,n,r)};return i}(zu);function al(t,i){if(!(t instanceof i)){throw new TypeError("Cannot call a class as a function")}}function hl(t){return t.charAt(0).toUpperCase()+t.slice(1)}var ul=function(){function t(i){al(this,t);this.options=i;this.whitelist=this.options.whitelist||false;this.logger=Du.create("languageUtils")}t.prototype.getLanguagePartFromCode=function t(i){if(i.indexOf("-")<0){return i}var e=["NB-NO","NN-NO","nb-NO","nn-NO","nb-no","nn-no"];var n=i.split("-");return this.formatLanguageCode(e.indexOf(i)>-1?n[1].toLowerCase():n[0])};t.prototype.getScriptPartFromCode=function t(i){if(i.indexOf("-")<0){return null}var e=i.split("-");if(e.length===2){return null}e.pop();return this.formatLanguageCode(e.join("-"))};t.prototype.getLanguagePartFromCode=function t(i){if(i.indexOf("-")<0){return i}var e=["NB-NO","NN-NO","nb-NO","nn-NO","nb-no","nn-no"];var n=i.split("-");return this.formatLanguageCode(e.indexOf(i)>-1?n[1].toLowerCase():n[0])};t.prototype.formatLanguageCode=function t(i){if(typeof i==="string"&&i.indexOf("-")>-1){var e=["hans","hant","latn","cyrl","cans","mong","arab"];var n=i.split("-");if(this.options.lowerCaseLng){n=n.map(function(t){return t.toLowerCase()})}else if(n.length===2){n[0]=n[0].toLowerCase();n[1]=n[1].toUpperCase();if(e.indexOf(n[1].toLowerCase())>-1){n[1]=hl(n[1].toLowerCase())}}else if(n.length===3){n[0]=n[0].toLowerCase();if(n[1].length===2){n[1]=n[1].toUpperCase()}if(n[0]!=="sgn"&&n[2].length===2){n[2]=n[2].toUpperCase()}if(e.indexOf(n[1].toLowerCase())>-1){n[1]=hl(n[1].toLowerCase())}if(e.indexOf(n[2].toLowerCase())>-1){n[2]=hl(n[2].toLowerCase())}}return n.join("-")}else{return this.options.cleanCode||this.options.lowerCaseLng?i.toLowerCase():i}};t.prototype.isWhitelisted=function t(i,e){if(this.options.load==="languageOnly"||this.options.nonExplicitWhitelist&&!e){i=this.getLanguagePartFromCode(i)}return!this.whitelist||!this.whitelist.length||this.whitelist.indexOf(i)>-1?true:false};t.prototype.getFallbackCodes=function t(i,e){if(!i){return[]}if(typeof i==="string"){i=[i]}if(Object.prototype.toString.apply(i)==="[object Array]"){return i}var n=i[e];if(!n){n=i[this.getScriptPartFromCode(e)]}if(!n){n=i[this.formatLanguageCode(e)]}if(!n){n=i.default}return n||[]};t.prototype.toResolveHierarchy=function t(i,e){var n=this;var r=this.getFallbackCodes(e||this.options.fallbackLng||[],i);var o=[];var s=function t(i){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!i){return}if(n.isWhitelisted(i,e)){o.push(i)}else{n.logger.warn("rejecting non-whitelisted language code: "+i)}};if(typeof i==="string"&&i.indexOf("-")>-1){if(this.options.load!=="languageOnly"){s(this.formatLanguageCode(i),true)}if(this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"){s(this.getScriptPartFromCode(i),true)}if(this.options.load!=="currentOnly"){s(this.getLanguagePartFromCode(i))}}else if(typeof i==="string"){s(this.formatLanguageCode(i))}r.forEach(function(t){if(o.indexOf(t)<0){s(n.formatLanguageCode(t))}});return o};return t}();var ll=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function fl(t,i){if(!(t instanceof i)){throw new TypeError("Cannot call a class as a function")}}var cl=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","es_ar","et","eu","fi","fo","fur","fy","gl","gu","ha","he","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt","pt_br","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21}];var _l={1:function t(i){return Number(i>1)},2:function t(i){return Number(i!=1)},3:function t(i){return 0},4:function t(i){return Number(i%10==1&&i%100!=11?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2)},5:function t(i){return Number(i===0?0:i==1?1:i==2?2:i%100>=3&&i%100<=10?3:i%100>=11?4:5)},6:function t(i){return Number(i==1?0:i>=2&&i<=4?1:2)},7:function t(i){return Number(i==1?0:i%10>=2&&i%10<=4&&(i%100<10||i%100>=20)?1:2)},8:function t(i){return Number(i==1?0:i==2?1:i!=8&&i!=11?2:3)},9:function t(i){return Number(i>=2)},10:function t(i){return Number(i==1?0:i==2?1:i<7?2:i<11?3:4)},11:function t(i){return Number(i==1||i==11?0:i==2||i==12?1:i>2&&i<20?2:3)},12:function t(i){return Number(i%10!=1||i%100==11)},13:function t(i){return Number(i!==0)},14:function t(i){return Number(i==1?0:i==2?1:i==3?2:3)},15:function t(i){return Number(i%10==1&&i%100!=11?0:i%10>=2&&(i%100<10||i%100>=20)?1:2)},16:function t(i){return Number(i%10==1&&i%100!=11?0:i!==0?1:2)},17:function t(i){return Number(i==1||i%10==1?0:1)},18:function t(i){return Number(i==0?0:i==1?1:2)},19:function t(i){return Number(i==1?0:i===0||i%100>1&&i%100<11?1:i%100>10&&i%100<20?2:3)},20:function t(i){return Number(i==1?0:i===0||i%100>0&&i%100<20?1:2)},21:function t(i){return Number(i%100==1?1:i%100==2?2:i%100==3||i%100==4?3:0)}};function pl(){var t,i={};cl.forEach(function(t){t.lngs.forEach(function(e){return i[e]={numbers:t.nr,plurals:_l[t.fc]}})});return i}var dl=function(){function t(i){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};fl(this,t);this.languageUtils=i;this.options=e;this.logger=Du.create("pluralResolver");this.rules=pl()}t.prototype.addRule=function t(i,e){this.rules[i]=e};t.prototype.getRule=function t(i){return this.rules[this.languageUtils.getLanguagePartFromCode(i)]};t.prototype.needsPlural=function t(i){var e=this.getRule(i);return e&&e.numbers.length<=1?false:true};t.prototype.getSuffix=function t(i,e){var n=this;var r=this.getRule(i);if(r){var o=function(){if(r.numbers.length===1){return{v:""}}var t=r.noAbs?r.plurals(e):r.plurals(Math.abs(e));var i=r.numbers[t];if(r.numbers.length===2&&r.numbers[0]===1){if(i===2){i="plural"}else if(i===1){i=""}}var o=function t(){return n.options.prepend&&i.toString()?n.options.prepend+i.toString():i.toString()};if(n.options.compatibilityJSON==="v1"){if(i===1){return{v:""}}if(typeof i==="number"){return{v:"_plural_"+i.toString()}}return{v:o()}}else if(n.options.compatibilityJSON==="v2"||r.numbers.length===2&&r.numbers[0]===1){return{v:o()}}else if(r.numbers.length===2&&r.numbers[0]===1){return{v:o()}}return{v:n.options.prepend&&t.toString()?n.options.prepend+t.toString():t.toString()}}();if((typeof o==="undefined"?"undefined":ll(o))==="object"){return o.v}}else{this.logger.warn("no plural rule found for: "+i);return""}};return t}();function gl(t,i){if(!(t instanceof i)){throw new TypeError("Cannot call a class as a function")}}var vl=function(){function t(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};gl(this,t);this.logger=Du.create("interpolator");this.init(i,true)}t.prototype.init=function t(){var i=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var e=arguments[1];if(e){this.options=i;this.format=i.interpolation&&i.interpolation.format||function(t){return t}}if(!i.interpolation){i.interpolation={escapeValue:true}}var n=i.interpolation;this.escapeValue=n.escapeValue!==undefined?n.escapeValue:true;this.prefix=n.prefix?Ru(n.prefix):n.prefixEscaped||"{{";this.suffix=n.suffix?Ru(n.suffix):n.suffixEscaped||"}}";this.formatSeparator=n.formatSeparator?Ru(n.formatSeparator):n.formatSeparator||",";this.unescapePrefix=n.unescapeSuffix?"":n.unescapePrefix||"-";this.unescapeSuffix=this.unescapePrefix?"":n.unescapeSuffix||"";this.nestingPrefix=n.nestingPrefix?Ru(n.nestingPrefix):n.nestingPrefixEscaped||Ru("$t(");this.nestingSuffix=n.nestingSuffix?Ru(n.nestingSuffix):n.nestingSuffixEscaped||Ru(")");this.resetRegExp()};t.prototype.reset=function t(){if(this.options){this.init(this.options)}};t.prototype.resetRegExp=function t(){var i=this.prefix+"(.+?)"+this.suffix;this.regexp=new RegExp(i,"g");var e=this.prefix+this.unescapePrefix+"(.+?)"+this.unescapeSuffix+this.suffix;this.regexpUnescape=new RegExp(e,"g");var n=this.nestingPrefix+"(.+?)"+this.nestingSuffix;this.nestingRegexp=new RegExp(n,"g")};t.prototype.interpolate=function t(i,e,n){var r=this;var o=this;var s=void 0,a=void 0;function h(t){return t.replace(/\$/g,"$$$$")}var u=function t(i){if(i.indexOf(o.formatSeparator)<0){return Pu(e,i)}var r=i.split(o.formatSeparator);var s=r.shift().trim();var a=r.join(o.formatSeparator).trim();return o.format(Pu(e,s),a,n)};this.resetRegExp();while(s=this.regexpUnescape.exec(i)){var l=u(s[1].trim());i=i.replace(s[0],l);r.regexpUnescape.lastIndex=0}while(s=this.regexp.exec(i)){a=u(s[1].trim());if(typeof a!=="string"){a=Fu(a)}if(!a){r.logger.warn("missed to pass in variable "+s[1]+" for interpolating "+i);a=""}a=r.escapeValue?h(Wu(a)):h(a);i=i.replace(s[0],a);r.regexp.lastIndex=0}return i};t.prototype.nest=function t(i,e){var n=this;var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var o=void 0,s=void 0;var a=JSON.parse(JSON.stringify(r));a.applyPostProcessor=false;function h(t){return t.replace(/\$/g,"$$$$")}function u(t){if(t.indexOf(",")<0){return t}var i=t.split(",");t=i.shift();var e=i.join(",");e=this.interpolate(e,a);try{a=JSON.parse(e)}catch(i){this.logger.error("failed parsing options string in nesting for key "+t,i)}return t}while(o=this.nestingRegexp.exec(i)){s=e(u.call(n,o[1].trim()),a);if(typeof s!=="string"){s=Fu(s)}if(!s){n.logger.warn("missed to pass in variable "+o[1]+" for interpolating "+i);s=""}s=n.escapeValue?h(Wu(s)):h(s);i=i.replace(o[0],s);n.regexp.lastIndex=0}return i};return t}();var yl=Object.assign||function(t){var i=arguments;for(var e=1;e<arguments.length;e++){var n=i[e];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){t[r]=n[r]}}}return t};var ml=function(){function t(t,i){var e=[];var n=true;var r=false;var o=undefined;try{for(var s=t[Symbol.iterator](),a;!(n=(a=s.next()).done);n=true){e.push(a.value);if(i&&e.length===i){break}}}catch(t){r=true;o=t}finally{try{if(!n&&s["return"]){s["return"]()}}finally{if(r){throw o}}}return e}return function(i,e){if(Array.isArray(i)){return i}else if(Symbol.iterator in Object(i)){return t(i,e)}else{throw new TypeError("Invalid attempt to destructure non-iterable instance")}}}();function bl(t,i){var e=Object.getOwnPropertyNames(i);for(var n=0;n<e.length;n++){var r=e[n];var o=Object.getOwnPropertyDescriptor(i,r);if(o&&o.configurable&&t[r]===undefined){Object.defineProperty(t,r,o)}}return t}function xl(t,i){if(!(t instanceof i)){throw new TypeError("Cannot call a class as a function")}}function wl(t,i){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i&&(typeof i==="object"||typeof i==="function")?i:t}function Cl(t,i){if(typeof i!=="function"&&i!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof i)}t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(i){Object.setPrototypeOf?Object.setPrototypeOf(t,i):bl(t,i)}}function Al(t,i){var e=t.indexOf(i);while(e!==-1){t.splice(e,1);e=t.indexOf(i)}}var Sl=function(t){Cl(i,t);function i(e,n,r){var o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};xl(this,i);var s=wl(this,t.call(this));s.backend=e;s.store=n;s.services=r;s.options=o;s.logger=Du.create("backendConnector");s.state={};s.queue=[];s.backend&&s.backend.init&&s.backend.init(r,o.backend,o);return s}i.prototype.queueLoad=function t(i,e,n){var r=this;var o=[],s=[],a=[],h=[];i.forEach(function(t){var i=true;e.forEach(function(e){var n=t+"|"+e;if(r.store.hasResourceBundle(t,e)){r.state[n]=2}else if(r.state[n]<0){}else if(r.state[n]===1){if(s.indexOf(n)<0){s.push(n)}}else{r.state[n]=1;i=false;if(s.indexOf(n)<0){s.push(n)}if(o.indexOf(n)<0){o.push(n)}if(h.indexOf(e)<0){h.push(e)}}});if(!i){a.push(t)}});if(o.length||s.length){this.queue.push({pending:s,loaded:{},errors:[],callback:n})}return{toLoad:o,pending:s,toLoadLanguages:a,toLoadNamespaces:h}};i.prototype.loaded=function t(i,e,n){var r=this;var o=i.split("|"),s=ml(o,2),a=s[0],h=s[1];if(e){this.emit("failedLoading",a,h,e)}if(n){this.store.addResourceBundle(a,h,n)}this.state[i]=e?-1:2;this.queue.forEach(function(t){ju(t.loaded,[a],h);Al(t.pending,i);if(e){t.errors.push(e)}if(t.pending.length===0&&!t.done){t.errors.length?t.callback(t.errors):t.callback();r.emit("loaded",t.loaded);t.done=true}});this.queue=this.queue.filter(function(t){return!t.done})};i.prototype.read=function t(i,e,n,r,o,s){var a=this;if(!r){r=0}if(!o){o=250}if(!i.length){return s(null,{})}this.backend[n](i,e,function(t,h){if(t&&h&&r<5){setTimeout(function(){a.read.call(a,i,e,n,++r,o*2,s)},o);return}s(t,h)})};i.prototype.load=function t(i,e,n){var r=this;if(!this.backend){this.logger.warn("No backend was added via i18next.use. Will not load resources.");return n&&n()}var o=yl({},this.backend.options,this.options.backend);if(typeof i==="string"){i=this.services.languageUtils.toResolveHierarchy(i)}if(typeof e==="string"){e=[e]}var s=this.queueLoad(i,e,n);if(!s.toLoad.length){if(!s.pending.length){n()}return}if(o.allowMultiLoading&&this.backend.readMulti){this.read(s.toLoadLanguages,s.toLoadNamespaces,"readMulti",null,null,function(t,i){if(t){r.logger.warn("loading namespaces "+s.toLoadNamespaces.join(", ")+" for languages "+s.toLoadLanguages.join(", ")+" via multiloading failed",t)}if(!t&&i){r.logger.log("loaded namespaces "+s.toLoadNamespaces.join(", ")+" for languages "+s.toLoadLanguages.join(", ")+" via multiloading",i)}s.toLoad.forEach(function(e){var n=e.split("|"),o=ml(n,2),s=o[0],a=o[1];var h=Pu(i,[s,a]);if(h){r.loaded(e,t,h)}else{var u="loading namespace "+a+" for language "+s+" via multiloading failed";r.loaded(e,u);r.logger.error(u)}})})}else{(function(){var t=function t(i){var e=this;var n=i.split("|"),r=ml(n,2),o=r[0],s=r[1];this.read(o,s,"read",null,null,function(t,n){if(t){e.logger.warn("loading namespace "+s+" for language "+o+" failed",t)}if(!t&&n){e.logger.log("loaded namespace "+s+" for language "+o,n)}e.loaded(i,t,n)})};s.toLoad.forEach(function(i){t.call(r,i)})})()}};i.prototype.reload=function t(i,e){var n=this;if(!this.backend){this.logger.warn("No backend was added via i18next.use. Will not load resources.")}var r=yl({},this.backend.options,this.options.backend);if(typeof i==="string"){i=this.services.languageUtils.toResolveHierarchy(i)}if(typeof e==="string"){e=[e]}if(r.allowMultiLoading&&this.backend.readMulti){this.read(i,e,"readMulti",null,null,function(t,r){if(t){n.logger.warn("reloading namespaces "+e.join(", ")+" for languages "+i.join(", ")+" via multiloading failed",t)}if(!t&&r){n.logger.log("reloaded namespaces "+e.join(", ")+" for languages "+i.join(", ")+" via multiloading",r)}i.forEach(function(i){e.forEach(function(e){var o=Pu(r,[i,e]);if(o){n.loaded(i+"|"+e,t,o)}else{var s="reloading namespace "+e+" for language "+i+" via multiloading failed";n.loaded(i+"|"+e,s);n.logger.error(s)}})})})}else{(function(){var t=function t(i){var e=this;var n=i.split("|"),r=ml(n,2),o=r[0],s=r[1];this.read(o,s,"read",null,null,function(t,n){if(t){e.logger.warn("reloading namespace "+s+" for language "+o+" failed",t)}if(!t&&n){e.logger.log("reloaded namespace "+s+" for language "+o,n)}e.loaded(i,t,n)})};i.forEach(function(i){e.forEach(function(e){t.call(n,i+"|"+e)})})})()}};i.prototype.saveMissing=function t(i,e,n,r){if(this.backend&&this.backend.create){this.backend.create(i,e,n,r)}if(!i||!i[0]){return}this.store.addResource(i[0],e,n,r)};return i}(zu);var kl=Object.assign||function(t){var i=arguments;for(var e=1;e<arguments.length;e++){var n=i[e];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){t[r]=n[r]}}}return t};function El(t,i){var e=Object.getOwnPropertyNames(i);for(var n=0;n<e.length;n++){var r=e[n];var o=Object.getOwnPropertyDescriptor(i,r);if(o&&o.configurable&&t[r]===undefined){Object.defineProperty(t,r,o)}}return t}function Bl(t,i){if(!(t instanceof i)){throw new TypeError("Cannot call a class as a function")}}function Dl(t,i){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i&&(typeof i==="object"||typeof i==="function")?i:t}function Ml(t,i){if(typeof i!=="function"&&i!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof i)}t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(i){Object.setPrototypeOf?Object.setPrototypeOf(t,i):El(t,i)}}var zl=function(t){Ml(i,t);function i(e,n,r){var o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};Bl(this,i);var s=Dl(this,t.call(this));s.cache=e;s.store=n;s.services=r;s.options=o;s.logger=Du.create("cacheConnector");s.cache&&s.cache.init&&s.cache.init(r,o.cache,o);return s}i.prototype.load=function t(i,e,n){var r=this;if(!this.cache){return n&&n()}var o=kl({},this.cache.options,this.options.cache);if(typeof i==="string"){i=this.services.languageUtils.toResolveHierarchy(i)}if(typeof e==="string"){e=[e]}if(o.enabled){this.cache.load(i,function(t,e){if(t){r.logger.error("loading languages "+i.join(", ")+" from cache failed",t)}if(e){for(var o in e){for(var s in e[o]){if(s==="i18nStamp"){continue}var a=e[o][s];if(a){r.store.addResourceBundle(o,s,a)}}}}if(n){n()}})}else{if(n){n()}}};i.prototype.save=function t(){if(this.cache&&this.options.cache&&this.options.cache.enabled){this.cache.save(this.store.data)}};return i}(zu);function Fl(){return{debug:false,initImmediate:true,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:false,whitelist:false,nonExplicitWhitelist:false,load:"all",preload:false,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",saveMissing:false,saveMissingTo:"fallback",missingKeyHandler:false,postProcess:false,returnNull:true,returnEmptyString:true,returnObjects:false,joinArrays:false,returnedObjectHandler:function t(){},parseMissingKeyHandler:false,appendNamespaceToMissingKey:false,overloadTranslationOptionHandler:function t(i){return{defaultValue:i[1]}},interpolation:{escapeValue:true,format:function t(i,e,n){return i},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",defaultVariables:undefined}}}function Ol(t){if(typeof t.ns==="string"){t.ns=[t.ns]}if(typeof t.fallbackLng==="string"){t.fallbackLng=[t.fallbackLng]}if(typeof t.fallbackNS==="string"){t.fallbackNS=[t.fallbackNS]}if(t.whitelist&&t.whitelist.indexOf("cimode")<0){t.whitelist.push("cimode")}return t}var Nl=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var Tl=Object.assign||function(t){var i=arguments;for(var e=1;e<arguments.length;e++){var n=i[e];for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){t[r]=n[r]}}}return t};function jl(t,i){var e=Object.getOwnPropertyNames(i);for(var n=0;n<e.length;n++){var r=e[n];var o=Object.getOwnPropertyDescriptor(i,r);if(o&&o.configurable&&t[r]===undefined){Object.defineProperty(t,r,o)}}return t}function Pl(t,i){if(!(t instanceof i)){throw new TypeError("Cannot call a class as a function")}}function Hl(t,i){if(!t){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return i&&(typeof i==="object"||typeof i==="function")?i:t}function Rl(t,i){if(typeof i!=="function"&&i!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof i)}t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:false,writable:true,configurable:true}});if(i){Object.setPrototypeOf?Object.setPrototypeOf(t,i):jl(t,i)}}var Ll=function(t){Rl(i,t);function i(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=arguments[1];Pl(this,i);var r=Hl(this,t.call(this));r.options=Ol(e);r.services={};r.logger=Du;r.modules={};if(n&&!r.isInitialized){r.init(e,n)}return r}i.prototype.init=function t(i,e){var n=this;if(typeof i==="function"){e=i;i={}}if(!i){i={}}if(i.compatibilityAPI==="v1"){this.options=Tl({},Fl(),Ol($u(i)),{})}else if(i.compatibilityJSON==="v1"){this.options=Tl({},Fl(),Ol(Ku(i)),{})}else{this.options=Tl({},Fl(),this.options,Ol(i))}if(!e){e=function t(){}}function r(t){if(!t){return}if(typeof t==="function"){return new t}return t}if(!this.options.isClone){if(this.modules.logger){Du.init(r(this.modules.logger),this.options)}else{Du.init(null,this.options)}var o=new ul(this.options);this.store=new Xu(this.options.resources,this.options);var s=this.services;s.logger=Du;s.resourceStore=this.store;s.resourceStore.on("added removed",function(t,i){s.cacheConnector.save()});s.languageUtils=o;s.pluralResolver=new dl(o,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON});s.interpolator=new vl(this.options);s.backendConnector=new Sl(r(this.modules.backend),s.resourceStore,s,this.options);s.backendConnector.on("*",function(t){var i=arguments;for(var e=arguments.length,r=Array(e>1?e-1:0),o=1;o<e;o++){r[o-1]=i[o]}n.emit.apply(n,[t].concat(r))});s.backendConnector.on("loaded",function(t){s.cacheConnector.save()});s.cacheConnector=new zl(r(this.modules.cache),s.resourceStore,s,this.options);s.cacheConnector.on("*",function(t){var i=arguments;for(var e=arguments.length,r=Array(e>1?e-1:0),o=1;o<e;o++){r[o-1]=i[o]}n.emit.apply(n,[t].concat(r))});if(this.modules.languageDetector){s.languageDetector=r(this.modules.languageDetector);s.languageDetector.init(s,this.options.detection,this.options)}this.translator=new sl(this.services,this.options);this.translator.on("*",function(t){var i=arguments;for(var e=arguments.length,r=Array(e>1?e-1:0),o=1;o<e;o++){r[o-1]=i[o]}n.emit.apply(n,[t].concat(r))})}var a=["getResource","addResource","addResources","addResourceBundle","removeResourceBundle","hasResourceBundle","getResourceBundle"];a.forEach(function(t){n[t]=function(){return this.store[t].apply(this.store,arguments)}});if(this.options.compatibilityAPI==="v1"){Qu(this)}var h=function t(){n.changeLanguage(n.options.lng,function(t,i){n.emit("initialized",n.options);n.logger.log("initialized",n.options);e(t,i)})};if(this.options.resources||!this.options.initImmediate){h()}else{setTimeout(h,0)}return this};i.prototype.loadResources=function t(i){var e=this;if(!i){i=function t(){}}if(!this.options.resources){var n=function(){if(e.language&&e.language.toLowerCase()==="cimode"){return{v:i()}}var t=[];var n=function i(n){var r=e.services.languageUtils.toResolveHierarchy(n);r.forEach(function(i){if(t.indexOf(i)<0){t.push(i)}})};n(e.language);if(e.options.preload){e.options.preload.forEach(function(t){n(t)})}e.services.cacheConnector.load(t,e.options.ns,function(){e.services.backendConnector.load(t,e.options.ns,i)})}();if((typeof n==="undefined"?"undefined":Nl(n))==="object"){return n.v}}else{i(null)}};i.prototype.reloadResources=function t(i,e){if(!i){i=this.languages}if(!e){e=this.options.ns}this.services.backendConnector.reload(i,e)};i.prototype.use=function t(i){if(i.type==="backend"){this.modules.backend=i}if(i.type==="cache"){this.modules.cache=i}if(i.type==="logger"||i.log&&i.warn&&i.warn){this.modules.logger=i}if(i.type==="languageDetector"){this.modules.languageDetector=i}if(i.type==="postProcessor"){Vu.addPostProcessor(i)}return this};i.prototype.changeLanguage=function t(i,e){var n=this;var r=function t(r){if(i){n.emit("languageChanged",i);n.logger.log("languageChanged",i)}if(e){e(r,function(){var t=arguments;for(var i=arguments.length,e=Array(i),r=0;r<i;r++){e[r]=t[r]}return n.t.apply(n,e)})}};if(!i&&this.services.languageDetector){i=this.services.languageDetector.detect()}if(i){this.language=i;this.languages=this.services.languageUtils.toResolveHierarchy(i);this.translator.changeLanguage(i);if(this.services.languageDetector){this.services.languageDetector.cacheUserLanguage(i)}}this.loadResources(function(t){r(t)})};i.prototype.getFixedT=function t(i,e){var n=this;var r=function t(i,e){e=e||{};e.lng=e.lng||t.lng;e.ns=e.ns||t.ns;return n.t(i,e)};r.lng=i;r.ns=e;return r};i.prototype.t=function t(){return this.translator&&this.translator.translate.apply(this.translator,arguments)};i.prototype.exists=function t(){return this.translator&&this.translator.exists.apply(this.translator,arguments)};i.prototype.setDefaultNamespace=function t(i){this.options.defaultNS=i};i.prototype.loadNamespaces=function t(i,e){var n=this;if(!this.options.ns){return e&&e()}if(typeof i==="string"){i=[i]}i.forEach(function(t){if(n.options.ns.indexOf(t)<0){n.options.ns.push(t)}});this.loadResources(e)};i.prototype.loadLanguages=function t(i,e){if(typeof i==="string"){i=[i]}var n=this.options.preload||[];var r=i.filter(function(t){return n.indexOf(t)<0});if(!r.length){return e()}this.options.preload=n.concat(r);this.loadResources(e)};i.prototype.dir=function t(i){if(!i){i=this.language}if(!i){return"rtl"}var e=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"];return e.indexOf(this.services.languageUtils.getLanguagePartFromCode(i))>=0?"rtl":"ltr"};i.prototype.createInstance=function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=arguments[1];return new i(e,n)};i.prototype.cloneInstance=function t(){var e=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var r=arguments[1];var o=new i(Tl({},n,this.options,{isClone:true}),r);var s=["store","services","language"];s.forEach(function(t){o[t]=e[t]});o.translator=new sl(o.services,o.options);o.translator.on("*",function(t){var i=arguments;for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++){n[r-1]=i[r]}o.emit.apply(o,[t].concat(n))});return o};return i}(zu);var Wl=new Ll;var Gl={lowercase:["a","an","and","as","at","but","by","for","from","if","in","into","near","nor","of","on","onto","or","per","that","the","to","with","via","vs","vs."],uppercase:["CEO","CFO","CNC","COO","CPU","GDP","HVAC","ID","IT","R&D","TV","UI"]};var Ul={array:Gl};var Il={lowercase:["una","y","en","pero","en","de","o","el","la","los","las","para","a","con"],uppercase:["CEO","CFO","CNC","COO","CPU","PIB","HVAC","ID","TI","I&D","TV","UI"]};var ql={array:Il};var Yl=Wl.init({fallbackLng:"en-US",initImmediate:false,resources:{"en-US":{translation:Ul},"es-ES":{translation:ql}}});function Xl(t,i){if(i===void 0)i={};var e=new Set(A(t.map(function(t){return R(t)}))),n={};e.forEach(function(e){var r=t.map(function(t){return t[e]});var o;if(i[e]){o=i[e](r)}else{var s=r.map(function(t){return t||t===false?t.constructor:t}).filter(function(t){return t!==void 0});if(!s.length){o=undefined}else if(s.indexOf(Array)>=0){o=A(r.map(function(t){return t instanceof Array?t:[t]}));o=Array.from(new Set(o));if(o.length===1){o=o[0]}}else if(s.indexOf(String)>=0){o=Array.from(new Set(r));if(o.length===1){o=o[0]}}else if(s.indexOf(Number)>=0){o=k(r)}else if(s.indexOf(Object)>=0){o=Xl(r.filter(function(t){return t}))}else{o=Array.from(new Set(r.filter(function(t){return t!==void 0})));if(o.length===1){o=o[0]}}}n[e]=o});return n}var Vl=function(){if("-webkit-transform"in document.body.style){return"-webkit-"}else if("-moz-transform"in document.body.style){return"-moz-"}else if("-ms-transform"in document.body.style){return"-ms-"}else if("-o-transform"in document.body.style){return"-o-"}else{return""}};var Jl=function(t,i){if(i===void 0)i={};for(var e in i){if({}.hasOwnProperty.call(i,e)){t.style(e,i[e])}}};var $l=function(t,i){if(!(t instanceof Array)){t=[t.x,t.y]}if(!(i instanceof Array)){i=[i.x,i.y]}var e=Math.abs(t[0]-i[0]);var n=Math.abs(t[1]-i[1]);return Math.sqrt(e*e+n*n)};var Kl=function t(){this._duration=600;this._height=gu("height");this._id=gu("id");this._pointerEvents=Cu("auto");this._select;this._url=gu("url");this._width=gu("width");this._x=gu("x",0);this._y=gu("y",0)};Kl.prototype.render=function t(i){var e=this;if(this._select===void 0){
this.select(Zs("body").append("svg").style("width",window.innerWidth+"px").style("height",window.innerHeight+"px").style("display","block").node())}var n=this._select.selectAll(".d3plus-Image").data(this._data,this._id);var r=n.enter().append("image").attr("class","d3plus-Image").attr("opacity",0).attr("width",0).attr("height",0).attr("x",function(t,i){return e._x(t,i)+e._width(t,i)/2}).attr("y",function(t,i){return e._y(t,i)+e._height(t,i)/2});var o=Ph().duration(this._duration),s=this,a=r.merge(n);a.attr("xlink:href",this._url).style("pointer-events",this._pointerEvents).transition(o).attr("opacity",1).attr("width",function(t,i){return e._width(t,i)}).attr("height",function(t,i){return e._height(t,i)}).attr("x",function(t,i){return e._x(t,i)}).attr("y",function(t,i){return e._y(t,i)}).each(function(t,i){var e=Zs(this),n=s._url(t,i);var r=n.indexOf("http://")===0||n.indexOf("https://")===0;if(!r||n.indexOf(window.location.hostname)===0){var o=new Kl;o.src=n;o.crossOrigin="Anonymous";o.onload=function(){var t=document.createElement("canvas");t.width=this.width;t.height=this.height;var i=t.getContext("2d");i.drawImage(this,0,0);e.attr("xlink:href",t.toDataURL("image/png"))}}});n.exit().transition(o).attr("width",function(t,i){return e._width(t,i)}).attr("height",function(t,i){return e._height(t,i)}).attr("x",function(t,i){return e._x(t,i)}).attr("y",function(t,i){return e._y(t,i)}).attr("opacity",0).remove();if(i){setTimeout(i,this._duration+100)}return this};Kl.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};Kl.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};Kl.prototype.height=function t(i){return arguments.length?(this._height=typeof i==="function"?i:Cu(i),this):this._height};Kl.prototype.id=function t(i){return arguments.length?(this._id=i,this):this._id};Kl.prototype.pointerEvents=function t(i){return arguments.length?(this._pointerEvents=typeof i==="function"?i:Cu(i),this):this._pointerEvents};Kl.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};Kl.prototype.url=function t(i){return arguments.length?(this._url=i,this):this._url};Kl.prototype.width=function t(i){return arguments.length?(this._width=typeof i==="function"?i:Cu(i),this):this._width};Kl.prototype.x=function t(i){return arguments.length?(this._x=typeof i==="function"?i:Cu(i),this):this._x};Kl.prototype.y=function t(i){return arguments.length?(this._y=typeof i==="function"?i:Cu(i),this):this._y};var Zl=function(t,i,e,n){if(e===void 0)e=1;if(n===void 0)n=1;t=mt(t);i=mt(i);var r=Math.abs(i.h*n-t.h*e);if(r>180){r-=360}var o=(Math.min(t.h,i.h)+r/2)%360;var s=t.l+(i.l*n-t.l*e)/2,a=t.s+(i.s*n-t.s*e)/2;if(o<0){o+=360}return mt("hsl("+o+","+a*100+"%,"+s*100+"%)").toString()};var Ql={dark:"#444444",light:"#f7f7f7",missing:"#cccccc",off:"#b22200",on:"#224f20",scale:I().range(["#b22200","#282f6b","#eace3f","#b35c1e","#224f20","#5f487c","#759143","#419391","#993c88","#e89c89","#ffee8d","#afd5e8","#f7ba77","#a5c697","#c5b5e5","#d1d392","#bbefd0","#e099cf"])};function tf(t,i){if(i===void 0)i={};return t in i?i[t]:t in Ql?Ql[t]:Ql.missing}var ef=function(t,i){if(i===void 0)i={};if([null,void 0].indexOf(t)>=0){return tf("missing",i)}else if(t===true){return tf("on",i)}else if(t===false){return tf("off",i)}var e=ft(t);if(!e){return tf("scale",i)(t)}return t.toString()};var nf=function(t,i){if(i===void 0)i={};t=dt(t);var e=(t.r*299+t.g*587+t.b*114)/1e3;return e>=128?tf("dark",i):tf("light",i)};var rf=function(t){t=mt(t);if(t.l>.45){if(t.s>.8){t.s=.8}t.l=.45}return t.toString()};var of=function(t,i){if(i===void 0)i=.5;t=mt(t);i*=1-t.l;t.l+=i;t.s-=i;return t.toString()};var sf=function(t,i,e,n){if(e===void 0)e=1;if(n===void 0)n=1;t=mt(t);i=mt(i);var r=i.h*n-t.h*e;if(Math.abs(r)>180){r-=360}var o=(t.h-r)%360;var s=t.l-(i.l*n-t.l*e)/2,a=t.s-(i.s*n-t.s*e)/2;if(o<0){o+=360}return mt("hsl("+o+","+a*100+"%,"+s*100+"%)").toString()};var af=function(t){if(t===void 0){t="undefined"}else if(!(typeof t==="string"||t instanceof String)){t=JSON.stringify(t)}return t};var hf=[[/[\300-\305]/g,"A"],[/[\340-\345]/g,"a"],[/[\306]/g,"AE"],[/[\346]/g,"ae"],[/[\337]/g,"B"],[/[\307]/g,"C"],[/[\347]/g,"c"],[/[\320\336\376]/g,"D"],[/[\360]/g,"d"],[/[\310-\313]/g,"E"],[/[\350-\353]/g,"e"],[/[\314-\317]/g,"I"],[/[\354-\357]/g,"i"],[/[\321]/g,"N"],[/[\361]/g,"n"],[/[\322-\326\330]/g,"O"],[/[\362-\366\370]/g,"o"],[/[\331-\334]/g,"U"],[/[\371-\374]/g,"u"],[/[\327]/g,"x"],[/[\335]/g,"Y"],[/[\375\377]/g,"y"]];var uf=function(t){return(""+t).replace(/[^A-Za-z0-9\-_]/g,function(t){if(t===" "){return"-"}var i=false;for(var e=0;e<hf.length;e++){if(new RegExp(hf[e][0]).test(t)){i=hf[e][1];break}}return i||""})};var lf=["u0903","u093B","u093E","u093F","u0940","u0949","u094A","u094B","u094C","u094E","u094F","u0982","u0983","u09BE","u09BF","u09C0","u09C7","u09C8","u09CB","u09CC","u09D7","u0A03","u0A3E","u0A3F","u0A40","u0A83","u0ABE","u0ABF","u0AC0","u0AC9","u0ACB","u0ACC","u0B02","u0B03","u0B3E","u0B40","u0B47","u0B48","u0B4B","u0B4C","u0B57","u0BBE","u0BBF","u0BC1","u0BC2","u0BC6","u0BC7","u0BC8","u0BCA","u0BCB","u0BCC","u0BD7","u0C01","u0C02","u0C03","u0C41","u0C42","u0C43","u0C44","u0C82","u0C83","u0CBE","u0CC0","u0CC1","u0CC2","u0CC3","u0CC4","u0CC7","u0CC8","u0CCA","u0CCB","u0CD5","u0CD6","u0D02","u0D03","u0D3E","u0D3F","u0D40","u0D46","u0D47","u0D48","u0D4A","u0D4B","u0D4C","u0D57","u0D82","u0D83","u0DCF","u0DD0","u0DD1","u0DD8","u0DD9","u0DDA","u0DDB","u0DDC","u0DDD","u0DDE","u0DDF","u0DF2","u0DF3","u0F3E","u0F3F","u0F7F","u102B","u102C","u1031","u1038","u103B","u103C","u1056","u1057","u1062","u1063","u1064","u1067","u1068","u1069","u106A","u106B","u106C","u106D","u1083","u1084","u1087","u1088","u1089","u108A","u108B","u108C","u108F","u109A","u109B","u109C","u17B6","u17BE","u17BF","u17C0","u17C1","u17C2","u17C3","u17C4","u17C5","u17C7","u17C8","u1923","u1924","u1925","u1926","u1929","u192A","u192B","u1930","u1931","u1933","u1934","u1935","u1936","u1937","u1938","u1A19","u1A1A","u1A55","u1A57","u1A61","u1A63","u1A64","u1A6D","u1A6E","u1A6F","u1A70","u1A71","u1A72","u1B04","u1B35","u1B3B","u1B3D","u1B3E","u1B3F","u1B40","u1B41","u1B43","u1B44","u1B82","u1BA1","u1BA6","u1BA7","u1BAA","u1BE7","u1BEA","u1BEB","u1BEC","u1BEE","u1BF2","u1BF3","u1C24","u1C25","u1C26","u1C27","u1C28","u1C29","u1C2A","u1C2B","u1C34","u1C35","u1CE1","u1CF2","u1CF3","u302E","u302F","uA823","uA824","uA827","uA880","uA881","uA8B4","uA8B5","uA8B6","uA8B7","uA8B8","uA8B9","uA8BA","uA8BB","uA8BC","uA8BD","uA8BE","uA8BF","uA8C0","uA8C1","uA8C2","uA8C3","uA952","uA953","uA983","uA9B4","uA9B5","uA9BA","uA9BB","uA9BD","uA9BE","uA9BF","uA9C0","uAA2F","uAA30","uAA33","uAA34","uAA4D","uAA7B","uAA7D","uAAEB","uAAEE","uAAEF","uAAF5","uABE3","uABE4","uABE6","uABE7","uABE9","uABEA","uABEC"];var ff=["u0300","u0301","u0302","u0303","u0304","u0305","u0306","u0307","u0308","u0309","u030A","u030B","u030C","u030D","u030E","u030F","u0310","u0311","u0312","u0313","u0314","u0315","u0316","u0317","u0318","u0319","u031A","u031B","u031C","u031D","u031E","u031F","u0320","u0321","u0322","u0323","u0324","u0325","u0326","u0327","u0328","u0329","u032A","u032B","u032C","u032D","u032E","u032F","u0330","u0331","u0332","u0333","u0334","u0335","u0336","u0337","u0338","u0339","u033A","u033B","u033C","u033D","u033E","u033F","u0340","u0341","u0342","u0343","u0344","u0345","u0346","u0347","u0348","u0349","u034A","u034B","u034C","u034D","u034E","u034F","u0350","u0351","u0352","u0353","u0354","u0355","u0356","u0357","u0358","u0359","u035A","u035B","u035C","u035D","u035E","u035F","u0360","u0361","u0362","u0363","u0364","u0365","u0366","u0367","u0368","u0369","u036A","u036B","u036C","u036D","u036E","u036F","u0483","u0484","u0485","u0486","u0487","u0591","u0592","u0593","u0594","u0595","u0596","u0597","u0598","u0599","u059A","u059B","u059C","u059D","u059E","u059F","u05A0","u05A1","u05A2","u05A3","u05A4","u05A5","u05A6","u05A7","u05A8","u05A9","u05AA","u05AB","u05AC","u05AD","u05AE","u05AF","u05B0","u05B1","u05B2","u05B3","u05B4","u05B5","u05B6","u05B7","u05B8","u05B9","u05BA","u05BB","u05BC","u05BD","u05BF","u05C1","u05C2","u05C4","u05C5","u05C7","u0610","u0611","u0612","u0613","u0614","u0615","u0616","u0617","u0618","u0619","u061A","u064B","u064C","u064D","u064E","u064F","u0650","u0651","u0652","u0653","u0654","u0655","u0656","u0657","u0658","u0659","u065A","u065B","u065C","u065D","u065E","u065F","u0670","u06D6","u06D7","u06D8","u06D9","u06DA","u06DB","u06DC","u06DF","u06E0","u06E1","u06E2","u06E3","u06E4","u06E7","u06E8","u06EA","u06EB","u06EC","u06ED","u0711","u0730","u0731","u0732","u0733","u0734","u0735","u0736","u0737","u0738","u0739","u073A","u073B","u073C","u073D","u073E","u073F","u0740","u0741","u0742","u0743","u0744","u0745","u0746","u0747","u0748","u0749","u074A","u07A6","u07A7","u07A8","u07A9","u07AA","u07AB","u07AC","u07AD","u07AE","u07AF","u07B0","u07EB","u07EC","u07ED","u07EE","u07EF","u07F0","u07F1","u07F2","u07F3","u0816","u0817","u0818","u0819","u081B","u081C","u081D","u081E","u081F","u0820","u0821","u0822","u0823","u0825","u0826","u0827","u0829","u082A","u082B","u082C","u082D","u0859","u085A","u085B","u08E3","u08E4","u08E5","u08E6","u08E7","u08E8","u08E9","u08EA","u08EB","u08EC","u08ED","u08EE","u08EF","u08F0","u08F1","u08F2","u08F3","u08F4","u08F5","u08F6","u08F7","u08F8","u08F9","u08FA","u08FB","u08FC","u08FD","u08FE","u08FF","u0900","u0901","u0902","u093A","u093C","u0941","u0942","u0943","u0944","u0945","u0946","u0947","u0948","u094D","u0951","u0952","u0953","u0954","u0955","u0956","u0957","u0962","u0963","u0981","u09BC","u09C1","u09C2","u09C3","u09C4","u09CD","u09E2","u09E3","u0A01","u0A02","u0A3C","u0A41","u0A42","u0A47","u0A48","u0A4B","u0A4C","u0A4D","u0A51","u0A70","u0A71","u0A75","u0A81","u0A82","u0ABC","u0AC1","u0AC2","u0AC3","u0AC4","u0AC5","u0AC7","u0AC8","u0ACD","u0AE2","u0AE3","u0B01","u0B3C","u0B3F","u0B41","u0B42","u0B43","u0B44","u0B4D","u0B56","u0B62","u0B63","u0B82","u0BC0","u0BCD","u0C00","u0C3E","u0C3F","u0C40","u0C46","u0C47","u0C48","u0C4A","u0C4B","u0C4C","u0C4D","u0C55","u0C56","u0C62","u0C63","u0C81","u0CBC","u0CBF","u0CC6","u0CCC","u0CCD","u0CE2","u0CE3","u0D01","u0D41","u0D42","u0D43","u0D44","u0D4D","u0D62","u0D63","u0DCA","u0DD2","u0DD3","u0DD4","u0DD6","u0E31","u0E34","u0E35","u0E36","u0E37","u0E38","u0E39","u0E3A","u0E47","u0E48","u0E49","u0E4A","u0E4B","u0E4C","u0E4D","u0E4E","u0EB1","u0EB4","u0EB5","u0EB6","u0EB7","u0EB8","u0EB9","u0EBB","u0EBC","u0EC8","u0EC9","u0ECA","u0ECB","u0ECC","u0ECD","u0F18","u0F19","u0F35","u0F37","u0F39","u0F71","u0F72","u0F73","u0F74","u0F75","u0F76","u0F77","u0F78","u0F79","u0F7A","u0F7B","u0F7C","u0F7D","u0F7E","u0F80","u0F81","u0F82","u0F83","u0F84","u0F86","u0F87","u0F8D","u0F8E","u0F8F","u0F90","u0F91","u0F92","u0F93","u0F94","u0F95","u0F96","u0F97","u0F99","u0F9A","u0F9B","u0F9C","u0F9D","u0F9E","u0F9F","u0FA0","u0FA1","u0FA2","u0FA3","u0FA4","u0FA5","u0FA6","u0FA7","u0FA8","u0FA9","u0FAA","u0FAB","u0FAC","u0FAD","u0FAE","u0FAF","u0FB0","u0FB1","u0FB2","u0FB3","u0FB4","u0FB5","u0FB6","u0FB7","u0FB8","u0FB9","u0FBA","u0FBB","u0FBC","u0FC6","u102D","u102E","u102F","u1030","u1032","u1033","u1034","u1035","u1036","u1037","u1039","u103A","u103D","u103E","u1058","u1059","u105E","u105F","u1060","u1071","u1072","u1073","u1074","u1082","u1085","u1086","u108D","u109D","u135D","u135E","u135F","u1712","u1713","u1714","u1732","u1733","u1734","u1752","u1753","u1772","u1773","u17B4","u17B5","u17B7","u17B8","u17B9","u17BA","u17BB","u17BC","u17BD","u17C6","u17C9","u17CA","u17CB","u17CC","u17CD","u17CE","u17CF","u17D0","u17D1","u17D2","u17D3","u17DD","u180B","u180C","u180D","u18A9","u1920","u1921","u1922","u1927","u1928","u1932","u1939","u193A","u193B","u1A17","u1A18","u1A1B","u1A56","u1A58","u1A59","u1A5A","u1A5B","u1A5C","u1A5D","u1A5E","u1A60","u1A62","u1A65","u1A66","u1A67","u1A68","u1A69","u1A6A","u1A6B","u1A6C","u1A73","u1A74","u1A75","u1A76","u1A77","u1A78","u1A79","u1A7A","u1A7B","u1A7C","u1A7F","u1AB0","u1AB1","u1AB2","u1AB3","u1AB4","u1AB5","u1AB6","u1AB7","u1AB8","u1AB9","u1ABA","u1ABB","u1ABC","u1ABD","u1B00","u1B01","u1B02","u1B03","u1B34","u1B36","u1B37","u1B38","u1B39","u1B3A","u1B3C","u1B42","u1B6B","u1B6C","u1B6D","u1B6E","u1B6F","u1B70","u1B71","u1B72","u1B73","u1B80","u1B81","u1BA2","u1BA3","u1BA4","u1BA5","u1BA8","u1BA9","u1BAB","u1BAC","u1BAD","u1BE6","u1BE8","u1BE9","u1BED","u1BEF","u1BF0","u1BF1","u1C2C","u1C2D","u1C2E","u1C2F","u1C30","u1C31","u1C32","u1C33","u1C36","u1C37","u1CD0","u1CD1","u1CD2","u1CD4","u1CD5","u1CD6","u1CD7","u1CD8","u1CD9","u1CDA","u1CDB","u1CDC","u1CDD","u1CDE","u1CDF","u1CE0","u1CE2","u1CE3","u1CE4","u1CE5","u1CE6","u1CE7","u1CE8","u1CED","u1CF4","u1CF8","u1CF9","u1DC0","u1DC1","u1DC2","u1DC3","u1DC4","u1DC5","u1DC6","u1DC7","u1DC8","u1DC9","u1DCA","u1DCB","u1DCC","u1DCD","u1DCE","u1DCF","u1DD0","u1DD1","u1DD2","u1DD3","u1DD4","u1DD5","u1DD6","u1DD7","u1DD8","u1DD9","u1DDA","u1DDB","u1DDC","u1DDD","u1DDE","u1DDF","u1DE0","u1DE1","u1DE2","u1DE3","u1DE4","u1DE5","u1DE6","u1DE7","u1DE8","u1DE9","u1DEA","u1DEB","u1DEC","u1DED","u1DEE","u1DEF","u1DF0","u1DF1","u1DF2","u1DF3","u1DF4","u1DF5","u1DFC","u1DFD","u1DFE","u1DFF","u20D0","u20D1","u20D2","u20D3","u20D4","u20D5","u20D6","u20D7","u20D8","u20D9","u20DA","u20DB","u20DC","u20E1","u20E5","u20E6","u20E7","u20E8","u20E9","u20EA","u20EB","u20EC","u20ED","u20EE","u20EF","u20F0","u2CEF","u2CF0","u2CF1","u2D7F","u2DE0","u2DE1","u2DE2","u2DE3","u2DE4","u2DE5","u2DE6","u2DE7","u2DE8","u2DE9","u2DEA","u2DEB","u2DEC","u2DED","u2DEE","u2DEF","u2DF0","u2DF1","u2DF2","u2DF3","u2DF4","u2DF5","u2DF6","u2DF7","u2DF8","u2DF9","u2DFA","u2DFB","u2DFC","u2DFD","u2DFE","u2DFF","u302A","u302B","u302C","u302D","u3099","u309A","uA66F","uA674","uA675","uA676","uA677","uA678","uA679","uA67A","uA67B","uA67C","uA67D","uA69E","uA69F","uA6F0","uA6F1","uA802","uA806","uA80B","uA825","uA826","uA8C4","uA8E0","uA8E1","uA8E2","uA8E3","uA8E4","uA8E5","uA8E6","uA8E7","uA8E8","uA8E9","uA8EA","uA8EB","uA8EC","uA8ED","uA8EE","uA8EF","uA8F0","uA8F1","uA926","uA927","uA928","uA929","uA92A","uA92B","uA92C","uA92D","uA947","uA948","uA949","uA94A","uA94B","uA94C","uA94D","uA94E","uA94F","uA950","uA951","uA980","uA981","uA982","uA9B3","uA9B6","uA9B7","uA9B8","uA9B9","uA9BC","uA9E5","uAA29","uAA2A","uAA2B","uAA2C","uAA2D","uAA2E","uAA31","uAA32","uAA35","uAA36","uAA43","uAA4C","uAA7C","uAAB0","uAAB2","uAAB3","uAAB4","uAAB7","uAAB8","uAABE","uAABF","uAAC1","uAAEC","uAAED","uAAF6","uABE5","uABE8","uABED","uFB1E","uFE00","uFE01","uFE02","uFE03","uFE04","uFE05","uFE06","uFE07","uFE08","uFE09","uFE0A","uFE0B","uFE0C","uFE0D","uFE0E","uFE0F","uFE20","uFE21","uFE22","uFE23","uFE24","uFE25","uFE26","uFE27","uFE28","uFE29","uFE2A","uFE2B","uFE2C","uFE2D","uFE2E","uFE2F"];var cf=lf.concat(ff);var _f=["-","/",";",":","&","u0E2F","u0EAF","u0EC6","u0ECC","u104A","u104B","u104C","u104D","u104E","u104F","u2013","u2014","u2027","u3000","u3001","u3002","uFF0C","uFF5E"];var pf=["'","<","(","{","[","u00AB","u300A","u3008"];var df=["'",">",")","}","]",".","!","?","u00BB","u300B","u3009"].concat(_f);var gf="က-ဪဿ-၉ၐ-ၕ";var vf="぀-ゟ\n                       ゠-ヿ\n                       ＀-＋\n                       －-｝\n                       ｟-ﾟ\n                       㐀-䶿";var yf="㐀-龿";var mf="ກ-ຮະ-ໄ່-໋ໍ-ໝ";var bf=gf+yf+mf;var xf=new RegExp("(\\"+_f.join("|\\")+")*[^\\s|\\"+_f.join("|\\")+"]+(\\"+_f.join("|\\")+")*","g");var wf=new RegExp("["+vf+"]");var Cf=new RegExp("["+bf+"]");var Af=new RegExp("(\\"+pf.join("|\\")+")*["+bf+"](\\"+df.join("|\\")+"|\\"+cf.join("|\\")+")*|[a-z0-9]+","gi");var Sf=function(t){if(!Cf.test(t)){return af(t).match(xf)}return A(af(t).match(xf).map(function(t){if(!wf.test(t)&&Cf.test(t)){return t.match(Af)}return[t]}))};var kf=function(t,i){if(i===void 0)i={"font-size":10,"font-family":"sans-serif"};var e=document.createElement("canvas").getContext("2d");var n=[];if("font-style"in i){n.push(i["font-style"])}if("font-variant"in i){n.push(i["font-variant"])}if("font-weight"in i){n.push(i["font-weight"])}if("font-size"in i){var r=i["font-size"]+"px";if("line-height"in i){r+="/"+i["line-height"]+"px"}n.push(r)}if("font-family"in i){n.push(i["font-family"])}e.font=n.join(" ");if(t instanceof Array){return t.map(function(t){return e.measureText(t).width})}return e.measureText(t).width};var Ef=function(){var t="Verdana",i=10,e=400,n=200,r,o=false,s=Sf,a=200;function h(h){h=af(h);if(r===void 0){r=Math.ceil(i*1.1)}var u=s(h);var l={"font-family":t,"font-size":i,"font-weight":e,"line-height":r};var f=1,c="",_=false,p=0;var d=[],g=kf(u,l),v=kf(" ",l);for(var y=0;y<u.length;y++){var m=u[y];var b=h.charAt(c.length+m.length),x=g[u.indexOf(m)];if(b===" "){m+=b}if(p+x>a){if(!y&&!o){_=true;break}d[f-1]=d[f-1].trimRight();f++;if(r*f>n||x>a&&!o){_=true;break}p=0;d.push(m)}else if(!y){d[0]=m}else{d[f-1]+=m}c+=m;p+=x;if(b===" "){p+=v}}return{lines:d,sentence:h,truncated:_,words:u}}h.fontFamily=function(i){return arguments.length?(t=i,h):t};h.fontSize=function(t){return arguments.length?(i=t,h):i};h.fontWeight=function(t){return arguments.length?(e=t,h):e};h.height=function(t){return arguments.length?(n=t,h):n};h.lineHeight=function(t){return arguments.length?(r=t,h):r};h.overflow=function(t){return arguments.length?(o=t,h):o};h.split=function(t){return arguments.length?(s=t,h):s};h.width=function(t){return arguments.length?(a=t,h):a};return h};var Bf=function(t){function i(){t.call(this);this._delay=0;this._duration=0;this._ellipsis=function(t){return t.replace(/\.|,$/g,"")+"..."};this._fontColor=Cu("black");this._fontFamily=Cu("Verdana");this._fontMax=Cu(50);this._fontMin=Cu(8);this._fontResize=Cu(false);this._fontSize=Cu(10);this._fontWeight=Cu(400);this._height=gu("height",200);this._id=function(t,i){return t.id||""+i};this._on={};this._overflow=Cu(false);this._pointerEvents=Cu("auto");this._rotate=Cu(0);this._split=Sf;this._text=gu("text");this._textAnchor=Cu("start");this._verticalAlign=Cu("top");this._width=gu("width",200);this._x=gu("x",0);this._y=gu("y",0)}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype.render=function t(i){var e=this;if(this._select===void 0){this.select(Zs("body").append("svg").style("width",window.innerWidth+"px").style("height",window.innerHeight+"px").node())}if(this._lineHeight===void 0){this._lineHeight=function(t,i){return e._fontSize(t,i)*1.1}}var n=this;var r=this._select.selectAll(".d3plus-textBox").data(this._data.reduce(function(t,i,r){var o=e._text(i,r);if(o===void 0){return t}var s=e._fontResize(i,r);var a=s?e._fontMax(i,r):e._fontSize(i,r),h=s?a*1.1:e._lineHeight(i,r),u=1,l=[],f;var c={"font-family":e._fontFamily(i,r),"font-size":a,"font-weight":e._fontWeight(i,r),"line-height":h};var _=e._height(i,r),p=e._width(i,r);var d=Ef().fontFamily(c["font-family"]).fontSize(a).fontWeight(c["font-weight"]).lineHeight(h).height(_).overflow(e._overflow(i,r)).width(p);var g=e._fontMax(i,r),v=e._fontMin(i,r),y=e._verticalAlign(i,r),m=e._split(o,r);function b(){if(a<v){l=[];return}else if(a>g){a=g}if(s){h=a*1.1;d.fontSize(a).lineHeight(h);c["font-size"]=a;c["line-height"]=h}var t=d(o);l=t.lines.filter(function(t){return t!==""});u=l.length;if(t.truncated){if(s){a--;if(a<v){l=[]}else{b()}}else if(u<1){l=[n._ellipsis("")]}else{l[u-1]=n._ellipsis(l[u-1])}}}if(p>v&&(_>h||s&&_>v*1.1)){if(s){f=kf(m,c);var x=1.165+p/_*.1,C=p*_,A=w(f),E=k(f,function(t){return t*h})*x;if(A>p||E>C){var B=Math.sqrt(C/E),D=p/A;var M=S([B,D]);a=Math.floor(a*M)}var z=Math.floor(_*.8);if(a>z){a=z}}b()}if(l.length){var F=u*h;var O=y==="top"?0:y==="middle"?_/2-F/2:_-F;O-=h*.1;t.push({data:i,i:r,lines:l,fC:e._fontColor(i,r),fF:c["font-family"],fW:c["font-weight"],id:e._id(i,r),tA:e._textAnchor(i,r),fS:a,lH:h,w:p,x:e._x(i,r),y:e._y(i,r)+O})}return t},[]),this._id);var o=Ph().duration(this._duration);if(this._duration===0){r.exit().remove()}else{r.exit().transition().delay(this._duration).remove();r.exit().selectAll("tspan").transition(o).attr("opacity",0)}function s(t){t.attr("transform",function(t,i){return"rotate("+n._rotate(t,i)+" "+(t.x+t.w/2)+" "+(t.y+t.lH/4+t.lH*t.lines.length/2)+")"})}var a=r.enter().append("text").attr("class","d3plus-textBox").attr("id",function(t){return"d3plus-textBox-"+t.id}).attr("y",function(t){return t.y+"px"}).call(s).merge(r);a.attr("fill",function(t){return t.fC}).attr("text-anchor",function(t){return t.tA}).attr("font-family",function(t){return t.fF}).style("font-family",function(t){return t.fF}).attr("font-size",function(t){return t.fS+"px"}).style("font-size",function(t){return t.fS+"px"}).attr("font-weight",function(t){return t.fW}).style("font-weight",function(t){return t.fW}).style("pointer-events",function(t){return e._pointerEvents(t.data,t.i)}).each(function(t){var i=t.tA==="start"?0:t.tA==="end"?t.w:t.w/2,e=Zs(this);if(n._duration===0){e.attr("y",function(t){return t.y+"px"})}else{e.transition(o).attr("y",function(t){return t.y+"px"})}function r(e){e.text(function(t){return t.trimRight()}).attr("x",t.x+"px").attr("dx",i+"px").attr("dy",t.lH+"px")}var s=e.selectAll("tspan").data(t.lines);if(n._duration===0){s.call(r);s.exit().remove();s.enter().append("tspan").attr("dominant-baseline","alphabetic").style("baseline-shift","0%").call(r)}else{s.transition(o).call(r);s.exit().transition(o).attr("opacity",0).remove();s.enter().append("tspan").attr("dominant-baseline","alphabetic").style("baseline-shift","0%").attr("opacity",0).call(r).transition(o).delay(n._delay).attr("opacity",1)}}).transition(o).call(s);var h=Object.keys(this._on),u=h.reduce(function(t,i){t[i]=function(t,n){return e._on[i](t.data,n)};return t},{});for(var l=0;l<h.length;l++){a.on(h[l],u[h[l]])}if(i){setTimeout(i,this._duration+100)}return this};i.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};i.prototype.delay=function t(i){return arguments.length?(this._delay=i,this):this._delay};i.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};i.prototype.ellipsis=function t(i){return arguments.length?(this._ellipsis=typeof i==="function"?i:Cu(i),this):this._ellipsis};i.prototype.fontColor=function t(i){return arguments.length?(this._fontColor=typeof i==="function"?i:Cu(i),this):this._fontColor};i.prototype.fontFamily=function t(i){return arguments.length?(this._fontFamily=typeof i==="function"?i:Cu(i),this):this._fontFamily};i.prototype.fontMax=function t(i){return arguments.length?(this._fontMax=typeof i==="function"?i:Cu(i),this):this._fontMax};i.prototype.fontMin=function t(i){return arguments.length?(this._fontMin=typeof i==="function"?i:Cu(i),this):this._fontMin};i.prototype.fontResize=function t(i){return arguments.length?(this._fontResize=typeof i==="function"?i:Cu(i),this):this._fontResize};i.prototype.fontSize=function t(i){return arguments.length?(this._fontSize=typeof i==="function"?i:Cu(i),this):this._fontSize};i.prototype.fontWeight=function t(i){return arguments.length?(this._fontWeight=typeof i==="function"?i:Cu(i),this):this._fontWeight};i.prototype.height=function t(i){return arguments.length?(this._height=typeof i==="function"?i:Cu(i),this):this._height};i.prototype.id=function t(i){return arguments.length?(this._id=typeof i==="function"?i:Cu(i),this):this._id};i.prototype.lineHeight=function t(i){return arguments.length?(this._lineHeight=typeof i==="function"?i:Cu(i),this):this._lineHeight};i.prototype.overflow=function t(i){return arguments.length?(this._overflow=typeof i==="function"?i:Cu(i),this):this._overflow};i.prototype.pointerEvents=function t(i){return arguments.length?(this._pointerEvents=typeof i==="function"?i:Cu(i),this):this._pointerEvents};i.prototype.rotate=function t(i){return arguments.length?(this._rotate=typeof i==="function"?i:Cu(i),this):this._rotate};i.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};i.prototype.split=function t(i){return arguments.length?(this._split=i,this):this._split};i.prototype.text=function t(i){return arguments.length?(this._text=typeof i==="function"?i:Cu(i),this):this._text};i.prototype.textAnchor=function t(i){return arguments.length?(this._textAnchor=typeof i==="function"?i:Cu(i),this):this._textAnchor};i.prototype.verticalAlign=function t(i){return arguments.length?(this._verticalAlign=typeof i==="function"?i:Cu(i),this):this._verticalAlign};i.prototype.width=function t(i){return arguments.length?(this._width=typeof i==="function"?i:Cu(i),this):this._width};i.prototype.x=function t(i){return arguments.length?(this._x=typeof i==="function"?i:Cu(i),this):this._x};i.prototype.y=function t(i){return arguments.length?(this._y=typeof i==="function"?i:Cu(i),this):this._y};return i}(xu);var Df=function(t,i){if(t===void 0){return""}i=Object.assign({lng:"en-US"},i);var e=i.lng;var n=Yl.t("array.lowercase",{lng:e,returnObjects:true}).map(function(t){return t.toLowerCase()});var r=Yl.t("array.uppercase",{lng:e,returnObjects:true});r=r.concat(r.map(function(t){return t+"s"}));var o=r.map(function(t){return t.toLowerCase()});var s=Sf(t);return s.map(function(t,i){if(t){var e=t.toLowerCase();var a=df.includes(e.charAt(e.length-1))?e.slice(0,-1):e;var h=o.indexOf(a);if(h>=0){return r[h]}else if(n.includes(a)&&i!==0&&i!==s.length-1){return e}else{return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}}else{return""}}).reduce(function(i,e,n){if(n&&t.charAt(i.length)===" "){i+=" "}i+=e;return i},"")};var Mf=function(t){function i(i){var e=this;if(i===void 0)i="g";t.call(this);this._activeOpacity=.75;this._activeStyle={stroke:function(t,i){return ft(e._stroke(t,i)).darker(2)},"stroke-width":function(t,i){var n=e._strokeWidth(t,i);return n?n*2:1}};this._backgroundImage=Cu(false);this._data=[];this._duration=600;this._fill=Cu("black");this._fontColor=function(t,i){return nf(e._fill(t,i))};this._fontFamily=Cu("Verdana");this._fontResize=Cu(false);this._fontSize=Cu(12);this._hoverOpacity=.5;this._id=function(t,i){return t.id!==void 0?t.id:i};this._label=Cu(false);this._labelPadding=Cu(5);this._name="Shape";this._opacity=Cu(1);this._scale=Cu(1);this._shapeRendering=Cu("geometricPrecision");this._stroke=function(t,i){return ft(e._fill(t,i)).darker(1)};this._strokeWidth=Cu(0);this._tagName=i;this._textAnchor=Cu("start");this._vectorEffect=Cu("non-scaling-stroke");this._verticalAlign=Cu("top");this._x=gu("x",0);this._y=gu("y",0)}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._aes=function t(){return{}};i.prototype._applyEvents=function t(i){var e=this;var n=Object.keys(this._on);var r=function(t){i.on(n[t],function(i,r){if(!e._on[n[t]]){return}if(i.i!==void 0){r=i.i}if(i.nested&&i.values){var o=Do(e._select.node()),s=i.values.map(function(t){return $l(o,[e._x(t,r),e._y(t,r)])});i=i.values[s.indexOf(S(s))]}e._on[n[t]].bind(e)(i,r)})};for(var o=0;o<n.length;o++)r(o)};i.prototype._applyActive=function t(i){var e=this;var n=this;if(i.size()&&i.node().tagName==="g"){i=i.selectAll("*")}function r(t,i){return typeof this!=="function"?this:t.nested&&t.key&&t.values?this(t.values[0],n._data.indexOf(t.values[0])):this(t,i)}var o={};for(var s in this._activeStyle){if({}.hasOwnProperty.call(e._activeStyle,s)){o[s]=r.bind(e._activeStyle[s])}}i.transition().duration(0).call(mu,o)};i.prototype._applyStyle=function t(i){var e=this;if(i.size()&&i.node().tagName==="g"){i=i.selectAll("*")}function n(t,i){return typeof this!=="function"?this:t.nested&&t.key&&t.values?this(t.values[0],e._data.indexOf(t.values[0])):this(t,i)}i.attr("fill",n.bind(this._fill)).attr("stroke",n.bind(this._stroke)).attr("stroke-width",n.bind(this._strokeWidth)).attr("vector-effect",n.bind(this._vectorEffect))};i.prototype._applyTransform=function t(i){var e=this;i.attr("transform",function(t,i){return"\n        translate("+(t.__d3plusShape__?t.translate?t.translate:e._x(t.data,t.i)+","+e._y(t.data,t.i):e._x(t,i)+","+e._y(t,i))+")\n        scale("+(t.__d3plusShape__?t.scale||e._scale(t.data,t.i):e._scale(t,i))+")"})};i.prototype._nestWrapper=function t(i){return function(t,e){return i(t.__d3plusShape__?t.data:t,t.__d3plusShape__?t.i:e)}};i.prototype._renderImage=function t(){var i=this;var e=[];this._update.merge(this._enter).data().forEach(function(t,n){var r=i._aes(t,n);if(r.r||r.width&&r.height){var o=t;if(t.nested&&t.key&&t.values){o=t.values[0];n=i._data.indexOf(o)}var s=r.r?r.r*2:r.height,a=i._backgroundImage(o,n),h=r.r?r.r*2:r.width;if(a){var u=o.__d3plusShape__?o.translate?o.translate[0]:i._x(o.data,o.i):i._x(o,n),l=o.__d3plusShape__?o.translate?o.translate[1]:i._y(o.data,o.i):i._y(o,n);if(r.x){u+=r.x}if(r.y){l+=r.y}if(o.__d3plusShape__){o=o.data;n=o.i}e.push({__d3plus__:true,data:o,height:s,i:n,id:i._id(o,n),url:a,width:h,x:u+-h/2,y:l+-s/2})}}});return(new Kl).data(e).duration(this._duration).pointerEvents("none").select(Au("g.d3plus-"+this._name+"-image",{parent:this._group,update:{opacity:this._active?this._activeOpacity:1}}).node()).render()};i.prototype._renderLabels=function t(){var i=this;var e=[];this._update.merge(this._enter).data().forEach(function(t,n){var r=t;if(t.nested&&t.key&&t.values){r=t.values[0];n=i._data.indexOf(r)}var o=i._label(r,n);if(i._labelBounds&&o!==false&&o!==void 0){var s=i._aes(t,n),a=i._labelBounds(r,n,s);if(a){if(o.constructor!==Array){o=[o]}var h=r.__d3plusShape__?r.translate?r.translate[0]:i._x(r.data,r.i):i._x(r,n),u=r.__d3plusShape__?r.translate?r.translate[1]:i._y(r.data,r.i):i._y(r,n);if(s.x){h+=s.x}if(s.y){u+=s.y}if(r.__d3plusShape__){r=r.data;n=r.i}var l=i._fontColor(r,n),f=i._fontFamily(r,n),c=i._fontResize(r,n),_=i._fontSize(r,n),p=i._lineHeight(r,n),d=i._labelPadding(r,n),g=i._textAnchor(r,n),v=i._verticalAlign(r,n);for(var y=0;y<o.length;y++){var m=a.constructor===Array?a[y]:Object.assign({},a),b=d.constructor===Array?d[y]:d;e.push(Object.assign(m,{__d3plusShape__:true,data:r,fC:l.constructor===Array?l[y]:l,fF:f.constructor===Array?f[y]:f,fR:c.constructor===Array?c[y]:c,fS:_.constructor===Array?_[y]:_,height:m.height-b*2,i:n,id:i._id(r,n)+"_"+y,lH:p.constructor===Array?p[y]:p,tA:g.constructor===Array?g[y]:g,text:o[y],vA:v.constructor===Array?v[y]:v,width:m.width-b*2,x:h+m.x+b,y:u+m.y+b}))}}}});return(new Bf).data(e).delay(this._duration/2).duration(this._duration).fontColor(function(t){return t.fC}).fontFamily(function(t){return t.fF}).fontResize(function(t){return t.fR}).fontSize(function(t){return t.fS}).lineHeight(function(t){return t.lH}).pointerEvents("none").textAnchor(function(t){return t.tA}).verticalAlign(function(t){return t.vA}).select(Au("g.d3plus-"+this._name+"-text",{parent:this._group,update:{opacity:this._active?this._activeOpacity:1}}).node()).render()};i.prototype.render=function t(i){var e=this;if(this._select===void 0){this.select(Zs("body").append("svg").style("width",window.innerWidth+"px").style("height",window.innerHeight+"px").style("display","block").node())}if(this._lineHeight===void 0){this.lineHeight(function(t,i){return e._fontSize(t,i)*1.1})}this._transition=Ph().duration(this._duration);var n=this._data,r=this._id;if(this._dataFilter){n=this._dataFilter(n);if(n.key){r=n.key}}if(this._sort){n=n.sort(function(t,i){return e._sort(t.__d3plusShape__?t.data:t,i.__d3plusShape__?i.data:i)})}Qs("g.d3plus-"+this._name+"-hover > *, g.d3plus-"+this._name+"-active > *").each(function(t){if(t&&t.parentNode){t.parentNode.appendChild(this)}else{this.parentNode.removeChild(this)}});this._group=Au("g.d3plus-"+this._name+"-group",{parent:this._select});var o=this._update=Au("g.d3plus-"+this._name+"-shape",{parent:this._group,update:{opacity:this._active?this._activeOpacity:1}}).selectAll(".d3plus-"+this._name).data(n,r);o.order().transition(this._transition).call(this._applyTransform.bind(this));var s=this._enter=o.enter().append(this._tagName).attr("class",function(t,i){return"d3plus-Shape d3plus-"+e._name+" d3plus-id-"+uf(e._nestWrapper(e._id)(t,i))}).call(this._applyTransform.bind(this)).attr("opacity",this._nestWrapper(this._opacity));var a=s.merge(o);a.attr("shape-rendering",this._nestWrapper(this._shapeRendering)).attr("pointer-events","none").transition(this._transition).attr("opacity",this._nestWrapper(this._opacity)).transition().attr("pointer-events","all");
var h=this._exit=o.exit();h.transition().delay(this._duration).remove();this._renderImage();this._renderLabels();this._hoverGroup=Au("g.d3plus-"+this._name+"-hover",{parent:this._group});this._activeGroup=Au("g.d3plus-"+this._name+"-active",{parent:this._group});var u=this;var l=this._group.selectAll(".d3plus-HitArea").data(this._hitArea?n:[],r);l.order().transition(this._transition).call(this._applyTransform.bind(this));var f=l.enter().append("rect").attr("class",function(t,i){return"d3plus-HitArea d3plus-id-"+uf(e._nestWrapper(e._id)(t,i))}).attr("fill","transparent").call(this._applyTransform.bind(this));var c=l.merge(f).each(function(t){var i=u._hitArea(t,u._data.indexOf(t),u._aes(t,u._data.indexOf(t)));return i?Zs(this).call(mu,i):Zs(this).remove()});l.exit().remove();this._applyEvents(this._hitArea?c:a);this.active(this._active);if(i){setTimeout(i,this._duration+100)}return this};i.prototype.active=function t(i){if(!arguments.length||i===void 0){return this._active}this._active=i;var e=this;this._group.selectAll(".d3plus-Shape, .d3plus-Image, .d3plus-textBox").each(function(t,n){if(!t.parentNode){t.parentNode=this.parentNode}var r=t.parentNode;if(this.tagName==="text"){t=t.data}if(t.__d3plusShape__||t.__d3plus__){n=t.i;t=t.data}else{n=e._data.indexOf(t)}var o=!i||typeof i!=="function"||!i(t,n)?r:e._activeGroup.node();if(o!==this.parentNode){o.appendChild(this);if(this.className.baseVal.includes("d3plus-Shape")){if(r===o){Zs(this).call(e._applyStyle.bind(e))}else{Zs(this).call(e._applyActive.bind(e))}}}});this._group.selectAll("g.d3plus-"+this._name+"-shape, g.d3plus-"+this._name+"-image, g.d3plus-"+this._name+"-text").attr("opacity",this._hover?this._hoverOpacity:this._active?this._activeOpacity:1);return this};i.prototype.activeOpacity=function t(i){return arguments.length?(this._activeOpacity=i,this):this._activeOpacity};i.prototype.backgroundImage=function t(i){return arguments.length?(this._backgroundImage=typeof i==="function"?i:Cu(i),this):this._backgroundImage};i.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};i.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};i.prototype.fill=function t(i){return arguments.length?(this._fill=typeof i==="function"?i:Cu(i),this):this._fill};i.prototype.fontColor=function t(i){return arguments.length?(this._fontColor=typeof i==="function"?i:Cu(i),this):this._fontColor};i.prototype.fontFamily=function t(i){return arguments.length?(this._fontFamily=typeof i==="function"?i:Cu(i),this):this._fontFamily};i.prototype.fontResize=function t(i){return arguments.length?(this._fontResize=typeof i==="function"?i:Cu(i),this):this._fontResize};i.prototype.fontSize=function t(i){return arguments.length?(this._fontSize=typeof i==="function"?i:Cu(i),this):this._fontSize};i.prototype.hover=function t(i){if(!arguments.length||i===void 0){return this._hover}this._hover=i;var e=this;this._group.selectAll("g.d3plus-"+this._name+"-shape, g.d3plus-"+this._name+"-image, g.d3plus-"+this._name+"-text, g.d3plus-"+this._name+"-hover").selectAll(".d3plus-Shape, .d3plus-Image, .d3plus-textBox").each(function(t,n){if(!t.parentNode){t.parentNode=this.parentNode}var r=t.parentNode;if(this.tagName==="text"){t=t.data}if(t.__d3plusShape__||t.__d3plus__){n=t.i;t=t.data}else{n=e._data.indexOf(t)}var o=!i||typeof i!=="function"||!i(t,n)?r:e._hoverGroup.node();if(o!==this.parentNode){o.appendChild(this)}});this._group.selectAll("g.d3plus-"+this._name+"-shape, g.d3plus-"+this._name+"-image, g.d3plus-"+this._name+"-text").attr("opacity",this._hover?this._hoverOpacity:this._active?this._activeOpacity:1);return this};i.prototype.hoverOpacity=function t(i){return arguments.length?(this._hoverOpacity=i,this):this._hoverOpacity};i.prototype.hitArea=function t(i){return arguments.length?(this._hitArea=typeof i==="function"?i:Cu(i),this):this._hitArea};i.prototype.id=function t(i){return arguments.length?(this._id=i,this):this._id};i.prototype.label=function t(i){return arguments.length?(this._label=typeof i==="function"?i:Cu(i),this):this._label};i.prototype.labelBounds=function t(i){return arguments.length?(this._labelBounds=typeof i==="function"?i:Cu(i),this):this._labelBounds};i.prototype.labelPadding=function t(i){return arguments.length?(this._labelPadding=typeof i==="function"?i:Cu(i),this):this._labelPadding};i.prototype.lineHeight=function t(i){return arguments.length?(this._lineHeight=typeof i==="function"?i:Cu(i),this):this._lineHeight};i.prototype.opacity=function t(i){return arguments.length?(this._opacity=typeof i==="function"?i:Cu(i),this):this._opacity};i.prototype.scale=function t(i){return arguments.length?(this._scale=typeof i==="function"?i:Cu(i),this):this._scale};i.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};i.prototype.shapeRendering=function t(i){return arguments.length?(this._shapeRendering=typeof i==="function"?i:Cu(i),this):this._shapeRendering};i.prototype.sort=function t(i){return arguments.length?(this._sort=i,this):this._sort};i.prototype.stroke=function t(i){return arguments.length?(this._stroke=typeof i==="function"?i:Cu(i),this):this._stroke};i.prototype.strokeWidth=function t(i){return arguments.length?(this._strokeWidth=typeof i==="function"?i:Cu(i),this):this._strokeWidth};i.prototype.textAnchor=function t(i){return arguments.length?(this._textAnchor=typeof i==="function"?i:Cu(i),this):this._textAnchor};i.prototype.vectorEffect=function t(i){return arguments.length?(this._vectorEffect=typeof i==="function"?i:Cu(i),this):this._vectorEffect};i.prototype.verticalAlign=function t(i){return arguments.length?(this._verticalAlign=typeof i==="function"?i:Cu(i),this):this._verticalAlign};i.prototype.x=function t(i){return arguments.length?(this._x=typeof i==="function"?i:Cu(i),this):this._x};i.prototype.y=function t(i){return arguments.length?(this._y=typeof i==="function"?i:Cu(i),this):this._y};return i}(xu);var zf={M:["x","y"],L:["x","y"],H:["x"],V:["y"],C:["x1","y1","x2","y2","x","y"],S:["x2","y2","x","y"],Q:["x1","y1","x","y"],T:["x","y"],A:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"]};function Ff(t){t=t.trim().replace(/ /g,",");var i=t[0];var e=t.substring(1).split(",");return zf[i.toUpperCase()].reduce(function(t,i,n){t[i]=i==="x"?parseFloat(e[n]):e[n];return t},{type:i})}function Of(t){var i=t.type;var e=zf[i.toUpperCase()];return""+i+e.map(function(i){return t[i]}).join(",")}function Nf(t,i){var e={x1:"x",y1:"y",x2:"x",y2:"y"};var n=["xAxisRotation","largeArcFlag","sweepFlag"];if(t.type!==i.type&&i.type.toUpperCase()!=="M"){var r={};Object.keys(i).forEach(function(o){var s=i[o];var a=t[o];if(a===undefined){if(n.includes(o)){a=s}else{if(a===undefined&&e[o]){a=t[e[o]]}if(a===undefined){a=0}}}r[o]=a});r.type=i.type;t=r}return t}function Tf(t,i,e){var n;if(t.length>1&&t[0].type==="M"){n=1}else{n=0}var r=i.reduce(function(i,e,r){if(r===0&&e.type==="M"){i[0]=1;return i}var o=Math.abs(t[n].x-e.x);var s=n;for(var a=n+1;a<t.length;a++){var h=Math.abs(t[a].x-e.x);if(h<o){o=h;s=a}else{break}}i[s]=(i[s]||0)+1;return i},{});var o=[];var s=0;for(var a=0;a<t.length;a++){o.push(t[a]);for(var h=1;h<r[a]&&s<e;h++){var u=Object.assign({},t[a]);if(u.type==="M"){u.type="L"}else{if(u.x1!==undefined){u.x1=u.x;u.y1=u.y}if(u.x2!==undefined){u.x2=u.x;u.y2=u.y}}o.push(u);s+=1}}return o}function jf(t,i){var e=t==null?"":t.replace(/[Z]/gi,"").replace(/([MLCSTQAHV])\s*/gi,"$1");var n=i==null?"":i.replace(/[Z]/gi,"").replace(/([MLCSTQAHV])\s*/gi,"$1");var r=e===""?[]:e.split(/(?=[MLCSTQAHV])/gi);var o=n===""?[]:n.split(/(?=[MLCSTQAHV])/gi);if(!r.length&&!o.length){return function t(){return""}}if(!r.length){r.push(o[0])}else if(!o.length){o.push(r[0])}var s=r.map(Ff);var a=o.map(Ff);var h=Math.abs(o.length-r.length);if(h!==0){if(a.length>s.length){s=Tf(s,a,h)}else if(a.length<s.length){a=Tf(a,s,h)}}s=s.map(function(t,i){return Nf(t,a[i])});var u=s.map(Of).join("");var l=a.map(Of).join("");if((t==null||t[t.length-1]==="Z")&&(i==null||i[i.length-1]==="Z")){u+="Z";l+="Z"}var f=di(u,l);return function t(e){if(e===1){return i==null?"":i}return f(e)}}var Pf=Math.PI;var Hf=2*Pf;var Rf=1e-6;var Lf=Hf-Rf;function Wf(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function Gf(){return new Wf}Wf.prototype=Gf.prototype={constructor:Wf,moveTo:function(t,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)},closePath:function(){if(this._x1!==null){this._x1=this._x0,this._y1=this._y0;this._+="Z"}},lineTo:function(t,i){this._+="L"+(this._x1=+t)+","+(this._y1=+i)},quadraticCurveTo:function(t,i,e,n){this._+="Q"+ +t+","+ +i+","+(this._x1=+e)+","+(this._y1=+n)},bezierCurveTo:function(t,i,e,n,r,o){this._+="C"+ +t+","+ +i+","+ +e+","+ +n+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(t,i,e,n,r){t=+t,i=+i,e=+e,n=+n,r=+r;var o=this._x1,s=this._y1,a=e-t,h=n-i,u=o-t,l=s-i,f=u*u+l*l;if(r<0){throw new Error("negative radius: "+r)}if(this._x1===null){this._+="M"+(this._x1=t)+","+(this._y1=i)}else if(!(f>Rf)){}else if(!(Math.abs(l*a-h*u)>Rf)||!r){this._+="L"+(this._x1=t)+","+(this._y1=i)}else{var c=e-o,_=n-s,p=a*a+h*h,d=c*c+_*_,g=Math.sqrt(p),v=Math.sqrt(f),y=r*Math.tan((Pf-Math.acos((p+f-d)/(2*g*v)))/2),m=y/v,b=y/g;if(Math.abs(m-1)>Rf){this._+="L"+(t+m*u)+","+(i+m*l)}this._+="A"+r+","+r+",0,0,"+ +(l*c>u*_)+","+(this._x1=t+b*a)+","+(this._y1=i+b*h)}},arc:function(t,i,e,n,r,o){t=+t,i=+i,e=+e;var s=e*Math.cos(n),a=e*Math.sin(n),h=t+s,u=i+a,l=1^o,f=o?n-r:r-n;if(e<0){throw new Error("negative radius: "+e)}if(this._x1===null){this._+="M"+h+","+u}else if(Math.abs(this._x1-h)>Rf||Math.abs(this._y1-u)>Rf){this._+="L"+h+","+u}if(!e){return}if(f>Lf){this._+="A"+e+","+e+",0,1,"+l+","+(t-s)+","+(i-a)+"A"+e+","+e+",0,1,"+l+","+(this._x1=h)+","+(this._y1=u)}else{if(f<0){f=f%Hf+Hf}this._+="A"+e+","+e+",0,"+ +(f>=Pf)+","+l+","+(this._x1=t+e*Math.cos(r))+","+(this._y1=i+e*Math.sin(r))}},rect:function(t,i,e,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+i)+"h"+ +e+"v"+ +n+"h"+-e+"Z"},toString:function(){return this._}};var Uf=function(t){return function i(){return t}};var If=1e-12;var qf=Math.PI;var Yf=qf/2;var Xf=2*qf;function Vf(t){return t.innerRadius}function Jf(t){return t.outerRadius}function $f(t){return t.startAngle}function Kf(t){return t.endAngle}function Zf(t){return t&&t.padAngle}function Qf(t){return t>=1?Yf:t<=-1?-Yf:Math.asin(t)}function tc(t,i,e,n,r,o,s,a){var h=e-t,u=n-i,l=s-r,f=a-o,c=(l*(i-o)-f*(t-r))/(f*h-l*u);return[t+c*h,i+c*u]}function ic(t,i,e,n,r,o,s){var a=t-e,h=i-n,u=(s?o:-o)/Math.sqrt(a*a+h*h),l=u*h,f=-u*a,c=t+l,_=i+f,p=e+l,d=n+f,g=(c+p)/2,v=(_+d)/2,y=p-c,m=d-_,b=y*y+m*m,x=r-o,w=c*d-p*_,C=(m<0?-1:1)*Math.sqrt(Math.max(0,x*x*b-w*w)),A=(w*m-y*C)/b,S=(-w*y-m*C)/b,k=(w*m+y*C)/b,E=(-w*y+m*C)/b,B=A-g,D=S-v,M=k-g,z=E-v;if(B*B+D*D>M*M+z*z){A=k,S=E}return{cx:A,cy:S,x01:-l,y01:-f,x11:A*(r/x-1),y11:S*(r/x-1)}}var ec=function(){var t=Vf,i=Jf,e=Uf(0),n=null,r=$f,o=Kf,s=Zf,a=null;function h(){var h,u,l=+t.apply(this,arguments),f=+i.apply(this,arguments),c=r.apply(this,arguments)-Yf,_=o.apply(this,arguments)-Yf,p=Math.abs(_-c),d=_>c;if(!a){a=h=Gf()}if(f<l){u=f,f=l,l=u}if(!(f>If)){a.moveTo(0,0)}else if(p>Xf-If){a.moveTo(f*Math.cos(c),f*Math.sin(c));a.arc(0,0,f,c,_,!d);if(l>If){a.moveTo(l*Math.cos(_),l*Math.sin(_));a.arc(0,0,l,_,c,d)}}else{var g=c,v=_,y=c,m=_,b=p,x=p,w=s.apply(this,arguments)/2,C=w>If&&(n?+n.apply(this,arguments):Math.sqrt(l*l+f*f)),A=Math.min(Math.abs(f-l)/2,+e.apply(this,arguments)),S=A,k=A,E,B;if(C>If){var D=Qf(C/l*Math.sin(w)),M=Qf(C/f*Math.sin(w));if((b-=D*2)>If){D*=d?1:-1,y+=D,m-=D}else{b=0,y=m=(c+_)/2}if((x-=M*2)>If){M*=d?1:-1,g+=M,v-=M}else{x=0,g=v=(c+_)/2}}var z=f*Math.cos(g),F=f*Math.sin(g),O=l*Math.cos(m),N=l*Math.sin(m);if(A>If){var T=f*Math.cos(v),j=f*Math.sin(v),P=l*Math.cos(y),H=l*Math.sin(y);if(p<qf){var R=b>If?tc(z,F,P,H,T,j,O,N):[O,N],L=z-R[0],W=F-R[1],G=T-R[0],U=j-R[1],I=1/Math.sin(Math.acos((L*G+W*U)/(Math.sqrt(L*L+W*W)*Math.sqrt(G*G+U*U)))/2),q=Math.sqrt(R[0]*R[0]+R[1]*R[1]);S=Math.min(A,(l-q)/(I-1));k=Math.min(A,(f-q)/(I+1))}}if(!(x>If)){a.moveTo(z,F)}else if(k>If){E=ic(P,H,z,F,f,k,d);B=ic(T,j,O,N,f,k,d);a.moveTo(E.cx+E.x01,E.cy+E.y01);if(k<A){a.arc(E.cx,E.cy,k,Math.atan2(E.y01,E.x01),Math.atan2(B.y01,B.x01),!d)}else{a.arc(E.cx,E.cy,k,Math.atan2(E.y01,E.x01),Math.atan2(E.y11,E.x11),!d);a.arc(0,0,f,Math.atan2(E.cy+E.y11,E.cx+E.x11),Math.atan2(B.cy+B.y11,B.cx+B.x11),!d);a.arc(B.cx,B.cy,k,Math.atan2(B.y11,B.x11),Math.atan2(B.y01,B.x01),!d)}}else{a.moveTo(z,F),a.arc(0,0,f,g,v,!d)}if(!(l>If)||!(b>If)){a.lineTo(O,N)}else if(S>If){E=ic(O,N,T,j,l,-S,d);B=ic(z,F,P,H,l,-S,d);a.lineTo(E.cx+E.x01,E.cy+E.y01);if(S<A){a.arc(E.cx,E.cy,S,Math.atan2(E.y01,E.x01),Math.atan2(B.y01,B.x01),!d)}else{a.arc(E.cx,E.cy,S,Math.atan2(E.y01,E.x01),Math.atan2(E.y11,E.x11),!d);a.arc(0,0,l,Math.atan2(E.cy+E.y11,E.cx+E.x11),Math.atan2(B.cy+B.y11,B.cx+B.x11),d);a.arc(B.cx,B.cy,S,Math.atan2(B.y11,B.x11),Math.atan2(B.y01,B.x01),!d)}}else{a.arc(0,0,l,m,y,d)}}a.closePath();if(h){return a=null,h+""||null}}h.centroid=function(){var e=(+t.apply(this,arguments)+ +i.apply(this,arguments))/2,n=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-qf/2;return[Math.cos(n)*e,Math.sin(n)*e]};h.innerRadius=function(i){return arguments.length?(t=typeof i==="function"?i:Uf(+i),h):t};h.outerRadius=function(t){return arguments.length?(i=typeof t==="function"?t:Uf(+t),h):i};h.cornerRadius=function(t){return arguments.length?(e=typeof t==="function"?t:Uf(+t),h):e};h.padRadius=function(t){return arguments.length?(n=t==null?null:typeof t==="function"?t:Uf(+t),h):n};h.startAngle=function(t){return arguments.length?(r=typeof t==="function"?t:Uf(+t),h):r};h.endAngle=function(t){return arguments.length?(o=typeof t==="function"?t:Uf(+t),h):o};h.padAngle=function(t){return arguments.length?(s=typeof t==="function"?t:Uf(+t),h):s};h.context=function(t){return arguments.length?(a=t==null?null:t,h):a};return h};function nc(t){this._context=t}nc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===1){this._context.closePath()}this._line=1-this._line},point:function(t,i){t=+t,i=+i;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:this._context.lineTo(t,i);break}}};var rc=function(t){return new nc(t)};function oc(t){return t[0]}function sc(t){return t[1]}var ac=function(){var t=oc,i=sc,e=Uf(true),n=null,r=rc,o=null;function s(s){var a,h=s.length,u,l=false,f;if(n==null){o=r(f=Gf())}for(a=0;a<=h;++a){if(!(a<h&&e(u=s[a],a,s))===l){if(l=!l){o.lineStart()}else{o.lineEnd()}}if(l){o.point(+t(u,a,s),+i(u,a,s))}}if(f){return o=null,f+""||null}}s.x=function(i){return arguments.length?(t=typeof i==="function"?i:Uf(+i),s):t};s.y=function(t){return arguments.length?(i=typeof t==="function"?t:Uf(+t),s):i};s.defined=function(t){return arguments.length?(e=typeof t==="function"?t:Uf(!!t),s):e};s.curve=function(t){return arguments.length?(r=t,n!=null&&(o=r(n)),s):r};s.context=function(t){return arguments.length?(t==null?n=o=null:o=r(n=t),s):n};return s};var hc=function(){var t=oc,i=null,e=Uf(0),n=sc,r=Uf(true),o=null,s=rc,a=null;function h(h){var u,l,f,c=h.length,_,p=false,d,g=new Array(c),v=new Array(c);if(o==null){a=s(d=Gf())}for(u=0;u<=c;++u){if(!(u<c&&r(_=h[u],u,h))===p){if(p=!p){l=u;a.areaStart();a.lineStart()}else{a.lineEnd();a.lineStart();for(f=u-1;f>=l;--f){a.point(g[f],v[f])}a.lineEnd();a.areaEnd()}}if(p){g[u]=+t(_,u,h),v[u]=+e(_,u,h);a.point(i?+i(_,u,h):g[u],n?+n(_,u,h):v[u])}}if(d){return a=null,d+""||null}}function u(){return ac().defined(r).curve(s).context(o)}h.x=function(e){return arguments.length?(t=typeof e==="function"?e:Uf(+e),i=null,h):t};h.x0=function(i){return arguments.length?(t=typeof i==="function"?i:Uf(+i),h):t};h.x1=function(t){return arguments.length?(i=t==null?null:typeof t==="function"?t:Uf(+t),h):i};h.y=function(t){return arguments.length?(e=typeof t==="function"?t:Uf(+t),n=null,h):e};h.y0=function(t){return arguments.length?(e=typeof t==="function"?t:Uf(+t),h):e};h.y1=function(t){return arguments.length?(n=t==null?null:typeof t==="function"?t:Uf(+t),h):n};h.lineX0=h.lineY0=function(){return u().x(t).y(e)};h.lineY1=function(){return u().x(t).y(n)};h.lineX1=function(){return u().x(i).y(e)};h.defined=function(t){return arguments.length?(r=typeof t==="function"?t:Uf(!!t),h):r};h.curve=function(t){return arguments.length?(s=t,o!=null&&(a=s(o)),h):s};h.context=function(t){return arguments.length?(t==null?o=a=null:a=s(o=t),h):o};return h};var uc=function(t,i){return i<t?-1:i>t?1:i>=t?0:NaN};var lc=function(t){return t};var fc=function(){var t=lc,i=uc,e=null,n=Uf(0),r=Uf(Xf),o=Uf(0);function s(s){var a,h=s.length,u,l,f=0,c=new Array(h),_=new Array(h),p=+n.apply(this,arguments),d=Math.min(Xf,Math.max(-Xf,r.apply(this,arguments)-p)),g,v=Math.min(Math.abs(d)/h,o.apply(this,arguments)),y=v*(d<0?-1:1),m;for(a=0;a<h;++a){if((m=_[c[a]=a]=+t(s[a],a,s))>0){f+=m}}if(i!=null){c.sort(function(t,e){return i(_[t],_[e])})}else if(e!=null){c.sort(function(t,i){return e(s[t],s[i])})}for(a=0,l=f?(d-h*y)/f:0;a<h;++a,p=g){u=c[a],m=_[u],g=p+(m>0?m*l:0)+y,_[u]={data:s[u],index:a,value:m,startAngle:p,endAngle:g,padAngle:v}}return _}s.value=function(i){return arguments.length?(t=typeof i==="function"?i:Uf(+i),s):t};s.sortValues=function(t){return arguments.length?(i=t,e=null,s):i};s.sort=function(t){return arguments.length?(e=t,i=null,s):e};s.startAngle=function(t){return arguments.length?(n=typeof t==="function"?t:Uf(+t),s):n};s.endAngle=function(t){return arguments.length?(r=typeof t==="function"?t:Uf(+t),s):r};s.padAngle=function(t){return arguments.length?(o=typeof t==="function"?t:Uf(+t),s):o};return s};var cc=pc(rc);function _c(t){this._curve=t}_c.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,i){this._curve.point(i*Math.sin(t),i*-Math.cos(t))}};function pc(t){function i(i){return new _c(t(i))}i._curve=t;return i}function dc(t){var i=t.curve;t.angle=t.x,delete t.x;t.radius=t.y,delete t.y;t.curve=function(t){return arguments.length?i(pc(t)):i()._curve};return t}var gc=function(){return dc(ac().curve(cc))};var vc=function(){var t=hc().curve(cc),i=t.curve,e=t.lineX0,n=t.lineX1,r=t.lineY0,o=t.lineY1;t.angle=t.x,delete t.x;t.startAngle=t.x0,delete t.x0;t.endAngle=t.x1,delete t.x1;t.radius=t.y,delete t.y;t.innerRadius=t.y0,delete t.y0;t.outerRadius=t.y1,delete t.y1;t.lineStartAngle=function(){return dc(e())},delete t.lineX0;t.lineEndAngle=function(){return dc(n())},delete t.lineX1;t.lineInnerRadius=function(){return dc(r())},delete t.lineY0;t.lineOuterRadius=function(){return dc(o())},delete t.lineY1;t.curve=function(t){return arguments.length?i(pc(t)):i()._curve};return t};var yc={draw:function(t,i){var e=Math.sqrt(i/qf);t.moveTo(e,0);t.arc(0,0,e,0,Xf)}};var mc={draw:function(t,i){var e=Math.sqrt(i/5)/2;t.moveTo(-3*e,-e);t.lineTo(-e,-e);t.lineTo(-e,-3*e);t.lineTo(e,-3*e);t.lineTo(e,-e);t.lineTo(3*e,-e);t.lineTo(3*e,e);t.lineTo(e,e);t.lineTo(e,3*e);t.lineTo(-e,3*e);t.lineTo(-e,e);t.lineTo(-3*e,e);t.closePath()}};var bc=Math.sqrt(1/3);var xc=bc*2;var wc={draw:function(t,i){var e=Math.sqrt(i/xc),n=e*bc;t.moveTo(0,-e);t.lineTo(n,0);t.lineTo(0,e);t.lineTo(-n,0);t.closePath()}};var Cc=.8908130915292852;var Ac=Math.sin(qf/10)/Math.sin(7*qf/10);var Sc=Math.sin(Xf/10)*Ac;var kc=-Math.cos(Xf/10)*Ac;var Ec={draw:function(t,i){var e=Math.sqrt(i*Cc),n=Sc*e,r=kc*e;t.moveTo(0,-e);t.lineTo(n,r);for(var o=1;o<5;++o){var s=Xf*o/5,a=Math.cos(s),h=Math.sin(s);t.lineTo(h*e,-a*e);t.lineTo(a*n-h*r,h*n+a*r)}t.closePath()}};var Bc={draw:function(t,i){var e=Math.sqrt(i),n=-e/2;t.rect(n,n,e,e)}};var Dc=Math.sqrt(3);var Mc={draw:function(t,i){var e=-Math.sqrt(i/(Dc*3));t.moveTo(0,e*2);t.lineTo(-Dc*e,-e);t.lineTo(Dc*e,-e);t.closePath()}};var zc=-.5;var Fc=Math.sqrt(3)/2;var Oc=1/Math.sqrt(12);var Nc=(Oc/2+1)*3;var Tc={draw:function(t,i){var e=Math.sqrt(i/Nc),n=e/2,r=e*Oc,o=n,s=e*Oc+e,a=-o,h=s;t.moveTo(n,r);t.lineTo(o,s);t.lineTo(a,h);t.lineTo(zc*n-Fc*r,Fc*n+zc*r);t.lineTo(zc*o-Fc*s,Fc*o+zc*s);t.lineTo(zc*a-Fc*h,Fc*a+zc*h);t.lineTo(zc*n+Fc*r,zc*r-Fc*n);t.lineTo(zc*o+Fc*s,zc*s-Fc*o);t.lineTo(zc*a+Fc*h,zc*h-Fc*a);t.closePath()}};var jc=[yc,mc,wc,Bc,Ec,Mc,Tc];var Pc=function(){var t=Uf(yc),i=Uf(64),e=null;function n(){var n;if(!e){e=n=Gf()}t.apply(this,arguments).draw(e,+i.apply(this,arguments));if(n){return e=null,n+""||null}}n.type=function(i){return arguments.length?(t=typeof i==="function"?i:Uf(i),n):t};n.size=function(t){return arguments.length?(i=typeof t==="function"?t:Uf(+t),n):i};n.context=function(t){return arguments.length?(e=t==null?null:t,n):e};return n};var Hc=function(){};function Rc(t,i,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+i)/6,(t._y0+4*t._y1+e)/6)}function Lc(t){this._context=t}Lc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:Rc(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}if(this._line||this._line!==0&&this._point===1){this._context.closePath()}this._line=1-this._line},point:function(t,i){t=+t,i=+i;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3;this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Rc(this,t,i);break}this._x0=this._x1,this._x1=t;this._y0=this._y1,this._y1=i}};var Wc=function(t){return new Lc(t)};function Gc(t){this._context=t}Gc.prototype={areaStart:Hc,areaEnd:Hc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2);this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break}case 3:{this.point(this._x2,this._y2);this.point(this._x3,this._y3);this.point(this._x4,this._y4);break}}},point:function(t,i){t=+t,i=+i;switch(this._point){case 0:this._point=1;this._x2=t,this._y2=i;break;case 1:this._point=2;this._x3=t,this._y3=i;break;case 2:this._point=3;this._x4=t,this._y4=i;this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+i)/6);break;default:Rc(this,t,i);break}this._x0=this._x1,this._x1=t;this._y0=this._y1,this._y1=i}};var Uc=function(t){return new Gc(t)};function Ic(t){this._context=t}Ic.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3){this._context.closePath()}this._line=1-this._line},point:function(t,i){t=+t,i=+i;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,n=(this._y0+4*this._y1+i)/6;this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break;case 3:this._point=4;default:Rc(this,t,i);break}this._x0=this._x1,this._x1=t;this._y0=this._y1,this._y1=i}};var qc=function(t){return new Ic(t)};function Yc(t,i){this._basis=new Lc(t);this._beta=i}Yc.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var t=this;var i=this._x,e=this._y,n=i.length-1;if(n>0){var r=i[0],o=e[0],s=i[n]-r,a=e[n]-o,h=-1,u;while(++h<=n){u=h/n;t._basis.point(t._beta*i[h]+(1-t._beta)*(r+u*s),t._beta*e[h]+(1-t._beta)*(o+u*a))}}this._x=this._y=null;this._basis.lineEnd()},point:function(t,i){this._x.push(+t);this._y.push(+i)}};var Xc=function t(i){function e(t){return i===1?new Lc(t):new Yc(t,i)}e.beta=function(i){return t(+i)};return e}(.85);function Vc(t,i,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-i),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function Jc(t,i){this._context=t;this._k=(1-i)/6}Jc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Vc(this,this._x1,this._y1);break}if(this._line||this._line!==0&&this._point===1){this._context.closePath()}this._line=1-this._line},point:function(t,i){t=+t,i=+i;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;this._x1=t,this._y1=i;break;case 2:this._point=3;default:Vc(this,t,i);break}this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=i}};var $c=function t(i){function e(t){return new Jc(t,i)}e.tension=function(i){return t(+i)};return e}(0);function Kc(t,i){this._context=t;this._k=(1-i)/6}Kc.prototype={areaStart:Hc,areaEnd:Hc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3);this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3);this._context.closePath();break}case 3:{this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break}}},point:function(t,i){t=+t,i=+i;switch(this._point){case 0:this._point=1;this._x3=t,this._y3=i;break;case 1:this._point=2;this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3;this._x5=t,this._y5=i;break;default:Vc(this,t,i);break}this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=i}};var Zc=function t(i){function e(t){return new Kc(t,i)}e.tension=function(i){return t(+i)};return e}(0);function Qc(t,i){this._context=t;this._k=(1-i)/6}Qc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3){this._context.closePath()}this._line=1-this._line},point:function(t,i){t=+t,i=+i;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Vc(this,t,i);break}this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=i}};var t_=function t(i){function e(t){return new Qc(t,i)}e.tension=function(i){return t(+i)};return e}(0);function i_(t,i,e){var n=t._x1,r=t._y1,o=t._x2,s=t._y2;if(t._l01_a>If){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,h=3*t._l01_a*(t._l01_a+t._l12_a);n=(n*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/h;r=(r*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/h}if(t._l23_a>If){var u=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*u+t._x1*t._l23_2a-i*t._l12_2a)/l;s=(s*u+t._y1*t._l23_2a-e*t._l12_2a)/l}t._context.bezierCurveTo(n,r,o,s,t._x2,t._y2)}function e_(t,i){this._context=t;this._alpha=i}e_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}if(this._line||this._line!==0&&this._point===1){this._context.closePath()}this._line=1-this._line},point:function(t,i){t=+t,i=+i;if(this._point){var e=this._x2-t,n=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+n*n,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3;default:i_(this,t,i);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=i}};var n_=function t(i){function e(t){return i?new e_(t,i):new Jc(t,0)}e.alpha=function(i){return t(+i)};return e}(.5);function r_(t,i){this._context=t;this._alpha=i}r_.prototype={areaStart:Hc,areaEnd:Hc,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3);this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3);this._context.closePath();break}case 3:{this.point(this._x3,this._y3);this.point(this._x4,this._y4);this.point(this._x5,this._y5);break}}},point:function(t,i){t=+t,i=+i;if(this._point){var e=this._x2-t,n=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+n*n,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=t,this._y3=i;break;case 1:this._point=2;this._context.moveTo(this._x4=t,this._y4=i);break;case 2:this._point=3;this._x5=t,this._y5=i;break;default:i_(this,t,i);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=i}};var o_=function t(i){function e(t){return i?new r_(t,i):new Kc(t,0)}e.alpha=function(i){return t(+i)};return e}(.5);function s_(t,i){this._context=t;this._alpha=i}s_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){if(this._line||this._line!==0&&this._point===3){this._context.closePath()}this._line=1-this._line},point:function(t,i){t=+t,i=+i;if(this._point){var e=this._x2-t,n=this._y2-i;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+n*n,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:i_(this,t,i);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a;this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a;this._x0=this._x1,this._x1=this._x2,this._x2=t;this._y0=this._y1,this._y1=this._y2,this._y2=i}};var a_=function t(i){function e(t){return i?new s_(t,i):new Qc(t,0)}e.alpha=function(i){return t(+i)};return e}(.5);function h_(t){this._context=t}h_.prototype={areaStart:Hc,areaEnd:Hc,lineStart:function(){this._point=0},lineEnd:function(){if(this._point){this._context.closePath()}},point:function(t,i){t=+t,i=+i;if(this._point){this._context.lineTo(t,i)}else{this._point=1,this._context.moveTo(t,i)}}};var u_=function(t){return new h_(t)};function l_(t){return t<0?-1:1}function f_(t,i,e){var n=t._x1-t._x0,r=i-t._x1,o=(t._y1-t._y0)/(n||r<0&&-0),s=(e-t._y1)/(r||n<0&&-0),a=(o*r+s*n)/(n+r);return(l_(o)+l_(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function c_(t,i){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-i)/2:i}function __(t,i,e){var n=t._x0,r=t._y0,o=t._x1,s=t._y1,a=(o-n)/3;t._context.bezierCurveTo(n+a,r+a*i,o-a,s-a*e,o,s)}function p_(t){this._context=t}p_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:__(this,this._t0,c_(this,this._t0));break;
}if(this._line||this._line!==0&&this._point===1){this._context.closePath()}this._line=1-this._line},point:function(t,i){var e=NaN;t=+t,i=+i;if(t===this._x1&&i===this._y1){return}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;break;case 2:this._point=3;__(this,c_(this,e=f_(this,t,i)),e);break;default:__(this,this._t0,e=f_(this,t,i));break}this._x0=this._x1,this._x1=t;this._y0=this._y1,this._y1=i;this._t0=e}};function d_(t){this._context=new g_(t)}(d_.prototype=Object.create(p_.prototype)).point=function(t,i){p_.prototype.point.call(this,i,t)};function g_(t){this._context=t}g_.prototype={moveTo:function(t,i){this._context.moveTo(i,t)},closePath:function(){this._context.closePath()},lineTo:function(t,i){this._context.lineTo(i,t)},bezierCurveTo:function(t,i,e,n,r,o){this._context.bezierCurveTo(i,t,n,e,o,r)}};function v_(t){return new p_(t)}function y_(t){return new d_(t)}function m_(t){this._context=t}m_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var t=this;var i=this._x,e=this._y,n=i.length;if(n){this._line?this._context.lineTo(i[0],e[0]):this._context.moveTo(i[0],e[0]);if(n===2){this._context.lineTo(i[1],e[1])}else{var r=b_(i),o=b_(e);for(var s=0,a=1;a<n;++s,++a){t._context.bezierCurveTo(r[0][s],o[0][s],r[1][s],o[1][s],i[a],e[a])}}}if(this._line||this._line!==0&&n===1){this._context.closePath()}this._line=1-this._line;this._x=this._y=null},point:function(t,i){this._x.push(+t);this._y.push(+i)}};function b_(t){var i,e=t.length-1,n,r=new Array(e),o=new Array(e),s=new Array(e);r[0]=0,o[0]=2,s[0]=t[0]+2*t[1];for(i=1;i<e-1;++i){r[i]=1,o[i]=4,s[i]=4*t[i]+2*t[i+1]}r[e-1]=2,o[e-1]=7,s[e-1]=8*t[e-1]+t[e];for(i=1;i<e;++i){n=r[i]/o[i-1],o[i]-=n,s[i]-=n*s[i-1]}r[e-1]=s[e-1]/o[e-1];for(i=e-2;i>=0;--i){r[i]=(s[i]-r[i+1])/o[i]}o[e-1]=(t[e]+r[e-1])/2;for(i=0;i<e-1;++i){o[i]=2*t[i+1]-r[i+1]}return[r,o]}var x_=function(t){return new m_(t)};function w_(t,i){this._context=t;this._t=i}w_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){if(0<this._t&&this._t<1&&this._point===2){this._context.lineTo(this._x,this._y)}if(this._line||this._line!==0&&this._point===1){this._context.closePath()}if(this._line>=0){this._t=1-this._t,this._line=1-this._line}},point:function(t,i){t=+t,i=+i;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(t,i):this._context.moveTo(t,i);break;case 1:this._point=2;default:{if(this._t<=0){this._context.lineTo(this._x,i);this._context.lineTo(t,i)}else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y);this._context.lineTo(e,i)}break}}this._x=t,this._y=i}};var C_=function(t){return new w_(t,.5)};function A_(t){return new w_(t,0)}function S_(t){return new w_(t,1)}var k_=Array.prototype.slice;var E_=function(t,i){if(!((o=t.length)>1)){return}for(var e=1,n,r=t[i[0]],o,s=r.length;e<o;++e){n=r,r=t[i[e]];for(var a=0;a<s;++a){r[a][1]+=r[a][0]=isNaN(n[a][1])?n[a][0]:n[a][1]}}};var B_=function(t){var i=t.length,e=new Array(i);while(--i>=0){e[i]=i}return e};function D_(t,i){return t[i]}var M_=function(){var t=Uf([]),i=B_,e=E_,n=D_;function r(r){var o=t.apply(this,arguments),s,a=r.length,h=o.length,u=new Array(h),l;for(s=0;s<h;++s){for(var f=o[s],c=u[s]=new Array(a),_=0,p;_<a;++_){c[_]=p=[0,+n(r[_],f,_,r)];p.data=r[_]}c.key=f}for(s=0,l=i(u);s<h;++s){u[l[s]].index=s}e(u,l);return u}r.keys=function(i){return arguments.length?(t=typeof i==="function"?i:Uf(k_.call(i)),r):t};r.value=function(t){return arguments.length?(n=typeof t==="function"?t:Uf(+t),r):n};r.order=function(t){return arguments.length?(i=t==null?B_:typeof t==="function"?t:Uf(k_.call(t)),r):i};r.offset=function(t){return arguments.length?(e=t==null?E_:t,r):e};return r};var z_=function(t,i){if(!((n=t.length)>0)){return}for(var e,n,r=0,o=t[0].length,s;r<o;++r){for(s=e=0;e<n;++e){s+=t[e][r][1]||0}if(s){for(e=0;e<n;++e){t[e][r][1]/=s}}}E_(t,i)};var F_=function(t,i){if(!((r=t.length)>0)){return}for(var e=0,n=t[i[0]],r,o=n.length;e<o;++e){for(var s=0,a=0;s<r;++s){a+=t[s][e][1]||0}n[e][1]+=n[e][0]=-a/2}E_(t,i)};var O_=function(t,i){if(!((s=t.length)>0)||!((o=(r=t[i[0]]).length)>0)){return}for(var e=0,n=1,r,o,s;n<o;++n){for(var a=0,h=0,u=0;a<s;++a){var l=t[i[a]],f=l[n][1]||0,c=l[n-1][1]||0,_=(f-c)/2;for(var p=0;p<a;++p){var d=t[i[p]],g=d[n][1]||0,v=d[n-1][1]||0;_+=g-v}h+=f,u+=_*f}r[n-1][1]+=r[n-1][0]=e;if(h){e-=u/h}}r[n-1][1]+=r[n-1][0]=e;E_(t,i)};var N_=function(t){var i=t.map(T_);return B_(t).sort(function(t,e){return i[t]-i[e]})};function T_(t){var i=0,e=-1,n=t.length,r;while(++e<n){if(r=+t[e][1]){i+=r}}return i}var j_=function(t){return N_(t).reverse()};var P_=function(t){var i=t.length,e,n,r=t.map(T_),o=B_(t).sort(function(t,i){return r[i]-r[t]}),s=0,a=0,h=[],u=[];for(e=0;e<i;++e){n=o[e];if(s<a){s+=r[n];h.push(n)}else{a+=r[n];u.push(n)}}return u.reverse().concat(h)};var H_=function(t){return B_(t).reverse()};var R_=Object.freeze({arc:ec,area:hc,line:ac,pie:fc,radialArea:vc,radialLine:gc,symbol:Pc,symbols:jc,symbolCircle:yc,symbolCross:mc,symbolDiamond:wc,symbolSquare:Bc,symbolStar:Ec,symbolTriangle:Mc,symbolWye:Tc,curveBasisClosed:Uc,curveBasisOpen:qc,curveBasis:Wc,curveBundle:Xc,curveCardinalClosed:Zc,curveCardinalOpen:t_,curveCardinal:$c,curveCatmullRomClosed:o_,curveCatmullRomOpen:a_,curveCatmullRom:n_,curveLinearClosed:u_,curveLinear:rc,curveMonotoneX:v_,curveMonotoneY:y_,curveNatural:x_,curveStep:C_,curveStepAfter:S_,curveStepBefore:A_,stack:M_,stackOffsetExpand:z_,stackOffsetNone:E_,stackOffsetSilhouette:F_,stackOffsetWiggle:O_,stackOrderAscending:N_,stackOrderDescending:j_,stackOrderInsideOut:P_,stackOrderNone:B_,stackOrderReverse:H_});var L_=function(t){function i(){t.call(this);this._curve="linear";this._defined=function(){return true};this._name="Area";this._x=gu("x");this._x0=gu("x");this._x1=null;this._y=Cu(0);this._y0=Cu(0);this._y1=gu("y")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._dataFilter=function t(i){var e=this;var n=z().key(this._id).entries(i).map(function(t){t.data=Xl(t.values);t.i=i.indexOf(t.values[0]);var n=h(t.values.map(e._x).concat(t.values.map(e._x0)).concat(e._x1?t.values.map(e._x1):[]));t.xR=n;t.width=n[1]-n[0];t.x=n[0]+t.width/2;var r=h(t.values.map(e._y).concat(t.values.map(e._y0)).concat(e._y1?t.values.map(e._y1):[]));t.yR=r;t.height=r[1]-r[0];t.y=r[0]+t.height/2;t.nested=true;t.translate=[t.x,t.y];t.__d3plusShape__=true;return t});n.key=function(t){return t.key};return n};i.prototype.render=function i(e){t.prototype.render.call(this,e);var n=this._path=hc().defined(this._defined).curve(R_["curve"+this._curve.charAt(0).toUpperCase()+this._curve.slice(1)]).x(this._x).x0(this._x0).x1(this._x1).y(this._y).y0(this._y0).y1(this._y1);var r=hc().defined(function(t){return t}).curve(R_["curve"+this._curve.charAt(0).toUpperCase()+this._curve.slice(1)]).x(this._x).x0(this._x0).x1(this._x1).y(this._y).y0(this._y0).y1(this._y1);this._enter.append("path").attr("transform",function(t){return"translate("+(-t.xR[0]-t.width/2)+", "+(-t.yR[0]-t.height/2)+")"}).attr("d",function(t){return n(t.values)}).call(this._applyStyle.bind(this));this._update.select("path").transition(this._transition).attr("transform",function(t){return"translate("+(-t.xR[0]-t.width/2)+", "+(-t.yR[0]-t.height/2)+")"}).attrTween("d",function(t){return jf(Zs(this).attr("d"),n(t.values))}).call(this._applyStyle.bind(this));this._exit.select("path").transition(this._transition).attrTween("d",function(t){return jf(Zs(this).attr("d"),r(t.values))});return this};i.prototype._aes=function t(i,e){var n=this;return{points:i.values.map(function(t){return[n._x(t,e),n._y(t,e)]})}};i.prototype.curve=function t(i){return arguments.length?(this._curve=i,this):this._curve};i.prototype.defined=function t(i){return arguments.length?(this._defined=i,this):this._defined};i.prototype.x0=function t(i){if(!arguments.length){return this._x0}this._x0=typeof i==="function"?i:Cu(i);this._x=this._x0;return this};i.prototype.x1=function t(i){return arguments.length?(this._x1=typeof i==="function"||i===null?i:Cu(i),this):this._x1};i.prototype.y0=function t(i){if(!arguments.length){return this._y0}this._y0=typeof i==="function"?i:Cu(i);this._y=this._y0;return this};i.prototype.y1=function t(i){return arguments.length?(this._y1=typeof i==="function"||i===null?i:Cu(i),this):this._y1};return i}(Mf);var W_=function(t){function i(){t.call(this,"rect");this._name="Bar";this._height=Cu(10);this._labelBounds=function(t,i,e){return{width:e.width,height:e.height,x:-e.width/2,y:-e.height/2}};this._width=Cu(10);this._x=gu("x");this._x0=gu("x");this._x1=null;this._y=Cu(0);this._y0=Cu(0);this._y1=gu("y")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype.render=function i(e){var n=this;t.prototype.render.call(this,e);this._enter.attr("width",function(t,i){return n._x1===null?n._getWidth(t,i):0}).attr("height",function(t,i){return n._x1!==null?n._getHeight(t,i):0}).attr("x",function(t,i){return n._x1===null?-n._getWidth(t,i)/2:0}).attr("y",function(t,i){return n._x1!==null?-n._getHeight(t,i)/2:0}).call(this._applyStyle.bind(this)).transition(this._transition).call(this._applyPosition.bind(this));this._update.transition(this._transition).call(this._applyStyle.bind(this)).call(this._applyPosition.bind(this));this._exit.transition(this._transition).attr("width",function(t,i){return n._x1===null?n._getWidth(t,i):0}).attr("height",function(t,i){return n._x1!==null?n._getHeight(t,i):0}).attr("x",function(t,i){return n._x1===null?-n._getWidth(t,i)/2:0}).attr("y",function(t,i){return n._x1!==null?-n._getHeight(t,i)/2:0});return this};i.prototype._aes=function t(i,e){return{height:this._getHeight(i,e),width:this._getWidth(i,e),x:this._x1!==null?this._getX(i,e)+this._getWidth(i,e)/2:this._getX(i,e),y:this._x1===null?this._getY(i,e)+this._getHeight(i,e)/2:this._getY(i,e)}};i.prototype._applyPosition=function t(i){var e=this;i.attr("width",function(t,i){return e._getWidth(t,i)}).attr("height",function(t,i){return e._getHeight(t,i)}).attr("x",function(t,i){return e._x1!==null?e._getX(t,i):-e._getWidth(t,i)/2}).attr("y",function(t,i){return e._x1===null?e._getY(t,i):-e._getHeight(t,i)/2})};i.prototype._getHeight=function t(i,e){if(this._x1!==null){return this._height(i,e)}return Math.abs(this._y1(i,e)-this._y(i,e))};i.prototype._getWidth=function t(i,e){if(this._x1===null){return this._width(i,e)}return Math.abs(this._x1(i,e)-this._x(i,e))};i.prototype._getX=function t(i,e){var n=this._x1===null?this._width(i,e):this._x1(i,e)-this._x(i,e);if(n<0){return n}else{return 0}};i.prototype._getY=function t(i,e){var n=this._x1!==null?this._height(i,e):this._y1(i,e)-this._y(i,e);if(n<0){return n}else{return 0}};i.prototype.height=function t(i){return arguments.length?(this._height=typeof i==="function"?i:Cu(i),this):this._height};i.prototype.width=function t(i){return arguments.length?(this._width=typeof i==="function"?i:Cu(i),this):this._width};i.prototype.x0=function t(i){if(!arguments.length){return this._x0}this._x0=typeof i==="function"?i:Cu(i);this._x=this._x0;return this};i.prototype.x1=function t(i){return arguments.length?(this._x1=typeof i==="function"||i===null?i:Cu(i),this):this._x1};i.prototype.y0=function t(i){if(!arguments.length){return this._y0}this._y0=typeof i==="function"?i:Cu(i);this._y=this._y0;return this};i.prototype.y1=function t(i){return arguments.length?(this._y1=typeof i==="function"||i===null?i:Cu(i),this):this._y1};return i}(Mf);var G_=function(t){function i(){t.call(this,"circle");this._name="Circle";this._r=gu("r")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._applyPosition=function t(i){var e=this;i.attr("r",function(t,i){return e._r(t,i)}).attr("x",function(t,i){return-e._r(t,i)/2}).attr("y",function(t,i){return-e._r(t,i)/2})};i.prototype.render=function i(e){t.prototype.render.call(this,e);this._enter.attr("r",0).attr("x",0).attr("y",0).call(this._applyStyle.bind(this)).transition(this._transition).call(this._applyPosition.bind(this));this._update.transition(this._transition).call(this._applyStyle.bind(this)).call(this._applyPosition.bind(this));this._exit.transition(this._transition).attr("r",0).attr("x",0).attr("y",0);return this};i.prototype._aes=function t(i,e){return{r:this._r(i,e)}};i.prototype.r=function t(i){return arguments.length?(this._r=typeof i==="function"?i:Cu(i),this):this._r};return i}(Mf);var U_=function(t){function i(){t.call(this);this._curve="linear";this._defined=function(t){return t};this._fill=Cu("none");this._name="Line";this._path=ac();this._strokeWidth=Cu(1)}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._dataFilter=function t(i){var e=this;var n=z().key(this._id).entries(i).map(function(t){t.data=Xl(t.values);t.i=i.indexOf(t.values[0]);var n=h(t.values,e._x);t.xR=n;t.width=n[1]-n[0];t.x=n[0]+t.width/2;var r=h(t.values,e._y);t.yR=r;t.height=r[1]-r[0];t.y=r[0]+t.height/2;t.nested=true;t.translate=[t.x,t.y];t.__d3plusShape__=true;return t});n.key=function(t){return t.key};return n};i.prototype.render=function i(e){var n=this;t.prototype.render.call(this,e);var r=this;this._path.curve(R_["curve"+this._curve.charAt(0).toUpperCase()+this._curve.slice(1)]).defined(this._defined).x(this._x).y(this._y);this._enter.append("path").attr("transform",function(t){return"translate("+(-t.xR[0]-t.width/2)+", "+(-t.yR[0]-t.height/2)+")"}).attr("d",function(t){return n._path(t.values)}).call(this._applyStyle.bind(this));this._update.select("path").transition(this._transition).attr("transform",function(t){return"translate("+(-t.xR[0]-t.width/2)+", "+(-t.yR[0]-t.height/2)+")"}).attrTween("d",function(t){return jf(Zs(this).attr("d"),r._path(t.values))}).call(this._applyStyle.bind(this));return this};i.prototype._aes=function t(i,e){var n=this;return{points:i.values.map(function(t){return[n._x(t,e),n._y(t,e)]})}};i.prototype.curve=function t(i){return arguments.length?(this._curve=i,this):this._curve};i.prototype.defined=function t(i){return arguments.length?(this._defined=i,this):this._defined};return i}(Mf);var I_=function(t){function i(){t.call(this,"path");this._d=gu("path");this._name="Path"}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype.render=function i(e){t.prototype.render.call(this,e);this._enter.attr("opacity",0).attr("d",this._d).call(this._applyStyle.bind(this)).transition(this._transition).attr("opacity",1);this._update.transition(this._transition).call(this._applyStyle.bind(this)).attr("opacity",1).attr("d",this._d);this._exit.transition(this._transition).attr("opacity",0);return this};i.prototype.d=function t(i){return arguments.length?(this._d=typeof i==="function"?i:Cu(i),this):this._d};return i}(Mf);var q_=function(t){function i(){t.call(this,"rect");this._height=gu("height");this._labelBounds=function(t,i,e){return{width:e.width,height:e.height,x:-e.width/2,y:-e.height/2}};this._name="Rect";this._width=gu("width")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype.render=function i(e){t.prototype.render.call(this,e);this._enter.attr("width",0).attr("height",0).attr("x",0).attr("y",0).call(this._applyStyle.bind(this)).transition(this._transition).call(this._applyPosition.bind(this));this._update.transition(this._transition).call(this._applyStyle.bind(this)).call(this._applyPosition.bind(this));this._exit.transition(this._transition).attr("width",0).attr("height",0).attr("x",0).attr("y",0);return this};i.prototype._aes=function t(i,e){return{width:this._width(i,e),height:this._height(i,e)}};i.prototype._applyPosition=function t(i){var e=this;i.attr("width",function(t,i){return e._width(t,i)}).attr("height",function(t,i){return e._height(t,i)}).attr("x",function(t,i){return-e._width(t,i)/2}).attr("y",function(t,i){return-e._height(t,i)/2})};i.prototype.height=function t(i){return arguments.length?(this._height=typeof i==="function"?i:Cu(i),this):this._height};i.prototype.width=function t(i){return arguments.length?(this._width=typeof i==="function"?i:Cu(i),this):this._width};return i}(Mf);var Y_=Object.freeze({pointDistance:$l,Image:Kl,Shape:Mf,Area:L_,Bar:W_,Circle:G_,Line:U_,Path:I_,Rect:q_});var X_=function(t){if(t.constructor===Date){return t}else if(t.constructor===Number&&(""+t).length>5&&t%1===0){return new Date(t)}var i=""+t;if(!i.includes("/")&&!i.includes(" ")&&(!i.includes("-")||!i.indexOf("-"))){var e=new Date(i+"/01/01");e.setFullYear(t);return e}else{return new Date(i)}};var V_=function(t){function i(){var i=this;t.call(this);this._align="middle";this._barConfig={stroke:"#000","stroke-width":1};this._domain=[0,10];this._duration=600;this._gridConfig={stroke:"#ccc","stroke-width":1};this._height=400;this.orient("bottom");this._outerBounds={width:0,height:0,x:0,y:0};this._padding=5;this._paddingInner=.1;this._paddingOuter=.1;this._scale="linear";this._shape="Line";this._shapeConfig={fill:"#000",fontColor:"#000",fontFamily:(new Bf).fontFamily(),fontResize:false,fontSize:Cu(10),height:8,label:function(t){return t.text},labelBounds:function(t){return t.labelBounds},labelPadding:0,r:4,stroke:"#000",strokeWidth:1,textAnchor:function(){return i._orient==="left"?"end":i._orient==="right"?"start":"middle"},verticalAlign:function(){return i._orient==="bottom"?"top":i._orient==="top"?"bottom":"middle"},width:8};this._tickSize=5;this._titleConfig={fontFamily:"Verdana",fontSize:12,lineHeight:13,textAnchor:"middle"};this._width=400}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._barPosition=function t(i){var e=this._position;var n=e.height;var r=e.x;var o=e.y;var s=e.opposite;var a=this._d3Scale.domain(),h=this._margin[s],u=["top","left"].includes(this._orient)?this._outerBounds[o]+this._outerBounds[n]-h:this._outerBounds[o]+h;i.call(mu,this._barConfig).attr(r+"1",this._d3Scale(a[0])-(this._scale==="band"?this._d3Scale.step()-this._d3Scale.bandwidth():0)).attr(r+"2",this._d3Scale(a[a.length-1])+(this._scale==="band"?this._d3Scale.step():0)).attr(o+"1",u).attr(o+"2",u)};i.prototype._gridPosition=function t(i,e){if(e===void 0)e=false;var n=this._position;var r=n.height;var o=n.x;var s=n.y;var a=n.opposite;var h=this._margin[a],u=["top","left"].includes(this._orient)?this._outerBounds[s]+this._outerBounds[r]-h:this._outerBounds[s]+h,l=e?this._lastScale||this._d3Scale:this._d3Scale,f=["top","left"].includes(this._orient)?h:-h,c=this._scale==="band"?this._d3Scale.bandwidth()/2:0,_=function(t){return l(t.id)+c};i.call(mu,this._gridConfig).attr(o+"1",_).attr(o+"2",_).attr(s+"1",u).attr(s+"2",e?u:u+f)};i.prototype.align=function t(i){return arguments.length?(this._align=i,this):this._align};i.prototype.barConfig=function t(i){return arguments.length?(this._barConfig=Object.assign(this._barConfig,i),this):this._barConfig};i.prototype.domain=function t(i){return arguments.length?(this._domain=i,this):this._domain};i.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};i.prototype.grid=function t(i){return arguments.length?(this._grid=i,this):this._grid};i.prototype.gridConfig=function t(i){return arguments.length?(this._gridConfig=Object.assign(this._gridConfig,i),this):this._gridConfig};i.prototype.gridSize=function t(i){return arguments.length?(this._gridSize=i,this):this._gridSize};i.prototype.height=function t(i){return arguments.length?(this._height=i,this):this._height};i.prototype.labels=function t(i){return arguments.length?(this._labels=i,this):this._labels};i.prototype.orient=function t(i){if(arguments.length){var e=["top","bottom"].includes(i),n={top:"bottom",right:"left",bottom:"top",left:"right"};this._position={horizontal:e,width:e?"width":"height",height:e?"height":"width",x:e?"x":"y",y:e?"y":"x",opposite:n[i]};return this._orient=i,this}return this._orient};i.prototype.outerBounds=function t(){return this._outerBounds};i.prototype.padding=function t(i){return arguments.length?(this._padding=i,this):this._padding};i.prototype.paddingInner=function t(i){return arguments.length?(this._paddingInner=i,this):this._paddingInner};i.prototype.paddingOuter=function t(i){return arguments.length?(this._paddingOuter=i,this):this._paddingOuter};i.prototype.range=function t(i){return arguments.length?(this._range=i,this):this._range};i.prototype.render=function t(i){var e=this;if(this._select===void 0){this.select(Zs("body").append("svg").attr("width",this._width+"px").attr("height",this._height+"px").node())}if(this._lineHeight===void 0){this._lineHeight=function(t,i){return e._shapeConfig.fontSize(t,i)*1.1}}var n=this._position;var r=n.width;var o=n.height;var s=n.x;var a=n.y;var h=n.horizontal;var u=n.opposite;var l="d3plus-Axis-clip-"+this._uuid,f=this._padding,c=this._select,_=Ph().duration(this._duration);var d=this._range?this._range.slice():[undefined,undefined];if(d[0]===void 0){d[0]=f}if(d[1]===void 0){d[1]=this["_"+r]-f}this._size=d[1]-d[0];if(this._scale==="ordinal"&&this._domain.length>d.length){d=p(this._domain.length).map(function(t){return e._size*(t/(e._domain.length-1))+d[0]})}this._margin={top:0,right:0,bottom:0,left:0};if(this._title){var g=this._titleConfig.lineHeight?this._titleConfig.lineHeight:this._titleConfig.fontSize*1.1,v=Ef().fontFamily(this._titleConfig.fontFamily).fontSize(this._titleConfig.fontSize).lineHeight(g).width(this._size).height(this["_"+o]-this._tickSize-f)(this._title);this._margin[this._orient]=v.lines.length*g+f}this._d3Scale=ro["scale"+this._scale.charAt(0).toUpperCase()+this._scale.slice(1)]().domain(this._scale==="time"?this._domain.map(X_):this._domain);if(this._d3Scale.rangeRound){this._d3Scale.rangeRound(d)}else{this._d3Scale.range(d)}if(this._d3Scale.round){this._d3Scale.round(true)}if(this._d3Scale.paddingInner){this._d3Scale.paddingInner(this._paddingInner)}if(this._d3Scale.paddingOuter){this._d3Scale.paddingOuter(this._paddingOuter)}var y=ze().domain([10,400]).range([10,this._gridSize===0?45:75]);var m=this._ticks?this._scale==="time"?this._ticks.map(X_):this._ticks:this._d3Scale.ticks?this._d3Scale.ticks(Math.floor(this._size/y(this._size))):this._domain;var b=this._labels?this._scale==="time"?this._labels.map(X_):this._labels:this._ticks?m:this._d3Scale.ticks?this._d3Scale.ticks(Math.floor(this._size/y(this._size))):m;var x=this._tickFormat?this._tickFormat:this._d3Scale.tickFormat?this._d3Scale.tickFormat(b.length-1):function(t){return t};if(this._scale==="time"){m=m.map(Number);b=b.map(Number)}var C=this._shape==="Circle"?this._shapeConfig.r:this._shape==="Rect"?this._shapeConfig[r]:this._shapeConfig.strokeWidth;var A=typeof C!=="function"?function(){return C}:C;var k=[];this._availableTicks=m;m.forEach(function(t,i){var n=A(t,i);if(e._shape==="Circle"){n*=2}var r=e._d3Scale(t);if(!k.length||!k.includes(r)&&w(k)<r-n*2){k.push(r)}else{k.push(false)}});m=m.filter(function(t,i){return k[i]!==false});this._visibleTicks=m;var E=this._shape==="Circle"?this._shapeConfig.r:this._shape==="Rect"?this._shapeConfig[o]:this._tickSize,B=this._shape==="Circle"?this._shapeConfig.r:this._shape==="Rect"?this._shapeConfig[r]:this._shapeConfig.strokeWidth;if(typeof E==="function"){E=w(m.map(E))}if(this._shape==="Rect"){E/=2}if(typeof B==="function"){B=w(m.map(B))}if(this._shape!=="Circle"){B/=2}if(this._scale==="band"){this._space=this._d3Scale.bandwidth()}else if(b.length>1){this._space=0;for(var D=0;D<b.length-1;D++){var M=e._d3Scale(b[D+1])-e._d3Scale(b[D]);if(M>e._space){e._space=M}}}else{this._space=this._size}var z=b.map(function(t,i){var n=e._shapeConfig.fontFamily(t,i),r=e._shapeConfig.fontSize(t,i);var o=e._shapeConfig.lineHeight?e._shapeConfig.lineHeight(t,i):r*1.1;var s=Ef().fontFamily(n).fontSize(r).lineHeight(o).width(h?e._space:e._width-E-f).height(h?e._height-E-f:e._space)(x(t));s.lines=s.lines.filter(function(t){return t!==""});s.d=t;s.fS=r;s.width=Math.ceil(w(s.lines.map(function(t){return kf(t,{"font-family":n,"font-size":r})})))+r/4;s.height=Math.ceil(s.lines.length*(o+1));if(s.width%2){s.width++}return s});var F=d.slice();var O=d.length-1;if(this._scale!=="band"&&z.length){var N=z[0],T=z[z.length-1];var j=S([this._d3Scale(N.d)-N[r]/2,d[0]-B]);if(j<d[0]){var P=d[0]-j;if(this._range===void 0||this._range[0]===void 0){this._size-=P;d[0]+=P}else if(this._range){F[0]-=P}}var H=w([this._d3Scale(T.d)+T[r]/2,d[O]+B]);if(H>d[O]){var R=H-d[O];if(this._range===void 0||this._range[O]===void 0){this._size-=R;d[O]-=R}else if(this._range){F[O]+=R}}if(this._d3Scale.rangeRound){this._d3Scale.rangeRound(d)}else{this._d3Scale.range(d)}}var L=this._shape==="Line"?0:E;var W;this._outerBounds=(W={},W[o]=(w(z,function(t){return t[o]})||0)+(z.length?f:0),W[r]=F[O]-F[0],W[s]=F[0],W);this._margin[u]=this._gridSize!==void 0?w([this._gridSize,L]):this["_"+o]-this._margin[this._orient]-this._outerBounds[o]-f*2-E;this._margin[this._orient]+=E;this._outerBounds[o]+=this._margin[u]+this._margin[this._orient];this._outerBounds[a]=this._align==="start"?this._padding:this._align==="end"?this["_"+o]-this._outerBounds[o]-this._padding:this["_"+o]/2-this._outerBounds[o]/2;var G=Au("g#d3plus-Axis-"+this._uuid,{parent:c});this._group=G;var U=Au("g.grid",{parent:G}).selectAll("line").data((this._gridSize!==0?this._grid||m:[]).map(function(t){return{id:t}}),function(t){return t.id});U.exit().transition(_).attr("opacity",0).call(this._gridPosition.bind(this)).remove();U.enter().append("line").attr("opacity",0).attr("clip-path","url(#"+l+")").call(this._gridPosition.bind(this),true).merge(U).transition(_).attr("opacity",1).call(this._gridPosition.bind(this));var I=w(z,function(t){return t.height})||0,q=h?this._space*1.1:(this._outerBounds.width-this._margin[this._position.opposite]-E-this._margin[this._orient]+f)*1.1;var Y=m.concat(b.filter(function(t,i){return z[i].lines.length&&!m.includes(t)})).map(function(t){var i=e._margin[u],n=["top","left"].includes(e._orient)?e._outerBounds[a]+e._outerBounds[o]-i:e._outerBounds[a]+i,r=["top","left"].includes(e._orient)?-E:E,l=e._shape==="Line"?r/2:r;var c;return c={id:t,labelBounds:{x:h?-q/2:e._orient==="left"?-q-f+l:l+f,y:h?e._orient==="bottom"?l+f:l-f-I:-I/2,width:q,height:I},size:r,text:b.includes(t)?x(t):false},c[s]=e._d3Scale(t)+(e._scale==="band"?e._d3Scale.bandwidth()/2:0),c[a]=n,c});if(this._shape==="Line"){Y=Y.concat(Y.map(function(t){var i=Object.assign({},t);i[a]+=t.size;return i}))}(new Y_[this._shape]).data(Y).duration(this._duration).select(Au("g.ticks",{parent:G}).node()).config(this._shapeConfig).render();var X=G.selectAll("line.bar").data([null]);X.enter().append("line").attr("class","bar").attr("opacity",0).call(this._barPosition.bind(this)).merge(X).transition(_).attr("opacity",1).call(this._barPosition.bind(this));(new Bf).data(this._title?[{text:this._title}]:[]).duration(this._duration).height(this._outerBounds.height).rotate(this._orient==="left"?-90:this._orient==="right"?90:0).select(Au("g.d3plus-Axis-title",{parent:G}).node()).text(function(t){return t.text}).textAnchor("middle").verticalAlign(this._orient==="bottom"?"bottom":"top").width(this._outerBounds[r]).x(h?this._outerBounds.x:this._orient==="left"?this._outerBounds.x+this._margin[this._orient]/2-this._outerBounds[r]/2:this._outerBounds.x+this._outerBounds.width-this._margin[this._orient]/2-this._outerBounds[r]/2).y(h?this._outerBounds.y:this._outerBounds.y-this._margin[this._orient]/2+this._outerBounds[r]/2).config(this._titleConfig).render();this._lastScale=this._d3Scale;if(i){setTimeout(i,this._duration+100)}return this};i.prototype.scale=function t(i){return arguments.length?(this._scale=i,this):this._scale};i.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};i.prototype.shape=function t(i){return arguments.length?(this._shape=i,this):this._shape};i.prototype.shapeConfig=function t(i){return arguments.length?(this._shapeConfig=Object.assign(this._shapeConfig,i),this):this._shapeConfig};i.prototype.tickFormat=function t(i){return arguments.length?(this._tickFormat=i,this):this._tickFormat};i.prototype.ticks=function t(i){return arguments.length?(this._ticks=i,this):this._ticks};i.prototype.tickSize=function t(i){return arguments.length?(this._tickSize=i,this):this._tickSize};i.prototype.title=function t(i){return arguments.length?(this._title=i,this):this._title};i.prototype.titleConfig=function t(i){return arguments.length?(this._titleConfig=Object.assign(this._titleConfig,i),this):this._titleConfig};i.prototype.width=function t(i){return arguments.length?(this._width=i,this):this._width};return i}(xu);var J_=function(t){function i(){t.call(this);this.orient("bottom")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;return i}(V_);var $_=function(t){function i(){t.call(this);this.orient("left")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;return i}(V_);var K_=function(t){function i(){t.call(this);this.orient("right")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;return i}(V_);var Z_=function(t){function i(){t.call(this);this.orient("top")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;return i}(V_);var Q_=function(){return new tp};function tp(){this.reset()}tp.prototype={constructor:tp,reset:function(){this.s=this.t=0},add:function(t){ep(ip,t,this.t);ep(this,ip.s,this.s);if(this.s){this.t+=ip.t}else{this.s=ip.t}},valueOf:function(){return this.s}};var ip=new tp;function ep(t,i,e){var n=t.s=i+e,r=n-i,o=n-r;t.t=i-o+(e-r)}var np=1e-6;var rp=1e-12;var op=Math.PI;var sp=op/2;var ap=op/4;var hp=op*2;var up=180/op;var lp=op/180;var fp=Math.abs;var cp=Math.atan;var _p=Math.atan2;var pp=Math.cos;var dp=Math.ceil;var gp=Math.exp;var vp=Math.log;var yp=Math.pow;var mp=Math.sin;var bp=Math.sign||function(t){return t>0?1:t<0?-1:0};var xp=Math.sqrt;var wp=Math.tan;function Cp(t){return t>1?0:t<-1?op:Math.acos(t)}function Ap(t){return t>1?sp:t<-1?-sp:Math.asin(t)}function Sp(t){return(t=mp(t/2))*t}function kp(){}function Ep(t,i){if(t&&Dp.hasOwnProperty(t.type)){Dp[t.type](t,i)}}var Bp={Feature:function(t,i){Ep(t.geometry,i)},FeatureCollection:function(t,i){var e=t.features,n=-1,r=e.length;while(++n<r){Ep(e[n].geometry,i)}}};var Dp={Sphere:function(t,i){i.sphere()},Point:function(t,i){t=t.coordinates;i.point(t[0],t[1],t[2])},MultiPoint:function(t,i){var e=t.coordinates,n=-1,r=e.length;while(++n<r){t=e[n],i.point(t[0],t[1],t[2])}},LineString:function(t,i){Mp(t.coordinates,i,0)},MultiLineString:function(t,i){var e=t.coordinates,n=-1,r=e.length;while(++n<r){Mp(e[n],i,0)}},Polygon:function(t,i){zp(t.coordinates,i)},MultiPolygon:function(t,i){var e=t.coordinates,n=-1,r=e.length;while(++n<r){zp(e[n],i)}},GeometryCollection:function(t,i){var e=t.geometries,n=-1,r=e.length;while(++n<r){Ep(e[n],i)}}};function Mp(t,i,e){var n=-1,r=t.length-e,o;i.lineStart();while(++n<r){o=t[n],i.point(o[0],o[1],o[2])}i.lineEnd()}function zp(t,i){var e=-1,n=t.length;i.polygonStart();while(++e<n){Mp(t[e],i,1)}i.polygonEnd()}var Fp=function(t,i){if(t&&Bp.hasOwnProperty(t.type)){Bp[t.type](t,i)}else{Ep(t,i)}};var Op=Q_();var Np=Q_();var Tp;var jp;var Pp;var Hp;var Rp;var Lp={point:kp,lineStart:kp,lineEnd:kp,polygonStart:function(){Op.reset();Lp.lineStart=Wp;Lp.lineEnd=Gp},polygonEnd:function(){var t=+Op;Np.add(t<0?hp+t:t);this.lineStart=this.lineEnd=this.point=kp},sphere:function(){Np.add(hp)}};function Wp(){Lp.point=Up}function Gp(){Ip(Tp,jp)}function Up(t,i){Lp.point=Ip;Tp=t,jp=i;t*=lp,i*=lp;Pp=t,Hp=pp(i=i/2+ap),Rp=mp(i)}function Ip(t,i){t*=lp,i*=lp;i=i/2+ap;var e=t-Pp,n=e>=0?1:-1,r=n*e,o=pp(i),s=mp(i),a=Rp*s,h=Hp*o+a*pp(r),u=a*n*mp(r);Op.add(_p(u,h));Pp=t,Hp=o,Rp=s}function qp(t){return[_p(t[1],t[0]),Ap(t[2])]}function Yp(t){var i=t[0],e=t[1],n=pp(e);
return[n*pp(i),n*mp(i),mp(e)]}function Xp(t,i){return t[0]*i[0]+t[1]*i[1]+t[2]*i[2]}function Vp(t,i){return[t[1]*i[2]-t[2]*i[1],t[2]*i[0]-t[0]*i[2],t[0]*i[1]-t[1]*i[0]]}function Jp(t,i){t[0]+=i[0],t[1]+=i[1],t[2]+=i[2]}function $p(t,i){return[t[0]*i,t[1]*i,t[2]*i]}function Kp(t){var i=xp(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=i,t[1]/=i,t[2]/=i}var Zp;var Qp;var td;var id;var ed;var nd;var rd;var od;var sd=Q_();var ad;var hd;var ud={point:ld,lineStart:cd,lineEnd:_d,polygonStart:function(){ud.point=pd;ud.lineStart=dd;ud.lineEnd=gd;sd.reset();Lp.polygonStart()},polygonEnd:function(){Lp.polygonEnd();ud.point=ld;ud.lineStart=cd;ud.lineEnd=_d;if(Op<0){Zp=-(td=180),Qp=-(id=90)}else if(sd>np){id=90}else if(sd<-np){Qp=-90}hd[0]=Zp,hd[1]=td}};function ld(t,i){ad.push(hd=[Zp=t,td=t]);if(i<Qp){Qp=i}if(i>id){id=i}}function fd(t,i){var e=Yp([t*lp,i*lp]);if(od){var n=Vp(od,e),r=[n[1],-n[0],0],o=Vp(r,n);Kp(o);o=qp(o);var s=t-ed,a=s>0?1:-1,h=o[0]*up*a,u,l=fp(s)>180;if(l^(a*ed<h&&h<a*t)){u=o[1]*up;if(u>id){id=u}}else if(h=(h+360)%360-180,l^(a*ed<h&&h<a*t)){u=-o[1]*up;if(u<Qp){Qp=u}}else{if(i<Qp){Qp=i}if(i>id){id=i}}if(l){if(t<ed){if(vd(Zp,t)>vd(Zp,td)){td=t}}else{if(vd(t,td)>vd(Zp,td)){Zp=t}}}else{if(td>=Zp){if(t<Zp){Zp=t}if(t>td){td=t}}else{if(t>ed){if(vd(Zp,t)>vd(Zp,td)){td=t}}else{if(vd(t,td)>vd(Zp,td)){Zp=t}}}}}else{ld(t,i)}od=e,ed=t}function cd(){ud.point=fd}function _d(){hd[0]=Zp,hd[1]=td;ud.point=ld;od=null}function pd(t,i){if(od){var e=t-ed;sd.add(fp(e)>180?e+(e>0?360:-360):e)}else{nd=t,rd=i}Lp.point(t,i);fd(t,i)}function dd(){Lp.lineStart()}function gd(){pd(nd,rd);Lp.lineEnd();if(fp(sd)>np){Zp=-(td=180)}hd[0]=Zp,hd[1]=td;od=null}function vd(t,i){return(i-=t)<0?i+360:i}function yd(t,i){return t[0]-i[0]}function md(t,i){return t[0]<=t[1]?t[0]<=i&&i<=t[1]:i<t[0]||t[1]<i}var bd;var xd;var wd;var Cd;var Ad;var Sd;var kd;var Ed;var Bd;var Dd;var Md;var zd;var Fd;var Od;var Nd;var Td;var jd={sphere:kp,point:Pd,lineStart:Rd,lineEnd:Gd,polygonStart:function(){jd.lineStart=Ud;jd.lineEnd=Id},polygonEnd:function(){jd.lineStart=Rd;jd.lineEnd=Gd}};function Pd(t,i){t*=lp,i*=lp;var e=pp(i);Hd(e*pp(t),e*mp(t),mp(i))}function Hd(t,i,e){++bd;wd+=(t-wd)/bd;Cd+=(i-Cd)/bd;Ad+=(e-Ad)/bd}function Rd(){jd.point=Ld}function Ld(t,i){t*=lp,i*=lp;var e=pp(i);Od=e*pp(t);Nd=e*mp(t);Td=mp(i);jd.point=Wd;Hd(Od,Nd,Td)}function Wd(t,i){t*=lp,i*=lp;var e=pp(i),n=e*pp(t),r=e*mp(t),o=mp(i),s=_p(xp((s=Nd*o-Td*r)*s+(s=Td*n-Od*o)*s+(s=Od*r-Nd*n)*s),Od*n+Nd*r+Td*o);xd+=s;Sd+=s*(Od+(Od=n));kd+=s*(Nd+(Nd=r));Ed+=s*(Td+(Td=o));Hd(Od,Nd,Td)}function Gd(){jd.point=Pd}function Ud(){jd.point=qd}function Id(){Yd(zd,Fd);jd.point=Pd}function qd(t,i){zd=t,Fd=i;t*=lp,i*=lp;jd.point=Yd;var e=pp(i);Od=e*pp(t);Nd=e*mp(t);Td=mp(i);Hd(Od,Nd,Td)}function Yd(t,i){t*=lp,i*=lp;var e=pp(i),n=e*pp(t),r=e*mp(t),o=mp(i),s=Nd*o-Td*r,a=Td*n-Od*o,h=Od*r-Nd*n,u=xp(s*s+a*a+h*h),l=Od*n+Nd*r+Td*o,f=u&&-Cp(l)/u,c=_p(u,l);Bd+=f*s;Dd+=f*a;Md+=f*h;xd+=c;Sd+=c*(Od+(Od=n));kd+=c*(Nd+(Nd=r));Ed+=c*(Td+(Td=o));Hd(Od,Nd,Td)}var Xd=function(t){return function(){return t}};var Vd=function(t,i){function e(e,n){return e=t(e,n),i(e[0],e[1])}if(t.invert&&i.invert){e.invert=function(e,n){return e=i.invert(e,n),e&&t.invert(e[0],e[1])}}return e};function Jd(t,i){return[t>op?t-hp:t<-op?t+hp:t,i]}Jd.invert=Jd;function $d(t,i,e){return(t%=hp)?i||e?Vd(Zd(t),Qd(i,e)):Zd(t):i||e?Qd(i,e):Jd}function Kd(t){return function(i,e){return i+=t,[i>op?i-hp:i<-op?i+hp:i,e]}}function Zd(t){var i=Kd(t);i.invert=Kd(-t);return i}function Qd(t,i){var e=pp(t),n=mp(t),r=pp(i),o=mp(i);function s(t,i){var s=pp(i),a=pp(t)*s,h=mp(t)*s,u=mp(i),l=u*e+a*n;return[_p(h*r-l*o,a*e-u*n),Ap(l*r+h*o)]}s.invert=function(t,i){var s=pp(i),a=pp(t)*s,h=mp(t)*s,u=mp(i),l=u*r-h*o;return[_p(h*r+u*o,a*e+l*n),Ap(l*e-a*n)]};return s}function tg(t,i,e,n,r,o){if(!e){return}var s=pp(i),a=mp(i),h=n*e;if(r==null){r=i+n*hp;o=i-h/2}else{r=ig(s,r);o=ig(s,o);if(n>0?r<o:r>o){r+=n*hp}}for(var u,l=r;n>0?l>o:l<o;l-=h){u=qp([s,-a*pp(l),-a*mp(l)]);t.point(u[0],u[1])}}function ig(t,i){i=Yp(i),i[0]-=t;Kp(i);var e=Cp(-i[1]);return((-i[2]<0?-e:e)+hp-np)%hp}var eg=function(){var t=[],i;return{point:function(t,e){i.push([t,e])},lineStart:function(){t.push(i=[])},lineEnd:kp,rejoin:function(){if(t.length>1){t.push(t.pop().concat(t.shift()))}},result:function(){var e=t;t=[];i=null;return e}}};var ng=function(t,i,e,n,r,o){var s=t[0],a=t[1],h=i[0],u=i[1],l=0,f=1,c=h-s,_=u-a,p;p=e-s;if(!c&&p>0){return}p/=c;if(c<0){if(p<l){return}if(p<f){f=p}}else if(c>0){if(p>f){return}if(p>l){l=p}}p=r-s;if(!c&&p<0){return}p/=c;if(c<0){if(p>f){return}if(p>l){l=p}}else if(c>0){if(p<l){return}if(p<f){f=p}}p=n-a;if(!_&&p>0){return}p/=_;if(_<0){if(p<l){return}if(p<f){f=p}}else if(_>0){if(p>f){return}if(p>l){l=p}}p=o-a;if(!_&&p<0){return}p/=_;if(_<0){if(p>f){return}if(p>l){l=p}}else if(_>0){if(p<l){return}if(p<f){f=p}}if(l>0){t[0]=s+l*c,t[1]=a+l*_}if(f<1){i[0]=s+f*c,i[1]=a+f*_}return true};var rg=function(t,i){return fp(t[0]-i[0])<np&&fp(t[1]-i[1])<np};function og(t,i,e,n){this.x=t;this.z=i;this.o=e;this.e=n;this.v=false;this.n=this.p=null}var sg=function(t,i,e,n,r){var o=[],s=[],a,h;t.forEach(function(t){if((i=t.length-1)<=0){return}var i,e=t[0],n=t[i],h;if(rg(e,n)){r.lineStart();for(a=0;a<i;++a){r.point((e=t[a])[0],e[1])}r.lineEnd();return}o.push(h=new og(e,t,null,true));s.push(h.o=new og(e,null,h,false));o.push(h=new og(n,t,null,false));s.push(h.o=new og(n,null,h,true))});if(!o.length){return}s.sort(i);ag(o);ag(s);for(a=0,h=s.length;a<h;++a){s[a].e=e=!e}var u=o[0],l,f;while(1){var c=u,_=true;while(c.v){if((c=c.n)===u){return}}l=c.z;r.lineStart();do{c.v=c.o.v=true;if(c.e){if(_){for(a=0,h=l.length;a<h;++a){r.point((f=l[a])[0],f[1])}}else{n(c.x,c.n.x,1,r)}c=c.n}else{if(_){l=c.p.z;for(a=l.length-1;a>=0;--a){r.point((f=l[a])[0],f[1])}}else{n(c.x,c.p.x,-1,r)}c=c.p}c=c.o;l=c.z;_=!_}while(!c.v);r.lineEnd()}};function ag(t){if(!(i=t.length)){return}var i,e=0,n=t[0],r;while(++e<i){n.n=r=t[e];r.p=n;n=r}n.n=r=t[0];r.p=n}var hg=1e9;var ug=-hg;function lg(t,i,e,n){function r(r,o){return t<=r&&r<=e&&i<=o&&o<=n}function o(r,o,a,u){var l=0,f=0;if(r==null||(l=s(r,a))!==(f=s(o,a))||h(r,o)<0^a>0){do{u.point(l===0||l===3?t:e,l>1?n:i)}while((l=(l+a+4)%4)!==f)}else{u.point(o[0],o[1])}}function s(n,r){return fp(n[0]-t)<np?r>0?0:3:fp(n[0]-e)<np?r>0?2:1:fp(n[1]-i)<np?r>0?1:0:r>0?3:2}function a(t,i){return h(t.x,i.x)}function h(t,i){var e=s(t,1),n=s(i,1);return e!==n?e-n:e===0?i[1]-t[1]:e===1?t[0]-i[0]:e===2?t[1]-i[1]:i[0]-t[0]}return function(s){var h=s,u=eg(),l,f,c,_,p,d,g,v,y,m,b;var x={point:w,lineStart:E,lineEnd:B,polygonStart:S,polygonEnd:k};function w(t,i){if(r(t,i)){h.point(t,i)}}function C(){var i=0;for(var e=0,r=f.length;e<r;++e){for(var o=f[e],s=1,a=o.length,h=o[0],u,l,c=h[0],_=h[1];s<a;++s){u=c,l=_,h=o[s],c=h[0],_=h[1];if(l<=n){if(_>n&&(c-u)*(n-l)>(_-l)*(t-u)){++i}}else{if(_<=n&&(c-u)*(n-l)<(_-l)*(t-u)){--i}}}}return i}function S(){h=u,l=[],f=[],b=true}function k(){var t=C(),i=b&&t,e=(l=A(l)).length;if(i||e){s.polygonStart();if(i){s.lineStart();o(null,null,1,s);s.lineEnd()}if(e){sg(l,a,t,o,s)}s.polygonEnd()}h=s,l=f=c=null}function E(){x.point=D;if(f){f.push(c=[])}m=true;y=false;g=v=NaN}function B(){if(l){D(_,p);if(d&&y){u.rejoin()}l.push(u.result())}x.point=w;if(y){h.lineEnd()}}function D(o,s){var a=r(o,s);if(f){c.push([o,s])}if(m){_=o,p=s,d=a;m=false;if(a){h.lineStart();h.point(o,s)}}else{if(a&&y){h.point(o,s)}else{var u=[g=Math.max(ug,Math.min(hg,g)),v=Math.max(ug,Math.min(hg,v))],l=[o=Math.max(ug,Math.min(hg,o)),s=Math.max(ug,Math.min(hg,s))];if(ng(u,l,t,i,e,n)){if(!y){h.lineStart();h.point(u[0],u[1])}h.point(l[0],l[1]);if(!a){h.lineEnd()}b=false}else if(a){h.lineStart();h.point(o,s);b=false}}}g=o,v=s,y=a}return x}}var fg=Q_();var cg;var _g;var pg;var dg={sphere:kp,point:kp,lineStart:gg,lineEnd:kp,polygonStart:kp,polygonEnd:kp};function gg(){dg.point=yg;dg.lineEnd=vg}function vg(){dg.point=dg.lineEnd=kp}function yg(t,i){t*=lp,i*=lp;cg=t,_g=mp(i),pg=pp(i);dg.point=mg}function mg(t,i){t*=lp,i*=lp;var e=mp(i),n=pp(i),r=fp(t-cg),o=pp(r),s=mp(r),a=n*s,h=pg*e-_g*n*o,u=_g*e+pg*n*o;fg.add(_p(xp(a*a+h*h),u));cg=t,_g=e,pg=n}function bg(t,i,e){var n=p(t,i-np,e).concat(i);return function(t){return n.map(function(i){return[t,i]})}}function xg(t,i,e){var n=p(t,i-np,e).concat(i);return function(t){return n.map(function(i){return[i,t]})}}var wg=function(t){return t};var Cg=Q_();var Ag=Q_();var Sg;var kg;var Eg;var Bg;var Dg={point:kp,lineStart:kp,lineEnd:kp,polygonStart:function(){Dg.lineStart=Mg;Dg.lineEnd=Og},polygonEnd:function(){Dg.lineStart=Dg.lineEnd=Dg.point=kp;Cg.add(fp(Ag));Ag.reset()},result:function(){var t=Cg/2;Cg.reset();return t}};function Mg(){Dg.point=zg}function zg(t,i){Dg.point=Fg;Sg=Eg=t,kg=Bg=i}function Fg(t,i){Ag.add(Bg*t-Eg*i);Eg=t,Bg=i}function Og(){Fg(Sg,kg)}var Ng=Infinity;var Tg=Ng;var jg=-Ng;var Pg=jg;var Hg={point:Rg,lineStart:kp,lineEnd:kp,polygonStart:kp,polygonEnd:kp,result:function(){var t=[[Ng,Tg],[jg,Pg]];jg=Pg=-(Tg=Ng=Infinity);return t}};function Rg(t,i){if(t<Ng){Ng=t}if(t>jg){jg=t}if(i<Tg){Tg=i}if(i>Pg){Pg=i}}var Lg=0;var Wg=0;var Gg=0;var Ug=0;var Ig=0;var qg=0;var Yg=0;var Xg=0;var Vg=0;var Jg;var $g;var Kg;var Zg;var Qg={point:tv,lineStart:iv,lineEnd:rv,polygonStart:function(){Qg.lineStart=ov;Qg.lineEnd=sv},polygonEnd:function(){Qg.point=tv;Qg.lineStart=iv;Qg.lineEnd=rv},result:function(){var t=Vg?[Yg/Vg,Xg/Vg]:qg?[Ug/qg,Ig/qg]:Gg?[Lg/Gg,Wg/Gg]:[NaN,NaN];Lg=Wg=Gg=Ug=Ig=qg=Yg=Xg=Vg=0;return t}};function tv(t,i){Lg+=t;Wg+=i;++Gg}function iv(){Qg.point=ev}function ev(t,i){Qg.point=nv;tv(Kg=t,Zg=i)}function nv(t,i){var e=t-Kg,n=i-Zg,r=xp(e*e+n*n);Ug+=r*(Kg+t)/2;Ig+=r*(Zg+i)/2;qg+=r;tv(Kg=t,Zg=i)}function rv(){Qg.point=tv}function ov(){Qg.point=av}function sv(){hv(Jg,$g)}function av(t,i){Qg.point=hv;tv(Jg=Kg=t,$g=Zg=i)}function hv(t,i){var e=t-Kg,n=i-Zg,r=xp(e*e+n*n);Ug+=r*(Kg+t)/2;Ig+=r*(Zg+i)/2;qg+=r;r=Zg*t-Kg*i;Yg+=r*(Kg+t);Xg+=r*(Zg+i);Vg+=r*3;tv(Kg=t,Zg=i)}function uv(t){this._context=t}uv.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line===0){this._context.closePath()}this._point=NaN},point:function(t,i){switch(this._point){case 0:{this._context.moveTo(t,i);this._point=1;break}case 1:{this._context.lineTo(t,i);break}default:{this._context.moveTo(t+this._radius,i);this._context.arc(t,i,this._radius,0,hp);break}}},result:kp};function lv(){this._string=[]}lv.prototype={_circle:fv(4.5),pointRadius:function(t){return this._circle=fv(t),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){if(this._line===0){this._string.push("Z")}this._point=NaN},point:function(t,i){switch(this._point){case 0:{this._string.push("M",t,",",i);this._point=1;break}case 1:{this._string.push("L",t,",",i);break}default:{this._string.push("M",t,",",i,this._circle);break}}},result:function(){if(this._string.length){var t=this._string.join("");this._string=[];return t}}};function fv(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var cv=function(t,i){var e=4.5,n,r;function o(t){if(t){if(typeof e==="function"){r.pointRadius(+e.apply(this,arguments))}Fp(t,n(r))}return r.result()}o.area=function(t){Fp(t,n(Dg));return Dg.result()};o.bounds=function(t){Fp(t,n(Hg));return Hg.result()};o.centroid=function(t){Fp(t,n(Qg));return Qg.result()};o.projection=function(i){return arguments.length?(n=i==null?(t=null,wg):(t=i).stream,o):t};o.context=function(t){if(!arguments.length){return i}r=t==null?(i=null,new lv):new uv(i=t);if(typeof e!=="function"){r.pointRadius(e)}return o};o.pointRadius=function(t){if(!arguments.length){return e}e=typeof t==="function"?t:(r.pointRadius(+t),+t);return o};return o.projection(t).context(i)};var _v=Q_();var pv=function(t,i){var e=i[0],n=i[1],r=[mp(e),-pp(e),0],o=0,s=0;_v.reset();for(var a=0,h=t.length;a<h;++a){if(!(l=(u=t[a]).length)){continue}var u,l,f=u[l-1],c=f[0],_=f[1]/2+ap,p=mp(_),d=pp(_);for(var g=0;g<l;++g,c=y,p=b,d=x,f=v){var v=u[g],y=v[0],m=v[1]/2+ap,b=mp(m),x=pp(m),w=y-c,C=w>=0?1:-1,A=C*w,S=A>op,k=p*b;_v.add(_p(k*C*mp(A),d*x+k*pp(A)));o+=S?w+C*hp:w;if(S^c>=e^y>=e){var E=Vp(Yp(f),Yp(v));Kp(E);var B=Vp(r,E);Kp(B);var D=(S^w>=0?-1:1)*Ap(B[2]);if(n>D||n===D&&(E[0]||E[1])){s+=S^w>=0?1:-1}}}}return(o<-np||o<np&&_v<-np)^s&1};var dv=function(t,i,e,n){return function(r,o){var s=i(o),a=r.invert(n[0],n[1]),h=eg(),u=i(h),l=false,f,c,_;var p={point:d,lineStart:v,lineEnd:y,polygonStart:function(){p.point=m;p.lineStart=b;p.lineEnd=x;c=[];f=[]},polygonEnd:function(){p.point=d;p.lineStart=v;p.lineEnd=y;c=A(c);var t=pv(f,a);if(c.length){if(!l){o.polygonStart(),l=true}sg(c,vv,t,e,o)}else if(t){if(!l){o.polygonStart(),l=true}o.lineStart();e(null,null,1,o);o.lineEnd()}if(l){o.polygonEnd(),l=false}c=f=null},sphere:function(){o.polygonStart();o.lineStart();e(null,null,1,o);o.lineEnd();o.polygonEnd()}};function d(i,e){var n=r(i,e);if(t(i=n[0],e=n[1])){o.point(i,e)}}function g(t,i){var e=r(t,i);s.point(e[0],e[1])}function v(){p.point=g;s.lineStart()}function y(){p.point=d;s.lineEnd()}function m(t,i){_.push([t,i]);var e=r(t,i);u.point(e[0],e[1])}function b(){u.lineStart();_=[]}function x(){m(_[0][0],_[0][1]);u.lineEnd();var t=u.clean(),i=h.result(),e,n=i.length,r,s,a;_.pop();f.push(_);_=null;if(!n){return}if(t&1){s=i[0];if((r=s.length-1)>0){if(!l){o.polygonStart(),l=true}o.lineStart();for(e=0;e<r;++e){o.point((a=s[e])[0],a[1])}o.lineEnd()}return}if(n>1&&t&2){i.push(i.pop().concat(i.shift()))}c.push(i.filter(gv))}return p}};function gv(t){return t.length>1}function vv(t,i){return((t=t.x)[0]<0?t[1]-sp-np:sp-t[1])-((i=i.x)[0]<0?i[1]-sp-np:sp-i[1])}var yv=dv(function(){return true},mv,xv,[-op,-sp]);function mv(t){var i=NaN,e=NaN,n=NaN,r;return{lineStart:function(){t.lineStart();r=1},point:function(o,s){var a=o>0?op:-op,h=fp(o-i);if(fp(h-op)<np){t.point(i,e=(e+s)/2>0?sp:-sp);t.point(n,e);t.lineEnd();t.lineStart();t.point(a,e);t.point(o,e);r=0}else if(n!==a&&h>=op){if(fp(i-n)<np){i-=n*np}if(fp(o-a)<np){o-=a*np}e=bv(i,e,o,s);t.point(n,e);t.lineEnd();t.lineStart();t.point(a,e);r=0}t.point(i=o,e=s);n=a},lineEnd:function(){t.lineEnd();i=e=NaN},clean:function(){return 2-r}}}function bv(t,i,e,n){var r,o,s=mp(t-e);return fp(s)>np?cp((mp(i)*(o=pp(n))*mp(e)-mp(n)*(r=pp(i))*mp(t))/(r*o*s)):(i+n)/2}function xv(t,i,e,n){var r;if(t==null){r=e*sp;n.point(-op,r);n.point(0,r);n.point(op,r);n.point(op,0);n.point(op,-r);n.point(0,-r);n.point(-op,-r);n.point(-op,0);n.point(-op,r)}else if(fp(t[0]-i[0])>np){var o=t[0]<i[0]?op:-op;r=e*o/2;n.point(-o,r);n.point(0,r);n.point(o,r)}else{n.point(i[0],i[1])}}var wv=function(t,i){var e=pp(t),n=e>0,r=fp(e)>np;function o(e,n,r,o){tg(o,t,i,r,e,n)}function s(t,i){return pp(t)*pp(i)>e}function a(t){var i,e,o,a,l;return{lineStart:function(){a=o=false;l=1},point:function(f,c){var _=[f,c],p,d=s(f,c),g=n?d?0:u(f,c):d?u(f+(f<0?op:-op),c):0;if(!i&&(a=o=d)){t.lineStart()}if(d!==o){p=h(i,_);if(rg(i,p)||rg(_,p)){_[0]+=np;_[1]+=np;d=s(_[0],_[1])}}if(d!==o){l=0;if(d){t.lineStart();p=h(_,i);t.point(p[0],p[1])}else{p=h(i,_);t.point(p[0],p[1]);t.lineEnd()}i=p}else if(r&&i&&n^d){var v;if(!(g&e)&&(v=h(_,i,true))){l=0;if(n){t.lineStart();t.point(v[0][0],v[0][1]);t.point(v[1][0],v[1][1]);t.lineEnd()}else{t.point(v[1][0],v[1][1]);t.lineEnd();t.lineStart();t.point(v[0][0],v[0][1])}}}if(d&&(!i||!rg(i,_))){t.point(_[0],_[1])}i=_,o=d,e=g},lineEnd:function(){if(o){t.lineEnd()}i=null},clean:function(){return l|(a&&o)<<1}}}function h(t,i,n){var r=Yp(t),o=Yp(i);var s=[1,0,0],a=Vp(r,o),h=Xp(a,a),u=a[0],l=h-u*u;if(!l){return!n&&t}var f=e*h/l,c=-e*u/l,_=Vp(s,a),p=$p(s,f),d=$p(a,c);Jp(p,d);var g=_,v=Xp(p,g),y=Xp(g,g),m=v*v-y*(Xp(p,p)-1);if(m<0){return}var b=xp(m),x=$p(g,(-v-b)/y);Jp(x,p);x=qp(x);if(!n){return x}var w=t[0],C=i[0],A=t[1],S=i[1],k;if(C<w){k=w,w=C,C=k}var E=C-w,B=fp(E-op)<np,D=B||E<np;if(!B&&S<A){k=A,A=S,S=k}if(D?B?A+S>0^x[1]<(fp(x[0]-w)<np?A:S):A<=x[1]&&x[1]<=S:E>op^(w<=x[0]&&x[0]<=C)){var M=$p(g,(-v+b)/y);Jp(M,p);return[x,qp(M)]}}function u(i,e){var r=n?t:op-t,o=0;if(i<-r){o|=1}else if(i>r){o|=2}if(e<-r){o|=4}else if(e>r){o|=8}return o}return dv(s,a,o,n?[0,-t]:[-op,t-op])};function Cv(t){return function(i){var e=new Av;for(var n in t){e[n]=t[n]}e.stream=i;return e}}function Av(){}Av.prototype={constructor:Av,point:function(t,i){this.stream.point(t,i)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Sv(t,i,e){var n=i[1][0]-i[0][0],r=i[1][1]-i[0][1],o=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]);if(o!=null){t.clipExtent(null)}Fp(e,t.stream(Hg));var s=Hg.result(),a=Math.min(n/(s[1][0]-s[0][0]),r/(s[1][1]-s[0][1])),h=+i[0][0]+(n-a*(s[1][0]+s[0][0]))/2,u=+i[0][1]+(r-a*(s[1][1]+s[0][1]))/2;if(o!=null){t.clipExtent(o)}return t.scale(a*150).translate([h,u])}function kv(t,i,e){return Sv(t,[[0,0],i],e)}var Ev=16;var Bv=pp(30*lp);var Dv=function(t,i){return+i?zv(t,i):Mv(t)};function Mv(t){return Cv({point:function(i,e){i=t(i,e);this.stream.point(i[0],i[1])}})}function zv(t,i){function e(n,r,o,s,a,h,u,l,f,c,_,p,d,g){var v=u-n,y=l-r,m=v*v+y*y;if(m>4*i&&d--){var b=s+c,x=a+_,w=h+p,C=xp(b*b+x*x+w*w),A=Ap(w/=C),S=fp(fp(w)-1)<np||fp(o-f)<np?(o+f)/2:_p(x,b),k=t(S,A),E=k[0],B=k[1],D=E-n,M=B-r,z=y*D-v*M;if(z*z/m>i||fp((v*D+y*M)/m-.5)>.3||s*c+a*_+h*p<Bv){e(n,r,o,s,a,h,E,B,S,b/=C,x/=C,w,d,g);g.point(E,B);e(E,B,S,b,x,w,u,l,f,c,_,p,d,g)}}}return function(i){var n,r,o,s,a,h,u,l,f,c,_,p;var d={point:g,lineStart:v,lineEnd:m,polygonStart:function(){i.polygonStart();d.lineStart=b},polygonEnd:function(){i.polygonEnd();d.lineStart=v}};function g(e,n){e=t(e,n);i.point(e[0],e[1])}function v(){l=NaN;d.point=y;i.lineStart()}function y(n,r){var o=Yp([n,r]),s=t(n,r);e(l,f,u,c,_,p,l=s[0],f=s[1],u=n,c=o[0],_=o[1],p=o[2],Ev,i);i.point(l,f)}function m(){d.point=g;i.lineEnd()}function b(){v();d.point=x;d.lineEnd=w}function x(t,i){y(n=t,i),r=l,o=f,s=c,a=_,h=p;d.point=y}function w(){e(l,f,u,c,_,p,r,o,n,s,a,h,Ev,i);d.lineEnd=m;m()}return d}}var Fv=Cv({point:function(t,i){this.stream.point(t*lp,i*lp)}});function Ov(t){return Nv(function(){return t})()}function Nv(t){var i,e=150,n=480,r=250,o,s,a=0,h=0,u=0,l=0,f=0,c,_,p=null,d=yv,g=null,v,y,m,b=wg,x=.5,w=Dv(E,x),C,A;function S(t){t=_(t[0]*lp,t[1]*lp);return[t[0]*e+o,s-t[1]*e]}function k(t){t=_.invert((t[0]-o)/e,(s-t[1])/e);return t&&[t[0]*up,t[1]*up]}function E(t,n){return t=i(t,n),[t[0]*e+o,s-t[1]*e]}S.stream=function(t){return C&&A===t?C:C=Fv(d(c,w(b(A=t))))};S.clipAngle=function(t){return arguments.length?(d=+t?wv(p=t*lp,6*lp):(p=null,yv),D()):p*up};S.clipExtent=function(t){return arguments.length?(b=t==null?(g=v=y=m=null,wg):lg(g=+t[0][0],v=+t[0][1],y=+t[1][0],m=+t[1][1]),D()):g==null?null:[[g,v],[y,m]]};S.scale=function(t){return arguments.length?(e=+t,B()):e};S.translate=function(t){return arguments.length?(n=+t[0],r=+t[1],B()):[n,r]};S.center=function(t){return arguments.length?(a=t[0]%360*lp,h=t[1]%360*lp,B()):[a*up,h*up]};S.rotate=function(t){return arguments.length?(u=t[0]%360*lp,l=t[1]%360*lp,f=t.length>2?t[2]%360*lp:0,B()):[u*up,l*up,f*up]};S.precision=function(t){return arguments.length?(w=Dv(E,x=t*t),D()):xp(x)};S.fitExtent=function(t,i){return Sv(S,t,i)};S.fitSize=function(t,i){return kv(S,t,i)};function B(){_=Vd(c=$d(u,l,f),i);var t=i(a,h);o=n-t[0]*e;s=r+t[1]*e;return D()}function D(){C=A=null;return S}return function(){i=t.apply(this,arguments);S.invert=i.invert&&k;return B()}}function Tv(t){var i=0,e=op/3,n=Nv(t),r=n(i,e);r.parallels=function(t){return arguments.length?n(i=t[0]*lp,e=t[1]*lp):[i*up,e*up]};return r}function jv(t){var i=pp(t);function e(t,e){return[t*i,mp(e)/i]}e.invert=function(t,e){return[t/i,Ap(e*i)]};return e}function Pv(t,i){var e=mp(t),n=(e+mp(i))/2;if(fp(n)<np){return jv(t)}var r=1+e*(2*n-e),o=xp(r)/n;function s(t,i){var e=xp(r-2*n*mp(i))/n;return[e*mp(t*=n),o-e*pp(t)]}s.invert=function(t,i){var e=o-i;return[_p(t,fp(e))/n*bp(e),Ap((r-(t*t+e*e)*n*n)/(2*n))]};return s}var Hv=function(){return Tv(Pv).scale(155.424).center([0,33.6442])};var Rv=function(){return Hv().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function Lv(t){var i=t.length;return{point:function(e,n){var r=-1;while(++r<i){t[r].point(e,n)}},sphere:function(){var e=-1;while(++e<i){t[e].sphere()}},lineStart:function(){var e=-1;while(++e<i){t[e].lineStart()}},lineEnd:function(){var e=-1;while(++e<i){t[e].lineEnd()}},polygonStart:function(){var e=-1;while(++e<i){t[e].polygonStart()}},polygonEnd:function(){var e=-1;while(++e<i){t[e].polygonEnd()}}}}function Wv(t){return function(i,e){var n=pp(i),r=pp(e),o=t(n*r);return[o*r*mp(i),o*mp(e)]}}function Gv(t){return function(i,e){var n=xp(i*i+e*e),r=t(n),o=mp(r),s=pp(r);return[_p(i*o,n*s),Ap(n&&e*o/n)]}}var Uv=Wv(function(t){return xp(2/(1+t))});Uv.invert=Gv(function(t){return 2*Ap(t/2)});var Iv=Wv(function(t){return(t=Cp(t))&&t/mp(t)});Iv.invert=Gv(function(t){return t});function qv(t,i){return[t,vp(wp((sp+i)/2))]}qv.invert=function(t,i){return[t,2*cp(gp(i))-sp]};var Yv=function(){return Xv(qv).scale(961/hp)};function Xv(t){var i=Ov(t),e=i.scale,n=i.translate,r=i.clipExtent,o;i.scale=function(t){return arguments.length?(e(t),o&&i.clipExtent(null),i):e()};i.translate=function(t){return arguments.length?(n(t),o&&i.clipExtent(null),i):n()};i.clipExtent=function(t){if(!arguments.length){return o?null:r()}if(o=t==null){var s=op*e(),a=n();t=[[a[0]-s,a[1]-s],[a[0]+s,a[1]+s]]}r(t);return i};return i.clipExtent(null)}function Vv(t){return wp((sp+t)/2)}function Jv(t,i,e,n){return t===1&&i===1&&e===0&&n===0?wg:Cv({point:function(r,o){this.stream.point(r*t+e,o*i+n)}})}function $v(t,i){return[vp(wp((sp+i)/2)),-t]}$v.invert=function(t,i){return[-i,2*cp(gp(t))-sp]};var Kv=function(){var t=0,i=0,e=960,n=500,r=(t+e)/2,o=(i+n)/2,s=256,a=0;function h(){var h=Math.max(Math.log(s)/Math.LN2-8,0),u=Math.round(h+a),l=Math.pow(2,h-u+8),f=r-s/2,c=o-s/2,_=[],d=p(Math.max(0,Math.floor((t-f)/l)),Math.max(0,Math.ceil((e-f)/l))),g=p(Math.max(0,Math.floor((i-c)/l)),Math.max(0,Math.ceil((n-c)/l)));g.forEach(function(t){d.forEach(function(i){_.push([i,t,u])})});_.translate=[f/l,c/l];_.scale=l;return _}h.size=function(r){return arguments.length?(t=i=0,e=+r[0],n=+r[1],h):[e,n]};h.extent=function(r){return arguments.length?(t=+r[0][0],i=+r[0][1],e=+r[1][0],n=+r[1][1],h):[[t,i],[e,n]]};h.scale=function(t){return arguments.length?(s=+t,h):s};h.translate=function(t){return arguments.length?(r=+t[0],o=+t[1],h):[r,o]};h.zoomDelta=function(t){return arguments.length?(a=+t,h):a};return h};function Zv(){yo.stopImmediatePropagation()}var Qv=function(){yo.preventDefault();yo.stopImmediatePropagation()};var ty=function(t){var i=t.document.documentElement,e=Zs(t).on("dragstart.drag",Qv,true);if("onselectstart"in i){e.on("selectstart.drag",Qv,true)}else{i.__noselect=i.style.MozUserSelect;i.style.MozUserSelect="none"}};function iy(t,i){var e=t.document.documentElement,n=Zs(t).on("dragstart.drag",null);if(i){n.on("click.drag",Qv,true);setTimeout(function(){n.on("click.drag",null)},0)}if("onselectstart"in e){n.on("selectstart.drag",null)}else{e.style.MozUserSelect=e.__noselect;delete e.__noselect}}var ey=function(t){return function(){return t}};function ny(t,i,e,n,r,o,s,a,h,u){this.target=t;this.type=i;this.subject=e;this.identifier=n;this.active=r;this.x=o;this.y=s;this.dx=a;this.dy=h;this._=u}ny.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function ry(){return!yo.button}function oy(){return this.parentNode}function sy(t){return t==null?{x:yo.x,y:yo.y}:t}var ay=function(t){return function(){return t}};function hy(t,i,e){this.target=t;this.type=i;this.transform=e}function uy(t,i,e){this.k=t;this.x=i;this.y=e}uy.prototype={constructor:uy,scale:function(t){return t===1?this:new uy(this.k*t,this.x,this.y)},translate:function(t,i){return t===0&i===0?this:new uy(this.k,this.x+this.k*t,this.y+this.k*i)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ly=new uy(1,0,0);fy.prototype=uy.prototype;function fy(t){return t.__zoom||ly}function cy(){yo.stopImmediatePropagation()}var _y=function(){yo.preventDefault();yo.stopImmediatePropagation()};function py(){return!yo.button}function dy(){var t=this,i,e;if(t instanceof SVGElement){t=t.ownerSVGElement||t;i=t.width.baseVal.value;e=t.height.baseVal.value}else{i=t.clientWidth;e=t.clientHeight}return[[0,0],[i,e]]}function gy(){return this.__zoom||ly}var vy=function(){var t=py,i=dy,e=0,n=Infinity,r=-n,o=n,s=r,a=o,h=250,u=Pi,l=[],f=ea("start","zoom","end"),c,_,p=500,d=150;function g(t){t.on("wheel.zoom",A).on("mousedown.zoom",S).on("dblclick.zoom",k).on("touchstart.zoom",E).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",D).style("-webkit-tap-highlight-color","rgba(0,0,0,0)").property("__zoom",gy)}g.transform=function(t,i){var e=t.selection?t.selection():t;e.property("__zoom",gy);if(t!==e){x(t,i)}else{e.interrupt().each(function(){w(this,arguments).start().zoom(null,typeof i==="function"?i.apply(this,arguments):i).end()})}};g.scaleBy=function(t,i){g.scaleTo(t,function(){var t=this.__zoom.k,e=typeof i==="function"?i.apply(this,arguments):i;return t*e})};g.scaleTo=function(t,e){g.transform(t,function(){var t=i.apply(this,arguments),n=this.__zoom,r=b(t),o=n.invert(r),s=typeof e==="function"?e.apply(this,arguments):e;return m(y(v(n,s),r,o),t)})};g.translateBy=function(t,e,n){g.transform(t,function(){return m(this.__zoom.translate(typeof e==="function"?e.apply(this,arguments):e,typeof n==="function"?n.apply(this,arguments):n),i.apply(this,arguments))})};function v(t,i){i=Math.max(e,Math.min(n,i));return i===t.k?t:new uy(i,t.x,t.y)}function y(t,i,e){var n=i[0]-e[0]*t.k,r=i[1]-e[1]*t.k;return n===t.x&&r===t.y?t:new uy(t.k,n,r)}function m(t,i){var e=t.invertX(i[0][0])-r,n=t.invertX(i[1][0])-o,h=t.invertY(i[0][1])-s,u=t.invertY(i[1][1])-a;return t.translate(n>e?(e+n)/2:Math.min(0,e)||Math.max(0,n),u>h?(h+u)/2:Math.min(0,h)||Math.max(0,u))}function b(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function x(t,e,n){t.on("start.zoom",function(){w(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).end()}).tween("zoom",function(){var t=this,r=arguments,o=w(t,r),s=i.apply(t,r),a=n||b(s),h=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),l=t.__zoom,f=typeof e==="function"?e.apply(t,r):e,c=u(l.invert(a).concat(h/l.k),f.invert(a).concat(h/f.k));return function(t){if(t===1){t=f}else{var i=c(t),e=h/i[2];t=new uy(e,a[0]-i[0]*e,a[1]-i[1]*e)}o.zoom(null,t)}})}function w(t,i){for(var e=0,n=l.length,r;e<n;++e){if((r=l[e]).that===t){return r}}return new C(t,i)}function C(t,e){this.that=t;this.args=e;this.index=-1;this.active=0;this.extent=i.apply(t,e)}C.prototype={start:function(){if(++this.active===1){this.index=l.push(this)-1;this.emit("start")}return this},zoom:function(t,i){if(this.mouse&&t!=="mouse"){this.mouse[1]=i.invert(this.mouse[0])}if(this.touch0&&t!=="touch"){this.touch0[1]=i.invert(this.touch0[0])}if(this.touch1&&t!=="touch"){this.touch1[1]=i.invert(this.touch1[0])}this.that.__zoom=i;this.emit("zoom");return this},end:function(){if(--this.active===0){l.splice(this.index,1);this.index=-1;this.emit("end")}return this},emit:function(t){ko(new hy(g,t,this.that.__zoom),f.apply,f,[t,this.that,this.args])}};function A(){if(!t.apply(this,arguments)){return}var i=w(this,arguments),r=this.__zoom,o=Math.max(e,Math.min(n,r.k*Math.pow(2,-yo.deltaY*(yo.deltaMode?120:1)/500))),s=Do(this);if(i.wheel){if(i.mouse[0][0]!==s[0]||i.mouse[0][1]!==s[1]){i.mouse[1]=r.invert(i.mouse[0]=s)}clearTimeout(i.wheel)}else if(r.k===o){return}else{i.mouse=[s,r.invert(s)];Ga(this);i.start()}_y();i.wheel=setTimeout(a,d);i.zoom("mouse",m(y(v(r,o),i.mouse[0],i.mouse[1]),i.extent));function a(){i.wheel=null;i.end()}}function S(){if(_||!t.apply(this,arguments)){return}var i=w(this,arguments),e=Zs(yo.view).on("mousemove.zoom",r,true).on("mouseup.zoom",o,true),n=Do(this);ty(yo.view);cy();i.mouse=[n,this.__zoom.invert(n)];Ga(this);i.start();function r(){_y();i.moved=true;i.zoom("mouse",m(y(i.that.__zoom,i.mouse[0]=Do(i.that),i.mouse[1]),i.extent))}function o(){e.on("mousemove.zoom mouseup.zoom",null);iy(yo.view,i.moved);_y();i.end()}}function k(){if(!t.apply(this,arguments)){return}var e=this.__zoom,n=Do(this),r=e.invert(n),o=e.k*(yo.shiftKey?.5:2),s=m(y(v(e,o),n,r),i.apply(this,arguments));_y();if(h>0){Zs(this).transition().duration(h).call(x,s,n)}else{Zs(this).call(g.transform,s)}}function E(){var i=this;if(!t.apply(this,arguments)){return}var e=w(this,arguments),n=yo.changedTouches,r,o=n.length,s,a,h;cy();for(s=0;s<o;++s){a=n[s],h=ta(i,n,a.identifier);h=[h,i.__zoom.invert(h),a.identifier];if(!e.touch0){e.touch0=h,r=true}else if(!e.touch1){e.touch1=h}}if(c){c=clearTimeout(c);if(!e.touch1){e.end();h=Zs(this).on("dblclick.zoom");if(h){h.apply(this,arguments)}return}}if(r){c=setTimeout(function(){c=null},p);Ga(this);e.start()}}function B(){var t=this;var i=w(this,arguments),e=yo.changedTouches,n=e.length,r,o,s,a;_y();if(c){c=clearTimeout(c)}for(r=0;r<n;++r){o=e[r],s=ta(t,e,o.identifier);if(i.touch0&&i.touch0[2]===o.identifier){i.touch0[0]=s}else if(i.touch1&&i.touch1[2]===o.identifier){i.touch1[0]=s}}o=i.that.__zoom;if(i.touch1){var h=i.touch0[0],u=i.touch0[1],l=i.touch1[0],f=i.touch1[1],_=(_=l[0]-h[0])*_+(_=l[1]-h[1])*_,p=(p=f[0]-u[0])*p+(p=f[1]-u[1])*p;o=v(o,Math.sqrt(_/p));s=[(h[0]+l[0])/2,(h[1]+l[1])/2];a=[(u[0]+f[0])/2,(u[1]+f[1])/2]}else if(i.touch0){s=i.touch0[0],a=i.touch0[1]}else{return}i.zoom("touch",m(y(o,s,a),i.extent))}function D(){var t=w(this,arguments),i=yo.changedTouches,e=i.length,n,r;cy();if(_){clearTimeout(_)}_=setTimeout(function(){_=null},p);for(n=0;n<e;++n){r=i[n];if(t.touch0&&t.touch0[2]===r.identifier){delete t.touch0}else if(t.touch1&&t.touch1[2]===r.identifier){delete t.touch1}}if(t.touch1&&!t.touch0){t.touch0=t.touch1,delete t.touch1}if(!t.touch0){t.end()}}g.filter=function(i){return arguments.length?(t=typeof i==="function"?i:ay(!!i),g):t};g.extent=function(t){return arguments.length?(i=typeof t==="function"?t:ay([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),g):i};g.scaleExtent=function(t){return arguments.length?(e=+t[0],n=+t[1],g):[e,n]};g.translateExtent=function(t){return arguments.length?(r=+t[0][0],o=+t[1][0],s=+t[0][1],a=+t[1][1],g):[[r,s],[o,a]]};g.duration=function(t){return arguments.length?(h=+t,g):h};g.interpolate=function(t){return arguments.length?(u=t,g):u};g.on=function(){var t=f.on.apply(f,arguments);return t===f?g:t};return g};var yy=function(t){return t};var my=function(t){if((i=t.transform)==null){return yy}var i,e,n,r=i.scale[0],o=i.scale[1],s=i.translate[0],a=i.translate[1];return function(t,i){if(!i){e=n=0}t[0]=(e+=t[0])*r+s;t[1]=(n+=t[1])*o+a;return t}};var by=function(t){var i=t.bbox;function e(t){s[0]=t[0],s[1]=t[1],r(s);if(s[0]<h){h=s[0]}if(s[0]>l){l=s[0]}if(s[1]<u){u=s[1]}if(s[1]>f){f=s[1]}}function n(t){switch(t.type){case"GeometryCollection":t.geometries.forEach(n);break;case"Point":e(t.coordinates);break;case"MultiPoint":t.coordinates.forEach(e);break}}if(!i){var r=my(t),o,s=new Array(2),a,h=Infinity,u=h,l=-h,f=-h;t.arcs.forEach(function(t){var i=-1,e=t.length;while(++i<e){o=t[i],s[0]=o[0],s[1]=o[1],r(s,i);if(s[0]<h){h=s[0]}if(s[0]>l){l=s[0]}if(s[1]<u){u=s[1]}if(s[1]>f){f=s[1]}}});for(a in t.objects){n(t.objects[a])}i=t.bbox=[h,u,l,f]}return i};var xy=function(t,i){var e,n=t.length,r=n-i;while(r<--n){e=t[r],t[r++]=t[n],t[n]=e}};var wy=function(t,i){
return i.type==="GeometryCollection"?{type:"FeatureCollection",features:i.geometries.map(function(i){return Cy(t,i)})}:Cy(t,i)};function Cy(t,i){var e=i.id,n=i.bbox,r=i.properties==null?{}:i.properties,o=Ay(t,i);return e==null&&n==null?{type:"Feature",properties:r,geometry:o}:n==null?{type:"Feature",id:e,properties:r,geometry:o}:{type:"Feature",id:e,bbox:n,properties:r,geometry:o}}function Ay(t,i){var e=my(t),n=t.arcs;function r(t,i){if(i.length){i.pop()}for(var r=n[t<0?~t:t],o=0,s=r.length;o<s;++o){i.push(e(r[o].slice(),o))}if(t<0){xy(i,s)}}function o(t){return e(t.slice())}function s(t){var i=[];for(var e=0,n=t.length;e<n;++e){r(t[e],i)}if(i.length<2){i.push(i[0].slice())}return i}function a(t){var i=s(t);while(i.length<4){i.push(i[0].slice())}return i}function h(t){return t.map(a)}function u(t){var i=t.type,e;switch(i){case"GeometryCollection":return{type:i,geometries:t.geometries.map(u)};case"Point":e=o(t.coordinates);break;case"MultiPoint":e=t.coordinates.map(o);break;case"LineString":e=s(t.arcs);break;case"MultiLineString":e=t.arcs.map(s);break;case"Polygon":e=h(t.arcs);break;case"MultiPolygon":e=t.arcs.map(h);break;default:return null}return{type:i,coordinates:e}}return u(i)}var Sy=function(t,i){var e={},n={},r={},o=[],s=-1;i.forEach(function(e,n){var r=t.arcs[e<0?~e:e],o;if(r.length<3&&!r[1][0]&&!r[1][1]){o=i[++s],i[s]=e,i[n]=o}});i.forEach(function(t){var i=a(t),e=i[0],o=i[1],s,h;if(s=r[e]){delete r[s.end];s.push(t);s.end=o;if(h=n[o]){delete n[h.start];var u=h===s?s:s.concat(h);n[u.start=s.start]=r[u.end=h.end]=u}else{n[s.start]=r[s.end]=s}}else if(s=n[o]){delete n[s.start];s.unshift(t);s.start=e;if(h=r[e]){delete r[h.end];var l=h===s?s:h.concat(s);n[l.start=h.start]=r[l.end=s.end]=l}else{n[s.start]=r[s.end]=s}}else{s=[t];n[s.start=e]=r[s.end=o]=s}});function a(i){var e=t.arcs[i<0?~i:i],n=e[0],r;if(t.transform){r=[0,0],e.forEach(function(t){r[0]+=t[0],r[1]+=t[1]})}else{r=e[e.length-1]}return i<0?[r,n]:[n,r]}function h(t,i){for(var n in t){var r=t[n];delete i[r.start];delete r.start;delete r.end;r.forEach(function(t){e[t<0?~t:t]=1});o.push(r)}}h(r,n);h(n,r);i.forEach(function(t){if(!e[t<0?~t:t]){o.push([t])}});return o};function ky(t,i,e){var n=[],r=[],o;function s(t){var i=t<0?~t:t;(r[i]||(r[i]=[])).push({i:t,g:o})}function a(t){t.forEach(s)}function h(t){t.forEach(a)}function u(t){t.forEach(h)}function l(t){switch(o=t,t.type){case"GeometryCollection":t.geometries.forEach(l);break;case"LineString":a(t.arcs);break;case"MultiLineString":case"Polygon":h(t.arcs);break;case"MultiPolygon":u(t.arcs);break}}l(i);r.forEach(e==null?function(t){n.push(t[0].i)}:function(t){if(e(t[0].g,t[t.length-1].g)){n.push(t[0].i)}});return n}function Ey(t){var i=-1,e=t.length,n,r=t[e-1],o=0;while(++i<e){n=r,r=t[i],o+=n[0]*r[1]-n[1]*r[0]}return Math.abs(o)}var By=function(t,i){var e=0,n=t.length;while(e<n){var r=e+n>>>1;if(t[r]<i){e=r+1}else{n=r}}return e};var Dy=function(t,i){if(!(t instanceof Array)){t=[t.x,t.y]}if(!(i instanceof Array)){i=[i.x,i.y]}var e=Math.abs(t[0]-i[0]);var n=Math.abs(t[1]-i[1]);return Math.sqrt(e*e+n*n)};var My=function t(){this._duration=600;this._height=gu("height");this._id=gu("id");this._pointerEvents=Cu("auto");this._select;this._url=gu("url");this._width=gu("width");this._x=gu("x",0);this._y=gu("y",0)};My.prototype.render=function t(i){var e=this;if(this._select===void 0){this.select(Zs("body").append("svg").style("width",window.innerWidth+"px").style("height",window.innerHeight+"px").style("display","block").node())}var n=this._select.selectAll(".d3plus-Image").data(this._data,this._id);var r=n.enter().append("image").attr("class","d3plus-Image").attr("opacity",0).attr("width",0).attr("height",0).attr("x",function(t,i){return e._x(t,i)+e._width(t,i)/2}).attr("y",function(t,i){return e._y(t,i)+e._height(t,i)/2});var o=Ph().duration(this._duration),s=this,a=r.merge(n);a.attr("xlink:href",this._url).style("pointer-events",this._pointerEvents).transition(o).attr("opacity",1).attr("width",function(t,i){return e._width(t,i)}).attr("height",function(t,i){return e._height(t,i)}).attr("x",function(t,i){return e._x(t,i)}).attr("y",function(t,i){return e._y(t,i)}).each(function(t,i){var e=Zs(this),n=s._url(t,i);var r=n.indexOf("http://")===0||n.indexOf("https://")===0;if(!r||n.indexOf(window.location.hostname)===0){var o=new My;o.src=n;o.crossOrigin="Anonymous";o.onload=function(){var t=document.createElement("canvas");t.width=this.width;t.height=this.height;var i=t.getContext("2d");i.drawImage(this,0,0);e.attr("xlink:href",t.toDataURL("image/png"))}}});n.exit().transition(o).attr("width",function(t,i){return e._width(t,i)}).attr("height",function(t,i){return e._height(t,i)}).attr("x",function(t,i){return e._x(t,i)}).attr("y",function(t,i){return e._y(t,i)}).attr("opacity",0).remove();if(i){setTimeout(i,this._duration+100)}return this};My.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};My.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};My.prototype.height=function t(i){return arguments.length?(this._height=typeof i==="function"?i:Cu(i),this):this._height};My.prototype.id=function t(i){return arguments.length?(this._id=i,this):this._id};My.prototype.pointerEvents=function t(i){return arguments.length?(this._pointerEvents=typeof i==="function"?i:Cu(i),this):this._pointerEvents};My.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};My.prototype.url=function t(i){return arguments.length?(this._url=i,this):this._url};My.prototype.width=function t(i){return arguments.length?(this._width=typeof i==="function"?i:Cu(i),this):this._width};My.prototype.x=function t(i){return arguments.length?(this._x=typeof i==="function"?i:Cu(i),this):this._x};My.prototype.y=function t(i){return arguments.length?(this._y=typeof i==="function"?i:Cu(i),this):this._y};var zy=function(t){function i(i){var e=this;if(i===void 0)i="g";t.call(this);this._backgroundImage=Cu(false);this._data=[];this._duration=600;this._fill=Cu("black");this._fontColor=function(t,i){return nf(e._fill(t,i))};this._fontFamily=Cu("Verdana");this._fontResize=Cu(false);this._fontSize=Cu(12);this._highlightDuration=200;this._highlightOpacity=.5;this._id=function(t,i){return t.id!==void 0?t.id:i};this._label=Cu(false);this._labelPadding=Cu(5);this._name="Shape";this._opacity=Cu(1);this._scale=Cu(1);this._shapeRendering=Cu("geometricPrecision");this._stroke=Cu("black");this._strokeWidth=Cu(0);this._tagName=i;this._textAnchor=Cu("start");this._vectorEffect=Cu("non-scaling-stroke");this._verticalAlign=Cu("top");this._x=gu("x",0);this._y=gu("y",0)}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._aes=function t(){return{}};i.prototype._applyEvents=function t(i){var e=this;var n=Object.keys(this._on);var r=function(t){i.on(n[t],function(i,r){if(!e._on[n[t]]){return}e._on[n[t]].bind(this)(i,r)})};for(var o=0;o<n.length;o++)r(o)};i.prototype._applyStyle=function t(i){var e=this;function n(t,i){return t.nested&&t.key&&t.values?this(t.values[0],e._data.indexOf(t.values[0])):this(t,i)}i.attr("fill",n.bind(this._fill)).attr("stroke",n.bind(this._stroke)).attr("stroke-width",n.bind(this._strokeWidth)).attr("vector-effect",n.bind(this._vectorEffect))};i.prototype._applyTransform=function t(i){var e=this;i.attr("transform",function(t,i){return"\n        translate("+(t.__d3plusShape__?t.translate?t.translate:e._x(t.data,t.i)+","+e._y(t.data,t.i):e._x(t,i)+","+e._y(t,i))+")\n        scale("+(t.__d3plusShape__?t.scale||e._scale(t.data,t.i):e._scale(t,i))+")"})};i.prototype._nestWrapper=function t(i){return function(t,e){return i(t.__d3plusShape__?t.data:t,t.__d3plusShape__?t.i:e)}};i.prototype._renderImage=function t(){var i=this;var e=[];this._update.merge(this._enter).data().forEach(function(t,n){var r=i._aes(t,n);if(r.r||r.width&&r.height){var o=t;if(t.nested&&t.key&&t.values){o=t.values[0];n=i._data.indexOf(o)}var s=r.r?r.r*2:r.height,a=i._backgroundImage(o,n),h=r.r?r.r*2:r.width;if(a){var u=o.__d3plusShape__?o.translate?o.translate[0]:i._x(o.data,o.i):i._x(o,n),l=o.__d3plusShape__?o.translate?o.translate[1]:i._y(o.data,o.i):i._y(o,n);if(r.x){u+=r.x}if(r.y){l+=r.y}if(o.__d3plusShape__){o=o.data;n=o.i}e.push({__d3plus__:true,data:o,height:s,i:n,id:i._id(o,n),url:a,width:h,x:u+-h/2,y:l+-s/2})}}});(new My).data(e).duration(this._duration).pointerEvents("none").select(Au("g.d3plus-"+this._name+"-images",{parent:this._group}).node()).render()};i.prototype._renderLabels=function t(){var i=this;var e=[];this._update.merge(this._enter).data().forEach(function(t,n){var r=t;if(t.nested&&t.key&&t.values){r=t.values[0];n=i._data.indexOf(r)}var o=i._label(r,n);if(i._labelBounds&&o!==false&&o!==void 0){var s=i._aes(t,n),a=i._labelBounds(r,n,s);if(a){if(o.constructor!==Array){o=[o]}var h=r.__d3plusShape__?r.translate?r.translate[0]:i._x(r.data,r.i):i._x(r,n),u=r.__d3plusShape__?r.translate?r.translate[1]:i._y(r.data,r.i):i._y(r,n);if(s.x){h+=s.x}if(s.y){u+=s.y}if(r.__d3plusShape__){r=r.data;n=r.i}var l=i._fontColor(r,n),f=i._fontFamily(r,n),c=i._fontResize(r,n),_=i._fontSize(r,n),p=i._lineHeight(r,n),d=i._labelPadding(r,n),g=i._textAnchor(r,n),v=i._verticalAlign(r,n);for(var y=0;y<o.length;y++){var m=a.constructor===Array?a[y]:Object.assign({},a),b=d.constructor===Array?d[y]:d;e.push(Object.assign(m,{__d3plusShape__:true,data:r,fC:l.constructor===Array?l[y]:l,fF:f.constructor===Array?f[y]:f,fR:c.constructor===Array?c[y]:c,fS:_.constructor===Array?_[y]:_,height:m.height-b*2,i:n,id:i._id(r,n)+"_"+y,lH:p.constructor===Array?p[y]:p,tA:g.constructor===Array?g[y]:g,text:o[y],vA:v.constructor===Array?v[y]:v,width:m.width-b*2,x:h+m.x+b,y:u+m.y+b}))}}}});(new Bf).data(e).delay(this._duration/2).duration(this._duration).fontColor(function(t){return t.fC}).fontFamily(function(t){return t.fF}).fontResize(function(t){return t.fR}).fontSize(function(t){return t.fS}).lineHeight(function(t){return t.lH}).pointerEvents("none").textAnchor(function(t){return t.tA}).verticalAlign(function(t){return t.vA}).select(Au("g.d3plus-"+this._name+"-labels",{parent:this._group}).node()).render()};i.prototype.render=function t(i){var e=this;if(this._select===void 0){this.select(Zs("body").append("svg").style("width",window.innerWidth+"px").style("height",window.innerHeight+"px").style("display","block").node())}if(this._lineHeight===void 0){this.lineHeight(function(t,i){return e._fontSize(t,i)*1.1})}this._transition=Ph().duration(this._duration);var n=this._data,r=this._id;if(this._dataFilter){n=this._dataFilter(n);if(n.key){r=n.key}}if(this._sort){n=n.sort(function(t,i){return e._sort(t.__d3plusShape__?t.data:t,i.__d3plusShape__?i.data:i)})}this._group=Au("g.d3plus-"+this._name+"-group",{parent:this._select});var o=this._update=Au("g.d3plus-"+this._name+"-shapes",{parent:this._group}).selectAll(".d3plus-"+this._name).data(n,r);o.order().transition(this._transition).call(this._applyTransform.bind(this));var s=this._enter=o.enter().append(this._tagName).attr("class",function(t,i){return"d3plus-Shape d3plus-"+e._name+" d3plus-id-"+uf(e._nestWrapper(e._id)(t,i))}).call(this._applyTransform.bind(this)).attr("opacity",this._nestWrapper(this._opacity));var a=s.merge(o);a.attr("shape-rendering",this._nestWrapper(this._shapeRendering)).attr("pointer-events","none").transition(this._transition).attr("opacity",this._nestWrapper(this._opacity)).transition().attr("pointer-events","all");var h=this._exit=o.exit();h.transition().delay(this._duration).remove();this._renderImage();this._renderLabels();var u=this;var l=this._group.selectAll(".d3plus-"+this._name+"-HitArea").data(this._hitArea?n:[],r);l.order().transition(this._transition).call(this._applyTransform.bind(this));var f=l.enter().append("rect").attr("class",function(t,i){return"d3plus-Shape d3plus-"+e._name+"-HitArea d3plus-id-"+uf(e._nestWrapper(e._id)(t,i))}).attr("fill","transparent").call(this._applyTransform.bind(this));var c=l.merge(f).each(function(t){var i=u._hitArea(t,u._data.indexOf(t),u._aes(t,u._data.indexOf(t)));return i?Zs(this).call(mu,i):Zs(this).remove()});l.exit().remove();this._applyEvents(this._hitArea?c:a);if(i){setTimeout(i,this._duration+100)}return this};i.prototype.backgroundImage=function t(i){return arguments.length?(this._backgroundImage=typeof i==="function"?i:Cu(i),this):this._backgroundImage};i.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};i.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};i.prototype.fill=function t(i){return arguments.length?(this._fill=typeof i==="function"?i:Cu(i),this):this._fill};i.prototype.fontColor=function t(i){return arguments.length?(this._fontColor=typeof i==="function"?i:Cu(i),this):this._fontColor};i.prototype.fontFamily=function t(i){return arguments.length?(this._fontFamily=typeof i==="function"?i:Cu(i),this):this._fontFamily};i.prototype.fontResize=function t(i){return arguments.length?(this._fontResize=typeof i==="function"?i:Cu(i),this):this._fontResize};i.prototype.fontSize=function t(i){return arguments.length?(this._fontSize=typeof i==="function"?i:Cu(i),this):this._fontSize};i.prototype.highlight=function t(i){var e=this;this._group.selectAll(".d3plus-Shape, .d3plus-Image, .d3plus-textBox").style(Vl()+"transition","opacity "+this._highlightDuration/1e3+"s").style("opacity",function(t,n){if(!i||typeof i!=="function"){return 1}if(this.tagName==="text"){t=t.data}if(t.__d3plusShape__||t.__d3plus__){t=t.data;n=t.i}return i(t,n)?1:e._highlightOpacity});return this};i.prototype.highlightDuration=function t(i){return arguments.length?(this._highlightDuration=i,this):this._highlightDuration};i.prototype.highlightOpacity=function t(i){return arguments.length?(this._highlightOpacity=i,this):this._highlightOpacity};i.prototype.hitArea=function t(i){return arguments.length?(this._hitArea=typeof i==="function"?i:Cu(i),this):this._hitArea};i.prototype.id=function t(i){return arguments.length?(this._id=i,this):this._id};i.prototype.label=function t(i){return arguments.length?(this._label=typeof i==="function"?i:Cu(i),this):this._label};i.prototype.labelBounds=function t(i){return arguments.length?(this._labelBounds=typeof i==="function"?i:Cu(i),this):this._labelBounds};i.prototype.labelPadding=function t(i){return arguments.length?(this._labelPadding=typeof i==="function"?i:Cu(i),this):this._labelPadding};i.prototype.lineHeight=function t(i){return arguments.length?(this._lineHeight=typeof i==="function"?i:Cu(i),this):this._lineHeight};i.prototype.opacity=function t(i){return arguments.length?(this._opacity=typeof i==="function"?i:Cu(i),this):this._opacity};i.prototype.scale=function t(i){return arguments.length?(this._scale=typeof i==="function"?i:Cu(i),this):this._scale};i.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};i.prototype.shapeRendering=function t(i){return arguments.length?(this._shapeRendering=typeof i==="function"?i:Cu(i),this):this._shapeRendering};i.prototype.sort=function t(i){return arguments.length?(this._sort=i,this):this._sort};i.prototype.stroke=function t(i){return arguments.length?(this._stroke=typeof i==="function"?i:Cu(i),this):this._stroke};i.prototype.strokeWidth=function t(i){return arguments.length?(this._strokeWidth=typeof i==="function"?i:Cu(i),this):this._strokeWidth};i.prototype.textAnchor=function t(i){return arguments.length?(this._textAnchor=typeof i==="function"?i:Cu(i),this):this._textAnchor};i.prototype.vectorEffect=function t(i){return arguments.length?(this._vectorEffect=typeof i==="function"?i:Cu(i),this):this._vectorEffect};i.prototype.verticalAlign=function t(i){return arguments.length?(this._verticalAlign=typeof i==="function"?i:Cu(i),this):this._verticalAlign};i.prototype.x=function t(i){return arguments.length?(this._x=typeof i==="function"?i:Cu(i),this):this._x};i.prototype.y=function t(i){return arguments.length?(this._y=typeof i==="function"?i:Cu(i),this):this._y};return i}(xu);var Fy=function(t){function i(){t.call(this);this._curve="linear";this._defined=function(){return true};this._name="Area";this._x=gu("x");this._x0=gu("x");this._x1=null;this._y=Cu(0);this._y0=Cu(0);this._y1=gu("y")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._dataFilter=function t(i){var e=this;var n=z().key(this._id).entries(i).map(function(t){t.data=Xl(t.values);t.i=i.indexOf(t.values[0]);var n=h(t.values.map(e._x).concat(t.values.map(e._x0)).concat(e._x1?t.values.map(e._x1):[]));t.xR=n;t.width=n[1]-n[0];t.x=n[0]+t.width/2;var r=h(t.values.map(e._y).concat(t.values.map(e._y0)).concat(e._y1?t.values.map(e._y1):[]));t.yR=r;t.height=r[1]-r[0];t.y=r[0]+t.height/2;t.nested=true;t.translate=[t.x,t.y];t.__d3plusShape__=true;return t});n.key=function(t){return t.key};return n};i.prototype.render=function i(e){t.prototype.render.call(this,e);var n=this._path=hc().defined(this._defined).curve(R_["curve"+this._curve.charAt(0).toUpperCase()+this._curve.slice(1)]).x(this._x).x0(this._x0).x1(this._x1).y(this._y).y0(this._y0).y1(this._y1);var r=hc().defined(function(t){return t}).curve(R_["curve"+this._curve.charAt(0).toUpperCase()+this._curve.slice(1)]).x(this._x).x0(this._x0).x1(this._x1).y(this._y).y0(this._y0).y1(this._y1);this._enter.append("path").attr("transform",function(t){return"translate("+(-t.xR[0]-t.width/2)+", "+(-t.yR[0]-t.height/2)+")"}).attr("d",function(t){return n(t.values)}).call(this._applyStyle.bind(this));this._update.select("path").transition(this._transition).attr("transform",function(t){return"translate("+(-t.xR[0]-t.width/2)+", "+(-t.yR[0]-t.height/2)+")"}).attrTween("d",function(t){return jf(Zs(this).attr("d"),n(t.values))}).call(this._applyStyle.bind(this));this._exit.select("path").transition(this._transition).attrTween("d",function(t){return jf(Zs(this).attr("d"),r(t.values))});return this};i.prototype._aes=function t(i,e){var n=this;return{points:i.values.map(function(t){return[n._x(t,e),n._y(t,e)]})}};i.prototype.curve=function t(i){return arguments.length?(this._curve=i,this):this._curve};i.prototype.defined=function t(i){return arguments.length?(this._defined=i,this):this._defined};i.prototype.x0=function t(i){if(!arguments.length){return this._x0}this._x0=typeof i==="function"?i:Cu(i);this._x=this._x0;return this};i.prototype.x1=function t(i){return arguments.length?(this._x1=typeof i==="function"||i===null?i:Cu(i),this):this._x1};i.prototype.y0=function t(i){if(!arguments.length){return this._y0}this._y0=typeof i==="function"?i:Cu(i);this._y=this._y0;return this};i.prototype.y1=function t(i){return arguments.length?(this._y1=typeof i==="function"||i===null?i:Cu(i),this):this._y1};return i}(zy);var Oy=function(t){function i(){t.call(this,"rect");this._name="Bar";this._height=Cu(10);this._labelBounds=function(t,i,e){return{width:e.width,height:e.height,x:-e.width/2,y:-e.height/2}};this._width=Cu(10);this._x=gu("x");this._x0=gu("x");this._x1=null;this._y=Cu(0);this._y0=Cu(0);this._y1=gu("y")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype.render=function i(e){var n=this;t.prototype.render.call(this,e);this._enter.attr("width",function(t,i){return n._x1===null?n._getWidth(t,i):0}).attr("height",function(t,i){return n._x1!==null?n._getHeight(t,i):0}).attr("x",function(t,i){return n._x1===null?-n._getWidth(t,i)/2:0}).attr("y",function(t,i){return n._x1!==null?-n._getHeight(t,i)/2:0}).call(this._applyStyle.bind(this)).transition(this._transition).call(this._applyPosition.bind(this));this._update.transition(this._transition).call(this._applyStyle.bind(this)).call(this._applyPosition.bind(this));this._exit.transition(this._transition).attr("width",function(t,i){return n._x1===null?n._getWidth(t,i):0}).attr("height",function(t,i){return n._x1!==null?n._getHeight(t,i):0}).attr("x",function(t,i){return n._x1===null?-n._getWidth(t,i)/2:0}).attr("y",function(t,i){return n._x1!==null?-n._getHeight(t,i)/2:0});return this};i.prototype._aes=function t(i,e){return{height:this._getHeight(i,e),width:this._getWidth(i,e),x:this._x1!==null?this._getX(i,e)+this._getWidth(i,e)/2:this._getX(i,e),y:this._x1===null?this._getY(i,e)+this._getHeight(i,e)/2:this._getY(i,e)}};i.prototype._applyPosition=function t(i){var e=this;i.attr("width",function(t,i){return e._getWidth(t,i)}).attr("height",function(t,i){return e._getHeight(t,i)}).attr("x",function(t,i){return e._x1!==null?e._getX(t,i):-e._getWidth(t,i)/2}).attr("y",function(t,i){return e._x1===null?e._getY(t,i):-e._getHeight(t,i)/2})};i.prototype._getHeight=function t(i,e){if(this._x1!==null){return this._height(i,e)}return Math.abs(this._y1(i,e)-this._y(i,e))};i.prototype._getWidth=function t(i,e){if(this._x1===null){return this._width(i,e)}return Math.abs(this._x1(i,e)-this._x(i,e))};i.prototype._getX=function t(i,e){var n=this._x1===null?this._width(i,e):this._x1(i,e)-this._x(i,e);if(n<0){return n}else{return 0}};i.prototype._getY=function t(i,e){var n=this._x1!==null?this._height(i,e):this._y1(i,e)-this._y(i,e);if(n<0){return n}else{return 0}};i.prototype.height=function t(i){return arguments.length?(this._height=typeof i==="function"?i:Cu(i),this):this._height};i.prototype.width=function t(i){return arguments.length?(this._width=typeof i==="function"?i:Cu(i),this):this._width};i.prototype.x0=function t(i){if(!arguments.length){return this._x0}this._x0=typeof i==="function"?i:Cu(i);this._x=this._x0;return this};i.prototype.x1=function t(i){return arguments.length?(this._x1=typeof i==="function"||i===null?i:Cu(i),this):this._x1};i.prototype.y0=function t(i){if(!arguments.length){return this._y0}this._y0=typeof i==="function"?i:Cu(i);this._y=this._y0;return this};i.prototype.y1=function t(i){return arguments.length?(this._y1=typeof i==="function"||i===null?i:Cu(i),this):this._y1};return i}(zy);var Ny=function(t){function i(){t.call(this,"circle");this._name="Circle";this._r=gu("r")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._applyPosition=function t(i){var e=this;i.attr("r",function(t,i){return e._r(t,i)}).attr("x",function(t,i){return-e._r(t,i)/2}).attr("y",function(t,i){return-e._r(t,i)/2})};i.prototype.render=function i(e){t.prototype.render.call(this,e);this._enter.attr("r",0).attr("x",0).attr("y",0).call(this._applyStyle.bind(this)).transition(this._transition).call(this._applyPosition.bind(this));this._update.transition(this._transition).call(this._applyStyle.bind(this)).call(this._applyPosition.bind(this));this._exit.transition(this._transition).attr("r",0).attr("x",0).attr("y",0);return this};i.prototype._aes=function t(i,e){return{r:this._r(i,e)}};i.prototype.r=function t(i){return arguments.length?(this._r=typeof i==="function"?i:Cu(i),this):this._r};return i}(zy);var Ty=function(t){function i(){t.call(this);this._curve="linear";this._defined=function(t){return t};this._fill=Cu("none");this._name="Line";this._path=ac();this._strokeWidth=Cu(1)}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._dataFilter=function t(i){var e=this;var n=z().key(this._id).entries(i).map(function(t){t.data=Xl(t.values);t.i=i.indexOf(t.values[0]);var n=h(t.values,e._x);t.xR=n;t.width=n[1]-n[0];t.x=n[0]+t.width/2;var r=h(t.values,e._y);t.yR=r;t.height=r[1]-r[0];t.y=r[0]+t.height/2;t.nested=true;t.translate=[t.x,t.y];t.__d3plusShape__=true;return t});n.key=function(t){return t.key};return n};i.prototype.render=function i(e){var n=this;t.prototype.render.call(this,e);var r=this;this._path.curve(R_["curve"+this._curve.charAt(0).toUpperCase()+this._curve.slice(1)]).defined(this._defined).x(this._x).y(this._y);this._enter.append("path").attr("transform",function(t){return"translate("+(-t.xR[0]-t.width/2)+", "+(-t.yR[0]-t.height/2)+")"}).attr("d",function(t){return n._path(t.values)}).call(this._applyStyle.bind(this));this._update.select("path").transition(this._transition).attr("transform",function(t){return"translate("+(-t.xR[0]-t.width/2)+", "+(-t.yR[0]-t.height/2)+")"}).attrTween("d",function(t){return jf(Zs(this).attr("d"),r._path(t.values))}).call(this._applyStyle.bind(this));return this};i.prototype._aes=function t(i,e){var n=this;return{points:i.values.map(function(t){return[n._x(t,e),n._y(t,e)]})}};i.prototype.curve=function t(i){return arguments.length?(this._curve=i,this):this._curve};i.prototype.defined=function t(i){return arguments.length?(this._defined=i,this):this._defined};return i}(zy);var jy=function(t){function i(){t.call(this,"path");this._d=gu("path");this._name="Path"}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype.render=function i(e){t.prototype.render.call(this,e);this._enter.attr("opacity",0).attr("d",this._d).call(this._applyStyle.bind(this)).transition(this._transition).attr("opacity",1);this._update.transition(this._transition).call(this._applyStyle.bind(this)).attr("opacity",1).attr("d",this._d);this._exit.transition(this._transition).attr("opacity",0);return this};i.prototype.d=function t(i){return arguments.length?(this._d=typeof i==="function"?i:Cu(i),this):this._d};return i}(zy);var Py=function(t){function i(){t.call(this,"rect");this._height=gu("height");this._labelBounds=function(t,i,e){return{width:e.width,height:e.height,x:-e.width/2,y:-e.height/2}};this._name="Rect";this._width=gu("width")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype.render=function i(e){t.prototype.render.call(this,e);this._enter.attr("width",0).attr("height",0).attr("x",0).attr("y",0).call(this._applyStyle.bind(this)).transition(this._transition).call(this._applyPosition.bind(this));this._update.transition(this._transition).call(this._applyStyle.bind(this)).call(this._applyPosition.bind(this));this._exit.transition(this._transition).attr("width",0).attr("height",0).attr("x",0).attr("y",0);return this};i.prototype._aes=function t(i,e){return{width:this._width(i,e),height:this._height(i,e)}};i.prototype._applyPosition=function t(i){var e=this;i.attr("width",function(t,i){return e._width(t,i)}).attr("height",function(t,i){return e._height(t,i)}).attr("x",function(t,i){return-e._width(t,i)/2}).attr("y",function(t,i){return-e._height(t,i)/2})};i.prototype.height=function t(i){return arguments.length?(this._height=typeof i==="function"?i:Cu(i),this):this._height};i.prototype.width=function t(i){return arguments.length?(this._width=typeof i==="function"?i:Cu(i),this):this._width};return i}(zy);var Hy=Object.freeze({pointDistance:Dy,Image:My,Shape:zy,Area:Fy,Bar:Oy,Circle:Ny,Line:Ty,Path:jy,Rect:Py});var Ry=function(t){function i(){var i=this;t.call(this);this._align="center";this._data=[];this._duration=600;this._height=200;this._id=gu("id");this._label=gu("id");this._lineData=[];this._outerBounds={width:0,height:0,x:0,y:0};this._padding=5;this._shape=Cu("Rect");this._shapeConfig={duration:this._duration,fill:gu("color"),fontColor:Cu("#444"),fontFamily:(new Py).fontFamily(),fontResize:false,fontSize:Cu(10),height:Cu(10),hitArea:function(t){var e=i._lineData[i._data.indexOf(t)],n=w([e.height,e.shapeHeight]);return{width:e.width+e.shapeWidth+(e.width?i._padding:0),height:n,x:-e.shapeWidth/2,y:-n/2}},labelBounds:function(t,e,n){var r=i._lineData[t.i],o=n.r!==void 0?n.r:n.width/2;return{width:r.width,height:r.height,x:o+i._padding,y:-r.height/2}},opacity:1,r:Cu(5),width:Cu(10),x:function(t,e){var n=i._shapeConfig.width;var r=i._lineData[e].y;var o=i._align==="left"?0:i._align==="center"?(i._outerBounds.width-i._rowWidth(i._lineData.filter(function(t){return r===t.y})))/2:i._outerBounds.width-i._rowWidth(i._lineData.filter(function(t){return r===t.y}));return i._rowWidth(i._lineData.slice(0,e).filter(function(t){return r===t.y}))+i._padding+i._outerBounds.x+n(t,e)/2+o},y:function(t,e){var n=i._shapeConfig.height;var r=i._lineData[e];return r.y+i._titleHeight+i._outerBounds.y+w(i._lineData.filter(function(t){return r.y===t.y}).map(function(t){return t.height}).concat(i._data.map(function(t,i){return n(t,i)})))/2}};this._titleConfig={fontFamily:"Verdana",fontSize:12,lineHeight:13};this._verticalAlign="middle";this._width=400}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._fetchConfig=function t(i,e,n){return typeof this._shapeConfig[i]==="function"?this._shapeConfig[i](e,n):this._shapeConfig[i]};i.prototype._rowHeight=function t(i){return w(i.map(function(t){return t.height}).concat(i.map(function(t){return t.shapeHeight})))+this._padding};i.prototype._rowWidth=function t(i){var e=this;return k(i.map(function(t){return t.shapeWidth+t.width+e._padding*(t.width?2:1)}))-this._padding};i.prototype.render=function t(i){var e=this;if(this._select===void 0){this.select(Zs("body").append("svg").attr("width",this._width+"px").attr("height",this._height+"px").node())}if(this._lineHeight===void 0){this._lineHeight=function(t,i){return e._fetchConfig("fontSize",t,i)*1.1}}this._group=Au("g.d3plus-Legend",{parent:this._select});var n=this._height;this._titleHeight=0;if(this._title){var r=this._titleConfig.fontFamily,o=this._titleConfig.lineHeight,s=this._titleConfig.fontSize;var a=Ef().fontFamily(r).fontSize(s).lineHeight(o).width(this._width).height(this._height)(this._title);this._titleHeight=o+a.lines.length+this._padding;n-=this._titleHeight}this._lineData=this._data.map(function(t,i){var r=e._fetchConfig("fontFamily",t,i),o=e._lineHeight(t,i),s=e._fetchConfig("fontSize",t,i),a=e._fetchConfig("width",t,i);var h=n-(e._data.length+1)*e._padding,u=e._width;var l=Ef().fontFamily(r).fontSize(s).lineHeight(o).width(u).height(h)(e._label(t,i));l.width=Math.ceil(w(l.lines.map(function(t){return kf(t,{"font-family":r,"font-size":s})})))+s;l.height=Math.ceil(l.lines.length*(o+1));l.og={height:l.height,width:l.width};l.data=t;l.f=r;l.s=s;l.lh=o;l.y=0;l.id=e._id(t,i);l.i=i;l.shapeWidth=a;l.shapeHeight=e._fetchConfig("height",t,i);return l});var h;var u=this._width-this._padding*2;h=k(this._lineData.map(function(t){return t.shapeWidth+e._padding*2+t.width}))-this._padding;if(h>u){var l=1,f=[];var c=w(this._lineData.map(function(t){return t.words.length}));this._wrapLines=function(){var t=this;l++;if(l>c){return}var i=l===1?this._lineData.slice():this._lineData.filter(function(i){return i.width+i.shapeWidth+t._padding*(i.width?2:1)>u&&i.words.length>=l}).sort(function(t,i){return i.sentence.length-t.sentence.length});if(i.length&&n>i[0].height*l){var e=false;var r=function(t){var n=i[t];var r=n.og.height*l,o=n.og.width*(1.5*(1/l));var s=Ef().fontFamily(n.f).fontSize(n.s).lineHeight(n.lh).width(o).height(r)(n.sentence);if(!s.truncated){n.width=Math.ceil(w(s.lines.map(function(t){return kf(t,{"font-family":n.f,"font-size":n.s})})))+n.s;n.height=s.lines.length*(n.lh+1)}else{e=true;return"break"}};for(var o=0;o<i.length;o++){var s=r(o);if(s==="break")break}if(!e){this._wrapRows()}}else{f=[];return}};this._wrapRows=function(){var t=this;f=[];var i=1,e=0;for(var r=0;r<this._lineData.length;r++){var o=t._lineData[r],s=o.width+t._padding*(o.width?2:1)+o.shapeWidth;if(k(f.map(function(t){return w(t,function(t){return w([t.height,t.shapeHeight])})}))>n){f=[];break}if(e+s<u){e+=s}else if(s>u){f=[];t._wrapLines();break}else{e=s;i++}if(!f[i-1]){f[i-1]=[]}f[i-1].push(o)}};this._wrapRows();if(!f.length||k(f,this._rowHeight.bind(this))+this._padding>n){h=k(this._lineData.map(function(t){return t.shapeWidth+e._padding*1}))-this._padding;for(var _=0;_<this._lineData.length;_++){e._lineData[_].width=0;e._lineData[_].height=0}this._wrapRows()}if(f.length&&k(f,this._rowHeight.bind(this))+this._padding<n){f.forEach(function(t,i){t.forEach(function(t){if(i){t.y=k(f.slice(0,i),e._rowHeight.bind(e))}})});h=w(f,function(t){return k(t,function(t){return t.shapeWidth+e._padding*(t.width?2:1)+t.width})})-this._padding}}var p=w(this._lineData,function(t,i){return w([t.height,e._fetchConfig("height",t.data,i)])+t.y})+this._titleHeight,d=h;
this._outerBounds.width=d;this._outerBounds.height=p;var g=this._padding,v=this._padding;if(this._align==="center"){g=(this._width-d)/2}else if(this._align==="right"){g=this._width-this._padding-d}if(this._verticalAlign==="middle"){v=(this._height-p)/2}else if(this._verticalAlign==="bottom"){v=this._height-this._padding-p}this._outerBounds.x=g;this._outerBounds.y=v;(new Bf).data(this._title?[{text:this._title}]:[]).duration(this._duration).select(this._group.node()).textAnchor({left:"start",center:"middle",right:"end"}[this._align]).width(this._width-this._padding*2).x(this._padding).y(this._outerBounds.y).config(this._titleConfig).render();this._shapes=[];var y=this._shapeConfig,m={id:function(t){return t.id},label:function(t){return t.label},lineHeight:function(t){return t.lH}};var b=this._data.map(function(t,i){var n={__d3plus__:true,data:t,i:i,id:e._id(t,i),label:e._lineData[i].width?e._label(t,i):false,lH:e._lineHeight(t,i),shape:e._shape(t,i)};var r=function(e){if(e!=="labelBounds"&&{}.hasOwnProperty.call(y,e)){if(typeof y[e]==="function"){n[e]=y[e](t,i);m[e]=function(t){return t[e]}}else if(e==="on"){m[e]={};var r=function(t){if({}.hasOwnProperty.call(y[e],t)){m[e][t]=function(i){if(!y[e][t]){return}y[e][t].bind(this)(i.data,i.i)}}};for(var o in y[e])r(o)}}};for(var o in y)r(o);return n});this._shapes=[];["Circle","Rect"].forEach(function(t){e._shapes.push((new Hy[t]).data(b.filter(function(i){return i.shape===t})).duration(e._duration).labelPadding(0).select(e._group.node()).verticalAlign("top").config(Object.assign({},y,m)).render())});if(i){setTimeout(i,this._duration+100)}return this};i.prototype.align=function t(i){return arguments.length?(this._align=i,this):this._align};i.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};i.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};i.prototype.height=function t(i){return arguments.length?(this._height=i,this):this._height};i.prototype.highlight=function t(i){this._shapes.forEach(function(t){return t.highlight(i)});return this};i.prototype.id=function t(i){return arguments.length?(this._id=i,this):this._id};i.prototype.label=function t(i){return arguments.length?(this._label=typeof i==="function"?i:Cu(i),this):this._label};i.prototype.outerBounds=function t(){return this._outerBounds};i.prototype.padding=function t(i){return arguments.length?(this._padding=i,this):this._padding};i.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};i.prototype.shape=function t(i){return arguments.length?(this._shape=typeof i==="function"?i:Cu(i),this):this._shape};i.prototype.shapeConfig=function t(i){return arguments.length?(this._shapeConfig=Object.assign(this._shapeConfig,i),this):this._shapeConfig};i.prototype.title=function t(i){return arguments.length?(this._title=i,this):this._title};i.prototype.titleConfig=function t(i){return arguments.length?(this._titleConfig=Object.assign(this._titleConfig,i),this):this._titleConfig};i.prototype.verticalAlign=function t(i){return arguments.length?(this._verticalAlign=i,this):this._verticalAlign};i.prototype.width=function t(i){return arguments.length?(this._width=i,this):this._width};return i}(xu);var Ly=function(t){return function(){return t}};var Wy=function(t,i,e){this.target=t;this.type=i;this.selection=e};function Gy(){yo.stopImmediatePropagation()}var Uy=function(){yo.preventDefault();yo.stopImmediatePropagation()};var Iy={name:"drag"};var qy={name:"space"};var Yy={name:"handle"};var Xy={name:"center"};var Vy={name:"x",handles:["e","w"].map(em),input:function(t,i){return t&&[[t[0],i[0][1]],[t[1],i[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}};var Jy={name:"y",handles:["n","s"].map(em),input:function(t,i){return t&&[[i[0][0],t[0]],[i[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}};var $y={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(em),input:function(t){return t},output:function(t){return t}};var Ky={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var Zy={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"};var Qy={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"};var tm={overlay:+1,selection:+1,n:null,e:+1,s:null,w:-1,nw:-1,ne:+1,se:+1,sw:-1};var im={overlay:+1,selection:+1,n:-1,e:null,s:+1,w:null,nw:-1,ne:-1,se:+1,sw:+1};function em(t){return{type:t}}function nm(){return!yo.button}function rm(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function om(t){while(!t.__brush){if(!(t=t.parentNode)){return}}return t.__brush}function sm(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function am(){return um(Vy)}var hm=function(){return um($y)};function um(t){var i=rm,e=nm,n=ea(s,"start","brush","end"),r=6,o;function s(i){var e=i.property("__brush",f).selectAll(".overlay").data([em("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Ky.overlay).merge(e).each(function(){var t=om(this).extent;Zs(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])});i.selectAll(".selection").data([em("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Ky.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var n=i.selectAll(".handle").data(t.handles,function(t){return t.type});n.exit().remove();n.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return Ky[t.type]});i.each(a).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",l)}s.move=function(i,e){if(i.selection){i.on("start.brush",function(){h(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){h(this,arguments).end()}).tween("brush",function(){var i=this,n=i.__brush,r=h(i,arguments),o=n.selection,s=t.input(typeof e==="function"?e.apply(this,arguments):e,n.extent),u=gi(o,s);function l(t){n.selection=t===1&&sm(s)?null:u(t);a.call(i);r.brush()}return o&&s?l:l(1)})}else{i.each(function(){var i=this,n=arguments,r=i.__brush,o=t.input(typeof e==="function"?e.apply(i,n):e,r.extent),s=h(i,n).beforestart();Ga(i);r.selection=o==null||sm(o)?null:o;a.call(i);s.start().brush().end()})}};function a(){var t=Zs(this),i=om(this).selection;if(i){t.selectAll(".selection").style("display",null).attr("x",i[0][0]).attr("y",i[0][1]).attr("width",i[1][0]-i[0][0]).attr("height",i[1][1]-i[0][1]);t.selectAll(".handle").style("display",null).attr("x",function(t){return t.type[t.type.length-1]==="e"?i[1][0]-r/2:i[0][0]-r/2}).attr("y",function(t){return t.type[0]==="s"?i[1][1]-r/2:i[0][1]-r/2}).attr("width",function(t){return t.type==="n"||t.type==="s"?i[1][0]-i[0][0]+r:r}).attr("height",function(t){return t.type==="e"||t.type==="w"?i[1][1]-i[0][1]+r:r})}else{t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}}function h(t,i){return t.__brush.emitter||new u(t,i)}function u(t,i){this.that=t;this.args=i;this.state=t.__brush;this.active=0}u.prototype={beforestart:function(){if(++this.active===1){this.state.emitter=this,this.starting=true}return this},start:function(){if(this.starting){this.starting=false,this.emit("start")}return this},brush:function(){this.emit("brush");return this},end:function(){if(--this.active===0){delete this.state.emitter,this.emit("end")}return this},emit:function(i){ko(new Wy(s,i,t.output(this.state.selection)),n.apply,n,[i,this.that,this.args])}};function l(){if(yo.touches){if(yo.changedTouches.length<yo.touches.length){return Uy()}}else if(o){return}if(!e.apply(this,arguments)){return}var i=this,n=yo.target.__data__.type,r=(yo.metaKey?n="overlay":n)==="selection"?Iy:yo.altKey?Xy:Yy,s=t===Jy?null:tm[n],u=t===Vy?null:im[n],l=om(i),f=l.extent,c=l.selection,_=f[0][0],p,d,g=f[0][1],v,y,m=f[1][0],b,x,w=f[1][1],C,A,S,k,E,B=s&&u&&yo.shiftKey,D,M,z=Do(i),F=z,O=h(i,arguments).beforestart();if(n==="overlay"){l.selection=c=[[p=t===Jy?_:z[0],v=t===Vy?g:z[1]],[b=t===Jy?m:p,C=t===Vy?w:v]]}else{p=c[0][0];v=c[0][1];b=c[1][0];C=c[1][1]}d=p;y=v;x=b;A=C;var N=Zs(i).attr("pointer-events","none");var T=N.selectAll(".overlay").attr("cursor",Ky[n]);if(yo.touches){N.on("touchmove.brush",P,true).on("touchend.brush touchcancel.brush",R,true)}else{var j=Zs(yo.view).on("keydown.brush",L,true).on("keyup.brush",W,true).on("mousemove.brush",P,true).on("mouseup.brush",R,true);ty(yo.view)}Gy();Ga(i);a.call(i);O.start();function P(){var t=Do(i);if(B&&!D&&!M){if(Math.abs(t[0]-F[0])>Math.abs(t[1]-F[1])){M=true}else{D=true}}F=t;E=true;Uy();H()}function H(){var t;S=F[0]-z[0];k=F[1]-z[1];switch(r){case qy:case Iy:{if(s){S=Math.max(_-p,Math.min(m-b,S)),d=p+S,x=b+S}if(u){k=Math.max(g-v,Math.min(w-C,k)),y=v+k,A=C+k}break}case Yy:{if(s<0){S=Math.max(_-p,Math.min(m-p,S)),d=p+S,x=b}else if(s>0){S=Math.max(_-b,Math.min(m-b,S)),d=p,x=b+S}if(u<0){k=Math.max(g-v,Math.min(w-v,k)),y=v+k,A=C}else if(u>0){k=Math.max(g-C,Math.min(w-C,k)),y=v,A=C+k}break}case Xy:{if(s){d=Math.max(_,Math.min(m,p-S*s)),x=Math.max(_,Math.min(m,b+S*s))}if(u){y=Math.max(g,Math.min(w,v-k*u)),A=Math.max(g,Math.min(w,C+k*u))}break}}if(x<d){s*=-1;t=p,p=b,b=t;t=d,d=x,x=t;if(n in Zy){T.attr("cursor",Ky[n=Zy[n]])}}if(A<y){u*=-1;t=v,v=C,C=t;t=y,y=A,A=t;if(n in Qy){T.attr("cursor",Ky[n=Qy[n]])}}if(l.selection){c=l.selection}if(D){d=c[0][0],x=c[1][0]}if(M){y=c[0][1],A=c[1][1]}if(c[0][0]!==d||c[0][1]!==y||c[1][0]!==x||c[1][1]!==A){l.selection=[[d,y],[x,A]];a.call(i);O.brush()}}function R(){Gy();if(yo.touches){if(yo.touches.length){return}if(o){clearTimeout(o)}o=setTimeout(function(){o=null},500);N.on("touchmove.brush touchend.brush touchcancel.brush",null)}else{iy(yo.view,E);j.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null)}N.attr("pointer-events","all");T.attr("cursor",Ky.overlay);if(l.selection){c=l.selection}if(sm(c)){l.selection=null,a.call(i)}O.end()}function L(){switch(yo.keyCode){case 16:{B=s&&u;break}case 18:{if(r===Yy){if(s){b=x-S*s,p=d+S*s}if(u){C=A-k*u,v=y+k*u}r=Xy;H()}break}case 32:{if(r===Yy||r===Xy){if(s<0){b=x-S}else if(s>0){p=d-S}if(u<0){C=A-k}else if(u>0){v=y-k}r=qy;T.attr("cursor",Ky.selection);H()}break}default:return}Uy()}function W(){switch(yo.keyCode){case 16:{if(B){D=M=B=false;H()}break}case 18:{if(r===Xy){if(s<0){b=x}else if(s>0){p=d}if(u<0){C=A}else if(u>0){v=y}r=Yy;H()}break}case 32:{if(r===qy){if(yo.altKey){if(s){b=x-S*s,p=d+S*s}if(u){C=A-k*u,v=y+k*u}r=Xy}else{if(s<0){b=x}else if(s>0){p=d}if(u<0){C=A}else if(u>0){v=y}r=Yy}T.attr("cursor",Ky[n]);H()}break}default:return}Uy()}}function f(){var e=this.__brush||{selection:null};e.extent=i.apply(this,arguments);e.dim=t;return e}s.extent=function(t){return arguments.length?(i=typeof t==="function"?t:Ly([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),s):i};s.filter=function(t){return arguments.length?(e=typeof t==="function"?t:Ly(!!t),s):e};s.handleSize=function(t){return arguments.length?(r=+t,s):r};s.on=function(){var t=n.on.apply(n,arguments);return t===n?s:t};return s}var lm=function(t){function i(){var i=this;t.call(this);this._brushFilter=function(){return!yo.button&&yo.detail<2};this._domain=[2001,2010];this._gridSize=0;this._handleConfig={fill:"#444"};this._handleSize=6;this._height=100;this._on={};this.orient("bottom");this._scale="time";this._selectionConfig={fill:"#777","stroke-width":0};this._shape="Rect";this._shapeConfig=Object.assign({},this._shapeConfig,{height:10,width:function(t){return i._domain.map(function(t){return X_(t).getTime()}).includes(t.id)?2:1}})}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._brushBrush=function t(){this._brushStyle();if(this._on.brush){this._on.brush()}};i.prototype._brushEnd=function t(){if(!yo.sourceEvent){return}var i=(yo.selection?yo.selection:[yo.sourceEvent.offsetX,yo.sourceEvent.offsetX]).map(this._d3Scale.invert).map(Number);var e=this._availableTicks.map(Number);i[0]=X_(wu(i[0],e));i[1]=X_(wu(i[1],e));var n=i.map(this._d3Scale),r=n[0]===n[1];if(r){n[0]-=.1;n[1]+=.1}this._brushGroup.transition(this._transition).call(this._brush.move,n);this._brushStyle();if(this._on.end){this._on.end(r?i[0]:i)}};i.prototype._brushStart=function t(){this._brushStyle();if(this._on.start){this._on.start()}};i.prototype._brushStyle=function t(){var i=this._position;var e=i.height;var n=this._shape==="Circle"?this._shapeConfig.r*2:this._shape==="Rect"?this._shapeConfig[e]:this._tickSize;this._brushGroup.selectAll(".selection").call(mu,this._selectionConfig).attr("height",n);this._brushGroup.selectAll(".handle").call(mu,this._handleConfig).attr("height",n+this._handleSize)};i.prototype.render=function i(e){t.prototype.render.call(this,e);var n=this._position;var r=n.height;var o=n.y;var s=this._outerBounds[o],a=this._d3Scale.range();var h=this._brush=am().extent([[a[0],s],[a[1],s+this._outerBounds[r]]]).filter(this._brushFilter).handleSize(this._handleSize).on("start",this._brushStart.bind(this)).on("brush",this._brushBrush.bind(this)).on("end",this._brushEnd.bind(this));var u=this._availableTicks[this._availableTicks.length-1];var l=(this._selection===void 0?[u,u]:this._selection instanceof Array?this._selection.slice():[this._selection,this._selection]).map(X_).map(this._d3Scale);if(l[0]===l[1]){l[0]-=.1;l[1]+=.1}this._brushGroup=Au("g.brushGroup",{parent:this._group});this._brushGroup.call(h).transition(this._transition).call(h.move,l);return this};i.prototype.brushFilter=function t(i){return arguments.length?(this._brushFilter=i,this):this._brushFilter};i.prototype.handleConfig=function t(i){return arguments.length?(this._handleConfig=Object.assign(this._handleConfig,i),this):this._handleConfig};i.prototype.handleSize=function t(i){return arguments.length?(this._handleSize=i,this):this._handleSize};i.prototype.on=function t(i,e){return arguments.length===2?(this._on[i]=e,this):arguments.length?typeof i==="string"?this._on[i]:(this._on=Object.assign({},this._on,i),this):this._on};i.prototype.selectionConfig=function t(i){return arguments.length?(this._selectionConfig=Object.assign(this._selectionConfig,i),this):this._selectionConfig};i.prototype.selection=function t(i){return arguments.length?(this._selection=i,this):this._selection};return i}(V_);var fm=function(t){function i(){t.call(this);this._background=Cu("rgba(255, 255, 255, 0.75)");this._body=gu("body","");this._bodyStyle={"font-family":"Verdana","font-size":"10px","font-weight":"400"};this._border=Cu("1px solid rgba(0, 0, 0, 0.1)");this._borderRadius=Cu("2px");this._className="d3plus-tooltip";this._data=[];this._duration=Cu(200);this._footer=gu("footer","");this._footerStyle={"font-family":"Verdana","font-size":"10px","font-weight":"400"};this._height=Cu("auto");this._id=function(t,i){return t.id||""+i};this._offset=Cu(10);this._padding=Cu("5px");this._pointerEvents=Cu("auto");this._prefix=Vl();this._tableStyle={"border-spacing":"0",width:"100%"};this._tbody=[];this._tbodyStyle={"font-family":"Verdana","font-size":"10px","text-align":"center"};this._thead=[];this._theadStyle={"font-family":"Verdana","font-size":"10px","font-weight":"600","text-align":"center"};this._title=gu("title","");this._titleStyle={"font-family":"Verdana","font-size":"12px","font-weight":"600"};this._translate=function(t){return[t.x,t.y]};this._width=Cu("auto")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype.render=function t(i){var e=this;var n=this;var r=Zs("body").selectAll("."+this._className).data(this._data,this._id);var o=r.enter().append("div").attr("class",this._className).style("position","absolute").style(this._prefix+"transform","scale(0)").style(this._prefix+"transform-origin","50% 100%");var s=r.merge(o);function a(t){o.append("div").attr("class","d3plus-tooltip-"+t);var i=s.select(".d3plus-tooltip-"+t).html(n["_"+t]);Jl(i,n["_"+t+"Style"])}function h(t){if(typeof t==="function"){var i=Zs(this.parentNode.parentNode).datum();return t(i,n._data.indexOf(i))}else{return t}}function u(t){t.style("background",n._background).style(n._prefix+"border-radius",n._borderRadius).style("pointer-events",n._pointerEvents).style("padding",n._padding).style("width",n._width).style("height",n._height).style("border",function(t,i){var e=Zs(this).style("border");return e!=="0px none rgb(0, 0, 0)"?e:n._border(t,i)}).style("top",function(t,i){return n._translate(t,i)[1]-this.offsetHeight-n._offset(t,i)+"px"}).style("left",function(t,i){return n._translate(t,i)[0]-this.offsetWidth/2+"px"})}a("title");a("body");var l=o.append("table").attr("class","d3plus-tooltip-table");var f=s.select(".d3plus-tooltip-table");Jl(f,this._tableStyle);l.append("thead").attr("class","d3plus-tooltip-thead");var c=s.select(".d3plus-tooltip-thead");Jl(c,this._theadStyle);var _=c.selectAll("th").data(this._thead);_.enter().append("th").merge(_).html(h);_.exit().remove();l.append("tbody").attr("class","d3plus-tooltip-tbody");var p=s.select(".d3plus-tooltip-tbody");Jl(p,this._tbodyStyle);var d=p.selectAll("tr").data(this._tbody);var g=d.enter().append("tr");d.exit().remove();var v=d.merge(g);var y=v.selectAll("td").data(function(t){return t});y.enter().append("td").merge(y).html(h);a("footer");o.call(u);var m=Ph().duration(this._duration);s.attr("id",function(t,i){return"d3plus-tooltip-"+e._id(t,i)}).transition(m).style(this._prefix+"transform","scale(1)").call(u);r.exit().transition(m).style(this._prefix+"transform","scale(0)").remove();if(i){setTimeout(i,this._duration+100)}return this};i.prototype.background=function t(i){return arguments.length?(this._background=typeof i==="function"?i:Cu(i),this):this._background};i.prototype.body=function t(i){return arguments.length?(this._body=typeof i==="function"?i:Cu(i),this):this._body};i.prototype.bodyStyle=function t(i){return arguments.length?(this._bodyStyle=Object.assign(this._bodyStyle,i),this):this._bodyStyle};i.prototype.border=function t(i){return arguments.length?(this._border=typeof i==="function"?i:Cu(i),this):this._border};i.prototype.borderRadius=function t(i){return arguments.length?(this._borderRadius=typeof i==="function"?i:Cu(i),this):this._borderRadius};i.prototype.className=function t(i){return arguments.length?(this._className=i,this):this._className};i.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};i.prototype.duration=function t(i){return arguments.length?(this._duration=typeof i==="function"?i:Cu(i),this):this._duration};i.prototype.footer=function t(i){return arguments.length?(this._footer=typeof i==="function"?i:Cu(i),this):this._footer};i.prototype.footerStyle=function t(i){return arguments.length?(this._footerStyle=Object.assign(this._footerStyle,i),this):this._footerStyle};i.prototype.height=function t(i){return arguments.length?(this._height=typeof i==="function"?i:Cu(i),this):this._height};i.prototype.id=function t(i){return arguments.length?(this._id=typeof i==="function"?i:Cu(i),this):this._id};i.prototype.offset=function t(i){return arguments.length?(this._offset=typeof i==="function"?i:Cu(i),this):this._offset};i.prototype.padding=function t(i){return arguments.length?(this._padding=typeof i==="function"?i:Cu(i),this):this._padding};i.prototype.pointerEvents=function t(i){return arguments.length?(this._pointerEvents=typeof i==="function"?i:Cu(i),this):this._pointerEvents};i.prototype.tableStyle=function t(i){return arguments.length?(this._tableStyle=Object.assign(this._tableStyle,i),this):this._tableStyle};i.prototype.tbody=function t(i){return arguments.length?(this._tbody=i,this):this._tbody};i.prototype.tbodyStyle=function t(i){return arguments.length?(this._tbodyStyle=Object.assign(this._tbodyStyle,i),this):this._tbodyStyle};i.prototype.thead=function t(i){return arguments.length?(this._thead=i,this):this._thead};i.prototype.theadStyle=function t(i){return arguments.length?(this._theadStyle=Object.assign(this._theadStyle,i),this):this._theadStyle};i.prototype.title=function t(i){return arguments.length?(this._title=typeof i==="function"?i:Cu(i),this):this._title};i.prototype.titleStyle=function t(i){return arguments.length?(this._titleStyle=Object.assign(this._titleStyle,i),this):this._titleStyle};i.prototype.translate=function t(i){return arguments.length?(this._translate=typeof i==="function"?i:Cu(i),this):this._translate};i.prototype.width=function t(i){return arguments.length?(this._width=typeof i==="function"?i:Cu(i),this):this._width};return i}(xu);var cm=function(t,i,e){if(e===void 0)e=[];if(e&&!(e instanceof Array)){e=[e]}var n=z().key(i).entries(t);if(n.length<2){return{data:[],id:i}}var r,o;if(e.length){var s=n.length;var a=function(i){var a=n.map(function(t){return Array.from(new Set(t.values.map(function(t){return e[i](t)})))}),h=k(a,function(t){return t.length}),u=new Set(A(a)).size;if(h===s&&u===s||i===e.length-1){o=e[i];r=z().key(o).entries(t).map(function(t){return Xl(t.values)});return"break"}};for(var h=0;h<e.length;h++){var u=a(h);if(u==="break")break}}else{o=i;r=n.map(function(t){return Xl(t.values)})}return{data:r,id:o}};function _m(t,i){if(t.tagName===undefined||["BODY","HTML"].indexOf(t.tagName)>=0){var e=window["inner"+(i.charAt(0).toUpperCase()+i.slice(1))];var n=Zs(t);if(i==="width"){e-=parseFloat(n.style("margin-left"),10);e-=parseFloat(n.style("margin-right"),10);e-=parseFloat(n.style("padding-left"),10);e-=parseFloat(n.style("padding-right"),10)}else{e-=parseFloat(n.style("margin-top"),10);e-=parseFloat(n.style("margin-bottom"),10);e-=parseFloat(n.style("padding-top"),10);e-=parseFloat(n.style("padding-bottom"),10)}return e}else{var r=parseFloat(Zs(t).style(i),10);if(typeof r==="number"&&r>0){return r}else{return _m(t.parentNode,i)}}}var pm=function(t){return[_m(t,"width"),_m(t,"height")]};var dm=function(t,i){this._select.style("cursor","auto");if(this._drawDepth<this._groupBy.length-1){var e=this._groupBy[this._drawDepth],n=e(t,i);this.highlight(false);if(this._tooltip){this._tooltipClass.data([]).render()}this._history.push({depth:this._depth,filter:this._filter});this.config({depth:this._drawDepth+1,filter:function(t,i){return e(t,i)===n}}).render()}};var gm=function(t,i){var e=this;var n=this._ids(t,i);this.highlight(function(t,i){var r=e._ids(t,i);return n[n.length-1]===r[n.length-1]})};var vm=function(t){if(this._tooltip){var i=this._drawDepth<this._groupBy.length-1;this._select.style("cursor",i?"pointer":"auto");this._tooltipClass.data([t]).footer(i?Yl.t("Click to Expand",{lng:this._locale}):"").title(this._legendClass.label()).translate(Do(Zs("html").node())).config(this._tooltipConfig).render()}};var ym=function(t){if(this._tooltip){var i=this._drawDepth<this._groupBy.length-1;this._select.style("cursor",i?"pointer":"auto");this._tooltipClass.data([t]).footer(i?Yl.t("Click to Expand",{lng:this._locale}):"").title(this._drawLabel).translate(Do(Zs("html").node())).config(this._tooltipConfig).render()}};var mm=function(){if(this._tooltip){this._tooltipClass.translate(Do(Zs("html").node())).render()}};var bm=function(){this.highlight(false);this._select.style("cursor","auto");if(this._tooltip){this._tooltipClass.data([]).render()}};var xm=function(t){function i(){var i=this;t.call(this);this._aggs={};this._backClass=(new Bf).on("click",function(){if(i._history.length){i.config(i._history.pop()).render()}else{i.depth(i._drawDepth-1).filter(false).render()}}).on("mousemove",function(){return i._backClass.select().style("cursor","pointer")});this._data=[];this._duration=600;this._highlightOpacity=.5;this._history=[];this._groupBy=[gu("id")];this._legend=true;this._legendConfig={shapeConfig:{fontResize:false}};this._legendClass=new Ry;this._locale="en-US";this._on={click:dm.bind(this),mouseenter:gm.bind(this),"mouseenter.legend":vm.bind(this),"mouseenter.shape":ym.bind(this),mousemove:mm.bind(this),mouseleave:bm.bind(this)};this._padding=5;this._shapes=[];this._shapeConfig={fill:function(t,e){return ef(i._groupBy[0](t,e))},highlightDuration:50,opacity:Cu(1),stroke:function(t,e){return ft(ef(i._groupBy[0](t,e))).darker()},strokeWidth:Cu(0)};this._timeline=true;this._timelineClass=(new lm).align("end").on("end",function(t){if(!(t instanceof Array)){t=[t,t]}t=t.map(Number);i._timelineClass.selection(t);i.timeFilter(function(e){var n=X_(i._time(e)).getTime();return n>=t[0]&&n<=t[1]}).render()});this._timelineConfig={};this._tooltip=true;this._tooltipClass=new fm;this._tooltipConfig={duration:50,pointerEvents:"none"}}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._shapeConfigPrep=function t(i){var e=this;if(i===void 0)i=false;var n={duration:this._duration};var r=function(t){if({}.hasOwnProperty.call(e._shapeConfig,t)){if(typeof e._shapeConfig[t]==="function"){n[t]=function(i,n,r){return e._shapeConfig[t](i.__d3plus__?i.data:i,i.__d3plus__?i.i:n,r)}}else{n[t]=e._shapeConfig[t]}}};for(var o in this._shapeConfig)r(o);n.on=Object.keys(this._on).filter(function(t){return!t.includes(".")||t.includes(".shape")}).reduce(function(t,i){t[i]=function(t,n){return e._on[i]?e._on[i](t.__d3plus__?t.data:t,t.__d3plus__?t.i:n):null};return t},{});if(i&&this._shapeConfig[i]){n=yu(n,this._shapeConfig[i])}return n};i.prototype._uiGroup=function t(i,e){if(e===void 0)e=true;return Au("g.d3plus-viz-"+i,{condition:e,enter:{transform:"translate(0, "+this._height/2+")"},exit:{opacity:0},parent:this._select,transition:this._transition,update:{opacity:1,transform:"translate(0, "+this._height/2+")"}})};i.prototype.render=function t(i){var e=this;this._margin={bottom:0,left:0,right:0,top:0};this._transition=Ph().duration(this._duration);if(this._select===void 0||this._select.node().tagName.toLowerCase()!=="svg"){var n=this._select===void 0?Zs("body"):this._select;var r=pm(n.node());var o=r[0];var s=r[1];if(!this._width){this.width(o)}if(!this._height){this.height(s)}o=this._width;s=this._height;this.select(n.append("svg").style("width",o+"px").style("height",s+"px").style("display","block").node())}if(!this._width||!this._height){var a=pm(this._select.node());var u=a[0];var l=a[1];if(!this._width){this.width(u)}if(!this._height){this.height(l)}}var f=this;this._drawDepth=this._depth!==void 0?this._depth:this._groupBy.length-1;this._id=this._groupBy[this._drawDepth];this._ids=function(t,i){return e._groupBy.map(function(e){return e(t.__d3plus__?t.data:t,t.__d3plus__?t.i:i)}).filter(function(t){return t!==void 0&&t.constructor!==Array})};this._drawLabel=this._label||function(t,i){var e=f._ids(t,i).filter(function(t){return t&&t.constructor!==Array});return e[e.length-1]};this._legendData=[];this._filteredData=[];if(this._data.length){var c=this._timeFilter?this._data.filter(this._timeFilter):this._data;if(this._filter){c=c.filter(this._filter)}var _=z();for(var p=0;p<=this._drawDepth;p++){_.key(e._groupBy[p])}_.rollup(function(t){return e._legendData.push(Xl(t,e._aggs))}).entries(c);if(this._discrete&&"_"+this._discrete in this){_.key(this["_"+this._discrete])}_.rollup(function(t){return e._filteredData.push(Xl(t,e._aggs))}).entries(c)}var d=this._time&&this._timeline;var g=d?Array.from(new Set(this._data.map(this._time))).map(X_):[];d=d&&g.length>1;var v=this._uiGroup("timeline",d);if(d){var y=this._timelineClass.domain(h(g)).duration(this._duration).height(this._height/2-this._margin.bottom).select(v.node()).ticks(g.sort(function(t,i){return+t-+i})).width(this._width);if(y.selection()===void 0){var m=Array.from(new Set(A(this._filteredData.map(function(t){var i=e._time(t);return i instanceof Array?i:[i]})))).map(X_);var b=this._data[0],x=0;if(this._discrete&&"_"+this._discrete in this&&this["_"+this._discrete](b,x)===this._time(b,x)){y.selection(h(m))}else{y.selection(w(m))}}y.config(this._timelineConfig).render();this._margin.bottom+=y.outerBounds().height+y.padding()*2}var C=this._uiGroup("legend",this._legend);if(this._legend){var S=cm(this._legendData,this._shapeConfig.fill,this._groupBy);this._legendClass.id(S.id).duration(this._duration).data(S.data.length>1?S.data:[]).height(this._height/2-this._margin.bottom).label(this._label||S.id).select(C.node()).verticalAlign("bottom").width(this._width).shapeConfig(this._shapeConfig).shapeConfig({on:Object.keys(this._on).filter(function(t){return!t.includes(".")||t.includes(".legend")}).reduce(function(t,i){t[i]=e._on[i];return t},{})}).config(this._legendConfig).render();var k=this._legendClass.outerBounds();if(k.height){this._margin.bottom+=k.height+this._legendClass.padding()*2}}var E=Au("g.d3plus-viz-titles",{parent:this._select});this._backClass.data(this._history.length?[{text:Yl.t("Back",{lng:this._locale}),x:this._padding*2,y:0}]:[]).select(E.node()).render();this._margin.top+=this._history.length?this._backClass.fontSize()()+this._padding:0;if(i){setTimeout(i,this._duration+100)}return this};i.prototype.aggs=function t(i){return arguments.length?(this._aggs=yu(this._aggs,i),this):this._aggs};i.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};i.prototype.depth=function t(i){return arguments.length?(this._depth=i,this):this._depth};i.prototype.discrete=function t(i){return arguments.length?(this._discrete=i,this):this._discrete};i.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};i.prototype.filter=function t(i){return arguments.length?(this._filter=i,this):this._filter};i.prototype.groupBy=function t(i){var e=this;if(!arguments.length){return this._groupBy}if(!(i instanceof Array)){i=[i]}return this._groupBy=i.map(function(t){if(typeof t==="function"){return t}else{if(!e._aggs[t]){e._aggs[t]=function(t){var i=Array.from(new Set(t));return i.length===1?i[0]:i}}return gu(t)}}),this};i.prototype.height=function t(i){return arguments.length?(this._height=i,this):this._height};i.prototype.highlight=function t(i){var e=this;var n=A(this._shapes.map(function(t){return t.data()}));n=n.concat(this._legendClass.data());var r=i?n.filter(i):[];var o=[];r.map(this._ids).forEach(function(t){for(var i=1;i<=t.length;i++){o.push(JSON.stringify(t.slice(0,i)))}});o=o.filter(function(t,i){return o.indexOf(t)===i});var s;if(o.length){s=function(t,i){return o.includes(JSON.stringify(e._ids(t,i)))}}this._shapes.forEach(function(t){return t.highlight(s)});if(this._legend){this._legendClass.highlight(s)}return this};i.prototype.label=function t(i){return arguments.length?(this._label=typeof i==="function"?i:Cu(i),this):this._label};i.prototype.legend=function t(i){return arguments.length?(this._legend=i,this):this._legend};i.prototype.legendConfig=function t(i){return arguments.length?(this._legendConfig=i,this):this._legendConfig};i.prototype.locale=function t(i){return arguments.length?(this._locale=i,this):this._locale};i.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};i.prototype.shape=function t(i){return arguments.length?(this._shape=typeof i==="function"?i:Cu(i),this):this._shape};i.prototype.shapeConfig=function t(i){return arguments.length?(this._shapeConfig=yu(this._shapeConfig,i),this):this._shapeConfig};i.prototype.time=function t(i){if(arguments.length){if(typeof i==="function"){this._time=i}else{this._time=gu(i);if(!this._aggs[i]){this._aggs[i]=function(t){var i=Array.from(new Set(t));return i.length===1?i[0]:i}}}return this}else{return this._time}};i.prototype.timeFilter=function t(i){return arguments.length?(this._timeFilter=i,this):this._timeFilter};i.prototype.timeline=function t(i){return arguments.length?(this._timeline=i,this):this._timeline};i.prototype.timelineConfig=function t(i){return arguments.length?(this._timelineConfig=yu(this._timelineConfig,i),this):this._timelineConfig};i.prototype.tooltip=function t(i){return arguments.length?(this._tooltip=i,this):this._tooltip};i.prototype.tooltipConfig=function t(i){return arguments.length?(this._tooltipConfig=yu(this._tooltipConfig,i),
this):this._tooltipConfig};i.prototype.width=function t(i){return arguments.length?(this._width=i,this):this._width};return i}(xu);var wm=function(t){function i(){t.call(this);this._ocean="#cdd1d3";this._padding=20;this._point=gu("point");this._pointSize=Cu(1);this._pointSizeMax=10;this._pointSizeMin=5;this._pointSizeScale="linear";this._projection=Yv();this._rotate=[0,0];this._shape=Cu("Circle");this._shapeConfig=yu(this._shapeConfig,{Path:{fill:"#f5f5f3",stroke:"#b1babe",strokeWidth:1}});this._tiles=true;this._tileGen=Kv();this._tileUrl="https://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png";this._topojsonFilter=function(t){return!["010"].includes(t.id)};this._topojsonKey="countries";this._zoom=true;this._zoomBehavior=vy();this._zoomBrush=false;this._zoomFactor=2;this._zoomPan=true;this._zoomReset=true;this._zoomScroll=true;this._zoomSet=false}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._renderTiles=function t(){var i=this;var e=2*Math.PI,n=fy(this._geomapGroup.node());var r=[];if(this._tiles){r=this._tileGen.extent(this._zoomBehavior.translateExtent()).scale(this._projection.scale()*e*n.k).translate(n.apply(this._projection.translate()))();this._tileGroup.attr("transform","scale("+r.scale+")translate("+r.translate+")")}var o=this._tileGroup.selectAll("image.tile").data(r,function(t){return t.join("-")});o.exit().remove();o.enter().append("image").attr("class","tile").attr("xlink:href",function(t){return i._tileUrl.replace("{s}",["a","b","c"][Math.random()*3|0]).replace("{z}",t[2]).replace("{x}",t[0]).replace("{y}",t[1])}).attr("width",1).attr("height",1).attr("x",function(t){return t[0]}).attr("y",function(t){return t[1]})};i.prototype._zoomed=function t(){this._zoomGroup.attr("transform",yo.transform);this._renderTiles()};i.prototype._zoomEvents=function t(){if(this._zoomBrush){this._geomapGroup.on(".zoom",null)}else if(this._zoom){this._geomapGroup.call(this._zoomBehavior);if(!this._zoomScroll){this._geomapGroup.on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("wheel.zoom",null)}if(!this._zoomPan){this._geomapGroup.on("mousedown.zoom",null).on("mousemove.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null)}}else{this._geomapGroup.on(".zoom",null)}};i.prototype.render=function i(e){var n=this;t.prototype.render.call(this,e);var r=this._height-this._margin.top-this._margin.bottom,o=this._width-this._margin.left-this._margin.right;this._geomapGroup=this._select.selectAll("svg.d3plus-geomap-geomapGroup").data([0]);this._geomapGroup=this._geomapGroup.enter().append("svg").attr("class","d3plus-geomap-geomapGroup").attr("opacity",0).attr("width",o).attr("height",r).style("background-color",this._ocean||"transparent").merge(this._geomapGroup);this._geomapGroup.transition(this._transition).attr("opacity",1).attr("width",o).attr("height",r);var s=this._geomapGroup.selectAll("rect.d3plus-geomap-ocean").data([0]);s.enter().append("rect").attr("class","d3plus-geomap-ocean").merge(s).attr("width",o).attr("height",r).attr("fill",this._ocean||"transparent");this._tileGroup=this._geomapGroup.selectAll("g.d3plus-geomap-tileGroup").data([0]);this._tileGroup=this._tileGroup.enter().append("g").attr("class","d3plus-geomap-tileGroup").merge(this._tileGroup);this._zoomGroup=this._geomapGroup.selectAll("g.d3plus-geomap-zoomGroup").data([0]);this._zoomGroup=this._zoomGroup.enter().append("g").attr("class","d3plus-geomap-zoomGroup").merge(this._zoomGroup);var a=this._zoomGroup.selectAll("g.d3plus-geomap-paths").data([0]);a=a.enter().append("g").attr("class","d3plus-geomap-paths").merge(a);var u=this._topojson?wy(this._topojson,this._topojson.objects[this._topojsonKey]):{type:"FeatureCollection",features:[]};if(this._topojsonFilter){u.features=u.features.filter(this._topojsonFilter)}var l=this._path=cv().projection(this._projection);var f=this._filteredData.filter(function(t,i){return n._shape(t,i)!=="Path"});var c=ro["scale"+this._pointSizeScale.charAt(0).toUpperCase()+this._pointSizeScale.slice(1)]().domain(h(f,function(t,i){return n._pointSize(t,i)})).range([this._pointSizeMin,this._pointSizeMax]);if(!this._zoomSet){var _={type:"FeatureCollection",features:this._bounds?u.features.filter(this._bounds):u.features.slice()};_.features=_.features.reduce(function(t,i){var e={type:i.type,id:i.id,geometry:{coordinates:i.geometry.coordinates,type:i.geometry.type}};if(i.geometry.coordinates.length>1){var n=[],r=[];i.geometry.coordinates.forEach(function(t){e.geometry.coordinates=[t];n.push(l.area(e))});e.geometry.coordinates=[i.geometry.coordinates[n.indexOf(w(n))]];var o=l.centroid(e);i.geometry.coordinates.forEach(function(t){e.geometry.coordinates=[t];r.push(Dy(l.centroid(e),o))});var s=x(n.reduce(function(t,i,e){if(i){t.push(n[e]/i)}return t},[]),.9);e.geometry.coordinates=i.geometry.coordinates.filter(function(t,i){var e=r[i];return e===0||n[i]/e>=s})}t.push(e);return t},[]);var p=this._padding;if(!_.features.length&&f.length){var d=[[undefined,undefined],[undefined,undefined]];f.forEach(function(t,i){var e=n._projection(n._point(t,i));if(d[0][0]===void 0||e[0]<d[0][0]){d[0][0]=e[0]}if(d[1][0]===void 0||e[0]>d[1][0]){d[1][0]=e[0]}if(d[0][1]===void 0||e[1]<d[0][1]){d[0][1]=e[1]}if(d[1][1]===void 0||e[1]>d[1][1]){d[1][1]=e[1]}});_={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"MultiPoint",coordinates:d.map(function(t){return n._projection.invert(t)})}}]};p=w(f,function(t,i){return c(n._pointSize(t,i))+p})}this._projection=this._projection.fitExtent(_.features.length?[[p,p],[o-p*2,r-p*2]]:[[0,0],[o,r]],_.features.length?_:{type:"Sphere"});this._zoomBehavior.scaleExtent([1,16]).translateExtent([[0,0],[o,r]]).on("zoom",this._zoomed.bind(this))}this._shapes.push((new jy).config(this._shapeConfig.Path).data(u.features).d(l).select(a.node()).x(0).y(0).render());var g=this._zoomGroup.selectAll("g.d3plus-geomap-pins").data([0]);g=g.enter().append("g").attr("class","d3plus-geomap-pins").merge(g);var v=(new Ny).config(this._shapeConfig).config(this._shapeConfig.Circle||{}).data(f).r(function(t,i){return c(n._pointSize(t,i))}).select(g.node()).sort(function(t,i){return n._pointSize(i)-n._pointSize(t)}).x(function(t,i){return n._projection(n._point(t,i))[0]}).y(function(t,i){return n._projection(n._point(t,i))[1]});var y=Object.keys(this._on);var m=y.filter(function(t){return t.includes(".Circle")}),b=y.filter(function(t){return!t.includes(".")}),C=y.filter(function(t){return t.includes(".shape")});for(var A=0;A<b.length;A++){v.on(b[A],n._on[b[A]])}for(var S=0;S<C.length;S++){v.on(C[S],n._on[C[S]])}for(var k=0;k<m.length;k++){v.on(m[k],n._on[m[k]])}this._shapes.push(v.render());this._zoomEvents();this._renderTiles();return this};i.prototype.bounds=function t(i){if(arguments.length){if(typeof i==="function"){return this._bounds=i,this}if(!(i instanceof Array)){i=[i]}return this._bounds=function(t){return i.includes(t.id)},this}return this._bounds};i.prototype.ocean=function t(i){return arguments.length?(this._ocean=i,this):this._ocean};i.prototype.padding=function t(i){return arguments.length?(this._padding=i,this):this._padding};i.prototype.point=function t(i){return arguments.length?(this._point=typeof i==="function"?i:Cu(i),this):this._point};i.prototype.pointSize=function t(i){return arguments.length?(this._pointSize=typeof i==="function"?i:Cu(i),this):this._pointSize};i.prototype.pointSizeMax=function t(i){return arguments.length?(this._pointSizeMax=i,this):this._pointSizeMax};i.prototype.pointSizeMin=function t(i){return arguments.length?(this._pointSizeMin=i,this):this._pointSizeMin};i.prototype.tiles=function t(i){return arguments.length?(this._tiles=i,this):this._tiles};i.prototype.topojson=function t(i){return arguments.length?(this._topojson=i,this):this._topojson};i.prototype.topojsonFilter=function t(i){if(arguments.length){if(typeof i==="function"){return this._topojsonFilter=i,this}if(!(i instanceof Array)){i=[i]}return this._topojsonFilter=function(t){return i.includes(t.id)},this}return this._topojsonFilter};i.prototype.topojsonKey=function t(i){return arguments.length?(this._topojsonKey=i,this):this._topojsonKey};i.prototype.zoom=function t(i){return arguments.length?(this._zoom=i,this):this._zoom};return i}(xm);var Cm=function(t,i){if(!(t instanceof Array)){t=[t.x,t.y]}if(!(i instanceof Array)){i=[i.x,i.y]}var e=Math.abs(t[0]-i[0]);var n=Math.abs(t[1]-i[1]);return Math.sqrt(e*e+n*n)};var Am=function t(){this._duration=600;this._height=gu("height");this._id=gu("id");this._pointerEvents=Cu("auto");this._select;this._url=gu("url");this._width=gu("width");this._x=gu("x",0);this._y=gu("y",0)};Am.prototype.render=function t(i){var e=this;if(this._select===void 0){this.select(Zs("body").append("svg").style("width",window.innerWidth+"px").style("height",window.innerHeight+"px").style("display","block").node())}var n=this._select.selectAll(".d3plus-Image").data(this._data,this._id);var r=n.enter().append("image").attr("class","d3plus-Image").attr("opacity",0).attr("width",0).attr("height",0).attr("x",function(t,i){return e._x(t,i)+e._width(t,i)/2}).attr("y",function(t,i){return e._y(t,i)+e._height(t,i)/2});var o=Ph().duration(this._duration),s=this,a=r.merge(n);a.attr("xlink:href",this._url).style("pointer-events",this._pointerEvents).transition(o).attr("opacity",1).attr("width",function(t,i){return e._width(t,i)}).attr("height",function(t,i){return e._height(t,i)}).attr("x",function(t,i){return e._x(t,i)}).attr("y",function(t,i){return e._y(t,i)}).each(function(t,i){var e=Zs(this),n=s._url(t,i);var r=n.indexOf("http://")===0||n.indexOf("https://")===0;if(!r||n.indexOf(window.location.hostname)===0){var o=new Am;o.src=n;o.crossOrigin="Anonymous";o.onload=function(){var t=document.createElement("canvas");t.width=this.width;t.height=this.height;var i=t.getContext("2d");i.drawImage(this,0,0);e.attr("xlink:href",t.toDataURL("image/png"))}}});n.exit().transition(o).attr("width",function(t,i){return e._width(t,i)}).attr("height",function(t,i){return e._height(t,i)}).attr("x",function(t,i){return e._x(t,i)}).attr("y",function(t,i){return e._y(t,i)}).attr("opacity",0).remove();if(i){setTimeout(i,this._duration+100)}return this};Am.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};Am.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};Am.prototype.height=function t(i){return arguments.length?(this._height=typeof i==="function"?i:Cu(i),this):this._height};Am.prototype.id=function t(i){return arguments.length?(this._id=i,this):this._id};Am.prototype.pointerEvents=function t(i){return arguments.length?(this._pointerEvents=typeof i==="function"?i:Cu(i),this):this._pointerEvents};Am.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};Am.prototype.url=function t(i){return arguments.length?(this._url=i,this):this._url};Am.prototype.width=function t(i){return arguments.length?(this._width=typeof i==="function"?i:Cu(i),this):this._width};Am.prototype.x=function t(i){return arguments.length?(this._x=typeof i==="function"?i:Cu(i),this):this._x};Am.prototype.y=function t(i){return arguments.length?(this._y=typeof i==="function"?i:Cu(i),this):this._y};var Sm=function(t){function i(i){var e=this;if(i===void 0)i="g";t.call(this);this._activeOpacity=.75;this._activeStyle={stroke:function(t,i){return ft(e._stroke(t,i)).darker(2)},"stroke-width":function(t,i){var n=e._strokeWidth(t,i);return n?n*2:1}};this._backgroundImage=Cu(false);this._data=[];this._duration=600;this._fill=Cu("black");this._fontColor=function(t,i){return nf(e._fill(t,i))};this._fontFamily=Cu("Verdana");this._fontResize=Cu(false);this._fontSize=Cu(12);this._hoverOpacity=.5;this._id=function(t,i){return t.id!==void 0?t.id:i};this._label=Cu(false);this._labelPadding=Cu(5);this._name="Shape";this._opacity=Cu(1);this._scale=Cu(1);this._shapeRendering=Cu("geometricPrecision");this._stroke=function(t,i){return ft(e._fill(t,i)).darker(1)};this._strokeWidth=Cu(0);this._tagName=i;this._textAnchor=Cu("start");this._vectorEffect=Cu("non-scaling-stroke");this._verticalAlign=Cu("top");this._x=gu("x",0);this._y=gu("y",0)}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._aes=function t(){return{}};i.prototype._applyEvents=function t(i){var e=this;var n=Object.keys(this._on);var r=function(t){i.on(n[t],function(i,r){if(!e._on[n[t]]){return}if(i.i!==void 0){r=i.i}if(i.nested&&i.values){var o=Do(e._select.node()),s=i.values.map(function(t){return Cm(o,[e._x(t,r),e._y(t,r)])});i=i.values[s.indexOf(S(s))]}e._on[n[t]].bind(e)(i,r)})};for(var o=0;o<n.length;o++)r(o)};i.prototype._applyActive=function t(i){var e=this;var n=this;if(i.size()&&i.node().tagName==="g"){i=i.selectAll("*")}function r(t,i){return typeof this!=="function"?this:t.nested&&t.key&&t.values?this(t.values[0],n._data.indexOf(t.values[0])):this(t,i)}var o={};for(var s in this._activeStyle){if({}.hasOwnProperty.call(e._activeStyle,s)){o[s]=r.bind(e._activeStyle[s])}}i.transition().duration(0).call(mu,o)};i.prototype._applyStyle=function t(i){var e=this;if(i.size()&&i.node().tagName==="g"){i=i.selectAll("*")}function n(t,i){return typeof this!=="function"?this:t.nested&&t.key&&t.values?this(t.values[0],e._data.indexOf(t.values[0])):this(t,i)}i.attr("fill",n.bind(this._fill)).attr("stroke",n.bind(this._stroke)).attr("stroke-width",n.bind(this._strokeWidth)).attr("vector-effect",n.bind(this._vectorEffect))};i.prototype._applyTransform=function t(i){var e=this;i.attr("transform",function(t,i){return"\n        translate("+(t.__d3plusShape__?t.translate?t.translate:e._x(t.data,t.i)+","+e._y(t.data,t.i):e._x(t,i)+","+e._y(t,i))+")\n        scale("+(t.__d3plusShape__?t.scale||e._scale(t.data,t.i):e._scale(t,i))+")"})};i.prototype._nestWrapper=function t(i){return function(t,e){return i(t.__d3plusShape__?t.data:t,t.__d3plusShape__?t.i:e)}};i.prototype._renderImage=function t(){var i=this;var e=[];this._update.merge(this._enter).data().forEach(function(t,n){var r=i._aes(t,n);if(r.r||r.width&&r.height){var o=t;if(t.nested&&t.key&&t.values){o=t.values[0];n=i._data.indexOf(o)}var s=r.r?r.r*2:r.height,a=i._backgroundImage(o,n),h=r.r?r.r*2:r.width;if(a){var u=o.__d3plusShape__?o.translate?o.translate[0]:i._x(o.data,o.i):i._x(o,n),l=o.__d3plusShape__?o.translate?o.translate[1]:i._y(o.data,o.i):i._y(o,n);if(r.x){u+=r.x}if(r.y){l+=r.y}if(o.__d3plusShape__){o=o.data;n=o.i}e.push({__d3plus__:true,data:o,height:s,i:n,id:i._id(o,n),url:a,width:h,x:u+-h/2,y:l+-s/2})}}});return(new Am).data(e).duration(this._duration).pointerEvents("none").select(Au("g.d3plus-"+this._name+"-image",{parent:this._group,update:{opacity:this._active?this._activeOpacity:1}}).node()).render()};i.prototype._renderLabels=function t(){var i=this;var e=[];this._update.merge(this._enter).data().forEach(function(t,n){var r=t;if(t.nested&&t.key&&t.values){r=t.values[0];n=i._data.indexOf(r)}var o=i._label(r,n);if(i._labelBounds&&o!==false&&o!==void 0){var s=i._aes(t,n),a=i._labelBounds(r,n,s);if(a){if(o.constructor!==Array){o=[o]}var h=r.__d3plusShape__?r.translate?r.translate[0]:i._x(r.data,r.i):i._x(r,n),u=r.__d3plusShape__?r.translate?r.translate[1]:i._y(r.data,r.i):i._y(r,n);if(s.x){h+=s.x}if(s.y){u+=s.y}if(r.__d3plusShape__){r=r.data;n=r.i}var l=i._fontColor(r,n),f=i._fontFamily(r,n),c=i._fontResize(r,n),_=i._fontSize(r,n),p=i._lineHeight(r,n),d=i._labelPadding(r,n),g=i._textAnchor(r,n),v=i._verticalAlign(r,n);for(var y=0;y<o.length;y++){var m=a.constructor===Array?a[y]:Object.assign({},a),b=d.constructor===Array?d[y]:d;e.push(Object.assign(m,{__d3plusShape__:true,data:r,fC:l.constructor===Array?l[y]:l,fF:f.constructor===Array?f[y]:f,fR:c.constructor===Array?c[y]:c,fS:_.constructor===Array?_[y]:_,height:m.height-b*2,i:n,id:i._id(r,n)+"_"+y,lH:p.constructor===Array?p[y]:p,tA:g.constructor===Array?g[y]:g,text:o[y],vA:v.constructor===Array?v[y]:v,width:m.width-b*2,x:h+m.x+b,y:u+m.y+b}))}}}});return(new Bf).data(e).delay(this._duration/2).duration(this._duration).fontColor(function(t){return t.fC}).fontFamily(function(t){return t.fF}).fontResize(function(t){return t.fR}).fontSize(function(t){return t.fS}).lineHeight(function(t){return t.lH}).pointerEvents("none").textAnchor(function(t){return t.tA}).verticalAlign(function(t){return t.vA}).select(Au("g.d3plus-"+this._name+"-text",{parent:this._group,update:{opacity:this._active?this._activeOpacity:1}}).node()).render()};i.prototype.render=function t(i){var e=this;if(this._select===void 0){this.select(Zs("body").append("svg").style("width",window.innerWidth+"px").style("height",window.innerHeight+"px").style("display","block").node())}if(this._lineHeight===void 0){this.lineHeight(function(t,i){return e._fontSize(t,i)*1.1})}this._transition=Ph().duration(this._duration);var n=this._data,r=this._id;if(this._dataFilter){n=this._dataFilter(n);if(n.key){r=n.key}}if(this._sort){n=n.sort(function(t,i){return e._sort(t.__d3plusShape__?t.data:t,i.__d3plusShape__?i.data:i)})}Qs("g.d3plus-"+this._name+"-hover > *, g.d3plus-"+this._name+"-active > *").each(function(t){if(t&&t.parentNode){t.parentNode.appendChild(this)}else{this.parentNode.removeChild(this)}});this._group=Au("g.d3plus-"+this._name+"-group",{parent:this._select});var o=this._update=Au("g.d3plus-"+this._name+"-shape",{parent:this._group,update:{opacity:this._active?this._activeOpacity:1}}).selectAll(".d3plus-"+this._name).data(n,r);o.order().transition(this._transition).call(this._applyTransform.bind(this));var s=this._enter=o.enter().append(this._tagName).attr("class",function(t,i){return"d3plus-Shape d3plus-"+e._name+" d3plus-id-"+uf(e._nestWrapper(e._id)(t,i))}).call(this._applyTransform.bind(this)).attr("opacity",this._nestWrapper(this._opacity));var a=s.merge(o);a.attr("shape-rendering",this._nestWrapper(this._shapeRendering)).attr("pointer-events","none").transition(this._transition).attr("opacity",this._nestWrapper(this._opacity)).transition().attr("pointer-events","all");var h=this._exit=o.exit();h.transition().delay(this._duration).remove();this._renderImage();this._renderLabels();this._hoverGroup=Au("g.d3plus-"+this._name+"-hover",{parent:this._group});this._activeGroup=Au("g.d3plus-"+this._name+"-active",{parent:this._group});var u=this;var l=this._group.selectAll(".d3plus-HitArea").data(this._hitArea?n:[],r);l.order().transition(this._transition).call(this._applyTransform.bind(this));var f=l.enter().append("rect").attr("class",function(t,i){return"d3plus-HitArea d3plus-id-"+uf(e._nestWrapper(e._id)(t,i))}).attr("fill","transparent").call(this._applyTransform.bind(this));var c=l.merge(f).each(function(t){var i=u._hitArea(t,u._data.indexOf(t),u._aes(t,u._data.indexOf(t)));return i?Zs(this).call(mu,i):Zs(this).remove()});l.exit().remove();this._applyEvents(this._hitArea?c:a);this.active(this._active);if(i){setTimeout(i,this._duration+100)}return this};i.prototype.active=function t(i){if(!arguments.length||i===void 0){return this._active}this._active=i;var e=this;this._group.selectAll(".d3plus-Shape, .d3plus-Image, .d3plus-textBox").each(function(t,n){if(!t.parentNode){t.parentNode=this.parentNode}var r=t.parentNode;if(this.tagName==="text"){t=t.data}if(t.__d3plusShape__||t.__d3plus__){n=t.i;t=t.data}else{n=e._data.indexOf(t)}var o=!i||typeof i!=="function"||!i(t,n)?r:e._activeGroup.node();if(o!==this.parentNode){o.appendChild(this);if(this.className.baseVal.includes("d3plus-Shape")){if(r===o){Zs(this).call(e._applyStyle.bind(e))}else{Zs(this).call(e._applyActive.bind(e))}}}});this._group.selectAll("g.d3plus-"+this._name+"-shape, g.d3plus-"+this._name+"-image, g.d3plus-"+this._name+"-text").attr("opacity",this._hover?this._hoverOpacity:this._active?this._activeOpacity:1);return this};i.prototype.activeOpacity=function t(i){return arguments.length?(this._activeOpacity=i,this):this._activeOpacity};i.prototype.backgroundImage=function t(i){return arguments.length?(this._backgroundImage=typeof i==="function"?i:Cu(i),this):this._backgroundImage};i.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};i.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};i.prototype.fill=function t(i){return arguments.length?(this._fill=typeof i==="function"?i:Cu(i),this):this._fill};i.prototype.fontColor=function t(i){return arguments.length?(this._fontColor=typeof i==="function"?i:Cu(i),this):this._fontColor};i.prototype.fontFamily=function t(i){return arguments.length?(this._fontFamily=typeof i==="function"?i:Cu(i),this):this._fontFamily};i.prototype.fontResize=function t(i){return arguments.length?(this._fontResize=typeof i==="function"?i:Cu(i),this):this._fontResize};i.prototype.fontSize=function t(i){return arguments.length?(this._fontSize=typeof i==="function"?i:Cu(i),this):this._fontSize};i.prototype.hover=function t(i){if(!arguments.length||i===void 0){return this._hover}this._hover=i;var e=this;this._group.selectAll("g.d3plus-"+this._name+"-shape, g.d3plus-"+this._name+"-image, g.d3plus-"+this._name+"-text, g.d3plus-"+this._name+"-hover").selectAll(".d3plus-Shape, .d3plus-Image, .d3plus-textBox").each(function(t,n){if(!t.parentNode){t.parentNode=this.parentNode}var r=t.parentNode;if(this.tagName==="text"){t=t.data}if(t.__d3plusShape__||t.__d3plus__){n=t.i;t=t.data}else{n=e._data.indexOf(t)}var o=!i||typeof i!=="function"||!i(t,n)?r:e._hoverGroup.node();if(o!==this.parentNode){o.appendChild(this)}});this._group.selectAll("g.d3plus-"+this._name+"-shape, g.d3plus-"+this._name+"-image, g.d3plus-"+this._name+"-text").attr("opacity",this._hover?this._hoverOpacity:this._active?this._activeOpacity:1);return this};i.prototype.hoverOpacity=function t(i){return arguments.length?(this._hoverOpacity=i,this):this._hoverOpacity};i.prototype.hitArea=function t(i){return arguments.length?(this._hitArea=typeof i==="function"?i:Cu(i),this):this._hitArea};i.prototype.id=function t(i){return arguments.length?(this._id=i,this):this._id};i.prototype.label=function t(i){return arguments.length?(this._label=typeof i==="function"?i:Cu(i),this):this._label};i.prototype.labelBounds=function t(i){return arguments.length?(this._labelBounds=typeof i==="function"?i:Cu(i),this):this._labelBounds};i.prototype.labelPadding=function t(i){return arguments.length?(this._labelPadding=typeof i==="function"?i:Cu(i),this):this._labelPadding};i.prototype.lineHeight=function t(i){return arguments.length?(this._lineHeight=typeof i==="function"?i:Cu(i),this):this._lineHeight};i.prototype.opacity=function t(i){return arguments.length?(this._opacity=typeof i==="function"?i:Cu(i),this):this._opacity};i.prototype.scale=function t(i){return arguments.length?(this._scale=typeof i==="function"?i:Cu(i),this):this._scale};i.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};i.prototype.shapeRendering=function t(i){return arguments.length?(this._shapeRendering=typeof i==="function"?i:Cu(i),this):this._shapeRendering};i.prototype.sort=function t(i){return arguments.length?(this._sort=i,this):this._sort};i.prototype.stroke=function t(i){return arguments.length?(this._stroke=typeof i==="function"?i:Cu(i),this):this._stroke};i.prototype.strokeWidth=function t(i){return arguments.length?(this._strokeWidth=typeof i==="function"?i:Cu(i),this):this._strokeWidth};i.prototype.textAnchor=function t(i){return arguments.length?(this._textAnchor=typeof i==="function"?i:Cu(i),this):this._textAnchor};i.prototype.vectorEffect=function t(i){return arguments.length?(this._vectorEffect=typeof i==="function"?i:Cu(i),this):this._vectorEffect};i.prototype.verticalAlign=function t(i){return arguments.length?(this._verticalAlign=typeof i==="function"?i:Cu(i),this):this._verticalAlign};i.prototype.x=function t(i){return arguments.length?(this._x=typeof i==="function"?i:Cu(i),this):this._x};i.prototype.y=function t(i){return arguments.length?(this._y=typeof i==="function"?i:Cu(i),this):this._y};return i}(xu);var km=function(t){function i(){t.call(this);this._curve="linear";this._defined=function(){return true};this._name="Area";this._x=gu("x");this._x0=gu("x");this._x1=null;this._y=Cu(0);this._y0=Cu(0);this._y1=gu("y")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._dataFilter=function t(i){var e=this;var n=z().key(this._id).entries(i).map(function(t){t.data=Xl(t.values);t.i=i.indexOf(t.values[0]);var n=h(t.values.map(e._x).concat(t.values.map(e._x0)).concat(e._x1?t.values.map(e._x1):[]));t.xR=n;t.width=n[1]-n[0];t.x=n[0]+t.width/2;var r=h(t.values.map(e._y).concat(t.values.map(e._y0)).concat(e._y1?t.values.map(e._y1):[]));t.yR=r;t.height=r[1]-r[0];t.y=r[0]+t.height/2;t.nested=true;t.translate=[t.x,t.y];t.__d3plusShape__=true;return t});n.key=function(t){return t.key};return n};i.prototype.render=function i(e){t.prototype.render.call(this,e);var n=this._path=hc().defined(this._defined).curve(R_["curve"+this._curve.charAt(0).toUpperCase()+this._curve.slice(1)]).x(this._x).x0(this._x0).x1(this._x1).y(this._y).y0(this._y0).y1(this._y1);var r=hc().defined(function(t){return t}).curve(R_["curve"+this._curve.charAt(0).toUpperCase()+this._curve.slice(1)]).x(this._x).x0(this._x0).x1(this._x1).y(this._y).y0(this._y0).y1(this._y1);this._enter.append("path").attr("transform",function(t){return"translate("+(-t.xR[0]-t.width/2)+", "+(-t.yR[0]-t.height/2)+")"}).attr("d",function(t){return n(t.values)}).call(this._applyStyle.bind(this));this._update.select("path").transition(this._transition).attr("transform",function(t){return"translate("+(-t.xR[0]-t.width/2)+", "+(-t.yR[0]-t.height/2)+")"}).attrTween("d",function(t){return jf(Zs(this).attr("d"),n(t.values))}).call(this._applyStyle.bind(this));this._exit.select("path").transition(this._transition).attrTween("d",function(t){return jf(Zs(this).attr("d"),r(t.values))});return this};i.prototype._aes=function t(i,e){var n=this;return{points:i.values.map(function(t){return[n._x(t,e),n._y(t,e)]})}};i.prototype.curve=function t(i){return arguments.length?(this._curve=i,this):this._curve};i.prototype.defined=function t(i){return arguments.length?(this._defined=i,this):this._defined};i.prototype.x0=function t(i){if(!arguments.length){return this._x0}this._x0=typeof i==="function"?i:Cu(i);this._x=this._x0;return this};i.prototype.x1=function t(i){return arguments.length?(this._x1=typeof i==="function"||i===null?i:Cu(i),this):this._x1};i.prototype.y0=function t(i){if(!arguments.length){return this._y0}this._y0=typeof i==="function"?i:Cu(i);this._y=this._y0;return this};i.prototype.y1=function t(i){return arguments.length?(this._y1=typeof i==="function"||i===null?i:Cu(i),this):this._y1};return i}(Sm);var Em=function(t){function i(){t.call(this,"rect");this._name="Bar";this._height=Cu(10);this._labelBounds=function(t,i,e){return{width:e.width,height:e.height,x:-e.width/2,y:-e.height/2}};this._width=Cu(10);this._x=gu("x");this._x0=gu("x");this._x1=null;this._y=Cu(0);this._y0=Cu(0);this._y1=gu("y")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype.render=function i(e){var n=this;t.prototype.render.call(this,e);this._enter.attr("width",function(t,i){return n._x1===null?n._getWidth(t,i):0}).attr("height",function(t,i){return n._x1!==null?n._getHeight(t,i):0}).attr("x",function(t,i){return n._x1===null?-n._getWidth(t,i)/2:0}).attr("y",function(t,i){return n._x1!==null?-n._getHeight(t,i)/2:0}).call(this._applyStyle.bind(this)).transition(this._transition).call(this._applyPosition.bind(this));this._update.transition(this._transition).call(this._applyStyle.bind(this)).call(this._applyPosition.bind(this));this._exit.transition(this._transition).attr("width",function(t,i){return n._x1===null?n._getWidth(t,i):0}).attr("height",function(t,i){return n._x1!==null?n._getHeight(t,i):0}).attr("x",function(t,i){return n._x1===null?-n._getWidth(t,i)/2:0}).attr("y",function(t,i){return n._x1!==null?-n._getHeight(t,i)/2:0});return this};i.prototype._aes=function t(i,e){return{height:this._getHeight(i,e),width:this._getWidth(i,e),x:this._x1!==null?this._getX(i,e)+this._getWidth(i,e)/2:this._getX(i,e),y:this._x1===null?this._getY(i,e)+this._getHeight(i,e)/2:this._getY(i,e)}};i.prototype._applyPosition=function t(i){var e=this;i.attr("width",function(t,i){return e._getWidth(t,i)}).attr("height",function(t,i){return e._getHeight(t,i)}).attr("x",function(t,i){return e._x1!==null?e._getX(t,i):-e._getWidth(t,i)/2}).attr("y",function(t,i){return e._x1===null?e._getY(t,i):-e._getHeight(t,i)/2})};i.prototype._getHeight=function t(i,e){if(this._x1!==null){return this._height(i,e)}return Math.abs(this._y1(i,e)-this._y(i,e))};i.prototype._getWidth=function t(i,e){if(this._x1===null){return this._width(i,e)}return Math.abs(this._x1(i,e)-this._x(i,e))};i.prototype._getX=function t(i,e){var n=this._x1===null?this._width(i,e):this._x1(i,e)-this._x(i,e);if(n<0){return n}else{return 0}};i.prototype._getY=function t(i,e){var n=this._x1!==null?this._height(i,e):this._y1(i,e)-this._y(i,e);if(n<0){return n}else{return 0}};i.prototype.height=function t(i){return arguments.length?(this._height=typeof i==="function"?i:Cu(i),this):this._height};i.prototype.width=function t(i){return arguments.length?(this._width=typeof i==="function"?i:Cu(i),this):this._width};i.prototype.x0=function t(i){if(!arguments.length){return this._x0}this._x0=typeof i==="function"?i:Cu(i);this._x=this._x0;return this};i.prototype.x1=function t(i){return arguments.length?(this._x1=typeof i==="function"||i===null?i:Cu(i),this):this._x1};i.prototype.y0=function t(i){if(!arguments.length){return this._y0}this._y0=typeof i==="function"?i:Cu(i);this._y=this._y0;return this};i.prototype.y1=function t(i){return arguments.length?(this._y1=typeof i==="function"||i===null?i:Cu(i),this):this._y1};return i}(Sm);var Bm=function(t){function i(){t.call(this,"circle");this._name="Circle";this._r=gu("r")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._applyPosition=function t(i){var e=this;i.attr("r",function(t,i){return e._r(t,i)}).attr("x",function(t,i){return-e._r(t,i)/2}).attr("y",function(t,i){return-e._r(t,i)/2})};i.prototype.render=function i(e){t.prototype.render.call(this,e);this._enter.attr("r",0).attr("x",0).attr("y",0).call(this._applyStyle.bind(this)).transition(this._transition).call(this._applyPosition.bind(this));this._update.transition(this._transition).call(this._applyStyle.bind(this)).call(this._applyPosition.bind(this));this._exit.transition(this._transition).attr("r",0).attr("x",0).attr("y",0);return this};i.prototype._aes=function t(i,e){return{r:this._r(i,e)}};i.prototype.r=function t(i){return arguments.length?(this._r=typeof i==="function"?i:Cu(i),this):this._r};return i}(Sm);var Dm=function(t){function i(){t.call(this);this._curve="linear";this._defined=function(t){return t};this._fill=Cu("none");this._name="Line";this._path=ac();this._strokeWidth=Cu(1)}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._dataFilter=function t(i){var e=this;var n=z().key(this._id).entries(i).map(function(t){t.data=Xl(t.values);t.i=i.indexOf(t.values[0]);var n=h(t.values,e._x);t.xR=n;t.width=n[1]-n[0];t.x=n[0]+t.width/2;var r=h(t.values,e._y);t.yR=r;t.height=r[1]-r[0];t.y=r[0]+t.height/2;t.nested=true;t.translate=[t.x,t.y];t.__d3plusShape__=true;return t});n.key=function(t){return t.key};return n};i.prototype.render=function i(e){var n=this;t.prototype.render.call(this,e);var r=this;this._path.curve(R_["curve"+this._curve.charAt(0).toUpperCase()+this._curve.slice(1)]).defined(this._defined).x(this._x).y(this._y);this._enter.append("path").attr("transform",function(t){return"translate("+(-t.xR[0]-t.width/2)+", "+(-t.yR[0]-t.height/2)+")"}).attr("d",function(t){return n._path(t.values)}).call(this._applyStyle.bind(this));this._update.select("path").transition(this._transition).attr("transform",function(t){return"translate("+(-t.xR[0]-t.width/2)+", "+(-t.yR[0]-t.height/2)+")";
}).attrTween("d",function(t){return jf(Zs(this).attr("d"),r._path(t.values))}).call(this._applyStyle.bind(this));return this};i.prototype._aes=function t(i,e){var n=this;return{points:i.values.map(function(t){return[n._x(t,e),n._y(t,e)]})}};i.prototype.curve=function t(i){return arguments.length?(this._curve=i,this):this._curve};i.prototype.defined=function t(i){return arguments.length?(this._defined=i,this):this._defined};return i}(Sm);var Mm=function(t){function i(){t.call(this,"path");this._d=gu("path");this._name="Path"}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype.render=function i(e){t.prototype.render.call(this,e);this._enter.attr("opacity",0).attr("d",this._d).call(this._applyStyle.bind(this)).transition(this._transition).attr("opacity",1);this._update.transition(this._transition).call(this._applyStyle.bind(this)).attr("opacity",1).attr("d",this._d);this._exit.transition(this._transition).attr("opacity",0);return this};i.prototype.d=function t(i){return arguments.length?(this._d=typeof i==="function"?i:Cu(i),this):this._d};return i}(Sm);var zm=function(t){function i(){t.call(this,"rect");this._height=gu("height");this._labelBounds=function(t,i,e){return{width:e.width,height:e.height,x:-e.width/2,y:-e.height/2}};this._name="Rect";this._width=gu("width")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype.render=function i(e){t.prototype.render.call(this,e);this._enter.attr("width",0).attr("height",0).attr("x",0).attr("y",0).call(this._applyStyle.bind(this)).transition(this._transition).call(this._applyPosition.bind(this));this._update.transition(this._transition).call(this._applyStyle.bind(this)).call(this._applyPosition.bind(this));this._exit.transition(this._transition).attr("width",0).attr("height",0).attr("x",0).attr("y",0);return this};i.prototype._aes=function t(i,e){return{width:this._width(i,e),height:this._height(i,e)}};i.prototype._applyPosition=function t(i){var e=this;i.attr("width",function(t,i){return e._width(t,i)}).attr("height",function(t,i){return e._height(t,i)}).attr("x",function(t,i){return-e._width(t,i)/2}).attr("y",function(t,i){return-e._height(t,i)/2})};i.prototype.height=function t(i){return arguments.length?(this._height=typeof i==="function"?i:Cu(i),this):this._height};i.prototype.width=function t(i){return arguments.length?(this._width=typeof i==="function"?i:Cu(i),this):this._width};return i}(Sm);var Fm=Object.freeze({pointDistance:Cm,Image:Am,Shape:Sm,Area:km,Bar:Em,Circle:Bm,Line:Dm,Path:Mm,Rect:zm});var Om=function(t){function i(){var i=this;t.call(this);this._align="center";this._data=[];this._duration=600;this._height=200;this._id=gu("id");this._label=gu("id");this._lineData=[];this._outerBounds={width:0,height:0,x:0,y:0};this._padding=5;this._shape=Cu("Rect");this._shapeConfig={duration:this._duration,fill:gu("color"),fontColor:Cu("#444"),fontFamily:(new zm).fontFamily(),fontResize:false,fontSize:Cu(10),height:Cu(10),hitArea:function(t){var e=i._lineData[i._data.indexOf(t)],n=w([e.height,e.shapeHeight]);return{width:e.width+e.shapeWidth+(e.width?i._padding:0),height:n,x:-e.shapeWidth/2,y:-n/2}},labelBounds:function(t,e,n){var r=i._lineData[t.i],o=n.r!==void 0?n.r:n.width/2;return{width:r.width,height:r.height,x:o+i._padding,y:-r.height/2}},opacity:1,r:Cu(5),width:Cu(10),x:function(t,e){var n=i._shapeConfig.width;var r=i._lineData[e].y;var o=i._align==="left"?0:i._align==="center"?(i._outerBounds.width-i._rowWidth(i._lineData.filter(function(t){return r===t.y})))/2:i._outerBounds.width-i._rowWidth(i._lineData.filter(function(t){return r===t.y}));return i._rowWidth(i._lineData.slice(0,e).filter(function(t){return r===t.y}))+i._padding+i._outerBounds.x+n(t,e)/2+o},y:function(t,e){var n=i._shapeConfig.height;var r=i._lineData[e];return r.y+i._titleHeight+i._outerBounds.y+w(i._lineData.filter(function(t){return r.y===t.y}).map(function(t){return t.height}).concat(i._data.map(function(t,i){return n(t,i)})))/2}};this._titleConfig={fontFamily:"Verdana",fontSize:12,lineHeight:13};this._verticalAlign="middle";this._width=400}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._fetchConfig=function t(i,e,n){return typeof this._shapeConfig[i]==="function"?this._shapeConfig[i](e,n):this._shapeConfig[i]};i.prototype._rowHeight=function t(i){return w(i.map(function(t){return t.height}).concat(i.map(function(t){return t.shapeHeight})))+this._padding};i.prototype._rowWidth=function t(i){var e=this;return k(i.map(function(t){return t.shapeWidth+t.width+e._padding*(t.width?2:1)}))-this._padding};i.prototype.render=function t(i){var e=this;if(this._select===void 0){this.select(Zs("body").append("svg").attr("width",this._width+"px").attr("height",this._height+"px").node())}if(this._lineHeight===void 0){this._lineHeight=function(t,i){return e._fetchConfig("fontSize",t,i)*1.1}}this._group=Au("g.d3plus-Legend",{parent:this._select});var n=this._height;this._titleHeight=0;if(this._title){var r=this._titleConfig.fontFamily,o=this._titleConfig.lineHeight,s=this._titleConfig.fontSize;var a=Ef().fontFamily(r).fontSize(s).lineHeight(o).width(this._width).height(this._height)(this._title);this._titleHeight=o+a.lines.length+this._padding;n-=this._titleHeight}this._lineData=this._data.map(function(t,i){var r=e._fetchConfig("fontFamily",t,i),o=e._lineHeight(t,i),s=e._fetchConfig("fontSize",t,i),a=e._fetchConfig("width",t,i);var h=n-(e._data.length+1)*e._padding,u=e._width;var l=Ef().fontFamily(r).fontSize(s).lineHeight(o).width(u).height(h)(e._label(t,i));l.width=Math.ceil(w(l.lines.map(function(t){return kf(t,{"font-family":r,"font-size":s})})))+s;l.height=Math.ceil(l.lines.length*(o+1));l.og={height:l.height,width:l.width};l.data=t;l.f=r;l.s=s;l.lh=o;l.y=0;l.id=e._id(t,i);l.i=i;l.shapeWidth=a;l.shapeHeight=e._fetchConfig("height",t,i);return l});var h;var u=this._width-this._padding*2;h=k(this._lineData.map(function(t){return t.shapeWidth+e._padding*2+t.width}))-this._padding;if(h>u){var l=1,f=[];var c=w(this._lineData.map(function(t){return t.words.length}));this._wrapLines=function(){var t=this;l++;if(l>c){return}var i=l===1?this._lineData.slice():this._lineData.filter(function(i){return i.width+i.shapeWidth+t._padding*(i.width?2:1)>u&&i.words.length>=l}).sort(function(t,i){return i.sentence.length-t.sentence.length});if(i.length&&n>i[0].height*l){var e=false;var r=function(t){var n=i[t];var r=n.og.height*l,o=n.og.width*(1.5*(1/l));var s=Ef().fontFamily(n.f).fontSize(n.s).lineHeight(n.lh).width(o).height(r)(n.sentence);if(!s.truncated){n.width=Math.ceil(w(s.lines.map(function(t){return kf(t,{"font-family":n.f,"font-size":n.s})})))+n.s;n.height=s.lines.length*(n.lh+1)}else{e=true;return"break"}};for(var o=0;o<i.length;o++){var s=r(o);if(s==="break")break}if(!e){this._wrapRows()}}else{f=[];return}};this._wrapRows=function(){var t=this;f=[];var i=1,e=0;for(var r=0;r<this._lineData.length;r++){var o=t._lineData[r],s=o.width+t._padding*(o.width?2:1)+o.shapeWidth;if(k(f.map(function(t){return w(t,function(t){return w([t.height,t.shapeHeight])})}))>n){f=[];break}if(e+s<u){e+=s}else if(s>u){f=[];t._wrapLines();break}else{e=s;i++}if(!f[i-1]){f[i-1]=[]}f[i-1].push(o)}};this._wrapRows();if(!f.length||k(f,this._rowHeight.bind(this))+this._padding>n){h=k(this._lineData.map(function(t){return t.shapeWidth+e._padding*1}))-this._padding;for(var _=0;_<this._lineData.length;_++){e._lineData[_].width=0;e._lineData[_].height=0}this._wrapRows()}if(f.length&&k(f,this._rowHeight.bind(this))+this._padding<n){f.forEach(function(t,i){t.forEach(function(t){if(i){t.y=k(f.slice(0,i),e._rowHeight.bind(e))}})});h=w(f,function(t){return k(t,function(t){return t.shapeWidth+e._padding*(t.width?2:1)+t.width})})-this._padding}}var p=w(this._lineData,function(t,i){return w([t.height,e._fetchConfig("height",t.data,i)])+t.y})+this._titleHeight,d=h;this._outerBounds.width=d;this._outerBounds.height=p;var g=this._padding,v=this._padding;if(this._align==="center"){g=(this._width-d)/2}else if(this._align==="right"){g=this._width-this._padding-d}if(this._verticalAlign==="middle"){v=(this._height-p)/2}else if(this._verticalAlign==="bottom"){v=this._height-this._padding-p}this._outerBounds.x=g;this._outerBounds.y=v;(new Bf).data(this._title?[{text:this._title}]:[]).duration(this._duration).select(this._group.node()).textAnchor({left:"start",center:"middle",right:"end"}[this._align]).width(this._width-this._padding*2).x(this._padding).y(this._outerBounds.y).config(this._titleConfig).render();this._shapes=[];var y=this._shapeConfig,m={id:function(t){return t.id},label:function(t){return t.label},lineHeight:function(t){return t.lH}};var b=this._data.map(function(t,i){var n={__d3plus__:true,data:t,i:i,id:e._id(t,i),label:e._lineData[i].width?e._label(t,i):false,lH:e._lineHeight(t,i),shape:e._shape(t,i)};var r=function(e){if(e!=="labelBounds"&&{}.hasOwnProperty.call(y,e)){if(typeof y[e]==="function"){n[e]=y[e](t,i);m[e]=function(t){return t[e]}}else if(e==="on"){m[e]={};var r=function(t){if({}.hasOwnProperty.call(y[e],t)){m[e][t]=function(i){if(!y[e][t]){return}y[e][t].bind(this)(i.data,i.i)}}};for(var o in y[e])r(o)}}};for(var o in y)r(o);return n});this._shapes=[];["Circle","Rect"].forEach(function(t){e._shapes.push((new Fm[t]).data(b.filter(function(i){return i.shape===t})).duration(e._duration).labelPadding(0).select(e._group.node()).verticalAlign("top").config(Object.assign({},y,m)).render())});if(i){setTimeout(i,this._duration+100)}return this};i.prototype.active=function t(i){this._shapes.forEach(function(t){return t.active(i)});return this};i.prototype.align=function t(i){return arguments.length?(this._align=i,this):this._align};i.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};i.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};i.prototype.height=function t(i){return arguments.length?(this._height=i,this):this._height};i.prototype.hover=function t(i){this._shapes.forEach(function(t){return t.hover(i)});return this};i.prototype.id=function t(i){return arguments.length?(this._id=i,this):this._id};i.prototype.label=function t(i){return arguments.length?(this._label=typeof i==="function"?i:Cu(i),this):this._label};i.prototype.outerBounds=function t(){return this._outerBounds};i.prototype.padding=function t(i){return arguments.length?(this._padding=i,this):this._padding};i.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};i.prototype.shape=function t(i){return arguments.length?(this._shape=typeof i==="function"?i:Cu(i),this):this._shape};i.prototype.shapeConfig=function t(i){return arguments.length?(this._shapeConfig=Object.assign(this._shapeConfig,i),this):this._shapeConfig};i.prototype.title=function t(i){return arguments.length?(this._title=i,this):this._title};i.prototype.titleConfig=function t(i){return arguments.length?(this._titleConfig=Object.assign(this._titleConfig,i),this):this._titleConfig};i.prototype.verticalAlign=function t(i){return arguments.length?(this._verticalAlign=i,this):this._verticalAlign};i.prototype.width=function t(i){return arguments.length?(this._width=i,this):this._width};return i}(xu);var Nm=function(t){function i(){var i=this;t.call(this);this._brushing=true;this._brushFilter=function(){return!yo.button&&yo.detail<2};this._domain=[2001,2010];this._gridSize=0;this._handleConfig={fill:"#444"};this._handleSize=6;this._height=100;this._on={};this.orient("bottom");this._scale="time";this._selectionConfig={fill:"#777","stroke-width":0};this._shape="Rect";this._shapeConfig=Object.assign({},this._shapeConfig,{height:10,width:function(t){return i._domain.map(function(t){return X_(t).getTime()}).includes(t.id)?2:1}});this._snapping=true}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._brushBrush=function t(){if(yo.sourceEvent&&yo.sourceEvent.offsetX&&yo.selection!==null&&(!this._brushing||this._snapping)){var i=(this._brushing?yo.selection:[yo.selection[0],yo.selection[0]]).map(this._d3Scale.invert).map(Number);var e=this._availableTicks.map(Number);i[0]=X_(wu(i[0],e));i[1]=X_(wu(i[1],e));var n=+i[0]===+i[1],r=n?i[0]:i;if(this._selection&&JSON.stringify(r)!==JSON.stringify(this._selection)){this._selection=r;if(this._on.end){this._on.end(r)}}var o=i.map(this._d3Scale);if(n){o[0]-=.1;o[1]+=.1}this._brushGroup.call(this._brush.move,o)}this._brushStyle();if(this._on.brush){this._on.brush()}};i.prototype._brushEnd=function t(){if(!yo.sourceEvent){return}var i=(yo.selection&&this._brushing?yo.selection:[yo.sourceEvent.offsetX,yo.sourceEvent.offsetX]).map(this._d3Scale.invert).map(Number);var e=this._availableTicks.map(Number);i[0]=X_(wu(i[0],e));i[1]=X_(wu(i[1],e));var n=+i[0]===+i[1];if(this._brushing||!this._snapping){var r=i.map(this._d3Scale);if(n){r[0]-=.1;r[1]+=.1}this._brushGroup.transition(this._transition).call(this._brush.move,r)}this._brushStyle();var o=n?i[0]:i;if(JSON.stringify(o)!==JSON.stringify(this._selection)){if(this._on.end){this._on.end(o)}this._selection=o}};i.prototype._brushStart=function t(){if(yo.sourceEvent!==null&&(!this._brushing||this._snapping)){var i=(yo.selection&&this._brushing?yo.selection:[yo.sourceEvent.offsetX,yo.sourceEvent.offsetX]).map(this._d3Scale.invert).map(Number);var e=this._availableTicks.map(Number);i[0]=X_(wu(i[0],e));i[1]=X_(wu(i[1],e));var n=+i[0]===+i[1];var r=i.map(this._d3Scale);if(n){r[0]-=.1;r[1]+=.1}this._brushGroup.call(this._brush.move,r)}this._brushStyle();if(this._on.start){this._on.start()}};i.prototype._brushStyle=function t(){var i=this._position;var e=i.height;var n=this._shape==="Circle"?this._shapeConfig.r*2:this._shape==="Rect"?this._shapeConfig[e]:this._tickSize;this._brushGroup.selectAll(".overlay").attr("cursor",this._brushing?"crosshair":"pointer");this._brushGroup.selectAll(".selection").call(mu,this._selectionConfig).attr("height",n);this._brushGroup.selectAll(".handle").call(mu,this._handleConfig).attr("height",n+this._handleSize)};i.prototype.render=function i(e){t.prototype.render.call(this,e);var n=this._position;var r=n.height;var o=n.y;var s=this._outerBounds[o],a=this._d3Scale.range();var h=this._brush=am().extent([[a[0],s],[a[1],s+this._outerBounds[r]]]).filter(this._brushFilter).handleSize(this._handleSize).on("start",this._brushStart.bind(this)).on("brush",this._brushBrush.bind(this)).on("end",this._brushEnd.bind(this));var u=this._availableTicks[this._availableTicks.length-1];var l=(this._selection===void 0?[u,u]:this._selection instanceof Array?this._selection.slice():[this._selection,this._selection]).map(X_).map(this._d3Scale);if(l[0]===l[1]){l[0]-=.1;l[1]+=.1}this._brushGroup=Au("g.brushGroup",{parent:this._group});this._brushGroup.call(h).transition(this._transition).call(h.move,l);return this};i.prototype.brushing=function t(i){return arguments.length?(this._brushing=i,this):this._brushing};i.prototype.brushFilter=function t(i){return arguments.length?(this._brushFilter=i,this):this._brushFilter};i.prototype.handleConfig=function t(i){return arguments.length?(this._handleConfig=Object.assign(this._handleConfig,i),this):this._handleConfig};i.prototype.handleSize=function t(i){return arguments.length?(this._handleSize=i,this):this._handleSize};i.prototype.on=function t(i,e){return arguments.length===2?(this._on[i]=e,this):arguments.length?typeof i==="string"?this._on[i]:(this._on=Object.assign({},this._on,i),this):this._on};i.prototype.selectionConfig=function t(i){return arguments.length?(this._selectionConfig=Object.assign(this._selectionConfig,i),this):this._selectionConfig};i.prototype.selection=function t(i){return arguments.length?(this._selection=i,this):this._selection};i.prototype.snapping=function t(i){return arguments.length?(this._snapping=i,this):this._snapping};return i}(V_);var Tm=function(){var t=this._history.length;var i=Au("g.d3plus-viz-back",{parent:this._select,transition:this._transition,update:{transform:"translate("+this._margin.left+", "+this._margin.top+")"}}).node();this._backClass.data(t?[{text:Yl.t("Back",{lng:this._locale}),x:this._padding*2,y:0}]:[]).select(i).config(this._backConfig).render();this._margin.top+=t?this._backClass.fontSize()()+this._padding:0};var jm=function(t,i,e){if(e===void 0)e=[];if(e&&!(e instanceof Array)){e=[e]}var n=z().key(i).entries(t);if(n.length<2){return{data:[],id:i}}var r,o;if(e.length){var s=n.length;var a=function(i){var a=n.map(function(t){return Array.from(new Set(t.values.map(function(t){return e[i](t)})))}),h=k(a,function(t){return t.length}),u=new Set(A(a)).size;if(h===s&&u===s||i===e.length-1){o=e[i];r=z().key(o).entries(t).map(function(t){return Xl(t.values)});return"break"}};for(var h=0;h<e.length;h++){var u=a(h);if(u==="break")break}}else{o=i;r=n.map(function(t){return Xl(t.values)})}return{data:r,id:o}};var Pm=function(t){var i=this;if(t===void 0)t=[];this._legendData=[];if(t.length){var e=z();for(var n=0;n<=this._drawDepth;n++){e.key(i._groupBy[n])}e.rollup(function(t){return i._legendData.push(Xl(t,i._aggs))}).entries(t)}var r=Au("g.d3plus-viz-legend",{condition:this._legend,parent:this._select,transition:this._transition}).node();if(this._legend){var o=jm(this._legendData,this._shapeConfig.fill,this._groupBy);this._legendClass.id(o.id).duration(this._duration).data(o.data.length>1?o.data:[]).height(this._height-this._margin.bottom).label(this._label||o.id).select(r).verticalAlign("bottom").width(this._width).shapeConfig(this._shapeConfig).shapeConfig({on:Object.keys(this._on).filter(function(t){return!t.includes(".")||t.includes(".legend")}).reduce(function(t,e){t[e]=i._on[e];return t},{})}).config(this._legendConfig).render();var s=this._legendClass.outerBounds();if(s.height){this._margin.bottom+=s.height+this._legendClass.padding()*2}}};var Hm=function(t){if(t===void 0)t=[];var i=this._time&&this._timeline;var e=i?Array.from(new Set(this._data.map(this._time))).map(X_):[];i=i&&e.length>1;var n=Au("g.d3plus-viz-timeline",{condition:i,parent:this._select,transition:this._transition}).node();if(i){var r=this._timelineClass.domain(h(e)).duration(this._duration).height(this._height-this._margin.bottom).select(n).ticks(e.sort(function(t,i){return+t-+i})).width(this._width);if(r.selection()===void 0){var o=h(t.map(this._time).map(X_));if(o[0]===o[1]){r.selection(o[0])}else{r.selection(o)}}r.config(this._timelineConfig).render();this._margin.bottom+=r.outerBounds().height+r.padding()*2}};var Rm=function(t){if(t===void 0)t=[];var i=this._title?this._title(t):false;var e=Au("g.d3plus-viz-title",{enter:{transform:"translate("+this._margin.left+", "+this._margin.top+")"},parent:this._select,transition:this._transition,update:{transform:"translate("+this._margin.left+", "+this._margin.top+")"}}).node();this._titleClass.data(i?[{text:i}]:[]).select(e).width(this._width-this._margin.left-this._margin.right).config(this._titleConfig).render();this._margin.top+=i?e.getBBox().height+this._padding:0};var Lm=function(t){if(t===void 0)t=[];var i=typeof this._total==="function"?k(t.map(this._total)):this._total===true&&this._size?k(t.map(this._size)):false;var e=Au("g.d3plus-viz-total",{enter:{transform:"translate("+this._margin.left+", "+this._margin.top+")"},parent:this._select,transition:this._transition,update:{transform:"translate("+this._margin.left+", "+this._margin.top+")"}}).node();var n=typeof i==="number";this._totalClass.data(n?[{text:Yl.t("Total",{lng:this._locale})+": "+i}]:[]).select(e).width(this._width-this._margin.left-this._margin.right).config(this._totalConfig).render();this._margin.top+=n?e.getBBox().height+this._padding:0};function Wm(t,i){if(t.tagName===undefined||["BODY","HTML"].indexOf(t.tagName)>=0){var e=window["inner"+(i.charAt(0).toUpperCase()+i.slice(1))];var n=Zs(t);if(i==="width"){e-=parseFloat(n.style("margin-left"),10);e-=parseFloat(n.style("margin-right"),10);e-=parseFloat(n.style("padding-left"),10);e-=parseFloat(n.style("padding-right"),10)}else{e-=parseFloat(n.style("margin-top"),10);e-=parseFloat(n.style("margin-bottom"),10);e-=parseFloat(n.style("padding-top"),10);e-=parseFloat(n.style("padding-bottom"),10)}return e}else{var r=parseFloat(Zs(t).style(i),10);if(typeof r==="number"&&r>0){return r}else{return Wm(t.parentNode,i)}}}var Gm=function(t){return[Wm(t,"width"),Wm(t,"height")]};var Um=function(t,i){this._select.style("cursor","auto");if(this._drawDepth<this._groupBy.length-1){var e=this._groupBy[this._drawDepth],n=e(t,i);this.hover(false);if(this._tooltip){this._tooltipClass.data([]).render()}this._history.push({depth:this._depth,filter:this._filter});this.config({depth:this._drawDepth+1,filter:function(t,i){return e(t,i)===n}}).render()}};var Im=function(t,i){var e=this;var n=this._ids(t,i);this.hover(function(t,i){var r=e._ids(t,i);return n[n.length-1]===r[n.length-1]})};var qm=function(t,i,e){if(e===void 0)e={};if(this._tooltip){this._select.style("cursor","pointer");this._tooltipClass.data([t]).footer(this._drawDepth<this._groupBy.length-1?Yl.t("Click to Expand",{lng:this._locale}):this._active&&this._active(t,i)?!this._focus||this._focus===this._id(t,i)?Yl.t("Click to Remove Highlight",{lng:this._locale}):Yl.t("Click to Highlight",{lng:this._locale}):Yl.t("Click to Highlight",{lng:this._locale})).title(this._drawLabel).translate(Do(Zs("html").node())).config(e).config(this._tooltipConfig).render()}};var Ym=function(t,i){var e=this;if(this._hover&&this._drawDepth>=this._groupBy.length-1){if(this._active&&this._active(t,i)){this.active(false);Im.bind(this)(t,i)}else{var n=this._ids(t,i);this.active(function(t,i){var r=e._ids(t,i);return n[n.length-1]===r[n.length-1]})}qm.bind(this)(t,i,{title:this._legendClass.label()})}};var Xm=function(t,i){var e=this;if(this._hover&&this._drawDepth>=this._groupBy.length-1){if(this._active&&this._active(t,i)){this.active(false);Im.bind(this)(t,i)}else{var n=this._ids(t,i);this.active(function(t,i){var r=e._ids(t,i);return n[n.length-1]===r[n.length-1]})}qm.bind(this)(t,i)}};var Vm=function(){this.hover(false);this._select.style("cursor","auto");if(this._tooltip){this._tooltipClass.data([]).render()}};var Jm=function(t,i){qm.bind(this)(t,i,{title:this._legendClass.label()})};var $m=function(t,i){qm.bind(this)(t,i)};var Km=function(t){function i(){var i=this;t.call(this);this._aggs={};this._backClass=(new Bf).on("click",function(){if(i._history.length){i.config(i._history.pop()).render()}else{i.depth(i._drawDepth-1).filter(false).render()}}).on("mousemove",function(){return i._backClass.select().style("cursor","pointer")});this._backConfig={fontSize:10,resize:false};this._data=[];this._duration=600;this._history=[];this._groupBy=[gu("id")];this._legend=true;this._legendConfig={shapeConfig:{fontResize:false}};this._legendClass=new Om;this._locale="en-US";this._on={click:Um.bind(this),"click.legend":Ym.bind(this),"click.shape":Xm.bind(this),mouseenter:Im.bind(this),"mousemove.legend":Jm.bind(this),"mousemove.shape":$m.bind(this),mouseleave:Vm.bind(this)};this._padding=5;this._shapeConfig={fill:function(t,e){return ef(i._groupBy[0](t,e))},opacity:Cu(1),stroke:function(t,e){return ft(ef(i._groupBy[0](t,e))).darker()},strokeWidth:Cu(0)};this._timeline=true;this._timelineClass=(new Nm).align("end").on("end",function(t){if(!(t instanceof Array)){t=[t,t]}t=t.map(Number);i._timelineClass.selection(t);i.timeFilter(function(e){var n=X_(i._time(e)).getTime();return n>=t[0]&&n<=t[1]}).render()});this._titleClass=new Bf;this._titleConfig={fontSize:12,resize:false,textAnchor:"middle"};this._timelineConfig={};this._tooltip=true;this._tooltipClass=new fm;this._tooltipConfig={duration:50,pointerEvents:"none"};this._totalClass=new Bf;this._totalConfig={fontSize:10,resize:false,textAnchor:"middle"}}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._shapeConfigPrep=function t(i){var e=this;if(i===void 0)i=false;var n={duration:this._duration};var r=function(t){if({}.hasOwnProperty.call(e._shapeConfig,t)){if(typeof e._shapeConfig[t]==="function"){n[t]=function(i,n,r){return e._shapeConfig[t](i.__d3plus__?i.data:i,i.__d3plus__?i.i:n,r)}}else{n[t]=e._shapeConfig[t]}}};for(var o in this._shapeConfig)r(o);n.on=Object.keys(this._on).filter(function(t){return!t.includes(".")||t.includes(".shape")}).reduce(function(t,i){t[i]=function(t,n){return e._on[i]?e._on[i](t.__d3plus__?t.data:t,t.__d3plus__?t.i:n):null};return t},{});if(i&&this._shapeConfig[i]){n=yu(n,this._shapeConfig[i])}return n};i.prototype.render=function t(i){var e=this;this._margin={bottom:0,left:0,right:0,top:0};this._transition=Ph().duration(this._duration);if(this._select===void 0||this._select.node().tagName.toLowerCase()!=="svg"){var n=this._select===void 0?Zs("body"):this._select;var r=Gm(n.node());var o=r[0];var s=r[1];if(!this._width){this.width(o)}if(!this._height){this.height(s)}o=this._width;s=this._height;this.select(n.append("svg").style("width",o+"px").style("height",s+"px").style("display","block").node())}if(!this._width||!this._height){var a=Gm(this._select.node());var h=a[0];var u=a[1];if(!this._width){this.width(h)}if(!this._height){this.height(u)}}var l=this;this._drawDepth=this._depth!==void 0?this._depth:this._groupBy.length-1;this._id=this._groupBy[this._drawDepth];this._ids=function(t,i){return e._groupBy.map(function(e){return e(t.__d3plus__?t.data:t,t.__d3plus__?t.i:i)}).filter(function(t){return t!==void 0&&t.constructor!==Array})};this._drawLabel=this._label||function(t,i){var e=l._ids(t,i).filter(function(t){return t&&t.constructor!==Array});return e[e.length-1]};if(this._time&&this._timeFilter===void 0){var f=this._data.map(this._time).map(X_);var c=this._data[0],_=0;if(this._discrete&&"_"+this._discrete in this&&this["_"+this._discrete](c,_)===this._time(c,_)){this._timeFilter=function(){return true}}else{var p=+w(f);this._timeFilter=function(t,i){return+X_(e._time(t,i))===p}}}this._filteredData=[];var d=[];if(this._data.length){d=this._timeFilter?this._data.filter(this._timeFilter):this._data;if(this._filter){d=d.filter(this._filter)}var g=z();for(var v=0;v<=this._drawDepth;v++){g.key(e._groupBy[v])}if(this._discrete&&"_"+this._discrete in this){g.key(this["_"+this._discrete])}g.rollup(function(t){return e._filteredData.push(Xl(t,e._aggs))}).entries(d)}Hm.bind(this)(d);Pm.bind(this)(d);Tm.bind(this)();Rm.bind(this)(d);Lm.bind(this)(d);this._shapes=[];if(i){setTimeout(i,this._duration+100)}return this};i.prototype.active=function t(i){this._active=i;this._shapes.forEach(function(t){return t.active(i)});if(this._legend){this._legendClass.active(i)}return this};i.prototype.aggs=function t(i){return arguments.length?(this._aggs=yu(this._aggs,i),this):this._aggs};i.prototype.backConfig=function t(i){return arguments.length?(this._backConfig=yu(this._backConfig,i),this):this._backConfig};i.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};i.prototype.depth=function t(i){return arguments.length?(this._depth=i,this):this._depth};i.prototype.discrete=function t(i){return arguments.length?(this._discrete=i,this):this._discrete};i.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};i.prototype.filter=function t(i){return arguments.length?(this._filter=i,this):this._filter};i.prototype.groupBy=function t(i){var e=this;if(!arguments.length){return this._groupBy}if(!(i instanceof Array)){i=[i]}return this._groupBy=i.map(function(t){if(typeof t==="function"){return t}else{if(!e._aggs[t]){e._aggs[t]=function(t){var i=Array.from(new Set(t));return i.length===1?i[0]:i}}return gu(t)}}),this};i.prototype.height=function t(i){return arguments.length?(this._height=i,this):this._height};i.prototype.hover=function t(i){var e=this;var n=this._hover=i;if(typeof i==="function"){var r=A(this._shapes.map(function(t){return t.data()}));r=r.concat(this._legendClass.data());var o=i?r.filter(i):[];var s=[];o.map(this._ids).forEach(function(t){for(var i=1;i<=t.length;i++){s.push(JSON.stringify(t.slice(0,i)))}});s=s.filter(function(t,i){return s.indexOf(t)===i});if(s.length){n=function(t,i){return s.includes(JSON.stringify(e._ids(t,i)))}}}this._shapes.forEach(function(t){return t.hover(n)});if(this._legend){this._legendClass.hover(n)}return this};i.prototype.label=function t(i){return arguments.length?(this._label=typeof i==="function"?i:Cu(i),this):this._label};i.prototype.legend=function t(i){return arguments.length?(this._legend=i,this):this._legend};i.prototype.legendConfig=function t(i){return arguments.length?(this._legendConfig=i,this):this._legendConfig};i.prototype.locale=function t(i){return arguments.length?(this._locale=i,this):this._locale};i.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};i.prototype.shape=function t(i){return arguments.length?(this._shape=typeof i==="function"?i:Cu(i),this):this._shape};i.prototype.shapeConfig=function t(i){return arguments.length?(this._shapeConfig=yu(this._shapeConfig,i),this):this._shapeConfig};i.prototype.time=function t(i){if(arguments.length){if(typeof i==="function"){this._time=i}else{this._time=gu(i);if(!this._aggs[i]){this._aggs[i]=function(t){var i=Array.from(new Set(t));return i.length===1?i[0]:i}}}return this}else{return this._time}};i.prototype.timeFilter=function t(i){return arguments.length?(this._timeFilter=i,this):this._timeFilter};i.prototype.timeline=function t(i){return arguments.length?(this._timeline=i,this):this._timeline};i.prototype.timelineConfig=function t(i){return arguments.length?(this._timelineConfig=yu(this._timelineConfig,i),this):this._timelineConfig};i.prototype.title=function t(i){return arguments.length?(this._title=typeof i==="function"?i:Cu(i),this):this._title};i.prototype.titleConfig=function t(i){return arguments.length?(this._titleConfig=yu(this._titleConfig,i),this):this._titleConfig};i.prototype.tooltip=function t(i){return arguments.length?(this._tooltip=i,this):this._tooltip};i.prototype.tooltipConfig=function t(i){return arguments.length?(this._tooltipConfig=yu(this._tooltipConfig,i),this):this._tooltipConfig};i.prototype.total=function t(i){return arguments.length?(this._total=typeof i==="function"?i:gu(i),this):this._total};i.prototype.totalConfig=function t(i){return arguments.length?(this._totalConfig=yu(this._totalConfig,i),this):this._totalConfig};i.prototype.width=function t(i){return arguments.length?(this._width=i,this):this._width};return i}(xu);var Zm=function(t){function i(){var i=this;t.call(this);this._shapeConfig=yu({},this._shapeConfig,{Path:{id:function(t){return i._ids(t).join("-")},x:0,y:0}});this._innerRadius=0;this._padPixel=0;this._pie=fc();this._sort=function(t,i){return i.value-t.value};this._value=gu("value")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype.render=function i(e){t.prototype.render.call(this,e);var n=this._height-this._margin.top-this._margin.bottom,r=this._width-this._margin.left-this._margin.right;var o=S([r,n])/2;var s=this._pie.padAngle(this._padAngle||this._padPixel/o).sort(this._sort).value(this._value)(this._filteredData);s.forEach(function(t,i){t.__d3plus__=true;t.i=i});var a=ec().innerRadius(this._innerRadius).outerRadius(o);var h="translate("+r/2+", "+n/2+")";this._shapes.push((new Mm).data(s).d(a).select(Au("g.d3plus-Pie",{parent:this._select,enter:{transform:h},update:{transform:h}}).node()).config(this._shapeConfigPrep("Path")).render());return this};i.prototype.innerRadius=function t(i){return arguments.length?(this._innerRadius=i,this):this._innerRadius};i.prototype.padAngle=function t(i){return arguments.length?(this._padAngle=i,this):this._padAngle};i.prototype.padPixel=function t(i){return arguments.length?(this._padPixel=i,this):this._padPixel};i.prototype.sort=function t(i){return arguments.length?(this._sort=i,this):this._sort};i.prototype.value=function t(i){return arguments.length?(this._value=typeof i==="function"?i:Cu(i),this):this._value;
};return i}(Km);var Qm=function(t){function i(){var i=this;t.call(this);this._innerRadius=function(){return S([i._width-i._margin.left-i._margin.right,i._height-i._margin.top-i._margin.bottom])/4};this._padPixel=5}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;return i}(Zm);function tb(t,i){return t.parent===i.parent?1:2}function ib(t){return t.reduce(eb,0)/t.length}function eb(t,i){return t+i.x}function nb(t){return 1+t.reduce(rb,0)}function rb(t,i){return Math.max(t,i.y)}function ob(t){var i;while(i=t.children){t=i[0]}return t}function sb(t){var i;while(i=t.children){t=i[i.length-1]}return t}var ab=function(t){var i=this,e,n=[i],r,o,s;do{e=n.reverse(),n=[];while(i=e.pop()){t(i),r=i.children;if(r){for(o=0,s=r.length;o<s;++o){n.push(r[o])}}}}while(n.length);return this};var hb=function(t){var i=this,e=[i],n,r;while(i=e.pop()){t(i),n=i.children;if(n){for(r=n.length-1;r>=0;--r){e.push(n[r])}}}return this};var ub=function(t){var i=this,e=[i],n=[],r,o,s;while(i=e.pop()){n.push(i),r=i.children;if(r){for(o=0,s=r.length;o<s;++o){e.push(r[o])}}}while(i=n.pop()){t(i)}return this};var lb=function(t){return this.eachAfter(function(i){var e=+t(i.data)||0,n=i.children,r=n&&n.length;while(--r>=0){e+=n[r].value}i.value=e})};var fb=function(t){return this.eachBefore(function(i){if(i.children){i.children.sort(t)}})};var cb=function(t){var i=this,e=_b(i,t),n=[i];while(i!==e){i=i.parent;n.push(i)}var r=n.length;while(t!==e){n.splice(r,0,t);t=t.parent}return n};function _b(t,i){if(t===i){return t}var e=t.ancestors(),n=i.ancestors(),r=null;t=e.pop();i=n.pop();while(t===i){r=t;t=e.pop();i=n.pop()}return r}var pb=function(){var t=this,i=[t];while(t=t.parent){i.push(t)}return i};var db=function(){var t=[];this.each(function(i){t.push(i)});return t};var gb=function(){var t=[];this.eachBefore(function(i){if(!i.children){t.push(i)}});return t};var vb=function(){var t=this,i=[];t.each(function(e){if(e!==t){i.push({source:e.parent,target:e})}});return i};function yb(t,i){var e=new Cb(t),n=+t.value&&(e.value=t.value),r,o=[e],s,a,h,u;if(i==null){i=bb}while(r=o.pop()){if(n){r.value=+r.data.value}if((a=i(r.data))&&(u=a.length)){r.children=new Array(u);for(h=u-1;h>=0;--h){o.push(s=r.children[h]=new Cb(a[h]));s.parent=r;s.depth=r.depth+1}}}return e.eachBefore(wb)}function mb(){return yb(this).eachBefore(xb)}function bb(t){return t.children}function xb(t){t.data=t.data.data}function wb(t){var i=0;do{t.height=i}while((t=t.parent)&&t.height<++i)}function Cb(t){this.data=t;this.depth=this.height=0;this.parent=null}Cb.prototype=yb.prototype={constructor:Cb,each:ab,eachAfter:ub,eachBefore:hb,sum:lb,sort:fb,path:cb,ancestors:pb,descendants:db,leaves:gb,links:vb,copy:mb};function Ab(t){this._=t;this.next=null}var Sb=function(t){var i,e=(t=t.slice()).length,n=null,r=n;while(e){var o=new Ab(t[e-1]);if(r){r=r.next=o}else{r=n=o}t[i]=t[--e]}return{head:n,tail:r}};var kb=function(t){return Bb(Sb(t),[])};function Eb(t,i){var e=i.x-t.x,n=i.y-t.y,r=t.r-i.r;return r*r+1e-6>e*e+n*n}function Bb(t,i){var e,n=null,r=t.head,o,s;switch(i.length){case 1:e=Db(i[0]);break;case 2:e=Mb(i[0],i[1]);break;case 3:e=zb(i[0],i[1],i[2]);break}while(r){s=r._,o=r.next;if(!e||!Eb(e,s)){if(n){t.tail=n,n.next=null}else{t.head=t.tail=null}i.push(s);e=Bb(t,i);i.pop();if(t.head){r.next=t.head,t.head=r}else{r.next=null,t.head=t.tail=r}n=t.tail,n.next=o}else{n=r}r=o}t.tail=n;return e}function Db(t){return{x:t.x,y:t.y,r:t.r}}function Mb(t,i){var e=t.x,n=t.y,r=t.r,o=i.x,s=i.y,a=i.r,h=o-e,u=s-n,l=a-r,f=Math.sqrt(h*h+u*u);return{x:(e+o+h/f*l)/2,y:(n+s+u/f*l)/2,r:(f+r+a)/2}}function zb(t,i,e){var n=t.x,r=t.y,o=t.r,s=i.x,a=i.y,h=i.r,u=e.x,l=e.y,f=e.r,c=2*(n-s),_=2*(r-a),p=2*(h-o),d=n*n+r*r-o*o-s*s-a*a+h*h,g=2*(n-u),v=2*(r-l),y=2*(f-o),m=n*n+r*r-o*o-u*u-l*l+f*f,b=g*_-c*v,x=(_*m-v*d)/b-n,w=(v*p-_*y)/b,C=(g*d-c*m)/b-r,A=(c*y-g*p)/b,S=w*w+A*A-1,k=2*(x*w+C*A+o),E=x*x+C*C-o*o,B=(-k-Math.sqrt(k*k-4*S*E))/(2*S);return{x:x+w*B+n,y:C+A*B+r,r:B}}function Fb(t,i,e){var n=t.x,r=t.y,o=i.r+e.r,s=t.r+e.r,a=i.x-n,h=i.y-r,u=a*a+h*h;if(u){var l=.5+((s*=s)-(o*=o))/(2*u),f=Math.sqrt(Math.max(0,2*o*(s+u)-(s-=u)*s-o*o))/(2*u);e.x=n+l*a+f*h;e.y=r+l*h-f*a}else{e.x=n+s;e.y=r}}function Ob(t,i){var e=i.x-t.x,n=i.y-t.y,r=t.r+i.r;return r*r>e*e+n*n}function Nb(t,i,e){var n=t.x-i,r=t.y-e;return n*n+r*r}function Tb(t){this._=t;this.next=null;this.previous=null}function jb(t){if(!(r=t.length)){return 0}var i,e,n,r;i=t[0],i.x=0,i.y=0;if(!(r>1)){return i.r}e=t[1],i.x=-e.r,e.x=i.r,e.y=0;if(!(r>2)){return i.r+e.r}Fb(e,i,n=t[2]);var o=i.r*i.r,s=e.r*e.r,a=n.r*n.r,h=o+s+a,u=o*i.x+s*e.x+a*n.x,l=o*i.y+s*e.y+a*n.y,f,c,_,p,d,g,v;i=new Tb(i),e=new Tb(e),n=new Tb(n);i.next=n.previous=e;e.next=i.previous=n;n.next=e.previous=i;t:for(_=3;_<r;++_){Fb(i._,e._,n=t[_]),n=new Tb(n);if((d=i.previous)===(p=e.next)){if(Ob(p._,n._)){i=e,e=p,--_;continue t}}else{g=p._.r,v=d._.r;do{if(g<=v){if(Ob(p._,n._)){e=p,i.next=e,e.previous=i,--_;continue t}p=p.next,g+=p._.r}else{if(Ob(d._,n._)){i=d,i.next=e,e.previous=i,--_;continue t}d=d.previous,v+=d._.r}}while(p!==d.next)}n.previous=i,n.next=e,i.next=e.previous=e=n;h+=a=n._.r*n._.r;u+=a*n._.x;l+=a*n._.y;o=Nb(i._,f=u/h,c=l/h);while((n=n.next)!==e){if((a=Nb(n._,f,c))<o){i=n,o=a}}e=i.next}i=[e._],n=e;while((n=n.next)!==e){i.push(n._)}n=kb(i);for(_=0;_<r;++_){i=t[_],i.x-=n.x,i.y-=n.y}return n.r}function Pb(t){return t==null?null:Hb(t)}function Hb(t){if(typeof t!=="function"){throw new Error}return t}function Rb(){return 0}var Lb=function(t){return function(){return t}};function Wb(t){return Math.sqrt(t.value)}function Gb(t){return function(i){if(!i.children){i.r=Math.max(0,+t(i)||0)}}}function Ub(t,i){return function(e){if(n=e.children){var n,r,o=n.length,s=t(e)*i||0,a;if(s){for(r=0;r<o;++r){n[r].r+=s}}a=jb(n);if(s){for(r=0;r<o;++r){n[r].r-=s}}e.r=a+s}}}function Ib(t){return function(i){var e=i.parent;i.r*=t;if(e){i.x=e.x+t*i.x;i.y=e.y+t*i.y}}}var qb=function(t){t.x0=Math.round(t.x0);t.y0=Math.round(t.y0);t.x1=Math.round(t.x1);t.y1=Math.round(t.y1)};var Yb=function(t,i,e,n,r){var o=t.children,s,a=-1,h=o.length,u=t.value&&(n-i)/t.value;while(++a<h){s=o[a],s.y0=e,s.y1=r;s.x0=i,s.x1=i+=s.value*u}};var Xb="$";var Vb={depth:-1};var Jb={};function $b(t){return t.id}function Kb(t){return t.parentId}function Zb(t,i){return t.parent===i.parent?1:2}function Qb(t){var i=t.children;return i?i[0]:t.t}function tx(t){var i=t.children;return i?i[i.length-1]:t.t}function ix(t,i,e){var n=e/(i.i-t.i);i.c-=n;i.s+=e;t.c+=n;i.z+=e;i.m+=e}function ex(t){var i=0,e=0,n=t.children,r=n.length,o;while(--r>=0){o=n[r];o.z+=i;o.m+=i;i+=o.s+(e+=o.c)}}function nx(t,i,e){return t.a.parent===i.parent?t.a:e}function rx(t,i){this._=t;this.parent=null;this.children=null;this.A=null;this.a=this;this.z=0;this.m=0;this.c=0;this.s=0;this.t=null;this.i=i}rx.prototype=Object.create(Cb.prototype);function ox(t){var i=new rx(t,0),e,n=[i],r,o,s,a;while(e=n.pop()){if(o=e._.children){e.children=new Array(a=o.length);for(s=a-1;s>=0;--s){n.push(r=e.children[s]=new rx(o[s],s));r.parent=e}}}(i.parent=new rx(null,0)).children=[i];return i}var sx=function(){var t=Zb,i=1,e=1,n=null;function r(r){var a=ox(r);a.eachAfter(o),a.parent.m=-a.z;a.eachBefore(s);if(n){r.eachBefore(h)}else{var u=r,l=r,f=r;r.eachBefore(function(t){if(t.x<u.x){u=t}if(t.x>l.x){l=t}if(t.depth>f.depth){f=t}});var c=u===l?1:t(u,l)/2,_=c-u.x,p=i/(l.x+c+_),d=e/(f.depth||1);r.eachBefore(function(t){t.x=(t.x+_)*p;t.y=t.depth*d})}return r}function o(i){var e=i.children,n=i.parent.children,r=i.i?n[i.i-1]:null;if(e){ex(i);var o=(e[0].z+e[e.length-1].z)/2;if(r){i.z=r.z+t(i._,r._);i.m=i.z-o}else{i.z=o}}else if(r){i.z=r.z+t(i._,r._)}i.parent.A=a(i,r,i.parent.A||n[0])}function s(t){t._.x=t.z+t.parent.m;t.m+=t.parent.m}function a(i,e,n){if(e){var r=i,o=i,s=e,a=r.parent.children[0],h=r.m,u=o.m,l=s.m,f=a.m,c;while(s=tx(s),r=Qb(r),s&&r){a=Qb(a);o=tx(o);o.a=i;c=s.z+l-r.z-h+t(s._,r._);if(c>0){ix(nx(s,i,n),i,c);h+=c;u+=c}l+=s.m;h+=r.m;f+=a.m;u+=o.m}if(s&&!tx(o)){o.t=s;o.m+=l-u}if(r&&!Qb(a)){a.t=r;a.m+=h-f;n=i}}return n}function h(t){t.x*=i;t.y=t.depth*e}r.separation=function(i){return arguments.length?(t=i,r):t};r.size=function(t){return arguments.length?(n=false,i=+t[0],e=+t[1],r):n?null:[i,e]};r.nodeSize=function(t){return arguments.length?(n=true,i=+t[0],e=+t[1],r):n?[i,e]:null};return r};var ax=function(t,i,e,n,r){var o=t.children,s,a=-1,h=o.length,u=t.value&&(r-e)/t.value;while(++a<h){s=o[a],s.x0=i,s.x1=n;s.y0=e,s.y1=e+=s.value*u}};var hx=(1+Math.sqrt(5))/2;function ux(t,i,e,n,r,o){var s=[],a=i.children,h,u,l=0,f=0,c=a.length,_,p,d=i.value,g,v,y,m,b,x,w;while(l<c){_=r-e,p=o-n;do{g=a[f++].value}while(!g&&f<c);v=y=g;x=Math.max(p/_,_/p)/(d*t);w=g*g*x;b=Math.max(y/w,w/v);for(;f<c;++f){g+=u=a[f].value;if(u<v){v=u}if(u>y){y=u}w=g*g*x;m=Math.max(y/w,w/v);if(m>b){g-=u;break}b=m}s.push(h={value:g,dice:_<p,children:a.slice(l,f)});if(h.dice){Yb(h,e,n,r,d?n+=p*g/d:o)}else{ax(h,e,n,d?e+=_*g/d:r,o)}d-=g,l=f}return s}var lx=function t(i){function e(t,e,n,r,o){ux(i,t,e,n,r,o)}e.ratio=function(i){return t((i=+i)>1?i:1)};return e}(hx);var fx=function(){var t=lx,i=false,e=1,n=1,r=[0],o=Rb,s=Rb,a=Rb,h=Rb,u=Rb;function l(t){t.x0=t.y0=0;t.x1=e;t.y1=n;t.eachBefore(f);r=[0];if(i){t.eachBefore(qb)}return t}function f(i){var e=r[i.depth],n=i.x0+e,l=i.y0+e,f=i.x1-e,c=i.y1-e;if(f<n){n=f=(n+f)/2}if(c<l){l=c=(l+c)/2}i.x0=n;i.y0=l;i.x1=f;i.y1=c;if(i.children){e=r[i.depth+1]=o(i)/2;n+=u(i)-e;l+=s(i)-e;f-=a(i)-e;c-=h(i)-e;if(f<n){n=f=(n+f)/2}if(c<l){l=c=(l+c)/2}t(i,n,l,f,c)}}l.round=function(t){return arguments.length?(i=!!t,l):i};l.size=function(t){return arguments.length?(e=+t[0],n=+t[1],l):[e,n]};l.tile=function(i){return arguments.length?(t=Hb(i),l):t};l.padding=function(t){return arguments.length?l.paddingInner(t).paddingOuter(t):l.paddingInner()};l.paddingInner=function(t){return arguments.length?(o=typeof t==="function"?t:Lb(+t),l):o};l.paddingOuter=function(t){return arguments.length?l.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):l.paddingTop()};l.paddingTop=function(t){return arguments.length?(s=typeof t==="function"?t:Lb(+t),l):s};l.paddingRight=function(t){return arguments.length?(a=typeof t==="function"?t:Lb(+t),l):a};l.paddingBottom=function(t){return arguments.length?(h=typeof t==="function"?t:Lb(+t),l):h};l.paddingLeft=function(t){return arguments.length?(u=typeof t==="function"?t:Lb(+t),l):u};return l};(function t(i){function e(t,e,n,r,o){if((s=t._squarify)&&s.ratio===i){var s,a,h,u,l=-1,f,c=s.length,_=t.value;while(++l<c){a=s[l],h=a.children;for(u=a.value=0,f=h.length;u<f;++u){a.value+=h[u].value}if(a.dice){Yb(a,e,n,r,n+=(o-n)*a.value/_)}else{ax(a,e,n,e+=(r-e)*a.value/_,o)}_-=a.value}}else{t._squarify=s=ux(i,t,e,n,r,o);s.ratio=i}}e.ratio=function(i){return t((i=+i)>1?i:1)};return e})(hx);var cx=function(t,i){if(!(i instanceof Array)){i=[i]}var e=z();for(var n=0;n<i.length;n++){e.key(i[n])}var r=e.entries(t);return _x(r)};function _x(t){return t.map(function(t){if(t.key&&t.values){if(t.values[0].key==="undefined"){return t.values[0].values[0]}else{t.values=_x(t.values)}}return t})}var px=function(t){function i(){var i=this;t.call(this);this._orient="vertical";this._separation=function(t,i){return t.parent===i.parent?1:2};var e={id:function(t,e){return i._ids(t,e).join("-")},label:function(t,e){if(i._label){return i._label(t.data,e)}var n=i._ids(t,e).slice(0,t.depth);return n[n.length-1]},hitArea:function(t,e,n){var r=i._labelHeight,o=i._labelWidths[t.depth-1];return{width:i._orient==="vertical"?o:n.r*2+o,height:i._orient==="horizontal"?r:n.r*2+r,x:i._orient==="vertical"?-o/2:t.children&&t.depth!==i._groupBy.length?-(n.r+o):-n.r,y:i._orient==="horizontal"?-r/2:t.children&&t.depth!==i._groupBy.length?-(n.r+i._labelHeight):-n.r}},labelBounds:function(t,e,n){var r=i._labelHeight,o=i._orient==="vertical"?"height":"width",s=i._labelWidths[t.depth-1],a=i._orient==="vertical"?"width":"height",h=i._orient==="vertical"?"x":"y",u=i._orient==="vertical"?"y":"x";var l;return l={},l[a]=s,l[o]=r,l[h]=-s/2,l[u]=t.children&&t.depth!==i._groupBy.length?-(n.r+r):n.r,l},textAnchor:function(t){return i._orient==="vertical"?"middle":t.children&&t.depth!==i._groupBy.length?"end":"start"},verticalAlign:function(t){return i._orient==="vertical"?t.depth===1?"bottom":"top":"middle"}};this._shape=Cu("Circle");this._shapeConfig=yu({},this._shapeConfig,{Circle:e,fontColor:"#444",Path:{d:function(t){var e=i._shapeConfig.Circle.r||i._shapeConfig.r;if(typeof e==="function"){e=e(t.data,t.i)}var n=t.parent.x-t.x+(i._orient==="vertical"?0:e),r=t.parent.y-t.y+(i._orient==="vertical"?e:0),o=i._orient==="vertical"?0:-e,s=i._orient==="vertical"?-e:0;return i._orient==="vertical"?"M"+o+","+s+"C"+o+","+(s+r)/2+" "+n+","+(s+r)/2+" "+n+","+r:"M"+o+","+s+"C"+(o+n)/2+","+s+" "+(o+n)/2+","+r+" "+n+","+r},fill:"none",id:function(t,e){return i._ids(t,e).join("-")},stroke:"#ccc",strokeWidth:1},r:Cu(5),width:Cu(10),height:Cu(10)});this._tree=sx()}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype.render=function i(e){var n=this;t.prototype.render.call(this,e);var r=this._orient==="vertical"?this._height-this._margin.top-this._margin.bottom:this._width-this._margin.left-this._margin.right,o=this._orient==="vertical"?"left":"top",s=this,a="translate("+this._margin.left+", "+this._margin.top+")",u=this._orient==="horizontal"?this._height-this._margin.top-this._margin.bottom:this._width-this._margin.left-this._margin.right;var l=this._tree.separation(this._separation).size([u,r])(yb({key:"root",values:cx(this._filteredData,this._groupBy.slice(0,this._drawDepth+1))},function(t){return t.key&&t.values?t.values:null}).sort(this._sort)).descendants().filter(function(t){return t.depth<=n._groupBy.length&&t.parent});function f(t){return Xl(t.values.map(function(t){return t.key&&t.values?f(t):t}),s._aggs)}l.forEach(function(t,i){if(t.data.key&&t.data.values){t.data=f(t.data)}t.__d3plus__=true;t.i=i});var c=this._shapeConfig.Circle.r||this._shapeConfig.r;if(typeof c!=="function"){c=Cu(c)}var _=w(l,function(t){return t.depth===1?c(t.data,t.i):0});var p=w(l,function(t){return t.children?0:c(t.data,t.i)});var d=h(l,function(t){return t.y});this._labelHeight=S([this._orient==="vertical"?50:100,(d[1]-_-p)/(this._groupBy.length+1)]);this._labelWidths=cx(l,function(t){return t.depth}).map(function(t){return t.values.reduce(function(i,e,r){var s=r<t.values.length-1?t.values[r+1].x:u+n._margin[o],a=r?t.values[r-1].x:n._margin[o];return S([i,s-e.x,e.x-a])},u)});var g=me().domain(d).range([_+this._labelHeight,r-p-this._labelHeight]);l.forEach(function(t){var i=g(t.y);if(n._orient==="horizontal"){t.y=t.x;t.x=i}else{t.y=i}});var v={parent:this._select,enter:{transform:a},update:{transform:a}};this._shapes.push((new Mm).data(l.filter(function(t){return t.depth>1})).select(Au("g.d3plus-Tree-Links",v).node()).config(this._shapeConfigPrep("Path")).render());this._shapes.push((new Bm).data(l).select(Au("g.d3plus-Tree-Shapes",v).node()).config(this._shapeConfigPrep("Circle")).render());return this};i.prototype.orient=function t(i){return arguments.length?(this._orient=i,this):this._orient};i.prototype.separation=function t(i){return arguments.length?(this._separation=i,this):this._separation};return i}(Km);var dx=function(t){function i(){t.call(this);this._padding=1;this._shapeConfig=yu({},this._shapeConfig,{fontResize:true,Rect:{height:function(t){return t.y1-t.y0},labelBounds:function(t,i,e){var n=e.height;var r=Math.min(50,n*.25);return[{width:e.width,height:n-r,x:-e.width/2,y:-n/2},{width:e.width,height:r,x:-e.width/2,y:n/2-r}]},width:function(t){return t.x1-t.x0}},textAnchor:["start","middle"],verticalAlign:["top","bottom"]});this._sort=function(t,i){return i.value-t.value};this._sum=gu("value");this._tile=lx;this._treemap=fx().round(true)}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype.render=function i(e){var n=this;t.prototype.render.call(this,e);var r=z();for(var o=0;o<=this._drawDepth;o++){r.key(n._groupBy[o])}r=r.entries(this._filteredData);var s=this._treemap.padding(this._padding).size([this._width-this._margin.left-this._margin.right,this._height-this._margin.top-this._margin.bottom]).tile(this._tile)(yb({values:r},function(t){return t.values}).sum(this._sum).sort(this._sort));var a=[],h=this;function u(t){for(var i=0;i<t.length;i++){var e=t[i];if(e.depth<=h._drawDepth){u(e.children)}else{e.__d3plus__=true;e.id=e.data.key;e.data=Xl(e.data.values);e.i=i;e.x=e.x0+(e.x1-e.x0)/2;e.y=e.y0+(e.y1-e.y0)/2;a.push(e)}}}if(s.children){u(s.children)}var l=s.value;var f="translate("+this._margin.left+", "+this._margin.top+")";this._shapes.push((new zm).data(a).label(function(t){return[n._drawLabel(t.data,t.i),Math.round(n._sum(t.data,t.i)/l*100)+"%"]}).select(Au("g.d3plus-Treemap",{parent:this._select,enter:{transform:f},update:{transform:f}}).node()).config(this._shapeConfigPrep("Rect")).render());return this};i.prototype.padding=function t(i){return arguments.length?(this._padding=typeof i==="function"?i:Cu(i),this):this._padding};i.prototype.sort=function t(i){return arguments.length?(this._sort=i,this):this._sort};i.prototype.sum=function t(i){return arguments.length?(this._sum=typeof i==="function"?i:Cu(i),this):this._sum};i.prototype.tile=function t(i){return arguments.length?(this._tile=i,this):this._tile};return i}(Km);var gx=function(t){function i(){var i=this;t.call(this);this._align="center";this._data=[];this._duration=600;this._height=200;this._id=gu("id");this._label=gu("id");this._lineData=[];this._outerBounds={width:0,height:0,x:0,y:0};this._padding=5;this._shape=Cu("Rect");this._shapeConfig={duration:this._duration,fill:gu("color"),fontColor:Cu("#444"),fontFamily:(new zm).fontFamily(),fontResize:false,fontSize:Cu(10),height:Cu(10),hitArea:function(t){var e=i._lineData[i._data.indexOf(t)],n=w([e.height,e.shapeHeight]);return{width:e.width+e.shapeWidth+(e.width?i._padding:0),height:n,x:-e.shapeWidth/2,y:-n/2}},labelBounds:function(t,e,n){var r=i._lineData[t.i],o=n.r!==void 0?n.r:n.width/2;return{width:r.width,height:r.height,x:o+i._padding,y:-r.height/2}},opacity:1,r:Cu(5),width:Cu(10),x:function(t,e){var n=i._shapeConfig.width;var r=i._lineData[e].y;var o=i._align==="left"?0:i._align==="center"?(i._outerBounds.width-i._rowWidth(i._lineData.filter(function(t){return r===t.y})))/2:i._outerBounds.width-i._rowWidth(i._lineData.filter(function(t){return r===t.y}));return i._rowWidth(i._lineData.slice(0,e).filter(function(t){return r===t.y}))+i._padding+i._outerBounds.x+n(t,e)/2+o},y:function(t,e){var n=i._shapeConfig.height;var r=i._lineData[e];return r.y+i._titleHeight+i._outerBounds.y+w(i._lineData.filter(function(t){return r.y===t.y}).map(function(t){return t.height}).concat(i._data.map(function(t,i){return n(t,i)})))/2}};this._titleConfig={fontFamily:"Verdana",fontSize:12,lineHeight:13};this._verticalAlign="middle";this._width=400}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._fetchConfig=function t(i,e,n){return typeof this._shapeConfig[i]==="function"?this._shapeConfig[i](e,n):this._shapeConfig[i]};i.prototype._rowHeight=function t(i){return w(i.map(function(t){return t.height}).concat(i.map(function(t){return t.shapeHeight})))+this._padding};i.prototype._rowWidth=function t(i){var e=this;return k(i.map(function(t){return t.shapeWidth+t.width+e._padding*(t.width?2:1)}))-this._padding};i.prototype.render=function t(i){var e=this;if(this._select===void 0){this.select(Zs("body").append("svg").attr("width",this._width+"px").attr("height",this._height+"px").node())}if(this._lineHeight===void 0){this._lineHeight=function(t,i){return e._fetchConfig("fontSize",t,i)*1.1}}this._group=Au("g.d3plus-Legend",{parent:this._select});var n=this._height;this._titleHeight=0;if(this._title){var r=this._titleConfig.fontFamily,o=this._titleConfig.lineHeight,s=this._titleConfig.fontSize;var a=Ef().fontFamily(r).fontSize(s).lineHeight(o).width(this._width).height(this._height)(this._title);this._titleHeight=o+a.lines.length+this._padding;n-=this._titleHeight}this._lineData=this._data.map(function(t,i){var r=e._fetchConfig("fontFamily",t,i),o=e._lineHeight(t,i),s=e._fetchConfig("fontSize",t,i),a=e._fetchConfig("width",t,i);var h=n-(e._data.length+1)*e._padding,u=e._width;var l=Ef().fontFamily(r).fontSize(s).lineHeight(o).width(u).height(h)(e._label(t,i));l.width=Math.ceil(w(l.lines.map(function(t){return kf(t,{"font-family":r,"font-size":s})})))+s;l.height=Math.ceil(l.lines.length*(o+1));l.og={height:l.height,width:l.width};l.data=t;l.f=r;l.s=s;l.lh=o;l.y=0;l.id=e._id(t,i);l.i=i;l.shapeWidth=a;l.shapeHeight=e._fetchConfig("height",t,i);return l});var h;var u=this._width-this._padding*2;h=k(this._lineData.map(function(t){return t.shapeWidth+e._padding*2+t.width}))-this._padding;if(h>u){var l=1,f=[];var c=w(this._lineData.map(function(t){return t.words.length}));this._wrapLines=function(){var t=this;l++;if(l>c){return}var i=l===1?this._lineData.slice():this._lineData.filter(function(i){return i.width+i.shapeWidth+t._padding*(i.width?2:1)>u&&i.words.length>=l}).sort(function(t,i){return i.sentence.length-t.sentence.length});if(i.length&&n>i[0].height*l){var e=false;var r=function(t){var n=i[t];var r=n.og.height*l,o=n.og.width*(1.5*(1/l));var s=Ef().fontFamily(n.f).fontSize(n.s).lineHeight(n.lh).width(o).height(r)(n.sentence);if(!s.truncated){n.width=Math.ceil(w(s.lines.map(function(t){return kf(t,{"font-family":n.f,"font-size":n.s})})))+n.s;n.height=s.lines.length*(n.lh+1)}else{e=true;return"break"}};for(var o=0;o<i.length;o++){var s=r(o);if(s==="break")break}if(!e){this._wrapRows()}}else{f=[];return}};this._wrapRows=function(){var t=this;f=[];var i=1,e=0;for(var r=0;r<this._lineData.length;r++){var o=t._lineData[r],s=o.width+t._padding*(o.width?2:1)+o.shapeWidth;if(k(f.map(function(t){return w(t,function(t){return w([t.height,t.shapeHeight])})}))>n){f=[];break}if(e+s<u){e+=s}else if(s>u){f=[];t._wrapLines();break}else{e=s;i++}if(!f[i-1]){f[i-1]=[]}f[i-1].push(o)}};this._wrapRows();if(!f.length||k(f,this._rowHeight.bind(this))+this._padding>n){h=k(this._lineData.map(function(t){return t.shapeWidth+e._padding*1}))-this._padding;for(var _=0;_<this._lineData.length;_++){e._lineData[_].width=0;e._lineData[_].height=0}this._wrapRows()}if(f.length&&k(f,this._rowHeight.bind(this))+this._padding<n){f.forEach(function(t,i){t.forEach(function(t){if(i){t.y=k(f.slice(0,i),e._rowHeight.bind(e))}})});h=w(f,function(t){return k(t,function(t){return t.shapeWidth+e._padding*(t.width?2:1)+t.width})})-this._padding}}var p=w(this._lineData,function(t,i){return w([t.height,e._fetchConfig("height",t.data,i)])+t.y})+this._titleHeight,d=h;this._outerBounds.width=d;this._outerBounds.height=p;var g=this._padding,v=this._padding;if(this._align==="center"){g=(this._width-d)/2}else if(this._align==="right"){g=this._width-this._padding-d}if(this._verticalAlign==="middle"){v=(this._height-p)/2}else if(this._verticalAlign==="bottom"){v=this._height-this._padding-p}this._outerBounds.x=g;this._outerBounds.y=v;(new Bf).data(this._title?[{text:this._title}]:[]).duration(this._duration).select(this._group.node()).textAnchor({left:"start",center:"middle",right:"end"}[this._align]).width(this._width-this._padding*2).x(this._padding).y(this._outerBounds.y).config(this._titleConfig).render();this._shapes=[];var y=this._shapeConfig,m={id:function(t){return t.id},label:function(t){return t.label},lineHeight:function(t){return t.lH}};var b=this._data.map(function(t,i){var n={__d3plus__:true,data:t,i:i,id:e._id(t,i),label:e._lineData[i].width?e._label(t,i):false,lH:e._lineHeight(t,i),shape:e._shape(t,i)};var r=function(e){if(e!=="labelBounds"&&{}.hasOwnProperty.call(y,e)){if(typeof y[e]==="function"){n[e]=y[e](t,i);m[e]=function(t){return t[e]}}else if(e==="on"){m[e]={};var r=function(t){if({}.hasOwnProperty.call(y[e],t)){m[e][t]=function(i){if(!y[e][t]){return}y[e][t].bind(this)(i.data,i.i)}}};for(var o in y[e])r(o)}}};for(var o in y)r(o);return n});this._shapes=[];["Circle","Rect"].forEach(function(t){e._shapes.push((new Fm[t]).data(b.filter(function(i){return i.shape===t})).duration(e._duration).labelPadding(0).select(e._group.node()).verticalAlign("top").config(Object.assign({},y,m)).render())});if(i){setTimeout(i,this._duration+100)}return this};i.prototype.active=function t(i){this._shapes.forEach(function(t){return t.active(i)});return this};i.prototype.align=function t(i){return arguments.length?(this._align=i,this):this._align};i.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};i.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};i.prototype.height=function t(i){return arguments.length?(this._height=i,this):this._height};i.prototype.hover=function t(i){this._shapes.forEach(function(t){return t.hover(i)});return this};i.prototype.id=function t(i){return arguments.length?(this._id=i,this):this._id};i.prototype.label=function t(i){return arguments.length?(this._label=typeof i==="function"?i:Cu(i),this):this._label};i.prototype.outerBounds=function t(){return this._outerBounds};i.prototype.padding=function t(i){return arguments.length?(this._padding=i,this):this._padding};i.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};i.prototype.shape=function t(i){return arguments.length?(this._shape=typeof i==="function"?i:Cu(i),this):this._shape};i.prototype.shapeConfig=function t(i){return arguments.length?(this._shapeConfig=Object.assign(this._shapeConfig,i),this):this._shapeConfig};i.prototype.title=function t(i){return arguments.length?(this._title=i,this):this._title};i.prototype.titleConfig=function t(i){return arguments.length?(this._titleConfig=Object.assign(this._titleConfig,i),this):this._titleConfig};i.prototype.verticalAlign=function t(i){return arguments.length?(this._verticalAlign=i,this):this._verticalAlign};i.prototype.width=function t(i){return arguments.length?(this._width=i,this):this._width};return i}(xu);var vx=function(t){function i(){var i=this;t.call(this);this._align="center";this._data=[];this._duration=600;this._height=200;this._id=gu("id");this._label=gu("id");this._lineData=[];this._outerBounds={width:0,height:0,x:0,y:0};this._padding=5;this._shape=Cu("Rect");this._shapeConfig={duration:this._duration,fill:gu("color"),fontColor:Cu("#444"),fontFamily:(new zm).fontFamily(),fontResize:false,fontSize:Cu(10),height:Cu(10),hitArea:function(t){var e=i._lineData[i._data.indexOf(t)],n=w([e.height,e.shapeHeight]);return{width:e.width+e.shapeWidth+(e.width?i._padding:0),height:n,x:-e.shapeWidth/2,y:-n/2}},labelBounds:function(t,e,n){var r=i._lineData[t.i],o=n.r!==void 0?n.r:n.width/2;return{width:r.width,height:r.height,x:o+i._padding,y:-r.height/2}},opacity:1,r:Cu(5),width:Cu(10),x:function(t,e){var n=i._shapeConfig.width;var r=i._lineData[e].y;var o=i._align==="left"?0:i._align==="center"?(i._outerBounds.width-i._rowWidth(i._lineData.filter(function(t){return r===t.y})))/2:i._outerBounds.width-i._rowWidth(i._lineData.filter(function(t){return r===t.y}));return i._rowWidth(i._lineData.slice(0,e).filter(function(t){return r===t.y}))+i._padding+i._outerBounds.x+n(t,e)/2+o},y:function(t,e){var n=i._shapeConfig.height;var r=i._lineData[e];return r.y+i._titleHeight+i._outerBounds.y+w(i._lineData.filter(function(t){return r.y===t.y}).map(function(t){return t.height}).concat(i._data.map(function(t,i){return n(t,i)})))/2}};this._titleConfig={fontFamily:"Verdana",fontSize:12,lineHeight:13};this._verticalAlign="middle";this._width=400}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._fetchConfig=function t(i,e,n){return typeof this._shapeConfig[i]==="function"?this._shapeConfig[i](e,n):this._shapeConfig[i]};i.prototype._rowHeight=function t(i){return w(i.map(function(t){return t.height}).concat(i.map(function(t){return t.shapeHeight})))+this._padding};i.prototype._rowWidth=function t(i){var e=this;return k(i.map(function(t){return t.shapeWidth+t.width+e._padding*(t.width?2:1)}))-this._padding};i.prototype.render=function t(i){var e=this;if(this._select===void 0){this.select(Zs("body").append("svg").attr("width",this._width+"px").attr("height",this._height+"px").node())}if(this._lineHeight===void 0){this._lineHeight=function(t,i){return e._fetchConfig("fontSize",t,i)*1.1}}this._group=Au("g.d3plus-Legend",{parent:this._select});var n=this._height;this._titleHeight=0;if(this._title){var r=this._titleConfig.fontFamily,o=this._titleConfig.lineHeight,s=this._titleConfig.fontSize;var a=Ef().fontFamily(r).fontSize(s).lineHeight(o).width(this._width).height(this._height)(this._title);this._titleHeight=o+a.lines.length+this._padding;n-=this._titleHeight}this._lineData=this._data.map(function(t,i){var r=e._fetchConfig("fontFamily",t,i),o=e._lineHeight(t,i),s=e._fetchConfig("fontSize",t,i),a=e._fetchConfig("width",t,i);var h=n-(e._data.length+1)*e._padding,u=e._width;var l=Ef().fontFamily(r).fontSize(s).lineHeight(o).width(u).height(h)(e._label(t,i));l.width=Math.ceil(w(l.lines.map(function(t){return kf(t,{"font-family":r,"font-size":s})})))+s;l.height=Math.ceil(l.lines.length*(o+1));l.og={height:l.height,width:l.width};l.data=t;l.f=r;l.s=s;l.lh=o;l.y=0;l.id=e._id(t,i);l.i=i;l.shapeWidth=a;l.shapeHeight=e._fetchConfig("height",t,i);return l});var h;var u=this._width-this._padding*2;h=k(this._lineData.map(function(t){return t.shapeWidth+e._padding*2+t.width}))-this._padding;if(h>u){var l=1,f=[];var c=w(this._lineData.map(function(t){return t.words.length}));this._wrapLines=function(){var t=this;l++;if(l>c){return}var i=l===1?this._lineData.slice():this._lineData.filter(function(i){return i.width+i.shapeWidth+t._padding*(i.width?2:1)>u&&i.words.length>=l}).sort(function(t,i){return i.sentence.length-t.sentence.length});if(i.length&&n>i[0].height*l){var e=false;var r=function(t){var n=i[t];var r=n.og.height*l,o=n.og.width*(1.5*(1/l));var s=Ef().fontFamily(n.f).fontSize(n.s).lineHeight(n.lh).width(o).height(r)(n.sentence);if(!s.truncated){n.width=Math.ceil(w(s.lines.map(function(t){return kf(t,{"font-family":n.f,"font-size":n.s})})))+n.s;n.height=s.lines.length*(n.lh+1)}else{e=true;return"break"}};for(var o=0;o<i.length;o++){var s=r(o);if(s==="break")break}if(!e){this._wrapRows()}}else{f=[];return}};this._wrapRows=function(){var t=this;f=[];var i=1,e=0;for(var r=0;r<this._lineData.length;r++){var o=t._lineData[r],s=o.width+t._padding*(o.width?2:1)+o.shapeWidth;if(k(f.map(function(t){return w(t,function(t){return w([t.height,t.shapeHeight])})}))>n){f=[];break}if(e+s<u){e+=s}else if(s>u){f=[];t._wrapLines();break}else{e=s;i++}if(!f[i-1]){f[i-1]=[]}f[i-1].push(o)}};this._wrapRows();if(!f.length||k(f,this._rowHeight.bind(this))+this._padding>n){h=k(this._lineData.map(function(t){return t.shapeWidth+e._padding*1}))-this._padding;for(var _=0;_<this._lineData.length;_++){e._lineData[_].width=0;e._lineData[_].height=0}this._wrapRows()}if(f.length&&k(f,this._rowHeight.bind(this))+this._padding<n){f.forEach(function(t,i){t.forEach(function(t){if(i){t.y=k(f.slice(0,i),e._rowHeight.bind(e))}})});h=w(f,function(t){return k(t,function(t){return t.shapeWidth+e._padding*(t.width?2:1)+t.width})})-this._padding}}var p=w(this._lineData,function(t,i){return w([t.height,e._fetchConfig("height",t.data,i)])+t.y})+this._titleHeight,d=h;this._outerBounds.width=d;this._outerBounds.height=p;var g=this._padding,v=this._padding;if(this._align==="center"){g=(this._width-d)/2}else if(this._align==="right"){g=this._width-this._padding-d}if(this._verticalAlign==="middle"){v=(this._height-p)/2}else if(this._verticalAlign==="bottom"){v=this._height-this._padding-p}this._outerBounds.x=g;this._outerBounds.y=v;(new Bf).data(this._title?[{text:this._title}]:[]).duration(this._duration).select(this._group.node()).textAnchor({left:"start",center:"middle",right:"end"}[this._align]).width(this._width-this._padding*2).x(this._padding).y(this._outerBounds.y).config(this._titleConfig).render();this._shapes=[];var y=this._shapeConfig,m={
id:function(t){return t.id},label:function(t){return t.label},lineHeight:function(t){return t.lH}};var b=this._data.map(function(t,i){var n={__d3plus__:true,data:t,i:i,id:e._id(t,i),label:e._lineData[i].width?e._label(t,i):false,lH:e._lineHeight(t,i),shape:e._shape(t,i)};var r=function(e){if(e!=="labelBounds"&&{}.hasOwnProperty.call(y,e)){if(typeof y[e]==="function"){n[e]=y[e](t,i);m[e]=function(t){return t[e]}}else if(e==="on"){m[e]={};var r=function(t){if({}.hasOwnProperty.call(y[e],t)){m[e][t]=function(i){if(!y[e][t]){return}y[e][t].bind(this)(i.data,i.i)}}};for(var o in y[e])r(o)}}};for(var o in y)r(o);return n});this._shapes=[];["Circle","Rect"].forEach(function(t){e._shapes.push((new Fm[t]).data(b.filter(function(i){return i.shape===t})).duration(e._duration).labelPadding(0).select(e._group.node()).verticalAlign("top").config(Object.assign({},y,m)).render())});if(i){setTimeout(i,this._duration+100)}return this};i.prototype.active=function t(i){this._shapes.forEach(function(t){return t.active(i)});return this};i.prototype.align=function t(i){return arguments.length?(this._align=i,this):this._align};i.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};i.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};i.prototype.height=function t(i){return arguments.length?(this._height=i,this):this._height};i.prototype.hover=function t(i){this._shapes.forEach(function(t){return t.hover(i)});return this};i.prototype.id=function t(i){return arguments.length?(this._id=i,this):this._id};i.prototype.label=function t(i){return arguments.length?(this._label=typeof i==="function"?i:Cu(i),this):this._label};i.prototype.outerBounds=function t(){return this._outerBounds};i.prototype.padding=function t(i){return arguments.length?(this._padding=i,this):this._padding};i.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};i.prototype.shape=function t(i){return arguments.length?(this._shape=typeof i==="function"?i:Cu(i),this):this._shape};i.prototype.shapeConfig=function t(i){return arguments.length?(this._shapeConfig=Object.assign(this._shapeConfig,i),this):this._shapeConfig};i.prototype.title=function t(i){return arguments.length?(this._title=i,this):this._title};i.prototype.titleConfig=function t(i){return arguments.length?(this._titleConfig=Object.assign(this._titleConfig,i),this):this._titleConfig};i.prototype.verticalAlign=function t(i){return arguments.length?(this._verticalAlign=i,this):this._verticalAlign};i.prototype.width=function t(i){return arguments.length?(this._width=i,this):this._width};return i}(xu);var yx=function(t){function i(){var i=this;t.call(this);this._brushing=true;this._brushFilter=function(){return!yo.button&&yo.detail<2};this._domain=[2001,2010];this._gridSize=0;this._handleConfig={fill:"#444"};this._handleSize=6;this._height=100;this._on={};this.orient("bottom");this._scale="time";this._selectionConfig={fill:"#777","stroke-width":0};this._shape="Rect";this._shapeConfig=Object.assign({},this._shapeConfig,{height:10,width:function(t){return i._domain.map(function(t){return X_(t).getTime()}).includes(t.id)?2:1}});this._snapping=true}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._brushBrush=function t(){if(yo.sourceEvent&&yo.sourceEvent.offsetX&&yo.selection!==null&&(!this._brushing||this._snapping)){var i=(this._brushing?yo.selection:[yo.selection[0],yo.selection[0]]).map(this._d3Scale.invert).map(Number);var e=this._availableTicks.map(Number);i[0]=X_(wu(i[0],e));i[1]=X_(wu(i[1],e));var n=+i[0]===+i[1],r=n?i[0]:i;if(this._selection&&JSON.stringify(r)!==JSON.stringify(this._selection)){this._selection=r;if(this._on.end){this._on.end(r)}}var o=i.map(this._d3Scale);if(n){o[0]-=.1;o[1]+=.1}this._brushGroup.call(this._brush.move,o)}this._brushStyle();if(this._on.brush){this._on.brush()}};i.prototype._brushEnd=function t(){if(!yo.sourceEvent){return}var i=(yo.selection&&this._brushing?yo.selection:[yo.sourceEvent.offsetX,yo.sourceEvent.offsetX]).map(this._d3Scale.invert).map(Number);var e=this._availableTicks.map(Number);i[0]=X_(wu(i[0],e));i[1]=X_(wu(i[1],e));var n=+i[0]===+i[1];if(this._brushing||!this._snapping){var r=i.map(this._d3Scale);if(n){r[0]-=.1;r[1]+=.1}this._brushGroup.transition(this._transition).call(this._brush.move,r)}this._brushStyle();var o=n?i[0]:i;if(JSON.stringify(o)!==JSON.stringify(this._selection)){if(this._on.end){this._on.end(o)}this._selection=o}};i.prototype._brushStart=function t(){if(yo.sourceEvent!==null&&(!this._brushing||this._snapping)){var i=(yo.selection&&this._brushing?yo.selection:[yo.sourceEvent.offsetX,yo.sourceEvent.offsetX]).map(this._d3Scale.invert).map(Number);var e=this._availableTicks.map(Number);i[0]=X_(wu(i[0],e));i[1]=X_(wu(i[1],e));var n=+i[0]===+i[1];var r=i.map(this._d3Scale);if(n){r[0]-=.1;r[1]+=.1}this._brushGroup.call(this._brush.move,r)}this._brushStyle();if(this._on.start){this._on.start()}};i.prototype._brushStyle=function t(){var i=this._position;var e=i.height;var n=this._shape==="Circle"?this._shapeConfig.r*2:this._shape==="Rect"?this._shapeConfig[e]:this._tickSize;this._brushGroup.selectAll(".overlay").attr("cursor",this._brushing?"crosshair":"pointer");this._brushGroup.selectAll(".selection").call(mu,this._selectionConfig).attr("height",n);this._brushGroup.selectAll(".handle").call(mu,this._handleConfig).attr("height",n+this._handleSize)};i.prototype.render=function i(e){t.prototype.render.call(this,e);var n=this._position;var r=n.height;var o=n.y;var s=this._outerBounds[o],a=this._d3Scale.range();var h=this._brush=am().extent([[a[0],s],[a[1],s+this._outerBounds[r]]]).filter(this._brushFilter).handleSize(this._handleSize).on("start",this._brushStart.bind(this)).on("brush",this._brushBrush.bind(this)).on("end",this._brushEnd.bind(this));var u=this._availableTicks[this._availableTicks.length-1];var l=(this._selection===void 0?[u,u]:this._selection instanceof Array?this._selection.slice():[this._selection,this._selection]).map(X_).map(this._d3Scale);if(l[0]===l[1]){l[0]-=.1;l[1]+=.1}this._brushGroup=Au("g.brushGroup",{parent:this._group});this._brushGroup.call(h).transition(this._transition).call(h.move,l);return this};i.prototype.brushing=function t(i){return arguments.length?(this._brushing=i,this):this._brushing};i.prototype.brushFilter=function t(i){return arguments.length?(this._brushFilter=i,this):this._brushFilter};i.prototype.handleConfig=function t(i){return arguments.length?(this._handleConfig=Object.assign(this._handleConfig,i),this):this._handleConfig};i.prototype.handleSize=function t(i){return arguments.length?(this._handleSize=i,this):this._handleSize};i.prototype.on=function t(i,e){return arguments.length===2?(this._on[i]=e,this):arguments.length?typeof i==="string"?this._on[i]:(this._on=Object.assign({},this._on,i),this):this._on};i.prototype.selectionConfig=function t(i){return arguments.length?(this._selectionConfig=Object.assign(this._selectionConfig,i),this):this._selectionConfig};i.prototype.selection=function t(i){return arguments.length?(this._selection=i,this):this._selection};i.prototype.snapping=function t(i){return arguments.length?(this._snapping=i,this):this._snapping};return i}(V_);var mx=function(){var t=this._history.length;var i=Au("g.d3plus-viz-back",{parent:this._select,transition:this._transition,update:{transform:"translate("+this._margin.left+", "+this._margin.top+")"}}).node();this._backClass.data(t?[{text:Yl.t("Back",{lng:this._locale}),x:this._padding*2,y:0}]:[]).select(i).config(this._backConfig).render();this._margin.top+=t?this._backClass.fontSize()()+this._padding:0};var bx=function(t,i,e){if(e===void 0)e=[];if(e&&!(e instanceof Array)){e=[e]}var n=z().key(i).entries(t);if(n.length<2){return{data:[],id:i}}var r,o;if(e.length){var s=n.length;var a=function(i){var a=n.map(function(t){return Array.from(new Set(t.values.map(function(t){return e[i](t)})))}),h=k(a,function(t){return t.length}),u=new Set(A(a)).size;if(h===s&&u===s||i===e.length-1){o=e[i];r=z().key(o).entries(t).map(function(t){return Xl(t.values)});return"break"}};for(var h=0;h<e.length;h++){var u=a(h);if(u==="break")break}}else{o=i;r=n.map(function(t){return Xl(t.values)})}return{data:r,id:o}};var xx=function(t){var i=this;if(t===void 0)t=[];this._legendData=[];if(t.length){var e=z();for(var n=0;n<=this._drawDepth;n++){e.key(i._groupBy[n])}e.rollup(function(t){return i._legendData.push(Xl(t,i._aggs))}).entries(t)}var r=Au("g.d3plus-viz-legend",{condition:this._legend,parent:this._select,transition:this._transition}).node();if(this._legend){var o=bx(this._legendData,this._shapeConfig.fill,this._groupBy);this._legendClass.id(o.id).duration(this._duration).data(o.data.length>1?o.data:[]).height(this._height-this._margin.bottom).label(this._label||o.id).select(r).verticalAlign("bottom").width(this._width).shapeConfig(this._shapeConfig).shapeConfig({on:Object.keys(this._on).filter(function(t){return!t.includes(".")||t.includes(".legend")}).reduce(function(t,e){t[e]=i._on[e];return t},{})}).config(this._legendConfig).render();var s=this._legendClass.outerBounds();if(s.height){this._margin.bottom+=s.height+this._legendClass.padding()*2}}};var wx=function(t){if(t===void 0)t=[];var i=this._time&&this._timeline;var e=i?Array.from(new Set(this._data.map(this._time))).map(X_):[];i=i&&e.length>1;var n=Au("g.d3plus-viz-timeline",{condition:i,parent:this._select,transition:this._transition}).node();if(i){var r=this._timelineClass.domain(h(e)).duration(this._duration).height(this._height-this._margin.bottom).select(n).ticks(e.sort(function(t,i){return+t-+i})).width(this._width);if(r.selection()===void 0){var o=h(t.map(this._time).map(X_));if(o[0]===o[1]){r.selection(o[0])}else{r.selection(o)}}r.config(this._timelineConfig).render();this._margin.bottom+=r.outerBounds().height+r.padding()*2}};var Cx=function(t){if(t===void 0)t=[];var i=this._title?this._title(t):false;var e=Au("g.d3plus-viz-title",{enter:{transform:"translate("+this._margin.left+", "+this._margin.top+")"},parent:this._select,transition:this._transition,update:{transform:"translate("+this._margin.left+", "+this._margin.top+")"}}).node();this._titleClass.data(i?[{text:i}]:[]).select(e).width(this._width-this._margin.left-this._margin.right).config(this._titleConfig).render();this._margin.top+=i?e.getBBox().height+this._padding:0};var Ax=function(t){if(t===void 0)t=[];var i=typeof this._total==="function"?k(t.map(this._total)):this._total===true&&this._size?k(t.map(this._size)):false;var e=Au("g.d3plus-viz-total",{enter:{transform:"translate("+this._margin.left+", "+this._margin.top+")"},parent:this._select,transition:this._transition,update:{transform:"translate("+this._margin.left+", "+this._margin.top+")"}}).node();var n=typeof i==="number";this._totalClass.data(n?[{text:Yl.t("Total",{lng:this._locale})+": "+i}]:[]).select(e).width(this._width-this._margin.left-this._margin.right).config(this._totalConfig).render();this._margin.top+=n?e.getBBox().height+this._padding:0};function Sx(t,i){if(t.tagName===undefined||["BODY","HTML"].indexOf(t.tagName)>=0){var e=window["inner"+(i.charAt(0).toUpperCase()+i.slice(1))];var n=Zs(t);if(i==="width"){e-=parseFloat(n.style("margin-left"),10);e-=parseFloat(n.style("margin-right"),10);e-=parseFloat(n.style("padding-left"),10);e-=parseFloat(n.style("padding-right"),10)}else{e-=parseFloat(n.style("margin-top"),10);e-=parseFloat(n.style("margin-bottom"),10);e-=parseFloat(n.style("padding-top"),10);e-=parseFloat(n.style("padding-bottom"),10)}return e}else{var r=parseFloat(Zs(t).style(i),10);if(typeof r==="number"&&r>0){return r}else{return Sx(t.parentNode,i)}}}var kx=function(t){return[Sx(t,"width"),Sx(t,"height")]};var Ex=function(t,i){this._select.style("cursor","auto");if(this._drawDepth<this._groupBy.length-1){var e=this._groupBy[this._drawDepth],n=e(t,i);this.hover(false);if(this._tooltip){this._tooltipClass.data([]).render()}this._history.push({depth:this._depth,filter:this._filter});this.config({depth:this._drawDepth+1,filter:function(t,i){return e(t,i)===n}}).render()}};var Bx=function(t,i){var e=this;var n=this._ids(t,i);this.hover(function(t,i){var r=e._ids(t,i);return n[n.length-1]===r[n.length-1]})};var Dx=function(t,i,e){if(e===void 0)e={};if(this._tooltip){this._select.style("cursor","pointer");this._tooltipClass.data([t]).footer(this._drawDepth<this._groupBy.length-1?Yl.t("Click to Expand",{lng:this._locale}):this._active&&this._active(t,i)?!this._focus||this._focus===this._id(t,i)?Yl.t("Click to Remove Highlight",{lng:this._locale}):Yl.t("Click to Highlight",{lng:this._locale}):Yl.t("Click to Highlight",{lng:this._locale})).title(this._drawLabel).translate(Do(Zs("html").node())).config(e).config(this._tooltipConfig).render()}};var Mx=function(t,i){var e=this;if(this._hover&&this._drawDepth>=this._groupBy.length-1){if(this._active&&this._active(t,i)){this.active(false);Bx.bind(this)(t,i)}else{var n=this._ids(t,i);this.active(function(t,i){var r=e._ids(t,i);return n[n.length-1]===r[n.length-1]})}Dx.bind(this)(t,i,{title:this._legendClass.label()})}};var zx=function(t,i){var e=this;if(this._hover&&this._drawDepth>=this._groupBy.length-1){if(this._active&&this._active(t,i)){this.active(false);Bx.bind(this)(t,i)}else{var n=this._ids(t,i);this.active(function(t,i){var r=e._ids(t,i);return n[n.length-1]===r[n.length-1]})}Dx.bind(this)(t,i)}};var Fx=function(){this.hover(false);this._select.style("cursor","auto");if(this._tooltip){this._tooltipClass.data([]).render()}};var Ox=function(t,i){Dx.bind(this)(t,i,{title:this._legendClass.label()})};var Nx=function(t,i){Dx.bind(this)(t,i)};var Tx=function(t){function i(){var i=this;t.call(this);this._aggs={};this._backClass=(new Bf).on("click",function(){if(i._history.length){i.config(i._history.pop()).render()}else{i.depth(i._drawDepth-1).filter(false).render()}}).on("mousemove",function(){return i._backClass.select().style("cursor","pointer")});this._backConfig={fontSize:10,resize:false};this._data=[];this._duration=600;this._history=[];this._groupBy=[gu("id")];this._legend=true;this._legendConfig={shapeConfig:{fontResize:false}};this._legendClass=new vx;this._locale="en-US";this._on={click:Ex.bind(this),"click.legend":Mx.bind(this),"click.shape":zx.bind(this),mouseenter:Bx.bind(this),"mousemove.legend":Ox.bind(this),"mousemove.shape":Nx.bind(this),mouseleave:Fx.bind(this)};this._padding=5;this._shapeConfig={fill:function(t,e){return ef(i._groupBy[0](t,e))},opacity:Cu(1),stroke:function(t,e){return ft(ef(i._groupBy[0](t,e))).darker()},strokeWidth:Cu(0)};this._timeline=true;this._timelineClass=(new yx).align("end").on("end",function(t){if(!(t instanceof Array)){t=[t,t]}t=t.map(Number);i._timelineClass.selection(t);i.timeFilter(function(e){var n=X_(i._time(e)).getTime();return n>=t[0]&&n<=t[1]}).render()});this._titleClass=new Bf;this._titleConfig={fontSize:12,resize:false,textAnchor:"middle"};this._timelineConfig={};this._tooltip=true;this._tooltipClass=new fm;this._tooltipConfig={duration:50,pointerEvents:"none"};this._totalClass=new Bf;this._totalConfig={fontSize:10,resize:false,textAnchor:"middle"}}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._shapeConfigPrep=function t(i){var e=this;if(i===void 0)i=false;var n={duration:this._duration};var r=function(t){if({}.hasOwnProperty.call(e._shapeConfig,t)){if(typeof e._shapeConfig[t]==="function"){n[t]=function(i,n,r){return e._shapeConfig[t](i.__d3plus__?i.data:i,i.__d3plus__?i.i:n,r)}}else{n[t]=e._shapeConfig[t]}}};for(var o in this._shapeConfig)r(o);n.on=Object.keys(this._on).filter(function(t){return!t.includes(".")||t.includes(".shape")}).reduce(function(t,i){t[i]=function(t,n){return e._on[i]?e._on[i](t.__d3plus__?t.data:t,t.__d3plus__?t.i:n):null};return t},{});if(i&&this._shapeConfig[i]){n=yu(n,this._shapeConfig[i])}return n};i.prototype.render=function t(i){var e=this;this._margin={bottom:0,left:0,right:0,top:0};this._transition=Ph().duration(this._duration);if(this._select===void 0||this._select.node().tagName.toLowerCase()!=="svg"){var n=this._select===void 0?Zs("body"):this._select;var r=kx(n.node());var o=r[0];var s=r[1];if(!this._width){this.width(o)}if(!this._height){this.height(s)}o=this._width;s=this._height;this.select(n.append("svg").style("width",o+"px").style("height",s+"px").style("display","block").node())}if(!this._width||!this._height){var a=kx(this._select.node());var h=a[0];var u=a[1];if(!this._width){this.width(h)}if(!this._height){this.height(u)}}var l=this;this._drawDepth=this._depth!==void 0?this._depth:this._groupBy.length-1;this._id=this._groupBy[this._drawDepth];this._ids=function(t,i){return e._groupBy.map(function(e){return e(t.__d3plus__?t.data:t,t.__d3plus__?t.i:i)}).filter(function(t){return t!==void 0&&t.constructor!==Array})};this._drawLabel=this._label||function(t,i){var e=l._ids(t,i).filter(function(t){return t&&t.constructor!==Array});return e[e.length-1]};if(this._time&&this._timeFilter===void 0){var f=this._data.map(this._time).map(X_);var c=this._data[0],_=0;if(this._discrete&&"_"+this._discrete in this&&this["_"+this._discrete](c,_)===this._time(c,_)){this._timeFilter=function(){return true}}else{var p=+w(f);this._timeFilter=function(t,i){return+X_(e._time(t,i))===p}}}this._filteredData=[];var d=[];if(this._data.length){d=this._timeFilter?this._data.filter(this._timeFilter):this._data;if(this._filter){d=d.filter(this._filter)}var g=z();for(var v=0;v<=this._drawDepth;v++){g.key(e._groupBy[v])}if(this._discrete&&"_"+this._discrete in this){g.key(this["_"+this._discrete])}g.rollup(function(t){return e._filteredData.push(Xl(t,e._aggs))}).entries(d)}wx.bind(this)(d);xx.bind(this)(d);mx.bind(this)();Cx.bind(this)(d);Ax.bind(this)(d);this._shapes=[];if(i){setTimeout(i,this._duration+100)}return this};i.prototype.active=function t(i){this._active=i;this._shapes.forEach(function(t){return t.active(i)});if(this._legend){this._legendClass.active(i)}return this};i.prototype.aggs=function t(i){return arguments.length?(this._aggs=yu(this._aggs,i),this):this._aggs};i.prototype.backConfig=function t(i){return arguments.length?(this._backConfig=yu(this._backConfig,i),this):this._backConfig};i.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};i.prototype.depth=function t(i){return arguments.length?(this._depth=i,this):this._depth};i.prototype.discrete=function t(i){return arguments.length?(this._discrete=i,this):this._discrete};i.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};i.prototype.filter=function t(i){return arguments.length?(this._filter=i,this):this._filter};i.prototype.groupBy=function t(i){var e=this;if(!arguments.length){return this._groupBy}if(!(i instanceof Array)){i=[i]}return this._groupBy=i.map(function(t){if(typeof t==="function"){return t}else{if(!e._aggs[t]){e._aggs[t]=function(t){var i=Array.from(new Set(t));return i.length===1?i[0]:i}}return gu(t)}}),this};i.prototype.height=function t(i){return arguments.length?(this._height=i,this):this._height};i.prototype.hover=function t(i){var e=this;var n=this._hover=i;if(typeof i==="function"){var r=A(this._shapes.map(function(t){return t.data()}));r=r.concat(this._legendClass.data());var o=i?r.filter(i):[];var s=[];o.map(this._ids).forEach(function(t){for(var i=1;i<=t.length;i++){s.push(JSON.stringify(t.slice(0,i)))}});s=s.filter(function(t,i){return s.indexOf(t)===i});if(s.length){n=function(t,i){return s.includes(JSON.stringify(e._ids(t,i)))}}}this._shapes.forEach(function(t){return t.hover(n)});if(this._legend){this._legendClass.hover(n)}return this};i.prototype.label=function t(i){return arguments.length?(this._label=typeof i==="function"?i:Cu(i),this):this._label};i.prototype.legend=function t(i){return arguments.length?(this._legend=i,this):this._legend};i.prototype.legendConfig=function t(i){return arguments.length?(this._legendConfig=i,this):this._legendConfig};i.prototype.locale=function t(i){return arguments.length?(this._locale=i,this):this._locale};i.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};i.prototype.shape=function t(i){return arguments.length?(this._shape=typeof i==="function"?i:Cu(i),this):this._shape};i.prototype.shapeConfig=function t(i){return arguments.length?(this._shapeConfig=yu(this._shapeConfig,i),this):this._shapeConfig};i.prototype.time=function t(i){if(arguments.length){if(typeof i==="function"){this._time=i}else{this._time=gu(i);if(!this._aggs[i]){this._aggs[i]=function(t){var i=Array.from(new Set(t));return i.length===1?i[0]:i}}}return this}else{return this._time}};i.prototype.timeFilter=function t(i){return arguments.length?(this._timeFilter=i,this):this._timeFilter};i.prototype.timeline=function t(i){return arguments.length?(this._timeline=i,this):this._timeline};i.prototype.timelineConfig=function t(i){return arguments.length?(this._timelineConfig=yu(this._timelineConfig,i),this):this._timelineConfig};i.prototype.title=function t(i){return arguments.length?(this._title=typeof i==="function"?i:Cu(i),this):this._title};i.prototype.titleConfig=function t(i){return arguments.length?(this._titleConfig=yu(this._titleConfig,i),this):this._titleConfig};i.prototype.tooltip=function t(i){return arguments.length?(this._tooltip=i,this):this._tooltip};i.prototype.tooltipConfig=function t(i){return arguments.length?(this._tooltipConfig=yu(this._tooltipConfig,i),this):this._tooltipConfig};i.prototype.total=function t(i){return arguments.length?(this._total=typeof i==="function"?i:gu(i),this):this._total};i.prototype.totalConfig=function t(i){return arguments.length?(this._totalConfig=yu(this._totalConfig,i),this):this._totalConfig};i.prototype.width=function t(i){return arguments.length?(this._width=i,this):this._width};return i}(xu);var jx=function(t){function i(){var i=this;t.call(this);this._brushFilter=function(){return!yo.button&&yo.detail<2};this._handleConfig={fill:"#444"};this._handleSize=6;this._links=[];this._nodes=[];this._on["click.shape"]=function(t,e){i._tooltipClass.data([]).render();if(i._hover&&i._drawDepth>=i._groupBy.length-1){if(i._focus&&i._focus===t.id){i.active(false);i._on.mouseenter.bind(i)(t,e);i._focus=undefined;i._zoomToBounds(null)}else{var n=i._nodeGroupBy&&i._nodeGroupBy[i._drawDepth](t,e)?i._nodeGroupBy[i._drawDepth](t,e):i._id(t,e),r=i._linkLookup[n],o=i._nodeLookup[n];var s=[o.id],a=[o.x-o.r,o.x+o.r],h=[o.y-o.r,o.y+o.r];r.forEach(function(t){s.push(t.id);if(t.x-t.r<a[0]){a[0]=t.x-t.r}if(t.x+t.r>a[1]){a[1]=t.x+t.r}if(t.y-t.r<h[0]){h[0]=t.y-t.r}if(t.y+t.r>h[1]){h[1]=t.y+t.r}});var u=i._ids(t,e);i.active(function(t,e){if(t.source&&t.target){return t.source.id===o.id||t.target.id===o.id}else{return s.includes(i._ids(t,e)[u.length-1])}});i._focus=t.id;i._zoomToBounds([[a[0],h[0]],[a[1],h[1]]])}}};this._on["click.legend"]=function(t,e){var n=i._id(t);var r=i._ids(t);r=r[r.length-1];if(i._hover&&i._drawDepth>=i._groupBy.length-1){if(i._focus&&i._focus===n){i.active(false);i._on.mouseenter.bind(i)(t,e);i._focus=undefined;i._zoomToBounds(null)}else{var o=n.map(function(t){return i._nodeLookup[t]});var s=[r],a=[o[0].x-o[0].r,o[0].x+o[0].r],h=[o[0].y-o[0].r,o[0].y+o[0].r];o.forEach(function(t){s.push(t.id);if(t.x-t.r<a[0]){a[0]=t.x-t.r}if(t.x+t.r>a[1]){a[1]=t.x+t.r}if(t.y-t.r<h[0]){h[0]=t.y-t.r}if(t.y+t.r>h[1]){h[1]=t.y+t.r}});i.active(function(t,e){if(t.source&&t.target){return s.includes(t.source.id)&&s.includes(t.target.id)}else{var n=i._ids(t,e);return s.includes(n[n.length-1])}});i._focus=n;i._zoomToBounds([[a[0],h[0]],[a[1],h[1]]])}i._on["mousemove.legend"].bind(i)(t,e)}};this._selectionConfig={fill:"#777","stroke-width":0};this._sizeMin=5;this._sizeScale="sqrt";this._shape=Cu("Circle");this._shapeConfig=yu(this._shapeConfig,{Path:{fill:"none",label:false,stroke:"#eee",strokeWidth:1},textAnchor:"middle",verticalAlign:"middle"});this._x=gu("x");this._y=gu("y");this._zoom=true;this._zoomBehavior=vy();this._zoomBrush=hm().on("start",this._brushStart.bind(this)).on("brush",this._brushBrush.bind(this)).on("end",this._brushEnd.bind(this));this._zoomMax=16;this._zoomPan=true;this._zoomScroll=true}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._brushBrush=function t(){this._brushStyle()};i.prototype._brushEnd=function t(){if(!yo.sourceEvent){return}console.log(yo.selection);this._brushStyle()};i.prototype._brushStart=function t(){this._brushStyle()};i.prototype._brushStyle=function t(){this._brushGroup.selectAll(".selection").call(mu,this._selectionConfig);this._brushGroup.selectAll(".handle").call(mu,this._handleConfig)};i.prototype._zoomed=function t(){this._zoomGroup.attr("transform",yo.transform)};i.prototype._zoomEvents=function t(i){if(i===void 0)i=false;if(i){this._brushGroup.style("display","inline");this._networkGroup.on(".zoom",null)}else if(this._zoom){this._brushGroup.style("display","none");this._networkGroup.call(this._zoomBehavior);if(!this._zoomScroll){this._networkGroup.on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("wheel.zoom",null)}if(!this._zoomPan){this._networkGroup.on("mousedown.zoom",null).on("mousemove.zoom",null).on("touchstart.zoom",null).on("touchmove.zoom",null)}}else{this._networkGroup.on(".zoom",null)}};i.prototype._zoomToBounds=function t(i){if(i){var e=this._zoomBehavior.translateExtent()[1];var n=e[0];var r=e[1];var o=i[1][0]-i[0][0],s=i[1][1]-i[0][1],a=(i[0][0]+i[1][0])/2,h=(i[0][1]+i[1][1])/2;var u=Math.max(1,Math.min(this._zoomMax,.9/Math.max(o/n,s/r)));var l=[n/2-u*a,r/2-u*h];var f=ly.translate(l[0],l[1]).scale(u);this._networkGroup.transition().duration(this._zoomBehavior.duration()).call(this._zoomBehavior.transform,f)}else{this._networkGroup.transition().duration(this._zoomBehavior.duration()).call(this._zoomBehavior.transform,ly)}};i.prototype.render=function i(e){var n=this;t.prototype.render.call(this,e);var r=this._height-this._margin.top-this._margin.bottom,o="translate("+this._margin.left+", "+this._margin.top+")",s=this._transition,a=this._width-this._margin.left-this._margin.right;var u=this._filteredData.reduce(function(t,i,e){t[n._id(i,e)]=i;return t},{});var l=this._nodes.reduce(function(t,i,e){t[n._nodeGroupBy?n._nodeGroupBy[n._drawDepth](i,e):n._id(i,e)]=i;return t},{});l=Array.from(new Set(Object.keys(u).concat(Object.keys(l)))).map(function(t,i){var e=u[t],r=l[t];return{__d3plus__:true,data:e||r,i:i,id:t,fx:e!==void 0&&n._x(e)!==void 0?n._x(e):n._x(r),fy:e!==void 0&&n._y(e)!==void 0?n._y(e):n._y(r),node:r,r:n._size?e!==void 0&&n._size(e)!==void 0?n._size(e):n._size(r):1,shape:e!==void 0&&n._shape(e)!==void 0?n._shape(e):n._shape(r)}});var f=h(l.map(function(t){return t.fx})),c=h(l.map(function(t){return t.fy}));var _=me().domain(f).range([0,a]),p=me().domain(c).range([0,r]);var d=(f[1]-f[0])/(c[1]-c[0]),g=a/r;if(d>g){var v=r*g/d;p.range([(r-v)/2,r-(r-v)/2])}else{var y=a*d/g;_.range([(a-y)/2,a-(a-y)/2])}l.forEach(function(t){t.x=_(t.fx);t.y=p(t.fy)});var m=h(l.map(function(t){return t.r}));var b=this._sizeMax||S(A(l.map(function(t){return l.map(function(i){return t===i?null:Cm(t,i)})})))/2;var x=ro["scale"+this._sizeScale.charAt(0).toUpperCase()+this._sizeScale.slice(1)]().domain(m).range([m[0]===m[1]?b:S([b/2,this._sizeMin]),b]),w=_.domain(),C=p.domain();var k=w[1]-w[0],E=C[1]-C[0];l.forEach(function(t){var i=x(t.r);if(w[0]>_.invert(t.x-i)){w[0]=_.invert(t.x-i)}if(w[1]<_.invert(t.x+i)){w[1]=_.invert(t.x+i)}if(C[0]>p.invert(t.y-i)){C[0]=p.invert(t.y-i)}if(C[1]<p.invert(t.y+i)){C[1]=p.invert(t.y+i)}});var B=w[1]-w[0],D=C[1]-C[0];b*=S([k/B,E/D]);x.range([m[0]===m[1]?b:S([b/2,this._sizeMin]),b]);_.domain(w);p.domain(C);l.forEach(function(t){t.x=_(t.fx);t.fx=t.x;t.y=p(t.fy);t.fy=t.y;t.r=x(t.r);t.width=t.r*2;t.height=t.r*2});var M=this._nodeLookup=l.reduce(function(t,i){t[i.id]=i;return t},{});var F=l.map(function(t){return t.node});var O=this._links.map(function(t){return{source:typeof t.source==="number"?l[F.indexOf(n._nodes[t.source])]:M[t.source.id],target:typeof t.target==="number"?l[F.indexOf(n._nodes[t.target])]:M[t.target.id]}});this._linkLookup=O.reduce(function(t,i){if(!t[i.source.id]){t[i.source.id]=[]}t[i.source.id].push(i.target);if(!t[i.target.id]){t[i.target.id]=[]}t[i.target.id].push(i.source);return t},{});this._networkGroup=this._select.selectAll("svg.d3plus-network-svg").data([0]);this._networkGroup=this._networkGroup.enter().append("svg").attr("class","d3plus-network-svg").attr("opacity",0).attr("width",a).attr("height",r).style("background-color","transparent").merge(this._networkGroup);this._networkGroup.transition(this._transition).attr("opacity",1).attr("width",a).attr("height",r);var N=this._networkGroup.selectAll("rect.d3plus-network-hitArea").data([0]);N.enter().append("rect").attr("class","d3plus-network-hitArea").merge(N).attr("width",a).attr("height",r).attr("fill","transparent");this._zoomGroup=this._networkGroup.selectAll("g.d3plus-network-zoomGroup").data([0]);this._zoomGroup=this._zoomGroup.enter().append("g").attr("class","d3plus-network-zoomGroup").merge(this._zoomGroup);this._zoomBrush.extent([[0,0],[a,r]]).filter(this._brushFilter).handleSize(this._handleSize);var T=this._select.selectAll("g.brush").data([0]);this._brushGroup=T.enter().append("g").attr("class","brush").merge(T).call(this._zoomBrush);this._zoomBehavior.scaleExtent([1,this._zoomMax]).translateExtent([[0,0],[a,r]]).on("zoom",this._zoomed.bind(this));var j=this._zoomGroup;this._shapes.push((new Mm).config(this._shapeConfig).config(this._shapeConfig.Path).d(function(t){return"M"+t.source.x+","+t.source.y+" "+t.target.x+","+t.target.y}).data(O).select(Au("g.d3plus-network-links",{parent:j,transition:s,enter:{transform:o},update:{transform:o}}).node()).render());var P={label:function(t){return n._drawLabel(t.data||t.node,t.i)},select:Au("g.d3plus-network-nodes",{parent:j,transition:s,enter:{transform:o},update:{transform:o}}).node()};z().key(function(t){return t.shape}).entries(l).forEach(function(t){n._shapes.push((new Fm[t.key]).config(n._shapeConfigPrep(t.key)).config(P).data(t.values).render())});this._zoomEvents();return this};i.prototype.links=function t(i){return arguments.length?(this._links=i,this):this._links};i.prototype.nodeGroupBy=function t(i){var e=this;if(!arguments.length){return this._nodeGroupBy}if(!(i instanceof Array)){i=[i]}return this._nodeGroupBy=i.map(function(t){if(typeof t==="function"){return t}else{if(!e._aggs[t]){e._aggs[t]=function(t){var i=Array.from(new Set(t));return i.length===1?i[0]:i}}return gu(t)}}),this};i.prototype.nodes=function t(i){return arguments.length?(this._nodes=i,this):this._nodes};i.prototype.size=function t(i){return arguments.length?(this._size=typeof i==="function"||!i?i:gu(i),this):this._size};i.prototype.sizeMax=function t(i){return arguments.length?(this._sizeMax=i,this):this._sizeMax};i.prototype.sizeMin=function t(i){return arguments.length?(this._sizeMin=i,this):this._sizeMin};i.prototype.sizeScale=function t(i){return arguments.length?(this._sizeScale=i,this):this._sizeScale};i.prototype.x=function t(i){if(arguments.length){if(typeof i==="function"){this._x=i}else{this._x=gu(i);if(!this._aggs[i]){this._aggs[i]=function(t){return C(t)}}}return this}else{return this._x}};i.prototype.y=function t(i){if(arguments.length){if(typeof i==="function"){this._y=i}else{this._y=gu(i);if(!this._aggs[i]){this._aggs[i]=function(t){return C(t)}}}return this}else{return this._y}};i.prototype.zoom=function t(i){return arguments.length?(this._zoom=i,this):this._zoom};i.prototype.zoomMax=function t(i){return arguments.length?(this._zoomMax=i,this):this._zoomMax};i.prototype.zoomPan=function t(i){return arguments.length?(this._zoomPan=i,this):this._zoomPan};i.prototype.zoomScroll=function t(i){return arguments.length?(this._zoomScroll=i,this):this._zoomScroll};return i}(Tx);var Px=function(t){function i(){var i=this;t.call(this);this._brushing=true;this._brushFilter=function(){return!yo.button&&yo.detail<2;
};this._domain=[2001,2010];this._gridSize=0;this._handleConfig={fill:"#444"};this._handleSize=6;this._height=100;this._on={};this.orient("bottom");this._scale="time";this._selectionConfig={fill:"#777","stroke-width":0};this._shape="Rect";this._shapeConfig=Object.assign({},this._shapeConfig,{height:10,width:function(t){return i._domain.map(function(t){return X_(t).getTime()}).includes(t.id)?2:1}});this._snapping=true}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._brushBrush=function t(){if(yo.sourceEvent&&yo.sourceEvent.offsetX&&yo.selection!==null&&(!this._brushing||this._snapping)){var i=(this._brushing?yo.selection:[yo.selection[0],yo.selection[0]]).map(this._d3Scale.invert).map(Number);var e=this._availableTicks.map(Number);i[0]=X_(wu(i[0],e));i[1]=X_(wu(i[1],e));var n=+i[0]===+i[1],r=n?i[0]:i;if(this._selection&&JSON.stringify(r)!==JSON.stringify(this._selection)){this._selection=r;if(this._on.end){this._on.end(r)}}var o=i.map(this._d3Scale);if(n){o[0]-=.1;o[1]+=.1}this._brushGroup.call(this._brush.move,o)}this._brushStyle();if(this._on.brush){this._on.brush()}};i.prototype._brushEnd=function t(){if(!yo.sourceEvent){return}var i=(yo.selection&&this._brushing?yo.selection:[yo.sourceEvent.offsetX,yo.sourceEvent.offsetX]).map(this._d3Scale.invert).map(Number);var e=this._availableTicks.map(Number);i[0]=X_(wu(i[0],e));i[1]=X_(wu(i[1],e));var n=+i[0]===+i[1];if(this._brushing||!this._snapping){var r=i.map(this._d3Scale);if(n){r[0]-=.1;r[1]+=.1}this._brushGroup.transition(this._transition).call(this._brush.move,r)}this._brushStyle();var o=n?i[0]:i;if(JSON.stringify(o)!==JSON.stringify(this._selection)){if(this._on.end){this._on.end(o)}this._selection=o}};i.prototype._brushStart=function t(){if(yo.sourceEvent!==null&&(!this._brushing||this._snapping)){var i=(yo.selection&&this._brushing?yo.selection:[yo.sourceEvent.offsetX,yo.sourceEvent.offsetX]).map(this._d3Scale.invert).map(Number);var e=this._availableTicks.map(Number);i[0]=X_(wu(i[0],e));i[1]=X_(wu(i[1],e));var n=+i[0]===+i[1];var r=i.map(this._d3Scale);if(n){r[0]-=.1;r[1]+=.1}this._brushGroup.call(this._brush.move,r)}this._brushStyle();if(this._on.start){this._on.start()}};i.prototype._brushStyle=function t(){var i=this._position;var e=i.height;var n=this._shape==="Circle"?this._shapeConfig.r*2:this._shape==="Rect"?this._shapeConfig[e]:this._tickSize;this._brushGroup.selectAll(".overlay").attr("cursor",this._brushing?"crosshair":"pointer");this._brushGroup.selectAll(".selection").call(mu,this._selectionConfig).attr("height",n);this._brushGroup.selectAll(".handle").call(mu,this._handleConfig).attr("height",n+this._handleSize)};i.prototype.render=function i(e){t.prototype.render.call(this,e);var n=this._position;var r=n.height;var o=n.y;var s=this._outerBounds[o],a=this._d3Scale.range();var h=this._brush=am().extent([[a[0],s],[a[1],s+this._outerBounds[r]]]).filter(this._brushFilter).handleSize(this._handleSize).on("start",this._brushStart.bind(this)).on("brush",this._brushBrush.bind(this)).on("end",this._brushEnd.bind(this));var u=this._availableTicks[this._availableTicks.length-1];var l=(this._selection===void 0?[u,u]:this._selection instanceof Array?this._selection.slice():[this._selection,this._selection]).map(X_).map(this._d3Scale);if(l[0]===l[1]){l[0]-=.1;l[1]+=.1}this._brushGroup=Au("g.brushGroup",{parent:this._group});this._brushGroup.call(h).transition(this._transition).call(h.move,l);return this};i.prototype.brushing=function t(i){return arguments.length?(this._brushing=i,this):this._brushing};i.prototype.brushFilter=function t(i){return arguments.length?(this._brushFilter=i,this):this._brushFilter};i.prototype.handleConfig=function t(i){return arguments.length?(this._handleConfig=Object.assign(this._handleConfig,i),this):this._handleConfig};i.prototype.handleSize=function t(i){return arguments.length?(this._handleSize=i,this):this._handleSize};i.prototype.on=function t(i,e){return arguments.length===2?(this._on[i]=e,this):arguments.length?typeof i==="string"?this._on[i]:(this._on=Object.assign({},this._on,i),this):this._on};i.prototype.selectionConfig=function t(i){return arguments.length?(this._selectionConfig=Object.assign(this._selectionConfig,i),this):this._selectionConfig};i.prototype.selection=function t(i){return arguments.length?(this._selection=i,this):this._selection};i.prototype.snapping=function t(i){return arguments.length?(this._snapping=i,this):this._snapping};return i}(V_);var Hx=function(){var t=this._history.length;var i=Au("g.d3plus-viz-back",{parent:this._select,transition:this._transition,update:{transform:"translate("+this._margin.left+", "+this._margin.top+")"}}).node();this._backClass.data(t?[{text:Yl.t("Back",{lng:this._locale}),x:this._padding*2,y:0}]:[]).select(i).config(this._backConfig).render();this._margin.top+=t?this._backClass.fontSize()()+this._padding:0};var Rx=function(t,i,e){if(e===void 0)e=[];if(e&&!(e instanceof Array)){e=[e]}var n=z().key(i).entries(t);if(n.length<2){return{data:[],id:i}}var r,o;if(e.length){var s=n.length;var a=function(i){var a=n.map(function(t){return Array.from(new Set(t.values.map(function(t){return e[i](t)})))}),h=k(a,function(t){return t.length}),u=new Set(A(a)).size;if(h===s&&u===s||i===e.length-1){o=e[i];r=z().key(o).entries(t).map(function(t){return Xl(t.values)});return"break"}};for(var h=0;h<e.length;h++){var u=a(h);if(u==="break")break}}else{o=i;r=n.map(function(t){return Xl(t.values)})}return{data:r,id:o}};var Lx=function(t){var i=this;if(t===void 0)t=[];this._legendData=[];if(t.length){var e=z();for(var n=0;n<=this._drawDepth;n++){e.key(i._groupBy[n])}e.rollup(function(t){return i._legendData.push(Xl(t,i._aggs))}).entries(t)}var r=Au("g.d3plus-viz-legend",{condition:this._legend,parent:this._select,transition:this._transition}).node();if(this._legend){var o=Rx(this._legendData,this._shapeConfig.fill,this._groupBy);this._legendClass.id(o.id).duration(this._duration).data(o.data.length>1?o.data:[]).height(this._height-this._margin.bottom).label(this._label||o.id).select(r).verticalAlign("bottom").width(this._width).shapeConfig(this._shapeConfig).shapeConfig({on:Object.keys(this._on).filter(function(t){return!t.includes(".")||t.includes(".legend")}).reduce(function(t,e){t[e]=i._on[e];return t},{})}).config(this._legendConfig).render();var s=this._legendClass.outerBounds();if(s.height){this._margin.bottom+=s.height+this._legendClass.padding()*2}}};var Wx=function(t){if(t===void 0)t=[];var i=this._time&&this._timeline;var e=i?Array.from(new Set(this._data.map(this._time))).map(X_):[];i=i&&e.length>1;var n=Au("g.d3plus-viz-timeline",{condition:i,parent:this._select,transition:this._transition}).node();if(i){var r=this._timelineClass.domain(h(e)).duration(this._duration).height(this._height-this._margin.bottom).select(n).ticks(e.sort(function(t,i){return+t-+i})).width(this._width);if(r.selection()===void 0){var o=h(t.map(this._time).map(X_));if(o[0]===o[1]){r.selection(o[0])}else{r.selection(o)}}r.config(this._timelineConfig).render();this._margin.bottom+=r.outerBounds().height+r.padding()*2}};var Gx=function(t){if(t===void 0)t=[];var i=this._title?this._title(t):false;var e=Au("g.d3plus-viz-title",{enter:{transform:"translate("+this._margin.left+", "+this._margin.top+")"},parent:this._select,transition:this._transition,update:{transform:"translate("+this._margin.left+", "+this._margin.top+")"}}).node();this._titleClass.data(i?[{text:i}]:[]).select(e).width(this._width-this._margin.left-this._margin.right).config(this._titleConfig).render();this._margin.top+=i?e.getBBox().height+this._padding:0};var Ux=function(t){if(t===void 0)t=[];var i=typeof this._total==="function"?k(t.map(this._total)):this._total===true&&this._size?k(t.map(this._size)):false;var e=Au("g.d3plus-viz-total",{enter:{transform:"translate("+this._margin.left+", "+this._margin.top+")"},parent:this._select,transition:this._transition,update:{transform:"translate("+this._margin.left+", "+this._margin.top+")"}}).node();var n=typeof i==="number";this._totalClass.data(n?[{text:Yl.t("Total",{lng:this._locale})+": "+i}]:[]).select(e).width(this._width-this._margin.left-this._margin.right).config(this._totalConfig).render();this._margin.top+=n?e.getBBox().height+this._padding:0};function Ix(t,i){if(t.tagName===undefined||["BODY","HTML"].indexOf(t.tagName)>=0){var e=window["inner"+(i.charAt(0).toUpperCase()+i.slice(1))];var n=Zs(t);if(i==="width"){e-=parseFloat(n.style("margin-left"),10);e-=parseFloat(n.style("margin-right"),10);e-=parseFloat(n.style("padding-left"),10);e-=parseFloat(n.style("padding-right"),10)}else{e-=parseFloat(n.style("margin-top"),10);e-=parseFloat(n.style("margin-bottom"),10);e-=parseFloat(n.style("padding-top"),10);e-=parseFloat(n.style("padding-bottom"),10)}return e}else{var r=parseFloat(Zs(t).style(i),10);if(typeof r==="number"&&r>0){return r}else{return Ix(t.parentNode,i)}}}var qx=function(t){return[Ix(t,"width"),Ix(t,"height")]};var Yx=function(t,i){this._select.style("cursor","auto");if(this._drawDepth<this._groupBy.length-1){var e=this._groupBy[this._drawDepth],n=e(t,i);this.hover(false);if(this._tooltip){this._tooltipClass.data([]).render()}this._history.push({depth:this._depth,filter:this._filter});this.config({depth:this._drawDepth+1,filter:function(t,i){return e(t,i)===n}}).render()}};var Xx=function(t,i){var e=this;var n=this._ids(t,i);this.hover(function(t,i){var r=e._ids(t,i);return n[n.length-1]===r[n.length-1]})};var Vx=function(t,i,e){if(e===void 0)e={};if(this._tooltip){this._select.style("cursor","pointer");this._tooltipClass.data([t]).footer(this._drawDepth<this._groupBy.length-1?Yl.t("Click to Expand",{lng:this._locale}):this._active&&this._active(t,i)?!this._focus||this._focus===this._id(t,i)?Yl.t("Click to Remove Highlight",{lng:this._locale}):Yl.t("Click to Highlight",{lng:this._locale}):Yl.t("Click to Highlight",{lng:this._locale})).title(this._drawLabel).translate(Do(Zs("html").node())).config(e).config(this._tooltipConfig).render()}};var Jx=function(t,i){var e=this;if(this._hover&&this._drawDepth>=this._groupBy.length-1){if(this._active&&this._active(t,i)){this.active(false);Xx.bind(this)(t,i)}else{var n=this._ids(t,i);this.active(function(t,i){var r=e._ids(t,i);return n[n.length-1]===r[n.length-1]})}Vx.bind(this)(t,i,{title:this._legendClass.label()})}};var $x=function(t,i){var e=this;if(this._hover&&this._drawDepth>=this._groupBy.length-1){if(this._active&&this._active(t,i)){this.active(false);Xx.bind(this)(t,i)}else{var n=this._ids(t,i);this.active(function(t,i){var r=e._ids(t,i);return n[n.length-1]===r[n.length-1]})}Vx.bind(this)(t,i)}};var Kx=function(){this.hover(false);this._select.style("cursor","auto");if(this._tooltip){this._tooltipClass.data([]).render()}};var Zx=function(t,i){Vx.bind(this)(t,i,{title:this._legendClass.label()})};var Qx=function(t,i){Vx.bind(this)(t,i)};var tw=function(t){function i(){var i=this;t.call(this);this._aggs={};this._backClass=(new Bf).on("click",function(){if(i._history.length){i.config(i._history.pop()).render()}else{i.depth(i._drawDepth-1).filter(false).render()}}).on("mousemove",function(){return i._backClass.select().style("cursor","pointer")});this._backConfig={fontSize:10,resize:false};this._data=[];this._duration=600;this._history=[];this._groupBy=[gu("id")];this._legend=true;this._legendConfig={shapeConfig:{fontResize:false}};this._legendClass=new gx;this._locale="en-US";this._on={click:Yx.bind(this),"click.legend":Jx.bind(this),"click.shape":$x.bind(this),mouseenter:Xx.bind(this),"mousemove.legend":Zx.bind(this),"mousemove.shape":Qx.bind(this),mouseleave:Kx.bind(this)};this._padding=5;this._shapeConfig={fill:function(t,e){return ef(i._groupBy[0](t,e))},opacity:Cu(1),stroke:function(t,e){return ft(ef(i._groupBy[0](t,e))).darker()},strokeWidth:Cu(0)};this._timeline=true;this._timelineClass=(new Px).align("end").on("end",function(t){if(!(t instanceof Array)){t=[t,t]}t=t.map(Number);i._timelineClass.selection(t);i.timeFilter(function(e){var n=X_(i._time(e)).getTime();return n>=t[0]&&n<=t[1]}).render()});this._titleClass=new Bf;this._titleConfig={fontSize:12,resize:false,textAnchor:"middle"};this._timelineConfig={};this._tooltip=true;this._tooltipClass=new fm;this._tooltipConfig={duration:50,pointerEvents:"none"};this._totalClass=new Bf;this._totalConfig={fontSize:10,resize:false,textAnchor:"middle"}}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._shapeConfigPrep=function t(i){var e=this;if(i===void 0)i=false;var n={duration:this._duration};var r=function(t){if({}.hasOwnProperty.call(e._shapeConfig,t)){if(typeof e._shapeConfig[t]==="function"){n[t]=function(i,n,r){return e._shapeConfig[t](i.__d3plus__?i.data:i,i.__d3plus__?i.i:n,r)}}else{n[t]=e._shapeConfig[t]}}};for(var o in this._shapeConfig)r(o);n.on=Object.keys(this._on).filter(function(t){return!t.includes(".")||t.includes(".shape")}).reduce(function(t,i){t[i]=function(t,n){return e._on[i]?e._on[i](t.__d3plus__?t.data:t,t.__d3plus__?t.i:n):null};return t},{});if(i&&this._shapeConfig[i]){n=yu(n,this._shapeConfig[i])}return n};i.prototype.render=function t(i){var e=this;this._margin={bottom:0,left:0,right:0,top:0};this._transition=Ph().duration(this._duration);if(this._select===void 0||this._select.node().tagName.toLowerCase()!=="svg"){var n=this._select===void 0?Zs("body"):this._select;var r=qx(n.node());var o=r[0];var s=r[1];if(!this._width){this.width(o)}if(!this._height){this.height(s)}o=this._width;s=this._height;this.select(n.append("svg").style("width",o+"px").style("height",s+"px").style("display","block").node())}if(!this._width||!this._height){var a=qx(this._select.node());var h=a[0];var u=a[1];if(!this._width){this.width(h)}if(!this._height){this.height(u)}}var l=this;this._drawDepth=this._depth!==void 0?this._depth:this._groupBy.length-1;this._id=this._groupBy[this._drawDepth];this._ids=function(t,i){return e._groupBy.map(function(e){return e(t.__d3plus__?t.data:t,t.__d3plus__?t.i:i)}).filter(function(t){return t!==void 0&&t.constructor!==Array})};this._drawLabel=this._label||function(t,i){var e=l._ids(t,i).filter(function(t){return t&&t.constructor!==Array});return e[e.length-1]};if(this._time&&this._timeFilter===void 0){var f=this._data.map(this._time).map(X_);var c=this._data[0],_=0;if(this._discrete&&"_"+this._discrete in this&&this["_"+this._discrete](c,_)===this._time(c,_)){this._timeFilter=function(){return true}}else{var p=+w(f);this._timeFilter=function(t,i){return+X_(e._time(t,i))===p}}}this._filteredData=[];var d=[];if(this._data.length){d=this._timeFilter?this._data.filter(this._timeFilter):this._data;if(this._filter){d=d.filter(this._filter)}var g=z();for(var v=0;v<=this._drawDepth;v++){g.key(e._groupBy[v])}if(this._discrete&&"_"+this._discrete in this){g.key(this["_"+this._discrete])}g.rollup(function(t){return e._filteredData.push(Xl(t,e._aggs))}).entries(d)}Wx.bind(this)(d);Lx.bind(this)(d);Hx.bind(this)();Gx.bind(this)(d);Ux.bind(this)(d);this._shapes=[];if(i){setTimeout(i,this._duration+100)}return this};i.prototype.active=function t(i){this._active=i;this._shapes.forEach(function(t){return t.active(i)});if(this._legend){this._legendClass.active(i)}return this};i.prototype.aggs=function t(i){return arguments.length?(this._aggs=yu(this._aggs,i),this):this._aggs};i.prototype.backConfig=function t(i){return arguments.length?(this._backConfig=yu(this._backConfig,i),this):this._backConfig};i.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};i.prototype.depth=function t(i){return arguments.length?(this._depth=i,this):this._depth};i.prototype.discrete=function t(i){return arguments.length?(this._discrete=i,this):this._discrete};i.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};i.prototype.filter=function t(i){return arguments.length?(this._filter=i,this):this._filter};i.prototype.groupBy=function t(i){var e=this;if(!arguments.length){return this._groupBy}if(!(i instanceof Array)){i=[i]}return this._groupBy=i.map(function(t){if(typeof t==="function"){return t}else{if(!e._aggs[t]){e._aggs[t]=function(t){var i=Array.from(new Set(t));return i.length===1?i[0]:i}}return gu(t)}}),this};i.prototype.height=function t(i){return arguments.length?(this._height=i,this):this._height};i.prototype.hover=function t(i){var e=this;var n=this._hover=i;if(typeof i==="function"){var r=A(this._shapes.map(function(t){return t.data()}));r=r.concat(this._legendClass.data());var o=i?r.filter(i):[];var s=[];o.map(this._ids).forEach(function(t){for(var i=1;i<=t.length;i++){s.push(JSON.stringify(t.slice(0,i)))}});s=s.filter(function(t,i){return s.indexOf(t)===i});if(s.length){n=function(t,i){return s.includes(JSON.stringify(e._ids(t,i)))}}}this._shapes.forEach(function(t){return t.hover(n)});if(this._legend){this._legendClass.hover(n)}return this};i.prototype.label=function t(i){return arguments.length?(this._label=typeof i==="function"?i:Cu(i),this):this._label};i.prototype.legend=function t(i){return arguments.length?(this._legend=i,this):this._legend};i.prototype.legendConfig=function t(i){return arguments.length?(this._legendConfig=i,this):this._legendConfig};i.prototype.locale=function t(i){return arguments.length?(this._locale=i,this):this._locale};i.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};i.prototype.shape=function t(i){return arguments.length?(this._shape=typeof i==="function"?i:Cu(i),this):this._shape};i.prototype.shapeConfig=function t(i){return arguments.length?(this._shapeConfig=yu(this._shapeConfig,i),this):this._shapeConfig};i.prototype.time=function t(i){if(arguments.length){if(typeof i==="function"){this._time=i}else{this._time=gu(i);if(!this._aggs[i]){this._aggs[i]=function(t){var i=Array.from(new Set(t));return i.length===1?i[0]:i}}}return this}else{return this._time}};i.prototype.timeFilter=function t(i){return arguments.length?(this._timeFilter=i,this):this._timeFilter};i.prototype.timeline=function t(i){return arguments.length?(this._timeline=i,this):this._timeline};i.prototype.timelineConfig=function t(i){return arguments.length?(this._timelineConfig=yu(this._timelineConfig,i),this):this._timelineConfig};i.prototype.title=function t(i){return arguments.length?(this._title=typeof i==="function"?i:Cu(i),this):this._title};i.prototype.titleConfig=function t(i){return arguments.length?(this._titleConfig=yu(this._titleConfig,i),this):this._titleConfig};i.prototype.tooltip=function t(i){return arguments.length?(this._tooltip=i,this):this._tooltip};i.prototype.tooltipConfig=function t(i){return arguments.length?(this._tooltipConfig=yu(this._tooltipConfig,i),this):this._tooltipConfig};i.prototype.total=function t(i){return arguments.length?(this._total=typeof i==="function"?i:gu(i),this):this._total};i.prototype.totalConfig=function t(i){return arguments.length?(this._totalConfig=yu(this._totalConfig,i),this):this._totalConfig};i.prototype.width=function t(i){return arguments.length?(this._width=i,this):this._width};return i}(xu);var iw=function(t){if(t.includes("d3plus-buffer-start")){return t}var i=["d3plus-buffer-start"];t.forEach(function(t){i.push(t);i.push("d3plus-buffer-"+t)});return i};var ew=function(t,i,e){var n=this;var r=this._discrete==="x"?e:i;var o=r.domain().slice();if(this._discrete==="x"){o.reverse()}var s=t.map(function(t){return t[n._discrete==="x"?"y":"x"]});var a=r.invert(r(w(s))+(this._discrete==="x"?-10:10));if(a>o[1]){o[1]=a}if(this._discrete==="x"){o.reverse()}r.domain(o);var h=this._discrete==="x"?i:e;h.domain(iw(h.domain()));return[i,e]};var nw=function(t,i,e,n){var r=i.domain().slice(),o=e.domain().slice();var s=i.range(),a=e.range();if(!i.invert){r=iw(r)}if(!e.invert){o=iw(o)}t.forEach(function(t){var h=n.r(t.data,t.i)*2;if(i.invert&&i(t.x)-s[0]<h){var u=i.invert(i(t.x)-h);if(u<r[0]){r[0]=u}}if(i.invert&&s[1]-i(t.x)<h){var l=i.invert(i(t.x)+h);if(l>r[1]){r[1]=l}}if(e.invert&&e(t.y)-a[0]<h){var f=e.invert(e(t.y)-h);if(f>o[0]){o[0]=f}}if(e.invert&&a[1]-e(t.y)<h){var c=e.invert(e(t.y)+h);if(c<o[1]){o[1]=c}}});i.domain(r).range(s);e.domain(o).range(a);return[i,e]};var rw=function(t,i,e,n){var r=i.domain().slice(),o=e.domain().slice();var s=i.range(),a=e.range();if(!i.invert){r=iw(r)}if(!e.invert){o=iw(o)}t.forEach(function(t){var h=n.height(t.data,t.i),u=n.width(t.data,t.i);if(i.invert&&i(t.x)-s[0]<u){var l=i.invert(i(t.x)-u);if(l<r[0]){r[0]=l}}if(i.invert&&s[1]-i(t.x)<u){var f=i.invert(i(t.x)+u);if(f>r[1]){r[1]=f}}if(e.invert&&e(t.y)-a[0]<h){var c=e.invert(e(t.y)-h);if(c>o[0]){o[0]=c}}if(e.invert&&a[1]-e(t.y)<h){var _=e.invert(e(t.y)+h);if(_<o[1]){o[1]=_}}});i.domain(r);e.domain(o);return[i,e]};var ow=function(t,i,e){var n=this;var r=this._discrete==="x"?e:i;var o=r.domain().slice();if(this._discrete==="x"){o.reverse()}var s=t.map(function(t){return t[n._discrete==="x"?"y":"x"]});var a=r.invert(r(w(s))+(this._discrete==="x"?-10:10));if(a>o[1]){o[1]=a}if(this._discrete==="x"){o.reverse()}r.domain(o);return[i,e]};var sw=function(t){function i(){var i=this;t.call(this);this._buffer={Bar:ew,Circle:nw,Line:ow,Rect:rw};this._shape=Cu("Circle");this._shapeConfig=yu(this._shapeConfig,{Bar:{textAnchor:function(){return i._discrete==="x"?"middle":"end"},verticalAlign:function(){return i._discrete==="x"?"top":"middle"}},Circle:{r:Cu(5)},Line:{fill:Cu("none"),label:false,stroke:function(t,e){return ef(i._id(t,e))},strokeWidth:Cu(1)},Rect:{height:Cu(10),width:Cu(10)}});this._stackOffset=E_;this._stackOrder=B_;this._x=gu("x");this._xAxis=(new J_).align("end");this._xTest=(new J_).align("end").gridSize(0);this._xConfig={title:"X Axis"};this._y=gu("y");this._yAxis=(new $_).align("start");this._yTest=(new $_).align("start").gridSize(0);this._yConfig={title:"Y Axis"}}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype.render=function i(e){var n=this;t.prototype.render.call(this,e);var r=this._filteredData.map(function(t,i){return{__d3plus__:true,data:t,i:i,id:n._id(t,i),shape:n._shape(t,i),x:n._x(t,i),y:n._y(t,i)}});var o=this._height-this._margin.top-this._margin.bottom,s=this._discrete?this._discrete==="x"?"y":"x":undefined,a=this._select,u="translate("+this._margin.left+", "+this._margin.top+")",l=this._transition,f=this._width-this._margin.left-this._margin.right;var c=this._time&&r[0].x===this._time(r[0].data,r[0].i),_=this._time&&r[0].y===this._time(r[0].data,r[0].i);if(c||_){r.forEach(function(t){if(c){t.x=X_(t.x)}if(_){t.y=X_(t.y)}})}var d,g,v,y;if(this._stacked){y=Array.from(new Set(r.map(function(t){return t.id})));v=z().key(function(t){return t[n._discrete]}).entries(r).sort(function(t,i){return t.key-i.key});d=v.map(function(t){return t.key});v=v.map(function(t){return t.values});v.forEach(function(t){var i=Array.from(new Set(t.map(function(t){return t.id})));if(i.length<y.length){y.forEach(function(e){if(!i.includes(e)){var o=r.filter(function(t){return t.id===e})[0];if(o.shape==="Area"){var a={__d3plus__:true,data:o.data,id:e,shape:o.shape};a[n._discrete]=t[0][n._discrete];a[s]=0;r.push(a)}}})}});r.sort(function(t,i){return t[n._discrete]-i[n._discrete]});v=M_().keys(y).offset(this._stackOffset).order(this._stackOrder).value(function(t,i){var e=t.filter(function(t){return t.id===i});return e.length?e[0][s]:0})(v);g={};g[this._discrete]=h(r,function(t){return t[n._discrete]});g[s]=[S(v.map(function(t){return S(t.map(function(t){return t[1]}))})),w(v.map(function(t){return w(t.map(function(t){return t[1]}))}))]}else{g={x:h(r,function(t){return t.x}),y:h(r,function(t){return t.y})}}var m=this._xDomain?this._xDomain.slice():g.x,b="Linear";if(m[0]===void 0){m[0]=g.x[0]}if(m[1]===void 0){m[1]=g.x[1]}if(c){m=m.map(X_);b="Time"}else if(this._discrete==="x"){m=Array.from(new Set(r.map(function(t){return t.x}))).sort();b="Ordinal"}var x=this._yDomain?this._yDomain.slice():g.y,C="Linear";if(x[0]===void 0){x[0]=g.y[0]}if(x[1]===void 0){x[1]=g.y[1]}if(_){x=x.map(X_);C="Time"}else if(this._discrete==="y"){x=Array.from(new Set(r.map(function(t){return t.y}))).sort();C="Ordinal"}g={x:m,y:x};if(s&&this._baseline!==void 0){var A=this._baseline;if(g[s][0]>A){g[s][0]=A}else if(g[s][1]<A){g[s][1]=A}}var k=ro["scale"+b]().domain(g.x).range(p(0,f+1,f/(g.x.length-1))),E=ro["scale"+C]().domain(g.y.reverse()).range(p(0,o+1,o/(g.y.length-1)));var B=z().key(function(t){return t.shape}).entries(r);B.forEach(function(t){if(n._buffer[t.key]){var i=n._buffer[t.key].bind(n)(t.values,k,E,n._shapeConfig[t.key]);k=i[0];E=i[1]}});m=k.domain();x=E.domain();var D=Au("g.d3plus-plot-test",{enter:{opacity:0},parent:this._select}),M=this._discrete==="x"&&!c?g.x:undefined,F=this._discrete==="y"&&!_?g.y:undefined;this._yTest.domain(x).height(o).scale(C.toLowerCase()).select(D.node()).ticks(F).width(f).config(this._yConfig).render();var O=this._yTest.outerBounds();var N=O.width?O.width+this._yTest.padding():undefined;this._xTest.domain(m).height(o).range([N,undefined]).scale(b.toLowerCase()).select(D.node()).ticks(M).width(f).config(this._xConfig).render();this._xAxis.domain(m).height(o).range([N,undefined]).scale(b.toLowerCase()).select(Au("g.d3plus-plot-x-axis",{parent:a,transition:l,enter:{transform:u},update:{transform:u}}).node()).ticks(M).width(f).config(this._xConfig).render();k=this._xAxis._d3Scale;this._yAxis.domain(x).height(o).range([this._xAxis.outerBounds().y,this._xTest.outerBounds().y]).scale(C.toLowerCase()).select(Au("g.d3plus-plot-y-axis",{parent:a,transition:l,enter:{transform:u},update:{transform:u}}).node()).ticks(F).width(k.range()[k.range().length-1]+this._xAxis.padding()).config(this._yConfig).render();E=this._yAxis._d3Scale;var T={duration:this._duration,label:function(t){return n._drawLabel(t.data,t.i)},select:Au("g.d3plus-plot-shapes",{parent:a,transition:l,enter:{transform:u},update:{transform:u}}).node(),x:function(t){return k(t.x)},y:function(t){return E(t.y)}};function j(t){var i={};var e=function(e){if({}.hasOwnProperty.call(t,e)&&!Fm[e]){i[e]=typeof t[e]==="function"?function(i){return t[e](i.data,i.i)}:t[e]}};for(var n in t)e(n);return i}T=yu(T,j(this._shapeConfig));var P={x0:this._discrete==="x"?T.x:k(0),x1:this._discrete==="x"?null:T.x,y0:this._discrete==="y"?T.y:E(0),y1:this._discrete==="y"?null:T.y};if(this._stacked){var H=s==="x"?k:E;P[""+s]=P[s+"0"]=function(t){var i=y.indexOf(t.id),e=d.indexOf(""+t[n._discrete]);return i>=0?H(v[i][e][0]):H(0)};P[s+"1"]=function(t){var i=y.indexOf(t.id),e=d.indexOf(""+t[n._discrete]);return i>=0?H(v[i][e][1]):H(0)}}T=yu(T,P);var R=Object.keys(this._on);B.forEach(function(t){var i=(new Fm[t.key]).config(T).data(t.values);if(t.key==="Bar"){var e;var r=n._discrete==="x"?k:E;var o=r.domain().filter(function(t){return typeof t!=="string"||t.indexOf("d3plus-buffer-")<0});var s=r.range();if(o.length>1){e=r(o[1])-r(o[0])}else{e=s[s.length-1]-s[0]}e-=20;var a=e;if(!n._stacked){var h=Array.from(new Set(t.values.map(function(t){return t.id})));a/=h.length;var u=e/2-a/2;var l=I().domain([0,h.length-1]).range([-u,u]);i[n._discrete](function(t,i){return T[n._discrete](t,i)+l(h.indexOf(t.id))})}i.width(a);i.height(a)}var f=R.filter(function(i){return i.includes("."+t.key)}),c=R.filter(function(t){return!t.includes(".")}),_=R.filter(function(t){return t.includes(".shape")});var p=function(t){i.on(c[t],function(i){return n._on[c[t]](i.data,i.i)})};for(var d=0;d<c.length;d++)p(d);var g=function(t){i.on(_[t],function(i){return n._on[_[t]](i.data,i.i)})};for(var v=0;v<_.length;v++)g(v);var y=function(t){i.on(f[t],function(i){return n._on[f[t]](i.data,i.i)})};for(var m=0;m<f.length;m++)y(m);i.config(n._shapeConfig[t.key]?j(n._shapeConfig[t.key]):{}).render();n._shapes.push(i)});return this};i.prototype.baseline=function t(i){return arguments.length?(this._baseline=i,this):this._baseline};i.prototype.discrete=function t(i){return arguments.length?(this._discrete=i,this):this._discrete};i.prototype.stacked=function t(i){return arguments.length?(this._stacked=i,this):this._stacked};i.prototype.stackOffset=function t(i){return arguments.length?(this._stackOffset=typeof i==="function"?i:R_["stackOffset"+(i.charAt(0).toUpperCase()+i.slice(1))],this):this._stackOffset};i.prototype.stackOrder=function t(i){return arguments.length?(this._stackOrder=typeof i==="function"?i:R_["stackOrder"+(i.charAt(0).toUpperCase()+i.slice(1))],this):this._stackOrder};i.prototype.x=function t(i){if(arguments.length){if(typeof i==="function"){this._x=i}else{this._x=gu(i);if(!this._aggs[i]&&this._discrete==="x"){this._aggs[i]=function(t){var i=Array.from(new Set(t));return i.length===1?i[0]:i}}}return this}else{return this._x}};i.prototype.xConfig=function t(i){return arguments.length?(this._xConfig=yu(this._xConfig,i),this):this._xConfig};i.prototype.xDomain=function t(i){return arguments.length?(this._xDomain=i,this):this._xDomain};i.prototype.y=function t(i){if(arguments.length){if(typeof i==="function"){this._y=i}else{this._y=gu(i);if(!this._aggs[i]&&this._discrete==="y"){this._aggs[i]=function(t){var i=Array.from(new Set(t));return i.length===1?i[0]:i}}}return this}else{return this._y}};i.prototype.yConfig=function t(i){if(arguments.length){if(i.domain){i.domain=i.domain.slice().reverse()}this._yConfig=yu(this._yConfig,i);return this}return this._yConfig};i.prototype.yDomain=function t(i){return arguments.length?(this._yDomain=i,this):this._yDomain};return i}(tw);var aw=function(t){function i(){t.call(this);this._baseline=0;this._discrete="x";this._shape=Cu("Area");this.x("x")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;return i}(sw);var hw=function(t){function i(){t.call(this);this._baseline=0;this._discrete="x";this._shape=Cu("Bar");this.x("x")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;return i}(sw);var uw=function(t){function i(){t.call(this);this._discrete="x";this._shape=Cu("Line");this.x("x")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;return i}(sw);var lw=function(t){function i(){t.call(this);this._stacked=true}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;return i}(aw);var fw=function(t){function i(){var i=this;t.call(this);this._align="center";this._data=[];this._duration=600;this._height=200;this._id=gu("id");this._label=gu("id");this._lineData=[];this._outerBounds={width:0,height:0,x:0,y:0};this._padding=5;this._shape=Cu("Rect");this._shapeConfig={duration:this._duration,fill:gu("color"),fontColor:Cu("#444"),fontFamily:(new zm).fontFamily(),fontResize:false,fontSize:Cu(10),height:Cu(10),hitArea:function(t){var e=i._lineData[i._data.indexOf(t)],n=w([e.height,e.shapeHeight]);return{width:e.width+e.shapeWidth+(e.width?i._padding:0),height:n,x:-e.shapeWidth/2,y:-n/2}},labelBounds:function(t,e,n){var r=i._lineData[t.i],o=n.r!==void 0?n.r:n.width/2;return{width:r.width,height:r.height,x:o+i._padding,y:-r.height/2}},opacity:1,r:Cu(5),width:Cu(10),x:function(t,e){var n=i._shapeConfig.width;var r=i._lineData[e].y;var o=i._align==="left"?0:i._align==="center"?(i._outerBounds.width-i._rowWidth(i._lineData.filter(function(t){return r===t.y})))/2:i._outerBounds.width-i._rowWidth(i._lineData.filter(function(t){return r===t.y}));return i._rowWidth(i._lineData.slice(0,e).filter(function(t){return r===t.y}))+i._padding+i._outerBounds.x+n(t,e)/2+o},y:function(t,e){var n=i._shapeConfig.height;var r=i._lineData[e];return r.y+i._titleHeight+i._outerBounds.y+w(i._lineData.filter(function(t){return r.y===t.y}).map(function(t){return t.height}).concat(i._data.map(function(t,i){return n(t,i)})))/2}};this._titleConfig={fontFamily:"Verdana",fontSize:12,lineHeight:13};this._verticalAlign="middle";this._width=400}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._fetchConfig=function t(i,e,n){return typeof this._shapeConfig[i]==="function"?this._shapeConfig[i](e,n):this._shapeConfig[i]};i.prototype._rowHeight=function t(i){return w(i.map(function(t){return t.height;
}).concat(i.map(function(t){return t.shapeHeight})))+this._padding};i.prototype._rowWidth=function t(i){var e=this;return k(i.map(function(t){return t.shapeWidth+t.width+e._padding*(t.width?2:1)}))-this._padding};i.prototype.render=function t(i){var e=this;if(this._select===void 0){this.select(Zs("body").append("svg").attr("width",this._width+"px").attr("height",this._height+"px").node())}if(this._lineHeight===void 0){this._lineHeight=function(t,i){return e._fetchConfig("fontSize",t,i)*1.1}}this._group=Au("g.d3plus-Legend",{parent:this._select});var n=this._height;this._titleHeight=0;if(this._title){var r=this._titleConfig.fontFamily,o=this._titleConfig.lineHeight,s=this._titleConfig.fontSize;var a=Ef().fontFamily(r).fontSize(s).lineHeight(o).width(this._width).height(this._height)(this._title);this._titleHeight=o+a.lines.length+this._padding;n-=this._titleHeight}this._lineData=this._data.map(function(t,i){var r=e._fetchConfig("fontFamily",t,i),o=e._lineHeight(t,i),s=e._fetchConfig("fontSize",t,i),a=e._fetchConfig("width",t,i);var h=n-(e._data.length+1)*e._padding,u=e._width;var l=Ef().fontFamily(r).fontSize(s).lineHeight(o).width(u).height(h)(e._label(t,i));l.width=Math.ceil(w(l.lines.map(function(t){return kf(t,{"font-family":r,"font-size":s})})))+s;l.height=Math.ceil(l.lines.length*(o+1));l.og={height:l.height,width:l.width};l.data=t;l.f=r;l.s=s;l.lh=o;l.y=0;l.id=e._id(t,i);l.i=i;l.shapeWidth=a;l.shapeHeight=e._fetchConfig("height",t,i);return l});var h;var u=this._width-this._padding*2;h=k(this._lineData.map(function(t){return t.shapeWidth+e._padding*2+t.width}))-this._padding;if(h>u){var l=1,f=[];var c=w(this._lineData.map(function(t){return t.words.length}));this._wrapLines=function(){var t=this;l++;if(l>c){return}var i=l===1?this._lineData.slice():this._lineData.filter(function(i){return i.width+i.shapeWidth+t._padding*(i.width?2:1)>u&&i.words.length>=l}).sort(function(t,i){return i.sentence.length-t.sentence.length});if(i.length&&n>i[0].height*l){var e=false;var r=function(t){var n=i[t];var r=n.og.height*l,o=n.og.width*(1.5*(1/l));var s=Ef().fontFamily(n.f).fontSize(n.s).lineHeight(n.lh).width(o).height(r)(n.sentence);if(!s.truncated){n.width=Math.ceil(w(s.lines.map(function(t){return kf(t,{"font-family":n.f,"font-size":n.s})})))+n.s;n.height=s.lines.length*(n.lh+1)}else{e=true;return"break"}};for(var o=0;o<i.length;o++){var s=r(o);if(s==="break")break}if(!e){this._wrapRows()}}else{f=[];return}};this._wrapRows=function(){var t=this;f=[];var i=1,e=0;for(var r=0;r<this._lineData.length;r++){var o=t._lineData[r],s=o.width+t._padding*(o.width?2:1)+o.shapeWidth;if(k(f.map(function(t){return w(t,function(t){return w([t.height,t.shapeHeight])})}))>n){f=[];break}if(e+s<u){e+=s}else if(s>u){f=[];t._wrapLines();break}else{e=s;i++}if(!f[i-1]){f[i-1]=[]}f[i-1].push(o)}};this._wrapRows();if(!f.length||k(f,this._rowHeight.bind(this))+this._padding>n){h=k(this._lineData.map(function(t){return t.shapeWidth+e._padding*1}))-this._padding;for(var _=0;_<this._lineData.length;_++){e._lineData[_].width=0;e._lineData[_].height=0}this._wrapRows()}if(f.length&&k(f,this._rowHeight.bind(this))+this._padding<n){f.forEach(function(t,i){t.forEach(function(t){if(i){t.y=k(f.slice(0,i),e._rowHeight.bind(e))}})});h=w(f,function(t){return k(t,function(t){return t.shapeWidth+e._padding*(t.width?2:1)+t.width})})-this._padding}}var p=w(this._lineData,function(t,i){return w([t.height,e._fetchConfig("height",t.data,i)])+t.y})+this._titleHeight,d=h;this._outerBounds.width=d;this._outerBounds.height=p;var g=this._padding,v=this._padding;if(this._align==="center"){g=(this._width-d)/2}else if(this._align==="right"){g=this._width-this._padding-d}if(this._verticalAlign==="middle"){v=(this._height-p)/2}else if(this._verticalAlign==="bottom"){v=this._height-this._padding-p}this._outerBounds.x=g;this._outerBounds.y=v;(new Bf).data(this._title?[{text:this._title}]:[]).duration(this._duration).select(this._group.node()).textAnchor({left:"start",center:"middle",right:"end"}[this._align]).width(this._width-this._padding*2).x(this._padding).y(this._outerBounds.y).config(this._titleConfig).render();this._shapes=[];var y=this._shapeConfig,m={id:function(t){return t.id},label:function(t){return t.label},lineHeight:function(t){return t.lH}};var b=this._data.map(function(t,i){var n={__d3plus__:true,data:t,i:i,id:e._id(t,i),label:e._lineData[i].width?e._label(t,i):false,lH:e._lineHeight(t,i),shape:e._shape(t,i)};var r=function(e){if(e!=="labelBounds"&&{}.hasOwnProperty.call(y,e)){if(typeof y[e]==="function"){n[e]=y[e](t,i);m[e]=function(t){return t[e]}}else if(e==="on"){m[e]={};var r=function(t){if({}.hasOwnProperty.call(y[e],t)){m[e][t]=function(i){if(!y[e][t]){return}y[e][t].bind(this)(i.data,i.i)}}};for(var o in y[e])r(o)}}};for(var o in y)r(o);return n});this._shapes=[];["Circle","Rect"].forEach(function(t){e._shapes.push((new Fm[t]).data(b.filter(function(i){return i.shape===t})).duration(e._duration).labelPadding(0).select(e._group.node()).verticalAlign("top").config(Object.assign({},y,m)).render())});if(i){setTimeout(i,this._duration+100)}return this};i.prototype.active=function t(i){this._shapes.forEach(function(t){return t.active(i)});return this};i.prototype.align=function t(i){return arguments.length?(this._align=i,this):this._align};i.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};i.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};i.prototype.height=function t(i){return arguments.length?(this._height=i,this):this._height};i.prototype.hover=function t(i){this._shapes.forEach(function(t){return t.hover(i)});return this};i.prototype.id=function t(i){return arguments.length?(this._id=i,this):this._id};i.prototype.label=function t(i){return arguments.length?(this._label=typeof i==="function"?i:Cu(i),this):this._label};i.prototype.outerBounds=function t(){return this._outerBounds};i.prototype.padding=function t(i){return arguments.length?(this._padding=i,this):this._padding};i.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};i.prototype.shape=function t(i){return arguments.length?(this._shape=typeof i==="function"?i:Cu(i),this):this._shape};i.prototype.shapeConfig=function t(i){return arguments.length?(this._shapeConfig=Object.assign(this._shapeConfig,i),this):this._shapeConfig};i.prototype.title=function t(i){return arguments.length?(this._title=i,this):this._title};i.prototype.titleConfig=function t(i){return arguments.length?(this._titleConfig=Object.assign(this._titleConfig,i),this):this._titleConfig};i.prototype.verticalAlign=function t(i){return arguments.length?(this._verticalAlign=i,this):this._verticalAlign};i.prototype.width=function t(i){return arguments.length?(this._width=i,this):this._width};return i}(xu);var cw=function(t){function i(){var i=this;t.call(this);this._brushing=true;this._brushFilter=function(){return!yo.button&&yo.detail<2};this._domain=[2001,2010];this._gridSize=0;this._handleConfig={fill:"#444"};this._handleSize=6;this._height=100;this._on={};this.orient("bottom");this._scale="time";this._selectionConfig={fill:"#777","stroke-width":0};this._shape="Rect";this._shapeConfig=Object.assign({},this._shapeConfig,{height:10,width:function(t){return i._domain.map(function(t){return X_(t).getTime()}).includes(t.id)?2:1}});this._snapping=true}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._brushBrush=function t(){if(yo.sourceEvent&&yo.sourceEvent.offsetX&&yo.selection!==null&&(!this._brushing||this._snapping)){var i=(this._brushing?yo.selection:[yo.selection[0],yo.selection[0]]).map(this._d3Scale.invert).map(Number);var e=this._availableTicks.map(Number);i[0]=X_(wu(i[0],e));i[1]=X_(wu(i[1],e));var n=+i[0]===+i[1],r=n?i[0]:i;if(this._selection&&JSON.stringify(r)!==JSON.stringify(this._selection)){this._selection=r;if(this._on.end){this._on.end(r)}}var o=i.map(this._d3Scale);if(n){o[0]-=.1;o[1]+=.1}this._brushGroup.call(this._brush.move,o)}this._brushStyle();if(this._on.brush){this._on.brush()}};i.prototype._brushEnd=function t(){if(!yo.sourceEvent){return}var i=(yo.selection&&this._brushing?yo.selection:[yo.sourceEvent.offsetX,yo.sourceEvent.offsetX]).map(this._d3Scale.invert).map(Number);var e=this._availableTicks.map(Number);i[0]=X_(wu(i[0],e));i[1]=X_(wu(i[1],e));var n=+i[0]===+i[1];if(this._brushing||!this._snapping){var r=i.map(this._d3Scale);if(n){r[0]-=.1;r[1]+=.1}this._brushGroup.transition(this._transition).call(this._brush.move,r)}this._brushStyle();var o=n?i[0]:i;if(JSON.stringify(o)!==JSON.stringify(this._selection)){if(this._on.end){this._on.end(o)}this._selection=o}};i.prototype._brushStart=function t(){if(yo.sourceEvent!==null&&(!this._brushing||this._snapping)){var i=(yo.selection&&this._brushing?yo.selection:[yo.sourceEvent.offsetX,yo.sourceEvent.offsetX]).map(this._d3Scale.invert).map(Number);var e=this._availableTicks.map(Number);i[0]=X_(wu(i[0],e));i[1]=X_(wu(i[1],e));var n=+i[0]===+i[1];var r=i.map(this._d3Scale);if(n){r[0]-=.1;r[1]+=.1}this._brushGroup.call(this._brush.move,r)}this._brushStyle();if(this._on.start){this._on.start()}};i.prototype._brushStyle=function t(){var i=this._position;var e=i.height;var n=this._shape==="Circle"?this._shapeConfig.r*2:this._shape==="Rect"?this._shapeConfig[e]:this._tickSize;this._brushGroup.selectAll(".overlay").attr("cursor",this._brushing?"crosshair":"pointer");this._brushGroup.selectAll(".selection").call(mu,this._selectionConfig).attr("height",n);this._brushGroup.selectAll(".handle").call(mu,this._handleConfig).attr("height",n+this._handleSize)};i.prototype.render=function i(e){t.prototype.render.call(this,e);var n=this._position;var r=n.height;var o=n.y;var s=this._outerBounds[o],a=this._d3Scale.range();var h=this._brush=am().extent([[a[0],s],[a[1],s+this._outerBounds[r]]]).filter(this._brushFilter).handleSize(this._handleSize).on("start",this._brushStart.bind(this)).on("brush",this._brushBrush.bind(this)).on("end",this._brushEnd.bind(this));var u=this._availableTicks[this._availableTicks.length-1];var l=(this._selection===void 0?[u,u]:this._selection instanceof Array?this._selection.slice():[this._selection,this._selection]).map(X_).map(this._d3Scale);if(l[0]===l[1]){l[0]-=.1;l[1]+=.1}this._brushGroup=Au("g.brushGroup",{parent:this._group});this._brushGroup.call(h).transition(this._transition).call(h.move,l);return this};i.prototype.brushing=function t(i){return arguments.length?(this._brushing=i,this):this._brushing};i.prototype.brushFilter=function t(i){return arguments.length?(this._brushFilter=i,this):this._brushFilter};i.prototype.handleConfig=function t(i){return arguments.length?(this._handleConfig=Object.assign(this._handleConfig,i),this):this._handleConfig};i.prototype.handleSize=function t(i){return arguments.length?(this._handleSize=i,this):this._handleSize};i.prototype.on=function t(i,e){return arguments.length===2?(this._on[i]=e,this):arguments.length?typeof i==="string"?this._on[i]:(this._on=Object.assign({},this._on,i),this):this._on};i.prototype.selectionConfig=function t(i){return arguments.length?(this._selectionConfig=Object.assign(this._selectionConfig,i),this):this._selectionConfig};i.prototype.selection=function t(i){return arguments.length?(this._selection=i,this):this._selection};i.prototype.snapping=function t(i){return arguments.length?(this._snapping=i,this):this._snapping};return i}(V_);var _w=function(){var t=this._history.length;var i=Au("g.d3plus-viz-back",{parent:this._select,transition:this._transition,update:{transform:"translate("+this._margin.left+", "+this._margin.top+")"}}).node();this._backClass.data(t?[{text:Yl.t("Back",{lng:this._locale}),x:this._padding*2,y:0}]:[]).select(i).config(this._backConfig).render();this._margin.top+=t?this._backClass.fontSize()()+this._padding:0};var pw=function(t,i,e){if(e===void 0)e=[];if(e&&!(e instanceof Array)){e=[e]}var n=z().key(i).entries(t);if(n.length<2){return{data:[],id:i}}var r,o;if(e.length){var s=n.length;var a=function(i){var a=n.map(function(t){return Array.from(new Set(t.values.map(function(t){return e[i](t)})))}),h=k(a,function(t){return t.length}),u=new Set(A(a)).size;if(h===s&&u===s||i===e.length-1){o=e[i];r=z().key(o).entries(t).map(function(t){return Xl(t.values)});return"break"}};for(var h=0;h<e.length;h++){var u=a(h);if(u==="break")break}}else{o=i;r=n.map(function(t){return Xl(t.values)})}return{data:r,id:o}};var dw=function(t){var i=this;if(t===void 0)t=[];this._legendData=[];if(t.length){var e=z();for(var n=0;n<=this._drawDepth;n++){e.key(i._groupBy[n])}e.rollup(function(t){return i._legendData.push(Xl(t,i._aggs))}).entries(t)}var r=Au("g.d3plus-viz-legend",{condition:this._legend,parent:this._select,transition:this._transition}).node();if(this._legend){var o=pw(this._legendData,this._shapeConfig.fill,this._groupBy);this._legendClass.id(o.id).duration(this._duration).data(o.data.length>1?o.data:[]).height(this._height-this._margin.bottom).label(this._label||o.id).select(r).verticalAlign("bottom").width(this._width).shapeConfig(this._shapeConfig).shapeConfig({on:Object.keys(this._on).filter(function(t){return!t.includes(".")||t.includes(".legend")}).reduce(function(t,e){t[e]=i._on[e];return t},{})}).config(this._legendConfig).render();var s=this._legendClass.outerBounds();if(s.height){this._margin.bottom+=s.height+this._legendClass.padding()*2}}};var gw=function(t){if(t===void 0)t=[];var i=this._time&&this._timeline;var e=i?Array.from(new Set(this._data.map(this._time))).map(X_):[];i=i&&e.length>1;var n=Au("g.d3plus-viz-timeline",{condition:i,parent:this._select,transition:this._transition}).node();if(i){var r=this._timelineClass.domain(h(e)).duration(this._duration).height(this._height-this._margin.bottom).select(n).ticks(e.sort(function(t,i){return+t-+i})).width(this._width);if(r.selection()===void 0){var o=h(t.map(this._time).map(X_));if(o[0]===o[1]){r.selection(o[0])}else{r.selection(o)}}r.config(this._timelineConfig).render();this._margin.bottom+=r.outerBounds().height+r.padding()*2}};var vw=function(t){if(t===void 0)t=[];var i=this._title?this._title(t):false;var e=Au("g.d3plus-viz-title",{enter:{transform:"translate("+this._margin.left+", "+this._margin.top+")"},parent:this._select,transition:this._transition,update:{transform:"translate("+this._margin.left+", "+this._margin.top+")"}}).node();this._titleClass.data(i?[{text:i}]:[]).select(e).width(this._width-this._margin.left-this._margin.right).config(this._titleConfig).render();this._margin.top+=i?e.getBBox().height+this._padding:0};var yw=function(t){if(t===void 0)t=[];var i=typeof this._total==="function"?k(t.map(this._total)):this._total===true&&this._size?k(t.map(this._size)):false;var e=Au("g.d3plus-viz-total",{enter:{transform:"translate("+this._margin.left+", "+this._margin.top+")"},parent:this._select,transition:this._transition,update:{transform:"translate("+this._margin.left+", "+this._margin.top+")"}}).node();var n=typeof i==="number";this._totalClass.data(n?[{text:Yl.t("Total",{lng:this._locale})+": "+i}]:[]).select(e).width(this._width-this._margin.left-this._margin.right).config(this._totalConfig).render();this._margin.top+=n?e.getBBox().height+this._padding:0};function mw(t,i){if(t.tagName===undefined||["BODY","HTML"].indexOf(t.tagName)>=0){var e=window["inner"+(i.charAt(0).toUpperCase()+i.slice(1))];var n=Zs(t);if(i==="width"){e-=parseFloat(n.style("margin-left"),10);e-=parseFloat(n.style("margin-right"),10);e-=parseFloat(n.style("padding-left"),10);e-=parseFloat(n.style("padding-right"),10)}else{e-=parseFloat(n.style("margin-top"),10);e-=parseFloat(n.style("margin-bottom"),10);e-=parseFloat(n.style("padding-top"),10);e-=parseFloat(n.style("padding-bottom"),10)}return e}else{var r=parseFloat(Zs(t).style(i),10);if(typeof r==="number"&&r>0){return r}else{return mw(t.parentNode,i)}}}var bw=function(t){return[mw(t,"width"),mw(t,"height")]};var xw=function(t,i){this._select.style("cursor","auto");if(this._drawDepth<this._groupBy.length-1){var e=this._groupBy[this._drawDepth],n=e(t,i);this.hover(false);if(this._tooltip){this._tooltipClass.data([]).render()}this._history.push({depth:this._depth,filter:this._filter});this.config({depth:this._drawDepth+1,filter:function(t,i){return e(t,i)===n}}).render()}};var ww=function(t,i){var e=this;var n=this._ids(t,i);this.hover(function(t,i){var r=e._ids(t,i);return n[n.length-1]===r[n.length-1]})};var Cw=function(t,i,e){if(e===void 0)e={};if(this._tooltip){this._select.style("cursor","pointer");this._tooltipClass.data([t]).footer(this._drawDepth<this._groupBy.length-1?Yl.t("Click to Expand",{lng:this._locale}):this._active&&this._active(t,i)?!this._focus||this._focus===this._id(t,i)?Yl.t("Click to Remove Highlight",{lng:this._locale}):Yl.t("Click to Highlight",{lng:this._locale}):Yl.t("Click to Highlight",{lng:this._locale})).title(this._drawLabel).translate(Do(Zs("html").node())).config(e).config(this._tooltipConfig).render()}};var Aw=function(t,i){var e=this;if(this._hover&&this._drawDepth>=this._groupBy.length-1){if(this._active&&this._active(t,i)){this.active(false);ww.bind(this)(t,i)}else{var n=this._ids(t,i);this.active(function(t,i){var r=e._ids(t,i);return n[n.length-1]===r[n.length-1]})}Cw.bind(this)(t,i,{title:this._legendClass.label()})}};var Sw=function(t,i){var e=this;if(this._hover&&this._drawDepth>=this._groupBy.length-1){if(this._active&&this._active(t,i)){this.active(false);ww.bind(this)(t,i)}else{var n=this._ids(t,i);this.active(function(t,i){var r=e._ids(t,i);return n[n.length-1]===r[n.length-1]})}Cw.bind(this)(t,i)}};var kw=function(){this.hover(false);this._select.style("cursor","auto");if(this._tooltip){this._tooltipClass.data([]).render()}};var Ew=function(t,i){Cw.bind(this)(t,i,{title:this._legendClass.label()})};var Bw=function(t,i){Cw.bind(this)(t,i)};var Dw=function(t){function i(){var i=this;t.call(this);this._aggs={};this._backClass=(new Bf).on("click",function(){if(i._history.length){i.config(i._history.pop()).render()}else{i.depth(i._drawDepth-1).filter(false).render()}}).on("mousemove",function(){return i._backClass.select().style("cursor","pointer")});this._backConfig={fontSize:10,resize:false};this._data=[];this._duration=600;this._history=[];this._groupBy=[gu("id")];this._legend=true;this._legendConfig={shapeConfig:{fontResize:false}};this._legendClass=new fw;this._locale="en-US";this._on={click:xw.bind(this),"click.legend":Aw.bind(this),"click.shape":Sw.bind(this),mouseenter:ww.bind(this),"mousemove.legend":Ew.bind(this),"mousemove.shape":Bw.bind(this),mouseleave:kw.bind(this)};this._padding=5;this._shapeConfig={fill:function(t,e){return ef(i._groupBy[0](t,e))},opacity:Cu(1),stroke:function(t,e){return ft(ef(i._groupBy[0](t,e))).darker()},strokeWidth:Cu(0)};this._timeline=true;this._timelineClass=(new cw).align("end").on("end",function(t){if(!(t instanceof Array)){t=[t,t]}t=t.map(Number);i._timelineClass.selection(t);i.timeFilter(function(e){var n=X_(i._time(e)).getTime();return n>=t[0]&&n<=t[1]}).render()});this._titleClass=new Bf;this._titleConfig={fontSize:12,resize:false,textAnchor:"middle"};this._timelineConfig={};this._tooltip=true;this._tooltipClass=new fm;this._tooltipConfig={duration:50,pointerEvents:"none"};this._totalClass=new Bf;this._totalConfig={fontSize:10,resize:false,textAnchor:"middle"}}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._shapeConfigPrep=function t(i){var e=this;if(i===void 0)i=false;var n={duration:this._duration};var r=function(t){if({}.hasOwnProperty.call(e._shapeConfig,t)){if(typeof e._shapeConfig[t]==="function"){n[t]=function(i,n,r){return e._shapeConfig[t](i.__d3plus__?i.data:i,i.__d3plus__?i.i:n,r)}}else{n[t]=e._shapeConfig[t]}}};for(var o in this._shapeConfig)r(o);n.on=Object.keys(this._on).filter(function(t){return!t.includes(".")||t.includes(".shape")}).reduce(function(t,i){t[i]=function(t,n){return e._on[i]?e._on[i](t.__d3plus__?t.data:t,t.__d3plus__?t.i:n):null};return t},{});if(i&&this._shapeConfig[i]){n=yu(n,this._shapeConfig[i])}return n};i.prototype.render=function t(i){var e=this;this._margin={bottom:0,left:0,right:0,top:0};this._transition=Ph().duration(this._duration);if(this._select===void 0||this._select.node().tagName.toLowerCase()!=="svg"){var n=this._select===void 0?Zs("body"):this._select;var r=bw(n.node());var o=r[0];var s=r[1];if(!this._width){this.width(o)}if(!this._height){this.height(s)}o=this._width;s=this._height;this.select(n.append("svg").style("width",o+"px").style("height",s+"px").style("display","block").node())}if(!this._width||!this._height){var a=bw(this._select.node());var h=a[0];var u=a[1];if(!this._width){this.width(h)}if(!this._height){this.height(u)}}var l=this;this._drawDepth=this._depth!==void 0?this._depth:this._groupBy.length-1;this._id=this._groupBy[this._drawDepth];this._ids=function(t,i){return e._groupBy.map(function(e){return e(t.__d3plus__?t.data:t,t.__d3plus__?t.i:i)}).filter(function(t){return t!==void 0&&t.constructor!==Array})};this._drawLabel=this._label||function(t,i){var e=l._ids(t,i).filter(function(t){return t&&t.constructor!==Array});return e[e.length-1]};if(this._time&&this._timeFilter===void 0){var f=this._data.map(this._time).map(X_);var c=this._data[0],_=0;if(this._discrete&&"_"+this._discrete in this&&this["_"+this._discrete](c,_)===this._time(c,_)){this._timeFilter=function(){return true}}else{var p=+w(f);this._timeFilter=function(t,i){return+X_(e._time(t,i))===p}}}this._filteredData=[];var d=[];if(this._data.length){d=this._timeFilter?this._data.filter(this._timeFilter):this._data;if(this._filter){d=d.filter(this._filter)}var g=z();for(var v=0;v<=this._drawDepth;v++){g.key(e._groupBy[v])}if(this._discrete&&"_"+this._discrete in this){g.key(this["_"+this._discrete])}g.rollup(function(t){return e._filteredData.push(Xl(t,e._aggs))}).entries(d)}gw.bind(this)(d);dw.bind(this)(d);_w.bind(this)();vw.bind(this)(d);yw.bind(this)(d);this._shapes=[];if(i){setTimeout(i,this._duration+100)}return this};i.prototype.active=function t(i){this._active=i;this._shapes.forEach(function(t){return t.active(i)});if(this._legend){this._legendClass.active(i)}return this};i.prototype.aggs=function t(i){return arguments.length?(this._aggs=yu(this._aggs,i),this):this._aggs};i.prototype.backConfig=function t(i){return arguments.length?(this._backConfig=yu(this._backConfig,i),this):this._backConfig};i.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};i.prototype.depth=function t(i){return arguments.length?(this._depth=i,this):this._depth};i.prototype.discrete=function t(i){return arguments.length?(this._discrete=i,this):this._discrete};i.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};i.prototype.filter=function t(i){return arguments.length?(this._filter=i,this):this._filter};i.prototype.groupBy=function t(i){var e=this;if(!arguments.length){return this._groupBy}if(!(i instanceof Array)){i=[i]}return this._groupBy=i.map(function(t){if(typeof t==="function"){return t}else{if(!e._aggs[t]){e._aggs[t]=function(t){var i=Array.from(new Set(t));return i.length===1?i[0]:i}}return gu(t)}}),this};i.prototype.height=function t(i){return arguments.length?(this._height=i,this):this._height};i.prototype.hover=function t(i){var e=this;var n=this._hover=i;if(typeof i==="function"){var r=A(this._shapes.map(function(t){return t.data()}));r=r.concat(this._legendClass.data());var o=i?r.filter(i):[];var s=[];o.map(this._ids).forEach(function(t){for(var i=1;i<=t.length;i++){s.push(JSON.stringify(t.slice(0,i)))}});s=s.filter(function(t,i){return s.indexOf(t)===i});if(s.length){n=function(t,i){return s.includes(JSON.stringify(e._ids(t,i)))}}}this._shapes.forEach(function(t){return t.hover(n)});if(this._legend){this._legendClass.hover(n)}return this};i.prototype.label=function t(i){return arguments.length?(this._label=typeof i==="function"?i:Cu(i),this):this._label};i.prototype.legend=function t(i){return arguments.length?(this._legend=i,this):this._legend};i.prototype.legendConfig=function t(i){return arguments.length?(this._legendConfig=i,this):this._legendConfig};i.prototype.locale=function t(i){return arguments.length?(this._locale=i,this):this._locale};i.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};i.prototype.shape=function t(i){return arguments.length?(this._shape=typeof i==="function"?i:Cu(i),this):this._shape};i.prototype.shapeConfig=function t(i){return arguments.length?(this._shapeConfig=yu(this._shapeConfig,i),this):this._shapeConfig};i.prototype.time=function t(i){if(arguments.length){if(typeof i==="function"){this._time=i}else{this._time=gu(i);if(!this._aggs[i]){this._aggs[i]=function(t){var i=Array.from(new Set(t));return i.length===1?i[0]:i}}}return this}else{return this._time}};i.prototype.timeFilter=function t(i){return arguments.length?(this._timeFilter=i,this):this._timeFilter};i.prototype.timeline=function t(i){return arguments.length?(this._timeline=i,this):this._timeline};i.prototype.timelineConfig=function t(i){return arguments.length?(this._timelineConfig=yu(this._timelineConfig,i),this):this._timelineConfig};i.prototype.title=function t(i){return arguments.length?(this._title=typeof i==="function"?i:Cu(i),this):this._title};i.prototype.titleConfig=function t(i){return arguments.length?(this._titleConfig=yu(this._titleConfig,i),this):this._titleConfig};i.prototype.tooltip=function t(i){return arguments.length?(this._tooltip=i,this):this._tooltip};i.prototype.tooltipConfig=function t(i){return arguments.length?(this._tooltipConfig=yu(this._tooltipConfig,i),this):this._tooltipConfig};i.prototype.total=function t(i){return arguments.length?(this._total=typeof i==="function"?i:gu(i),this):this._total};i.prototype.totalConfig=function t(i){return arguments.length?(this._totalConfig=yu(this._totalConfig,i),this):this._totalConfig};i.prototype.width=function t(i){return arguments.length?(this._width=i,this):this._width};return i}(xu);var Mw=function(t){function i(){t.call(this);this._axis=(new V_).align("end").orient("bottom");this._axisConfig={scale:"time"};this._axisTest=(new V_).align("end").gridSize(0).orient("bottom");this.end("end");this.start("start")}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype.render=function i(e){var n=this;t.prototype.render.call(this,e);var r=this._filteredData.map(function(t,i){return{__d3plus__:true,data:t,end:n._axisConfig.scale==="time"?X_(n._end(t,i)):n._end(t,i),i:i,id:n._id(t,i),start:n._axisConfig.scale==="time"?X_(n._start(t,i)):n._start(t,i)}}).filter(function(t){return t.end-t.start>0}).sort(function(t,i){return t.start-i.start});var o;if(this._groupBy.length>1&&this._drawDepth>0){var s=z();var a=function(t){s.key(function(i){return n._groupBy[t](i.data,i.i)})};for(var h=0;h<this._drawDepth;h++)a(h);o=s.entries(r)}else{o=[{values:r}]}var u=0;o.forEach(function(t){var i=[];t.values.forEach(function(t){i=i.map(function(i){return i<=t.start?false:i});var e=i.indexOf(false);if(e<0){t.lane=u+i.length;i.push(t.end)}else{i[e]=t.end;t.lane=u+e}});u+=i.length});var l={domain:[S(r,function(t){return t.start})||0,w(r,function(t){return t.end})||0],height:this._height-this._margin.top-this._margin.bottom,width:this._width-this._margin.left-this._margin.right};var f="translate("+this._margin.left+", "+this._margin.top+")";this._axisTest.config(l).config(this._axisConfig).select(Au("g.d3plus-priestley-axis-test",{parent:this._select,enter:{opacity:0}}).node()).render();this._axis.config(l).config(this._axisConfig).select(Au("g.d3plus-priestley-axis",{parent:this._select,enter:{transform:f},update:{transform:f}}).node()).render();var c=this._axisTest._padding;var _=this._axis._d3Scale;var d=X().domain(p(0,u,1)).padding(.5).rangeRound([this._height-this._margin.bottom-this._axisTest.outerBounds().height-c,this._margin.top+c]);var g=d.step();this._shapes.push((new zm).data(r).duration(this._duration).height(g>=this._padding*2?g-this._padding:g>2?g-2:g).label(function(t,i){return n._drawLabel(t.data,i)}).select(Au("g.d3plus-priestley-shapes",{parent:this._select}).node()).width(function(t){var i=Math.abs(_(t.end)-_(t.start));return i>2?i-2:i}).x(function(t){return _(t.start)+(_(t.end)-_(t.start))/2}).y(function(t){return d(t.lane)}).config(this._shapeConfigPrep("Rect")).render());return this};i.prototype.axisConfig=function t(i){return arguments.length?(this._axisConfig=yu(this._axisConfig,i),this):this._axisConfig};i.prototype.end=function t(i){if(arguments.length){if(typeof i==="function"){this._end=i}else{this._end=gu(i);if(!this._aggs[i]){this._aggs[i]=function(t){return w(t)}}}return this}else{return this._end}};i.prototype.start=function t(i){if(arguments.length){if(typeof i==="function"){this._start=i}else{this._start=gu(i);if(!this._aggs[i]){this._aggs[i]=function(t){return S(t)}}}return this}else{return this._start}};return i}(Dw);var zw=function(t){function i(){var i=this;t.call(this);this._brushing=true;this._brushFilter=function(){return!yo.button&&yo.detail<2};this._domain=[2001,2010];this._gridSize=0;this._handleConfig={fill:"#444"};this._handleSize=6;this._height=100;this._on={};this.orient("bottom");this._scale="time";this._selectionConfig={fill:"#777","stroke-width":0};this._shape="Rect";this._shapeConfig=Object.assign({},this._shapeConfig,{height:10,width:function(t){return i._domain.map(function(t){return X_(t).getTime()}).includes(t.id)?2:1}});this._snapping=true}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._brushBrush=function t(){if(yo.sourceEvent&&yo.sourceEvent.offsetX&&yo.selection!==null&&(!this._brushing||this._snapping)){var i=(this._brushing?yo.selection:[yo.selection[0],yo.selection[0]]).map(this._d3Scale.invert).map(Number);var e=this._availableTicks.map(Number);i[0]=X_(wu(i[0],e));i[1]=X_(wu(i[1],e));var n=+i[0]===+i[1],r=n?i[0]:i;if(this._selection&&JSON.stringify(r)!==JSON.stringify(this._selection)){this._selection=r;if(this._on.end){this._on.end(r)}}var o=i.map(this._d3Scale);if(n){o[0]-=.1;o[1]+=.1}this._brushGroup.call(this._brush.move,o)}this._brushStyle();if(this._on.brush){this._on.brush()}};i.prototype._brushEnd=function t(){if(!yo.sourceEvent){return}var i=(yo.selection&&this._brushing?yo.selection:[yo.sourceEvent.offsetX,yo.sourceEvent.offsetX]).map(this._d3Scale.invert).map(Number);var e=this._availableTicks.map(Number);i[0]=X_(wu(i[0],e));i[1]=X_(wu(i[1],e));var n=+i[0]===+i[1];if(this._brushing||!this._snapping){var r=i.map(this._d3Scale);if(n){r[0]-=.1;r[1]+=.1}this._brushGroup.transition(this._transition).call(this._brush.move,r)}this._brushStyle();var o=n?i[0]:i;if(JSON.stringify(o)!==JSON.stringify(this._selection)){if(this._on.end){this._on.end(o)}this._selection=o}};i.prototype._brushStart=function t(){if(yo.sourceEvent!==null&&(!this._brushing||this._snapping)){var i=(yo.selection&&this._brushing?yo.selection:[yo.sourceEvent.offsetX,yo.sourceEvent.offsetX]).map(this._d3Scale.invert).map(Number);var e=this._availableTicks.map(Number);i[0]=X_(wu(i[0],e));i[1]=X_(wu(i[1],e));var n=+i[0]===+i[1];var r=i.map(this._d3Scale);if(n){r[0]-=.1;r[1]+=.1}this._brushGroup.call(this._brush.move,r)}this._brushStyle();if(this._on.start){this._on.start()}};i.prototype._brushStyle=function t(){var i=this._position;var e=i.height;var n=this._shape==="Circle"?this._shapeConfig.r*2:this._shape==="Rect"?this._shapeConfig[e]:this._tickSize;this._brushGroup.selectAll(".overlay").attr("cursor",this._brushing?"crosshair":"pointer");this._brushGroup.selectAll(".selection").call(mu,this._selectionConfig).attr("height",n);this._brushGroup.selectAll(".handle").call(mu,this._handleConfig).attr("height",n+this._handleSize)};i.prototype.render=function i(e){t.prototype.render.call(this,e);var n=this._position;var r=n.height;var o=n.y;var s=this._outerBounds[o],a=this._d3Scale.range();var h=this._brush=am().extent([[a[0],s],[a[1],s+this._outerBounds[r]]]).filter(this._brushFilter).handleSize(this._handleSize).on("start",this._brushStart.bind(this)).on("brush",this._brushBrush.bind(this)).on("end",this._brushEnd.bind(this));
var u=this._availableTicks[this._availableTicks.length-1];var l=(this._selection===void 0?[u,u]:this._selection instanceof Array?this._selection.slice():[this._selection,this._selection]).map(X_).map(this._d3Scale);if(l[0]===l[1]){l[0]-=.1;l[1]+=.1}this._brushGroup=Au("g.brushGroup",{parent:this._group});this._brushGroup.call(h).transition(this._transition).call(h.move,l);return this};i.prototype.brushing=function t(i){return arguments.length?(this._brushing=i,this):this._brushing};i.prototype.brushFilter=function t(i){return arguments.length?(this._brushFilter=i,this):this._brushFilter};i.prototype.handleConfig=function t(i){return arguments.length?(this._handleConfig=Object.assign(this._handleConfig,i),this):this._handleConfig};i.prototype.handleSize=function t(i){return arguments.length?(this._handleSize=i,this):this._handleSize};i.prototype.on=function t(i,e){return arguments.length===2?(this._on[i]=e,this):arguments.length?typeof i==="string"?this._on[i]:(this._on=Object.assign({},this._on,i),this):this._on};i.prototype.selectionConfig=function t(i){return arguments.length?(this._selectionConfig=Object.assign(this._selectionConfig,i),this):this._selectionConfig};i.prototype.selection=function t(i){return arguments.length?(this._selection=i,this):this._selection};i.prototype.snapping=function t(i){return arguments.length?(this._snapping=i,this):this._snapping};return i}(V_);var Fw=function(){var t=this._history.length;var i=Au("g.d3plus-viz-back",{parent:this._select,transition:this._transition,update:{transform:"translate("+this._margin.left+", "+this._margin.top+")"}}).node();this._backClass.data(t?[{text:Yl.t("Back",{lng:this._locale}),x:this._padding*2,y:0}]:[]).select(i).config(this._backConfig).render();this._margin.top+=t?this._backClass.fontSize()()+this._padding:0};var Ow=function(t,i,e){if(e===void 0)e=[];if(e&&!(e instanceof Array)){e=[e]}var n=z().key(i).entries(t);if(n.length<2){return{data:[],id:i}}var r,o;if(e.length){var s=n.length;var a=function(i){var a=n.map(function(t){return Array.from(new Set(t.values.map(function(t){return e[i](t)})))}),h=k(a,function(t){return t.length}),u=new Set(A(a)).size;if(h===s&&u===s||i===e.length-1){o=e[i];r=z().key(o).entries(t).map(function(t){return Xl(t.values)});return"break"}};for(var h=0;h<e.length;h++){var u=a(h);if(u==="break")break}}else{o=i;r=n.map(function(t){return Xl(t.values)})}return{data:r,id:o}};var Nw=function(t){var i=this;if(t===void 0)t=[];this._legendData=[];if(t.length){var e=z();for(var n=0;n<=this._drawDepth;n++){e.key(i._groupBy[n])}e.rollup(function(t){return i._legendData.push(Xl(t,i._aggs))}).entries(t)}var r=Au("g.d3plus-viz-legend",{condition:this._legend,parent:this._select,transition:this._transition}).node();if(this._legend){var o=Ow(this._legendData,this._shapeConfig.fill,this._groupBy);this._legendClass.id(o.id).duration(this._duration).data(o.data.length>1?o.data:[]).height(this._height-this._margin.bottom).label(this._label||o.id).select(r).verticalAlign("bottom").width(this._width).shapeConfig(this._shapeConfig).shapeConfig({on:Object.keys(this._on).filter(function(t){return!t.includes(".")||t.includes(".legend")}).reduce(function(t,e){t[e]=i._on[e];return t},{})}).config(this._legendConfig).render();var s=this._legendClass.outerBounds();if(s.height){this._margin.bottom+=s.height+this._legendClass.padding()*2}}};var Tw=function(t){if(t===void 0)t=[];var i=this._time&&this._timeline;var e=i?Array.from(new Set(this._data.map(this._time))).map(X_):[];i=i&&e.length>1;var n=Au("g.d3plus-viz-timeline",{condition:i,parent:this._select,transition:this._transition}).node();if(i){var r=this._timelineClass.domain(h(e)).duration(this._duration).height(this._height-this._margin.bottom).select(n).ticks(e.sort(function(t,i){return+t-+i})).width(this._width);if(r.selection()===void 0){var o=h(t.map(this._time).map(X_));if(o[0]===o[1]){r.selection(o[0])}else{r.selection(o)}}r.config(this._timelineConfig).render();this._margin.bottom+=r.outerBounds().height+r.padding()*2}};var jw=function(t){if(t===void 0)t=[];var i=this._title?this._title(t):false;var e=Au("g.d3plus-viz-title",{enter:{transform:"translate("+this._margin.left+", "+this._margin.top+")"},parent:this._select,transition:this._transition,update:{transform:"translate("+this._margin.left+", "+this._margin.top+")"}}).node();this._titleClass.data(i?[{text:i}]:[]).select(e).width(this._width-this._margin.left-this._margin.right).config(this._titleConfig).render();this._margin.top+=i?e.getBBox().height+this._padding:0};var Pw=function(t){if(t===void 0)t=[];var i=typeof this._total==="function"?k(t.map(this._total)):this._total===true&&this._size?k(t.map(this._size)):false;var e=Au("g.d3plus-viz-total",{enter:{transform:"translate("+this._margin.left+", "+this._margin.top+")"},parent:this._select,transition:this._transition,update:{transform:"translate("+this._margin.left+", "+this._margin.top+")"}}).node();var n=typeof i==="number";this._totalClass.data(n?[{text:Yl.t("Total",{lng:this._locale})+": "+i}]:[]).select(e).width(this._width-this._margin.left-this._margin.right).config(this._totalConfig).render();this._margin.top+=n?e.getBBox().height+this._padding:0};function Hw(t,i){if(t.tagName===undefined||["BODY","HTML"].indexOf(t.tagName)>=0){var e=window["inner"+(i.charAt(0).toUpperCase()+i.slice(1))];var n=Zs(t);if(i==="width"){e-=parseFloat(n.style("margin-left"),10);e-=parseFloat(n.style("margin-right"),10);e-=parseFloat(n.style("padding-left"),10);e-=parseFloat(n.style("padding-right"),10)}else{e-=parseFloat(n.style("margin-top"),10);e-=parseFloat(n.style("margin-bottom"),10);e-=parseFloat(n.style("padding-top"),10);e-=parseFloat(n.style("padding-bottom"),10)}return e}else{var r=parseFloat(Zs(t).style(i),10);if(typeof r==="number"&&r>0){return r}else{return Hw(t.parentNode,i)}}}var Rw=function(t){return[Hw(t,"width"),Hw(t,"height")]};var Lw=function(t,i){this._select.style("cursor","auto");if(this._drawDepth<this._groupBy.length-1){var e=this._groupBy[this._drawDepth],n=e(t,i);this.hover(false);if(this._tooltip){this._tooltipClass.data([]).render()}this._history.push({depth:this._depth,filter:this._filter});this.config({depth:this._drawDepth+1,filter:function(t,i){return e(t,i)===n}}).render()}};var Ww=function(t,i){var e=this;var n=this._ids(t,i);this.hover(function(t,i){var r=e._ids(t,i);return n[n.length-1]===r[n.length-1]})};var Gw=function(t,i,e){if(e===void 0)e={};if(this._tooltip){this._select.style("cursor","pointer");this._tooltipClass.data([t]).footer(this._drawDepth<this._groupBy.length-1?Yl.t("Click to Expand",{lng:this._locale}):this._active&&this._active(t,i)?!this._focus||this._focus===this._id(t,i)?Yl.t("Click to Remove Highlight",{lng:this._locale}):Yl.t("Click to Highlight",{lng:this._locale}):Yl.t("Click to Highlight",{lng:this._locale})).title(this._drawLabel).translate(Do(Zs("html").node())).config(e).config(this._tooltipConfig).render()}};var Uw=function(t,i){var e=this;if(this._hover&&this._drawDepth>=this._groupBy.length-1){if(this._active&&this._active(t,i)){this.active(false);Ww.bind(this)(t,i)}else{var n=this._ids(t,i);this.active(function(t,i){var r=e._ids(t,i);return n[n.length-1]===r[n.length-1]})}Gw.bind(this)(t,i,{title:this._legendClass.label()})}};var Iw=function(t,i){var e=this;if(this._hover&&this._drawDepth>=this._groupBy.length-1){if(this._active&&this._active(t,i)){this.active(false);Ww.bind(this)(t,i)}else{var n=this._ids(t,i);this.active(function(t,i){var r=e._ids(t,i);return n[n.length-1]===r[n.length-1]})}Gw.bind(this)(t,i)}};var qw=function(){this.hover(false);this._select.style("cursor","auto");if(this._tooltip){this._tooltipClass.data([]).render()}};var Yw=function(t,i){Gw.bind(this)(t,i,{title:this._legendClass.label()})};var Xw=function(t,i){Gw.bind(this)(t,i)};var Vw=function(t){function i(){var i=this;t.call(this);this._aggs={};this._backClass=(new Bf).on("click",function(){if(i._history.length){i.config(i._history.pop()).render()}else{i.depth(i._drawDepth-1).filter(false).render()}}).on("mousemove",function(){return i._backClass.select().style("cursor","pointer")});this._backConfig={fontSize:10,resize:false};this._data=[];this._duration=600;this._history=[];this._groupBy=[gu("id")];this._legend=true;this._legendConfig={shapeConfig:{fontResize:false}};this._legendClass=new gx;this._locale="en-US";this._on={click:Lw.bind(this),"click.legend":Uw.bind(this),"click.shape":Iw.bind(this),mouseenter:Ww.bind(this),"mousemove.legend":Yw.bind(this),"mousemove.shape":Xw.bind(this),mouseleave:qw.bind(this)};this._padding=5;this._shapeConfig={fill:function(t,e){return ef(i._groupBy[0](t,e))},opacity:Cu(1),stroke:function(t,e){return ft(ef(i._groupBy[0](t,e))).darker()},strokeWidth:Cu(0)};this._timeline=true;this._timelineClass=(new zw).align("end").on("end",function(t){if(!(t instanceof Array)){t=[t,t]}t=t.map(Number);i._timelineClass.selection(t);i.timeFilter(function(e){var n=X_(i._time(e)).getTime();return n>=t[0]&&n<=t[1]}).render()});this._titleClass=new Bf;this._titleConfig={fontSize:12,resize:false,textAnchor:"middle"};this._timelineConfig={};this._tooltip=true;this._tooltipClass=new fm;this._tooltipConfig={duration:50,pointerEvents:"none"};this._totalClass=new Bf;this._totalConfig={fontSize:10,resize:false,textAnchor:"middle"}}if(t)i.__proto__=t;i.prototype=Object.create(t&&t.prototype);i.prototype.constructor=i;i.prototype._shapeConfigPrep=function t(i){var e=this;if(i===void 0)i=false;var n={duration:this._duration};var r=function(t){if({}.hasOwnProperty.call(e._shapeConfig,t)){if(typeof e._shapeConfig[t]==="function"){n[t]=function(i,n,r){return e._shapeConfig[t](i.__d3plus__?i.data:i,i.__d3plus__?i.i:n,r)}}else{n[t]=e._shapeConfig[t]}}};for(var o in this._shapeConfig)r(o);n.on=Object.keys(this._on).filter(function(t){return!t.includes(".")||t.includes(".shape")}).reduce(function(t,i){t[i]=function(t,n){return e._on[i]?e._on[i](t.__d3plus__?t.data:t,t.__d3plus__?t.i:n):null};return t},{});if(i&&this._shapeConfig[i]){n=yu(n,this._shapeConfig[i])}return n};i.prototype.render=function t(i){var e=this;this._margin={bottom:0,left:0,right:0,top:0};this._transition=Ph().duration(this._duration);if(this._select===void 0||this._select.node().tagName.toLowerCase()!=="svg"){var n=this._select===void 0?Zs("body"):this._select;var r=Rw(n.node());var o=r[0];var s=r[1];if(!this._width){this.width(o)}if(!this._height){this.height(s)}o=this._width;s=this._height;this.select(n.append("svg").style("width",o+"px").style("height",s+"px").style("display","block").node())}if(!this._width||!this._height){var a=Rw(this._select.node());var h=a[0];var u=a[1];if(!this._width){this.width(h)}if(!this._height){this.height(u)}}var l=this;this._drawDepth=this._depth!==void 0?this._depth:this._groupBy.length-1;this._id=this._groupBy[this._drawDepth];this._ids=function(t,i){return e._groupBy.map(function(e){return e(t.__d3plus__?t.data:t,t.__d3plus__?t.i:i)}).filter(function(t){return t!==void 0&&t.constructor!==Array})};this._drawLabel=this._label||function(t,i){var e=l._ids(t,i).filter(function(t){return t&&t.constructor!==Array});return e[e.length-1]};if(this._time&&this._timeFilter===void 0){var f=this._data.map(this._time).map(X_);var c=this._data[0],_=0;if(this._discrete&&"_"+this._discrete in this&&this["_"+this._discrete](c,_)===this._time(c,_)){this._timeFilter=function(){return true}}else{var p=+w(f);this._timeFilter=function(t,i){return+X_(e._time(t,i))===p}}}this._filteredData=[];var d=[];if(this._data.length){d=this._timeFilter?this._data.filter(this._timeFilter):this._data;if(this._filter){d=d.filter(this._filter)}var g=z();for(var v=0;v<=this._drawDepth;v++){g.key(e._groupBy[v])}if(this._discrete&&"_"+this._discrete in this){g.key(this["_"+this._discrete])}g.rollup(function(t){return e._filteredData.push(Xl(t,e._aggs))}).entries(d)}Tw.bind(this)(d);Nw.bind(this)(d);Fw.bind(this)();jw.bind(this)(d);Pw.bind(this)(d);this._shapes=[];if(i){setTimeout(i,this._duration+100)}return this};i.prototype.active=function t(i){this._active=i;this._shapes.forEach(function(t){return t.active(i)});if(this._legend){this._legendClass.active(i)}return this};i.prototype.aggs=function t(i){return arguments.length?(this._aggs=yu(this._aggs,i),this):this._aggs};i.prototype.backConfig=function t(i){return arguments.length?(this._backConfig=yu(this._backConfig,i),this):this._backConfig};i.prototype.data=function t(i){return arguments.length?(this._data=i,this):this._data};i.prototype.depth=function t(i){return arguments.length?(this._depth=i,this):this._depth};i.prototype.discrete=function t(i){return arguments.length?(this._discrete=i,this):this._discrete};i.prototype.duration=function t(i){return arguments.length?(this._duration=i,this):this._duration};i.prototype.filter=function t(i){return arguments.length?(this._filter=i,this):this._filter};i.prototype.groupBy=function t(i){var e=this;if(!arguments.length){return this._groupBy}if(!(i instanceof Array)){i=[i]}return this._groupBy=i.map(function(t){if(typeof t==="function"){return t}else{if(!e._aggs[t]){e._aggs[t]=function(t){var i=Array.from(new Set(t));return i.length===1?i[0]:i}}return gu(t)}}),this};i.prototype.height=function t(i){return arguments.length?(this._height=i,this):this._height};i.prototype.hover=function t(i){var e=this;var n=this._hover=i;if(typeof i==="function"){var r=A(this._shapes.map(function(t){return t.data()}));r=r.concat(this._legendClass.data());var o=i?r.filter(i):[];var s=[];o.map(this._ids).forEach(function(t){for(var i=1;i<=t.length;i++){s.push(JSON.stringify(t.slice(0,i)))}});s=s.filter(function(t,i){return s.indexOf(t)===i});if(s.length){n=function(t,i){return s.includes(JSON.stringify(e._ids(t,i)))}}}this._shapes.forEach(function(t){return t.hover(n)});if(this._legend){this._legendClass.hover(n)}return this};i.prototype.label=function t(i){return arguments.length?(this._label=typeof i==="function"?i:Cu(i),this):this._label};i.prototype.legend=function t(i){return arguments.length?(this._legend=i,this):this._legend};i.prototype.legendConfig=function t(i){return arguments.length?(this._legendConfig=i,this):this._legendConfig};i.prototype.locale=function t(i){return arguments.length?(this._locale=i,this):this._locale};i.prototype.select=function t(i){return arguments.length?(this._select=Zs(i),this):this._select};i.prototype.shape=function t(i){return arguments.length?(this._shape=typeof i==="function"?i:Cu(i),this):this._shape};i.prototype.shapeConfig=function t(i){return arguments.length?(this._shapeConfig=yu(this._shapeConfig,i),this):this._shapeConfig};i.prototype.time=function t(i){if(arguments.length){if(typeof i==="function"){this._time=i}else{this._time=gu(i);if(!this._aggs[i]){this._aggs[i]=function(t){var i=Array.from(new Set(t));return i.length===1?i[0]:i}}}return this}else{return this._time}};i.prototype.timeFilter=function t(i){return arguments.length?(this._timeFilter=i,this):this._timeFilter};i.prototype.timeline=function t(i){return arguments.length?(this._timeline=i,this):this._timeline};i.prototype.timelineConfig=function t(i){return arguments.length?(this._timelineConfig=yu(this._timelineConfig,i),this):this._timelineConfig};i.prototype.title=function t(i){return arguments.length?(this._title=typeof i==="function"?i:Cu(i),this):this._title};i.prototype.titleConfig=function t(i){return arguments.length?(this._titleConfig=yu(this._titleConfig,i),this):this._titleConfig};i.prototype.tooltip=function t(i){return arguments.length?(this._tooltip=i,this):this._tooltip};i.prototype.tooltipConfig=function t(i){return arguments.length?(this._tooltipConfig=yu(this._tooltipConfig,i),this):this._tooltipConfig};i.prototype.total=function t(i){return arguments.length?(this._total=typeof i==="function"?i:gu(i),this):this._total};i.prototype.totalConfig=function t(i){return arguments.length?(this._totalConfig=yu(this._totalConfig,i),this):this._totalConfig};i.prototype.width=function t(i){return arguments.length?(this._width=i,this):this._width};return i}(xu);t.version=i;t.Axis=V_;t.AxisBottom=J_;t.AxisLeft=$_;t.AxisRight=K_;t.AxisTop=Z_;t.date=X_;t.colorAdd=Zl;t.colorAssign=ef;t.colorContrast=nf;t.colorDefaults=Ql;t.colorLegible=rf;t.colorLighter=of;t.colorSubtract=sf;t.accessor=gu;t.assign=yu;t.attrize=mu;t.BaseClass=xu;t.closest=wu;t.constant=Cu;t.elem=Au;t.isObject=vu;t.locale=Yl;t.merge=Xl;t.prefix=Vl;t.stylize=Jl;t.Geomap=wm;t.Donut=Qm;t.Pie=Zm;t.Tree=px;t.Treemap=dx;t.Legend=gx;t.Network=jx;t.AreaPlot=aw;t.BarChart=hw;t.LinePlot=uw;t.Plot=sw;t.StackedArea=lw;t.Priestley=Mw;t.Area=km;t.Bar=Em;t.Circle=Bm;t.Image=Am;t.Line=Dm;t.Path=Mm;t.pointDistance=Cm;t.Rect=zm;t.Shape=Sm;t.stringify=af;t.strip=uf;t.TextBox=Bf;t.textSplit=Sf;t.textWidth=kf;t.textWrap=Ef;t.titleCase=Df;t.Timeline=zw;t.Tooltip=fm;t.Viz=Vw;Object.defineProperty(t,"__esModule",{value:true})});