/*
  d3plus-format v0.1.6
  Shorthand formatters for common number types.
  Copyright (c) 2019 D3plus - https://d3plus.org
  @license MIT
*/
if(typeof Object.assign!=="function"){Object.defineProperty(Object,"assign",{value:function t(r){"use strict";if(r===null){throw new TypeError("Cannot convert undefined or null to object")}var e=Object(r);for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i!==null){for(var a in i){if(Object.prototype.hasOwnProperty.call(i,a)){e[a]=i[a]}}}}return e},writable:true,configurable:true})}if(!Array.prototype.includes){Object.defineProperty(Array.prototype,"includes",{value:function t(r,e){var n=Object(this);var i=n.length>>>0;if(i===0)return false;var a=e|0;var o=Math.max(a>=0?a:i-Math.abs(a),0);function u(t,r){return t===r||typeof t==="number"&&typeof r==="number"&&isNaN(t)&&isNaN(r)}while(o<i){if(u(n[o],r)){return true}o++}return false}})}(function(t,r){typeof exports==="object"&&typeof module!=="undefined"?r(exports):typeof define==="function"&&define.amd?define("d3plus-format",["exports"],r):r(t.d3plus={})})(this,function(t){function u(t,r){if((e=(t=r?t.toExponential(r-1):t.toExponential()).indexOf("e"))<0){return null}var e,n=t.slice(0,e);return[n.length>1?n[0]+n.slice(2):n,+t.slice(e+1)]}function s(t){return t=u(Math.abs(t)),t?t[1]:NaN}function e(u,s){return function(t,r){var e=t.length,n=[],i=0,a=u[0],o=0;while(e>0&&a>0){if(o+a+1>r){a=Math.max(1,r-o)}n.push(t.substring(e-=a,e+a));if((o+=a+1)>r){break}a=u[i=(i+1)%u.length]}return n.reverse().join(s)}}function a(r){return function(t){return t.replace(/[0-9]/g,function(t){return r[+t]})}}var n=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function S(t){return new r(t)}S.prototype=r.prototype;function r(t){if(!(r=n.exec(t))){throw new Error("invalid format: "+t)}var r;this.fill=r[1]||" ";this.align=r[2]||">";this.sign=r[3]||"-";this.symbol=r[4]||"";this.zero=!!r[5];this.width=r[6]&&+r[6];this.comma=!!r[7];this.precision=r[8]&&+r[8].slice(1);this.trim=!!r[9];this.type=r[10]||""}r.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function z(t){t:for(var r=t.length,e=1,n=-1,i;e<r;++e){switch(t[e]){case".":n=i=e;break;case"0":if(n===0){n=e}i=e;break;default:if(n>0){if(!+t[e]){break t}n=0}break}}return n>0?t.slice(0,n)+t.slice(i+1):t}var $;function i(t,r){var e=u(t,r);if(!e){return t+""}var n=e[0],i=e[1],a=i-($=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+u(t,Math.max(0,r+a-1))[0]}function o(t,r){var e=u(t,r);if(!e){return t+""}var n=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}var A={"%":function(t,r){return(t*100).toFixed(r)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,r){return t.toExponential(r)},f:function(t,r){return t.toFixed(r)},g:function(t,r){return t.toPrecision(r)},o:function(t){return Math.round(t).toString(8)},p:function(t,r){return o(t*100,r)},r:o,s:i,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function f(t){return t}var O=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function h(t){var w=t.grouping&&t.thousands?e(t.grouping,t.thousands):f,n=t.currency,j=t.decimal,k=t.numerals?a(t.numerals):f,i=t.percent||"%";function o(t){t=S(t);var f=t.fill,c=t.align,l=t.sign,r=t.symbol,h=t.zero,p=t.width,m=t.comma,d=t.precision,g=t.trim,y=t.type;if(y==="n"){m=true,y="g"}else if(!A[y]){d==null&&(d=12),g=true,y="g"}if(h||f==="0"&&c==="="){h=true,f="0",c="="}var v=r==="$"?n[0]:r==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b=r==="$"?n[1]:/[%p]/.test(y)?i:"";var M=A[y],x=/[defgprs%]/.test(y);d=d==null?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d));function e(t){var r=v,e=b,n,i,a;if(y==="c"){e=M(t)+e;t=""}else{t=+t;var o=t<0;t=M(Math.abs(t),d);if(g){t=z(t)}if(o&&+t===0){o=false}r=(o?l==="("?l:"-":l==="-"||l==="("?"":l)+r;e=(y==="s"?O[8+$/3]:"")+e+(o&&l==="("?")":"");if(x){n=-1,i=t.length;while(++n<i){if(a=t.charCodeAt(n),48>a||a>57){e=(a===46?j+t.slice(n+1):t.slice(n))+e;t=t.slice(0,n);break}}}}if(m&&!h){t=w(t,Infinity)}var u=r.length+t.length+e.length,s=u<p?new Array(p-u+1).join(f):"";if(m&&h){t=w(s+t,s.length?p-e.length:Infinity),s=""}switch(c){case"<":t=r+t+e+s;break;case"=":t=r+s+t+e;break;case"^":t=s.slice(0,u=s.length>>1)+r+t+e+s.slice(u);break;default:t=s+r+t+e;break}return k(t)}e.toString=function(){return t+""};return e}function r(t,r){var e=o((t=S(t),t.type="f",t)),n=Math.max(-8,Math.min(8,Math.floor(s(r)/3)))*3,i=Math.pow(10,-n),a=O[8+n/3];return function(t){return e(i*t)+a}}return{format:o,formatPrefix:r}}var c;var l;var p;m({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function m(t){c=h(t);l=c.format;p=c.formatPrefix;return c}var d={"en-GB":{separator:"",suffixes:["y","z","a","f","p","n","µ","m","","k","M","B","t","q","Q","Z","Y"],grouping:[3],delimiters:{thousands:",",decimal:"."},currency:["£",""]},"en-US":{separator:"",suffixes:["y","z","a","f","p","n","µ","m","","k","M","B","t","q","Q","Z","Y"],grouping:[3],delimiters:{thousands:",",decimal:"."},currency:["$",""]},"es-ES":{separator:"",suffixes:["y","z","a","f","p","n","µ","m","","k","mm","b","t","q","Q","Z","Y"],grouping:[3],delimiters:{thousands:".",decimal:","},currency:["€",""]},"es-CL":{separator:"",suffixes:["y","z","a","f","p","n","µ","m","","k","M","B","t","q","Q","Z","Y"],grouping:[3],delimiters:{thousands:".",decimal:","},currency:["$",""]},"et-EE":{separator:" ",suffixes:["y","z","a","f","p","n","µ","m","","tuh","mln","mld","trl","q","Q","Z","Y"],grouping:[3],delimiters:{thousands:" ",decimal:","},currency:["€",""]},"fr-FR":{suffixes:["y","z","a","f","p","n","µ","m","","k","m","b","t","q","Q","Z","Y"],grouping:[3],delimiters:{thousands:" ",decimal:","},currency:["€",""]}};var g=function(t,r){return parseFloat(Math.round(t*Math.pow(10,r))/Math.pow(10,r)).toFixed(r)};function y(t,r,e){var n=0;if(t){if(t<0){t*=-1}n=1+Math.floor(1e-12+Math.log(t)/Math.LN10);n=Math.max(-24,Math.min(24,Math.floor((n-1)/3)*3))}var i=e[8+n/3];return{number:g(i.scale(t),r),symbol:i.symbol}}function v(t,r){var e=Math.pow(10,Math.abs(8-r)*3);return{scale:r>8?function(t){return t/e}:function(t){return t*e},symbol:t}}function b(t,r){if(r===void 0)r="en-US";if(isFinite(t)){t*=1}else{return"N/A"}var e=t.toString().split(".")[0].replace("-","").length,n=typeof r==="object"?r:d[r]||d["en-US"],i=n.suffixes.map(v);var a=n.delimiters.decimal||".",o=n.separator||"";var u=h({currency:n.currency||["$",""],decimal:a,grouping:n.grouping||[3],thousands:n.delimiters.thousands||","});var s;if(t===0){s="0"}else if(e>=3){var f=y(u.format(".3r")(t),2,i);var c=parseFloat(f.number).toString().replace(".",a);var l=f.symbol;s=""+c+o+l}else if(e===3){s=u.format(",f")(t)}else if(t<1&&t>-1){s=u.format(".2g")(t)}else{s=u.format(".3g")(t)}return s.replace(/(\.[1-9]*)[0]*$/g,"$1").replace(/[.]$/g,"")}t.formatAbbreviate=b;Object.defineProperty(t,"__esModule",{value:true})});