/*
  d3plus-format v0.1.12
  Shorthand formatters for common number types.
  Copyright (c) 2019 D3plus - https://d3plus.org
  @license MIT
*/
(function(r,t){typeof exports==="object"&&typeof module!=="undefined"?t(exports):typeof define==="function"&&define.amd?define("d3plus-format",["exports"],t):(r=r||self,t(r.d3plus={}))})(this,function(r){function p(r){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){p=function(r){return typeof r}}else{p=function(r){return r&&typeof Symbol==="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r}}return p(r)}function u(r,t){if((e=(r=t?r.toExponential(t-1):r.toExponential()).indexOf("e"))<0)return null;var e,n=r.slice(0,e);return[n.length>1?n[0]+n.slice(2):n,+r.slice(e+1)]}function f(r){return r=u(Math.abs(r)),r?r[1]:NaN}function e(u,f){return function(r,t){var e=r.length,n=[],i=0,a=u[0],o=0;while(e>0&&a>0){if(o+a+1>t)a=Math.max(1,t-o);n.push(r.substring(e-=a,e+a));if((o+=a+1)>t)break;a=u[i=(i+1)%u.length]}return n.reverse().join(f)}}function a(t){return function(r){return r.replace(/[0-9]/g,function(r){return t[+r]})}}var n=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function O(r){return new t(r)}O.prototype=t.prototype;function t(r){if(!(t=n.exec(r)))throw new Error("invalid format: "+r);var t;this.fill=t[1]||" ";this.align=t[2]||">";this.sign=t[3]||"-";this.symbol=t[4]||"";this.zero=!!t[5];this.width=t[6]&&+t[6];this.comma=!!t[7];this.precision=t[8]&&+t[8].slice(1);this.trim=!!t[9];this.type=t[10]||""}t.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function E(r){r:for(var t=r.length,e=1,n=-1,i;e<t;++e){switch(r[e]){case".":n=i=e;break;case"0":if(n===0)n=e;i=e;break;default:if(n>0){if(!+r[e])break r;n=0}break}}return n>0?r.slice(0,n)+r.slice(i+1):r}var k;function i(r,t){var e=u(r,t);if(!e)return r+"";var n=e[0],i=e[1],a=i-(k=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+u(r,Math.max(0,t+a-1))[0]}function o(r,t){var e=u(r,t);if(!e)return r+"";var n=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}var P={"%":function r(t,e){return(t*100).toFixed(e)},b:function r(t){return Math.round(t).toString(2)},c:function r(t){return t+""},d:function r(t){return Math.round(t).toString(10)},e:function r(t,e){return t.toExponential(e)},f:function r(t,e){return t.toFixed(e)},g:function r(t,e){return t.toPrecision(e)},o:function r(t){return Math.round(t).toString(8)},p:function r(t,e){return o(t*100,e)},r:o,s:i,X:function r(t){return Math.round(t).toString(16).toUpperCase()},x:function r(t){return Math.round(t).toString(16)}};function c(r){return r}var T=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function d(r){var M=r.grouping&&r.thousands?e(r.grouping,r.thousands):c,n=r.currency,S=r.decimal,j=r.numerals?a(r.numerals):c,i=r.percent||"%";function o(r){r=O(r);var c=r.fill,s=r.align,l=r.sign,t=r.symbol,v=r.zero,h=r.width,p=r.comma,d=r.precision,g=r.trim,m=r.type;if(m==="n")p=true,m="g";else if(!P[m])d==null&&(d=12),g=true,m="g";if(v||c==="0"&&s==="=")v=true,c="0",s="=";var y=t==="$"?n[0]:t==="#"&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b=t==="$"?n[1]:/[%p]/.test(m)?i:"";var w=P[m],x=/[defgprs%]/.test(m);d=d==null?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d));function e(r){var t=y,e=b,n,i,a;if(m==="c"){e=w(r)+e;r=""}else{r=+r;var o=r<0;r=w(Math.abs(r),d);if(g)r=E(r);if(o&&+r===0)o=false;t=(o?l==="("?l:"-":l==="-"||l==="("?"":l)+t;e=(m==="s"?T[8+k/3]:"")+e+(o&&l==="("?")":"");if(x){n=-1,i=r.length;while(++n<i){if(a=r.charCodeAt(n),48>a||a>57){e=(a===46?S+r.slice(n+1):r.slice(n))+e;r=r.slice(0,n);break}}}}if(p&&!v)r=M(r,Infinity);var u=t.length+r.length+e.length,f=u<h?new Array(h-u+1).join(c):"";if(p&&v)r=M(f+r,f.length?h-e.length:Infinity),f="";switch(s){case"<":r=t+r+e+f;break;case"=":r=t+f+r+e;break;case"^":r=f.slice(0,u=f.length>>1)+t+r+e+f.slice(u);break;default:r=f+t+r+e;break}return j(r)}e.toString=function(){return r+""};return e}function t(r,t){var e=o((r=O(r),r.type="f",r)),n=Math.max(-8,Math.min(8,Math.floor(f(t)/3)))*3,i=Math.pow(10,-n),a=T[8+n/3];return function(r){return e(i*r)+a}}return{format:o,formatPrefix:t}}var s;var l;var v;h({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function h(r){s=d(r);l=s.format;v=s.formatPrefix;return s}var g={"en-GB":{separator:"",suffixes:["y","z","a","f","p","n","µ","m","","k","M","B","t","q","Q","Z","Y"],grouping:[3],delimiters:{thousands:",",decimal:"."},currency:["£",""]},"en-US":{separator:"",suffixes:["y","z","a","f","p","n","µ","m","","k","M","B","t","q","Q","Z","Y"],grouping:[3],delimiters:{thousands:",",decimal:"."},currency:["$",""]},"es-ES":{separator:"",suffixes:["y","z","a","f","p","n","µ","m","","k","mm","b","t","q","Q","Z","Y"],grouping:[3],delimiters:{thousands:".",decimal:","},currency:["€",""]},"es-CL":{separator:"",suffixes:["y","z","a","f","p","n","µ","m","","k","M","B","t","q","Q","Z","Y"],grouping:[3],delimiters:{thousands:".",decimal:","},currency:["$",""]},"et-EE":{separator:" ",suffixes:["y","z","a","f","p","n","µ","m","","tuhat","miljonit","miljardit","triljonit","q","Q","Z","Y"],grouping:[3],delimiters:{thousands:" ",decimal:","},currency:["","eurot"]},"fr-FR":{suffixes:["y","z","a","f","p","n","µ","m","","k","m","b","t","q","Q","Z","Y"],grouping:[3],delimiters:{thousands:" ",decimal:","},currency:["€",""]}};var m=function r(t,e){return parseFloat(Math.round(t*Math.pow(10,e))/Math.pow(10,e)).toFixed(e)};function y(r,t,e){var n=0;if(r){if(r<0)r*=-1;n=1+Math.floor(1e-12+Math.log(r)/Math.LN10);n=Math.max(-24,Math.min(24,Math.floor((n-1)/3)*3))}var i=e[8+n/3];return{number:m(i.scale(r),t),symbol:i.symbol}}function b(r,t){var e=Math.pow(10,Math.abs(8-t)*3);return{scale:t>8?function(r){return r/e}:function(r){return r*e},symbol:r}}function w(r){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"en-US";var e=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;if(isFinite(r))r*=1;else return"N/A";var n=r.toString().split(".")[0].replace("-","").length,i=p(t)==="object"?t:g[t]||g["en-US"],a=i.suffixes.map(b);var o=i.delimiters.decimal||".",u=i.separator||"",f=i.delimiters.thousands||",";var c=d({currency:i.currency||["$",""],decimal:o,grouping:i.grouping||[3],thousands:f});var s;if(e)s=c.format(e)(r);else if(r===0)s="0";else if(n>=3){var l=y(c.format(".3r")(r),2,a);var v=parseFloat(l.number).toString().replace(".",o);var h=l.symbol;s="".concat(v).concat(u).concat(h)}else if(n===3)s=c.format(",f")(r);else if(r<1&&r>-1)s=c.format(".2g")(r);else s=c.format(".3g")(r);return s.replace(/(\.[1-9]*)[0]*$/g,"$1").replace(/[.]$/g,"")}r.formatAbbreviate=w;r.formatLocale=g;Object.defineProperty(r,"__esModule",{value:true})});(function(r){typeof define==="function"&&define.amd?define(r):r()})(function(){"use strict";var r=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function t(r,t){return t={exports:{}},r(t,t.exports),t.exports}var e="object";var n=function(r){return r&&r.Math==Math&&r};var l=n(typeof globalThis==e&&globalThis)||n(typeof window==e&&window)||n(typeof self==e&&self)||n(typeof r==e&&r)||Function("return this")();var i=function(r){try{return!!r()}catch(r){return true}};var h=!i(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7});var a={}.propertyIsEnumerable;var o=Object.getOwnPropertyDescriptor;var u=o&&!a.call({1:2},1);var f=u?function r(t){var e=o(this,t);return!!e&&e.enumerable}:a;var p={f:f};var c=function(r,t){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:t}};var s={}.toString;var v=function(r){return s.call(r).slice(8,-1)};var d="".split;var w=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(r){return v(r)=="String"?d.call(r,""):Object(r)}:Object;var g=function(r){if(r==undefined)throw TypeError("Can't call method on "+r);return r};var m=function(r){return w(g(r))};var y=function(r){return typeof r==="object"?r!==null:typeof r==="function"};var b=function(r,t){if(!y(r))return r;var e,n;if(t&&typeof(e=r.toString)=="function"&&!y(n=e.call(r)))return n;if(typeof(e=r.valueOf)=="function"&&!y(n=e.call(r)))return n;if(!t&&typeof(e=r.toString)=="function"&&!y(n=e.call(r)))return n;throw TypeError("Can't convert object to primitive value")};var x={}.hasOwnProperty;var M=function(r,t){return x.call(r,t)};var S=l.document;var j=y(S)&&y(S.createElement);var O=function(r){return j?S.createElement(r):{}};var E=!h&&!i(function(){return Object.defineProperty(O("div"),"a",{get:function(){return 7}}).a!=7});var k=Object.getOwnPropertyDescriptor;var P=h?k:function r(t,e){t=m(t);e=b(e,true);if(E)try{return k(t,e)}catch(r){}if(M(t,e))return c(!p.f.call(t,e),t[e])};var T={f:P};var A=function(r){if(!y(r)){throw TypeError(String(r)+" is not an object")}return r};var C=Object.defineProperty;var F=h?C:function r(t,e,n){A(t);e=b(e,true);A(n);if(E)try{return C(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");if("value"in n)t[e]=n.value;return t};var z={f:F};var N=h?function(r,t,e){return z.f(r,t,c(1,e))}:function(r,t,e){r[t]=e;return r};var L=function(t,e){try{N(l,t,e)}catch(r){l[t]=e}return e};var $=t(function(r){var t="__core-js_shared__";var e=l[t]||L(t,{});(r.exports=function(r,t){return e[r]||(e[r]=t!==undefined?t:{})})("versions",[]).push({version:"3.1.3",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})});var I=$("native-function-to-string",Function.toString);var _=l.WeakMap;var q=typeof _==="function"&&/native code/.test(I.call(_));var Y=0;var G=Math.random();var Z=function(r){return"Symbol("+String(r===undefined?"":r)+")_"+(++Y+G).toString(36)};var Q=$("keys");var W=function(r){return Q[r]||(Q[r]=Z(r))};var D={};var V=l.WeakMap;var B,R,U;var H=function(r){return U(r)?R(r):B(r,{})};var X=function(e){return function(r){var t;if(!y(r)||(t=R(r)).type!==e){throw TypeError("Incompatible receiver, "+e+" required")}return t}};if(q){var K=new V;var J=K.get;var rr=K.has;var tr=K.set;B=function(r,t){tr.call(K,r,t);return t};R=function(r){return J.call(K,r)||{}};U=function(r){return rr.call(K,r)}}else{var er=W("state");D[er]=true;B=function(r,t){N(r,er,t);return t};R=function(r){return M(r,er)?r[er]:{}};U=function(r){return M(r,er)}}var nr={set:B,get:R,has:U,enforce:H,getterFor:X};var ir=t(function(r){var t=nr.get;var u=nr.enforce;var f=String(I).split("toString");$("inspectSource",function(r){return I.call(r)});(r.exports=function(r,t,e,n){var i=n?!!n.unsafe:false;var a=n?!!n.enumerable:false;var o=n?!!n.noTargetGet:false;if(typeof e=="function"){if(typeof t=="string"&&!M(e,"name"))N(e,"name",t);u(e).source=f.join(typeof t=="string"?t:"")}if(r===l){if(a)r[t]=e;else L(t,e);return}else if(!i){delete r[t]}else if(!o&&r[t]){a=true}if(a)r[t]=e;else N(r,t,e)})(Function.prototype,"toString",function r(){return typeof this=="function"&&t(this).source||I.call(this)})});var ar=l;var or=function(r){return typeof r=="function"?r:undefined};var ur=function(r,t){return arguments.length<2?or(ar[r])||or(l[r]):ar[r]&&ar[r][t]||l[r]&&l[r][t]};var fr=Math.ceil;var cr=Math.floor;var sr=function(r){return isNaN(r=+r)?0:(r>0?cr:fr)(r)};var lr=Math.min;var vr=function(r){return r>0?lr(sr(r),9007199254740991):0};var hr=Math.max;var pr=Math.min;var dr=function(r,t){var e=sr(r);return e<0?hr(e+t,0):pr(e,t)};var gr=function(u){return function(r,t,e){var n=m(r);var i=vr(n.length);var a=dr(e,i);var o;if(u&&t!=t)while(i>a){o=n[a++];if(o!=o)return true}else for(;i>a;a++){if((u||a in n)&&n[a]===t)return u||a||0}return!u&&-1}};var mr={includes:gr(true),indexOf:gr(false)};var yr=mr.indexOf;var br=function(r,t){var e=m(r);var n=0;var i=[];var a;for(a in e)!M(D,a)&&M(e,a)&&i.push(a);while(t.length>n)if(M(e,a=t[n++])){~yr(i,a)||i.push(a)}return i};var wr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];var xr=wr.concat("length","prototype");var Mr=Object.getOwnPropertyNames||function r(t){return br(t,xr)};var Sr={f:Mr};var jr=Object.getOwnPropertySymbols;var Or={f:jr};var Er=ur("Reflect","ownKeys")||function r(t){var e=Sr.f(A(t));var n=Or.f;return n?e.concat(n(t)):e};var kr=function(r,t){var e=Er(t);var n=z.f;var i=T.f;for(var a=0;a<e.length;a++){var o=e[a];if(!M(r,o))n(r,o,i(t,o))}};var Pr=/#|\.prototype\./;var Tr=function(r,t){var e=Cr[Ar(r)];return e==zr?true:e==Fr?false:typeof t=="function"?i(t):!!t};var Ar=Tr.normalize=function(r){return String(r).replace(Pr,".").toLowerCase()};var Cr=Tr.data={};var Fr=Tr.NATIVE="N";var zr=Tr.POLYFILL="P";var Nr=Tr;var Lr=T.f;var $r=function(r,t){var e=r.target;var n=r.global;var i=r.stat;var a,o,u,f,c,s;if(n){o=l}else if(i){o=l[e]||L(e,{})}else{o=(l[e]||{}).prototype}if(o)for(u in t){c=t[u];if(r.noTargetGet){s=Lr(o,u);f=s&&s.value}else f=o[u];a=Nr(n?u:e+(i?".":"#")+u,r.forced);if(!a&&f!==undefined){if(typeof c===typeof f)continue;kr(c,f)}if(r.sham||f&&f.sham){N(c,"sham",true)}ir(o,u,c,r)}};var Ir=function(r){if(typeof r!="function"){throw TypeError(String(r)+" is not a function")}return r};var _r=function(n,i,r){Ir(n);if(i===undefined)return n;switch(r){case 0:return function(){return n.call(i)};case 1:return function(r){return n.call(i,r)};case 2:return function(r,t){return n.call(i,r,t)};case 3:return function(r,t,e){return n.call(i,r,t,e)}}return function(){return n.apply(i,arguments)}};var qr=function(r){return Object(g(r))};var Yr=Array.isArray||function r(t){return v(t)=="Array"};var Gr=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())});var Zr=l.Symbol;var Qr=$("wks");var Wr=function(r){return Qr[r]||(Qr[r]=Gr&&Zr[r]||(Gr?Zr:Z)("Symbol."+r))};var Dr=Wr("species");var Vr=function(r,t){var e;if(Yr(r)){e=r.constructor;if(typeof e=="function"&&(e===Array||Yr(e.prototype)))e=undefined;else if(y(e)){e=e[Dr];if(e===null)e=undefined}}return new(e===undefined?Array:e)(t===0?0:t)};var Br=[].push;var Rr=function(h){var p=h==1;var d=h==2;var g=h==3;var m=h==4;var y=h==6;var b=h==5||y;return function(r,t,e,n){var i=qr(r);var a=w(i);var o=_r(t,e,3);var u=vr(a.length);var f=0;var c=n||Vr;var s=p?c(r,u):d?c(r,0):undefined;var l,v;for(;u>f;f++)if(b||f in a){l=a[f];v=o(l,f,i);if(h){if(p)s[f]=v;else if(v)switch(h){case 3:return true;case 5:return l;case 6:return f;case 2:Br.call(s,l)}else if(m)return false}}return y?-1:g||m?m:s}};var Ur={forEach:Rr(0),map:Rr(1),filter:Rr(2),some:Rr(3),every:Rr(4),find:Rr(5),findIndex:Rr(6)};var Hr=Object.keys||function r(t){return br(t,wr)};var Xr=h?Object.defineProperties:function r(t,e){A(t);var n=Hr(e);var i=n.length;var a=0;var o;while(i>a)z.f(t,o=n[a++],e[o]);return t};var Kr=ur("document","documentElement");var Jr=W("IE_PROTO");var rt="prototype";var tt=function(){};var et=function(){var r=O("iframe");var t=wr.length;var e="<";var n="script";var i=">";var a="java"+n+":";var o;r.style.display="none";Kr.appendChild(r);r.src=String(a);o=r.contentWindow.document;o.open();o.write(e+n+i+"document.F=Object"+e+"/"+n+i);o.close();et=o.F;while(t--)delete et[rt][wr[t]];return et()};var nt=Object.create||function r(t,e){var n;if(t!==null){tt[rt]=A(t);n=new tt;tt[rt]=null;n[Jr]=t}else n=et();return e===undefined?n:Xr(n,e)};D[Jr]=true;var it=Wr("unscopables");var at=Array.prototype;if(at[it]==undefined){N(at,it,nt(null))}var ot=function(r){at[it][r]=true};var ut=Ur.find;var ft="find";var ct=true;if(ft in[])Array(1)[ft](function(){ct=false});$r({target:"Array",proto:true,forced:ct},{find:function r(t){return ut(this,t,arguments.length>1?arguments[1]:undefined)}});ot(ft);var st=mr.includes;$r({target:"Array",proto:true},{includes:function r(t){return st(this,t,arguments.length>1?arguments[1]:undefined)}});ot("includes");var lt=Object.assign;var vt=!lt||i(function(){var r={};var t={};var e=Symbol();var n="abcdefghijklmnopqrst";r[e]=7;n.split("").forEach(function(r){t[r]=r});return lt({},r)[e]!=7||Hr(lt({},t)).join("")!=n})?function r(t,e){var n=qr(t);var i=arguments.length;var a=1;var o=Or.f;var u=p.f;while(i>a){var f=w(arguments[a++]);var c=o?Hr(f).concat(o(f)):Hr(f);var s=c.length;var l=0;var v;while(s>l){v=c[l++];if(!h||u.call(f,v))n[v]=f[v]}}return n}:lt;$r({target:"Object",stat:true,forced:Object.assign!==vt},{assign:vt});var ht=Wr("match");var pt=function(r){var t;return y(r)&&((t=r[ht])!==undefined?!!t:v(r)=="RegExp")};var dt=function(r){if(pt(r)){throw TypeError("The method doesn't accept regular expressions")}return r};var gt=Wr("match");var mt=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{e[gt]=false;return"/./"[t](e)}catch(r){}}return false};var yt="".startsWith;var bt=Math.min;$r({target:"String",proto:true,forced:!mt("startsWith")},{startsWith:function r(t){var e=String(g(this));dt(t);var n=vr(bt(arguments.length>1?arguments[1]:undefined,e.length));var i=String(t);return yt?yt.call(e,i,n):e.slice(n,n+i.length)===i}});if(typeof window!=="undefined"){(function(){var n=function(r,t){var e=r.nodeType;if(e===3){t.push(r.textContent.replace(/&/,"&amp;").replace(/</,"&lt;").replace(">","&gt;"))}else if(e===1){t.push("<",r.tagName);if(r.hasAttributes()){[].forEach.call(r.attributes,function(r){t.push(" ",r.item.name,"='",r.item.value,"'")})}if(r.hasChildNodes()){t.push(">");[].forEach.call(r.childNodes,function(r){n(r,t)});t.push("</",r.tagName,">")}else{t.push("/>")}}else if(e==8){t.push("\x3c!--",r.nodeValue,"--\x3e")}};Object.defineProperty(SVGElement.prototype,"innerHTML",{get:function(){var r=[];var t=this.firstChild;while(t){n(t,r);t=t.nextSibling}return r.join("")},set:function(r){while(this.firstChild){this.removeChild(this.firstChild)}try{var t=new DOMParser;t.async=false;var e="<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>"+r+"</svg>";var n=t.parseFromString(e,"text/xml").documentElement;var i=n.firstChild;while(i){this.appendChild(this.ownerDocument.importNode(i,true));i=i.nextSibling}}catch(r){}}});Object.defineProperty(SVGElement.prototype,"innerSVG",{get:function(){return this.innerHTML},set:function(r){this.innerHTML=r}})})()}});