/*
  d3plus-format v0.1.0
  Shorthand formatters for common number types.
  Copyright (c) 2018 D3plus - https://d3plus.org
  @license MIT
*/
if(typeof Object.assign!=="function"){Object.defineProperty(Object,"assign",{value:function t(e){"use strict";if(e===null){throw new TypeError("Cannot convert undefined or null to object")}var r=Object(e);for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i!==null){for(var a in i){if(Object.prototype.hasOwnProperty.call(i,a)){r[a]=i[a]}}}}return r},writable:true,configurable:true})}if(!Array.prototype.includes){Object.defineProperty(Array.prototype,"includes",{value:function t(e,r){var n=Object(this);var i=n.length>>>0;if(i===0)return false;var a=r|0;var o=Math.max(a>=0?a:i-Math.abs(a),0);function u(t,e){return t===e||typeof t==="number"&&typeof e==="number"&&isNaN(t)&&isNaN(e)}while(o<i){if(u(n[o],e)){return true}o++}return false}})}(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports):typeof define==="function"&&define.amd?define("d3plus-format",["exports"],e):e(t.d3plus={})})(this,function(t){function u(t,e){if((r=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0){return null}var r,n=t.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+t.slice(r+1)]}function f(t){return t=u(Math.abs(t)),t?t[1]:NaN}function r(u,f){return function(t,e){var r=t.length,n=[],i=0,a=u[0],o=0;while(r>0&&a>0){if(o+a+1>e){a=Math.max(1,e-o)}n.push(t.substring(r-=a,r+a));if((o+=a+1)>e){break}a=u[i=(i+1)%u.length]}return n.reverse().join(f)}}function a(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}var n=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function A(t){return new e(t)}A.prototype=e.prototype;function e(t){if(!(e=n.exec(t))){throw new Error("invalid format: "+t)}var e;this.fill=e[1]||" ";this.align=e[2]||">";this.sign=e[3]||"-";this.symbol=e[4]||"";this.zero=!!e[5];this.width=e[6]&&+e[6];this.comma=!!e[7];this.precision=e[8]&&+e[8].slice(1);this.trim=!!e[9];this.type=e[10]||""}e.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function O(t){t:for(var e=t.length,r=1,n=-1,i;r<e;++r){switch(t[r]){case".":n=i=r;break;case"0":if(n===0){n=r}i=r;break;default:if(n>0){if(!+t[r]){break t}n=0}break}}return n>0?t.slice(0,n)+t.slice(i+1):t}var P;function i(t,e){var r=u(t,e);if(!r){return t+""}var n=r[0],i=r[1],a=i-(P=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return a===o?n:a>o?n+new Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+u(t,Math.max(0,e+a-1))[0]}function o(t,e){var r=u(t,e);if(!r){return t+""}var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}var S={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return o(t*100,e)},r:o,s:i,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function s(t){return t}var $=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function l(t){var x=t.grouping&&t.thousands?r(t.grouping,t.thousands):s,n=t.currency,j=t.decimal,k=t.numerals?a(t.numerals):s,i=t.percent||"%";function o(t){t=A(t);var s=t.fill,l=t.align,c=t.sign,e=t.symbol,h=t.zero,p=t.width,g=t.comma,v=t.precision,d=t.trim,m=t.type;if(m==="n"){g=true,m="g"}else if(!S[m]){v==null&&(v=12),d=true,m="g"}if(h||s==="0"&&l==="="){h=true,s="0",l="="}var y=e==="$"?n[0]:e==="#"&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b=e==="$"?n[1]:/[%p]/.test(m)?i:"";var M=S[m],w=/[defgprs%]/.test(m);v=v==null?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function r(t){var e=y,r=b,n,i,a;if(m==="c"){r=M(t)+r;t=""}else{t=+t;var o=t<0;t=M(Math.abs(t),v);if(d){t=O(t)}if(o&&+t===0){o=false}e=(o?c==="("?c:"-":c==="-"||c==="("?"":c)+e;r=(m==="s"?$[8+P/3]:"")+r+(o&&c==="("?")":"");if(w){n=-1,i=t.length;while(++n<i){if(a=t.charCodeAt(n),48>a||a>57){r=(a===46?j+t.slice(n+1):t.slice(n))+r;t=t.slice(0,n);break}}}}if(g&&!h){t=x(t,Infinity)}var u=e.length+t.length+r.length,f=u<p?new Array(p-u+1).join(s):"";if(g&&h){t=x(f+t,f.length?p-r.length:Infinity),f=""}switch(l){case"<":t=e+t+r+f;break;case"=":t=e+f+t+r;break;case"^":t=f.slice(0,u=f.length>>1)+e+t+r+f.slice(u);break;default:t=f+e+t+r;break}return k(t)}r.toString=function(){return t+""};return r}function e(t,e){var r=o((t=A(t),t.type="f",t)),n=Math.max(-8,Math.min(8,Math.floor(f(e)/3)))*3,i=Math.pow(10,-n),a=$[8+n/3];return function(t){return r(i*t)+a}}return{format:o,formatPrefix:e}}var c;var h;var p;g({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function g(t){c=l(t);h=c.format;p=c.formatPrefix;return c}function v(t){if(typeof t!=="number"){return"N/A"}var e=t.toString().split(".")[0].length;var r;if(t===0){r="0"}else if(e>=3){var n=h(".3s")(t).replace("G","B").replace("T","t").replace("P","q").replace("E","Q");var i=n.slice(0,-1);var a=n.slice(n.length-1);r=""+parseFloat(i)+a}else if(e===3){r=h(",f")(t)}else if(t<1&&t>-1){r=h(".2g")(t)}else{r=h(".3g")(t)}return r.replace(/(\.[1-9]*)[0]*$/g,"$1").replace(/[.]$/g,"")}t.formatAbbreviate=v;Object.defineProperty(t,"__esModule",{value:true})});