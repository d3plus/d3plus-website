/*
  d3plus-timeline v0.5.0
  An easy-to-use javascript timeline.
  Copyright (c) 2020 D3plus - https://d3plus.org
  @license MIT
*/
(function(t){typeof define==="function"&&define.amd?define(t):t()})(function(){"use strict";var t=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}var r=function(t){return t&&t.Math==Math&&t};var f=r(typeof globalThis=="object"&&globalThis)||r(typeof window=="object"&&window)||r(typeof self=="object"&&self)||r(typeof t=="object"&&t)||Function("return this")();var o=function(t){try{return!!t()}catch(t){return true}};var v=!o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7});var n={}.propertyIsEnumerable;var i=Object.getOwnPropertyDescriptor;var a=i&&!n.call({1:2},1);var u=a?function t(e){var r=i(this,e);return!!r&&r.enumerable}:n;var d={f:u};var s=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}};var h={}.toString;var c=function(t){return h.call(t).slice(8,-1)};var l="".split;var m=o(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return c(t)=="String"?l.call(t,""):Object(t)}:Object;var p=function(t){if(t==undefined)throw TypeError("Can't call method on "+t);return t};var _=function(t){return m(p(t))};var b=function(t){return typeof t==="object"?t!==null:typeof t==="function"};var g=function(t,e){if(!b(t))return t;var r,n;if(e&&typeof(r=t.toString)=="function"&&!b(n=r.call(t)))return n;if(typeof(r=t.valueOf)=="function"&&!b(n=r.call(t)))return n;if(!e&&typeof(r=t.toString)=="function"&&!b(n=r.call(t)))return n;throw TypeError("Can't convert object to primitive value")};var y={}.hasOwnProperty;var k=function(t,e){return y.call(t,e)};var w=f.document;var S=b(w)&&b(w.createElement);var O=function(t){return S?w.createElement(t):{}};var C=!v&&!o(function(){return Object.defineProperty(O("div"),"a",{get:function(){return 7}}).a!=7});var j=Object.getOwnPropertyDescriptor;var E=v?j:function t(e,r){e=_(e);r=g(r,true);if(C)try{return j(e,r)}catch(t){}if(k(e,r))return s(!d.f.call(e,r),e[r])};var x={f:E};var B=function(t){if(!b(t)){throw TypeError(String(t)+" is not an object")}return t};var T=Object.defineProperty;var A=v?T:function t(e,r,n){B(e);r=g(r,true);B(n);if(C)try{return T(e,r,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");if("value"in n)e[r]=n.value;return e};var P={f:A};var z=v?function(t,e,r){return P.f(t,e,s(1,r))}:function(t,e,r){t[e]=r;return t};var F=function(e,r){try{z(f,e,r)}catch(t){f[e]=r}return r};var W="__core-js_shared__";var M=f[W]||F(W,{});var H=M;var L=Function.toString;if(typeof H.inspectSource!="function"){H.inspectSource=function(t){return L.call(t)}}var N=H.inspectSource;var R=f.WeakMap;var G=typeof R==="function"&&/native code/.test(N(R));var D=e(function(t){(t.exports=function(t,e){return H[t]||(H[t]=e!==undefined?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})});var q=0;var I=Math.random();var V=function(t){return"Symbol("+String(t===undefined?"":t)+")_"+(++q+I).toString(36)};var X=D("keys");var K=function(t){return X[t]||(X[t]=V(t))};var Y={};var J=f.WeakMap;var Q,U,Z;var $=function(t){return Z(t)?U(t):Q(t,{})};var tt=function(r){return function(t){var e;if(!b(t)||(e=U(t)).type!==r){throw TypeError("Incompatible receiver, "+r+" required")}return e}};if(G){var et=new J;var rt=et.get;var nt=et.has;var it=et.set;Q=function(t,e){it.call(et,t,e);return e};U=function(t){return rt.call(et,t)||{}};Z=function(t){return nt.call(et,t)}}else{var at=K("state");Y[at]=true;Q=function(t,e){z(t,at,e);return e};U=function(t){return k(t,at)?t[at]:{}};Z=function(t){return k(t,at)}}var ot={set:Q,get:U,has:Z,enforce:$,getterFor:tt};var ut=e(function(t){var e=ot.get;var u=ot.enforce;var s=String(String).split("String");(t.exports=function(t,e,r,n){var i=n?!!n.unsafe:false;var a=n?!!n.enumerable:false;var o=n?!!n.noTargetGet:false;if(typeof r=="function"){if(typeof e=="string"&&!k(r,"name"))z(r,"name",e);u(r).source=s.join(typeof e=="string"?e:"")}if(t===f){if(a)t[e]=r;else F(e,r);return}else if(!i){delete t[e]}else if(!o&&t[e]){a=true}if(a)t[e]=r;else z(t,e,r)})(Function.prototype,"toString",function t(){return typeof this=="function"&&e(this).source||N(this)})});var st=f;var ht=function(t){return typeof t=="function"?t:undefined};var ct=function(t,e){return arguments.length<2?ht(st[t])||ht(f[t]):st[t]&&st[t][e]||f[t]&&f[t][e]};var ft=Math.ceil;var lt=Math.floor;var vt=function(t){return isNaN(t=+t)?0:(t>0?lt:ft)(t)};var dt=Math.min;var pt=function(t){return t>0?dt(vt(t),9007199254740991):0};var _t=Math.max;var bt=Math.min;var gt=function(t,e){var r=vt(t);return r<0?_t(r+e,0):bt(r,e)};var yt=function(u){return function(t,e,r){var n=_(t);var i=pt(n.length);var a=gt(r,i);var o;if(u&&e!=e)while(i>a){o=n[a++];if(o!=o)return true}else for(;i>a;a++){if((u||a in n)&&n[a]===e)return u||a||0}return!u&&-1}};var mt={includes:yt(true),indexOf:yt(false)};var kt=mt.indexOf;var wt=function(t,e){var r=_(t);var n=0;var i=[];var a;for(a in r)!k(Y,a)&&k(r,a)&&i.push(a);while(e.length>n)if(k(r,a=e[n++])){~kt(i,a)||i.push(a)}return i};var St=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];var Ot=St.concat("length","prototype");var Ct=Object.getOwnPropertyNames||function t(e){return wt(e,Ot)};var jt={f:Ct};var Et=Object.getOwnPropertySymbols;var xt={f:Et};var Bt=ct("Reflect","ownKeys")||function t(e){var r=jt.f(B(e));var n=xt.f;return n?r.concat(n(e)):r};var Tt=function(t,e){var r=Bt(e);var n=P.f;var i=x.f;for(var a=0;a<r.length;a++){var o=r[a];if(!k(t,o))n(t,o,i(e,o))}};var At=/#|\.prototype\./;var Pt=function(t,e){var r=Ft[zt(t)];return r==Mt?true:r==Wt?false:typeof e=="function"?o(e):!!e};var zt=Pt.normalize=function(t){return String(t).replace(At,".").toLowerCase()};var Ft=Pt.data={};var Wt=Pt.NATIVE="N";var Mt=Pt.POLYFILL="P";var Ht=Pt;var Lt=x.f;var Nt=function(t,e){var r=t.target;var n=t.global;var i=t.stat;var a,o,u,s,h,c;if(n){o=f}else if(i){o=f[r]||F(r,{})}else{o=(f[r]||{}).prototype}if(o)for(u in e){h=e[u];if(t.noTargetGet){c=Lt(o,u);s=c&&c.value}else s=o[u];a=Ht(n?u:r+(i?".":"#")+u,t.forced);if(!a&&s!==undefined){if(typeof h===typeof s)continue;Tt(h,s)}if(t.sham||s&&s.sham){z(h,"sham",true)}ut(o,u,h,t)}};var Rt=function(t){if(typeof t!="function"){throw TypeError(String(t)+" is not a function")}return t};var Gt=function(n,i,t){Rt(n);if(i===undefined)return n;switch(t){case 0:return function(){return n.call(i)};case 1:return function(t){return n.call(i,t)};case 2:return function(t,e){return n.call(i,t,e)};case 3:return function(t,e,r){return n.call(i,t,e,r)}}return function(){return n.apply(i,arguments)}};var Dt=function(t){return Object(p(t))};var qt=Array.isArray||function t(e){return c(e)=="Array"};var It=!!Object.getOwnPropertySymbols&&!o(function(){return!String(Symbol())});var Vt=It&&!Symbol.sham&&typeof Symbol.iterator=="symbol";var Xt=D("wks");var Kt=f.Symbol;var Yt=Vt?Kt:Kt&&Kt.withoutSetter||V;var Jt=function(t){if(!k(Xt,t)){if(It&&k(Kt,t))Xt[t]=Kt[t];else Xt[t]=Yt("Symbol."+t)}return Xt[t]};var Qt=Jt("species");var Ut=function(t,e){var r;if(qt(t)){r=t.constructor;if(typeof r=="function"&&(r===Array||qt(r.prototype)))r=undefined;else if(b(r)){r=r[Qt];if(r===null)r=undefined}}return new(r===undefined?Array:r)(e===0?0:e)};var Zt=[].push;var $t=function(v){var d=v==1;var p=v==2;var _=v==3;var b=v==4;var g=v==6;var y=v==5||g;return function(t,e,r,n){var i=Dt(t);var a=m(i);var o=Gt(e,r,3);var u=pt(a.length);var s=0;var h=n||Ut;var c=d?h(t,u):p?h(t,0):undefined;var f,l;for(;u>s;s++)if(y||s in a){f=a[s];l=o(f,s,i);if(v){if(d)c[s]=l;else if(l)switch(v){case 3:return true;case 5:return f;case 6:return s;case 2:Zt.call(c,f)}else if(b)return false}}return g?-1:_||b?b:c}};var te={forEach:$t(0),map:$t(1),filter:$t(2),some:$t(3),every:$t(4),find:$t(5),findIndex:$t(6)};var ee=Object.keys||function t(e){return wt(e,St)};var re=v?Object.defineProperties:function t(e,r){B(e);var n=ee(r);var i=n.length;var a=0;var o;while(i>a)P.f(e,o=n[a++],r[o]);return e};var ne=ct("document","documentElement");var ie=">";var ae="<";var oe="prototype";var ue="script";var se=K("IE_PROTO");var he=function(){};var ce=function(t){return ae+ue+ie+t+ae+"/"+ue+ie};var fe=function(t){t.write(ce(""));t.close();var e=t.parentWindow.Object;t=null;return e};var le=function(){var t=O("iframe");var e="java"+ue+":";var r;t.style.display="none";ne.appendChild(t);t.src=String(e);r=t.contentWindow.document;r.open();r.write(ce("document.F=Object"));r.close();return r.F};var ve;var de=function(){try{ve=document.domain&&new ActiveXObject("htmlfile")}catch(t){}de=ve?fe(ve):le();var t=St.length;while(t--)delete de[oe][St[t]];return de()};Y[se]=true;var pe=Object.create||function t(e,r){var n;if(e!==null){he[oe]=B(e);n=new he;he[oe]=null;n[se]=e}else n=de();return r===undefined?n:re(n,r)};var _e=Jt("unscopables");var be=Array.prototype;if(be[_e]==undefined){P.f(be,_e,{configurable:true,value:pe(null)})}var ge=function(t){be[_e][t]=true};var ye=Object.defineProperty;var me={};var ke=function(t){throw t};var we=function(t,e){if(k(me,t))return me[t];if(!e)e={};var r=[][t];var n=k(e,"ACCESSORS")?e.ACCESSORS:false;var i=k(e,0)?e[0]:ke;var a=k(e,1)?e[1]:undefined;return me[t]=!!r&&!o(function(){if(n&&!v)return true;var t={length:-1};if(n)ye(t,1,{enumerable:true,get:ke});else t[1]=1;r.call(t,i,a)})};var Se=te.find;var Oe="find";var Ce=true;var je=we(Oe);if(Oe in[])Array(1)[Oe](function(){Ce=false});Nt({target:"Array",proto:true,forced:Ce||!je},{find:function t(e){return Se(this,e,arguments.length>1?arguments[1]:undefined)}});ge(Oe);var Ee=mt.includes;var xe=we("indexOf",{ACCESSORS:true,1:0});Nt({target:"Array",proto:true,forced:!xe},{includes:function t(e){return Ee(this,e,arguments.length>1?arguments[1]:undefined)}});ge("includes");var Be=Object.assign;var Te=Object.defineProperty;var Ae=!Be||o(function(){if(v&&Be({b:1},Be(Te({},"a",{enumerable:true,get:function(){Te(this,"b",{value:3,enumerable:false})}}),{b:2})).b!==1)return true;var t={};var e={};var r=Symbol();var n="abcdefghijklmnopqrst";t[r]=7;n.split("").forEach(function(t){e[t]=t});return Be({},t)[r]!=7||ee(Be({},e)).join("")!=n})?function t(e,r){var n=Dt(e);var i=arguments.length;var a=1;var o=xt.f;var u=d.f;while(i>a){var s=m(arguments[a++]);var h=o?ee(s).concat(o(s)):ee(s);var c=h.length;var f=0;var l;while(c>f){l=h[f++];if(!v||u.call(s,l))n[l]=s[l]}}return n}:Be;Nt({target:"Object",stat:true,forced:Object.assign!==Ae},{assign:Ae});var Pe=Jt("match");var ze=function(t){var e;return b(t)&&((e=t[Pe])!==undefined?!!e:c(t)=="RegExp")};var Fe=function(t){if(ze(t)){throw TypeError("The method doesn't accept regular expressions")}return t};var We=Jt("match");var Me=function(e){var r=/./;try{"/./"[e](r)}catch(t){try{r[We]=false;return"/./"[e](r)}catch(t){}}return false};Nt({target:"String",proto:true,forced:!Me("includes")},{includes:function t(e){return!!~String(p(this)).indexOf(Fe(e),arguments.length>1?arguments[1]:undefined)}});var He=x.f;var Le="".startsWith;var Ne=Math.min;var Re=Me("startsWith");var Ge=!Re&&!!function(){var t=He(String.prototype,"startsWith");return t&&!t.writable}();Nt({target:"String",proto:true,forced:!Ge&&!Re},{startsWith:function t(e){var r=String(p(this));Fe(e);var n=pt(Ne(arguments.length>1?arguments[1]:undefined,r.length));var i=String(e);return Le?Le.call(r,i,n):r.slice(n,n+i.length)===i}});if(typeof window!=="undefined"){(function(){try{if(typeof SVGElement==="undefined"||Boolean(SVGElement.prototype.innerHTML)){return}}catch(t){return}function r(t){switch(t.nodeType){case 1:return i(t);case 3:return e(t);case 8:return n(t)}}function e(t){return t.textContent.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function n(t){return"\x3c!--"+t.nodeValue+"--\x3e"}function i(t){var e="";e+="<"+t.tagName;if(t.hasAttributes()){[].forEach.call(t.attributes,function(t){e+=" "+t.name+'="'+t.value+'"'})}e+=">";if(t.hasChildNodes()){[].forEach.call(t.childNodes,function(t){e+=r(t)})}e+="</"+t.tagName+">";return e}Object.defineProperty(SVGElement.prototype,"innerHTML",{get:function(){var e="";[].forEach.call(this.childNodes,function(t){e+=r(t)});return e},set:function(t){while(this.firstChild){this.removeChild(this.firstChild)}try{var e=new DOMParser;e.async=false;var r="<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>"+t+"</svg>";var n=e.parseFromString(r,"text/xml").documentElement;[].forEach.call(n.childNodes,function(t){this.appendChild(this.ownerDocument.importNode(t,true))}.bind(this))}catch(t){throw new Error("Error parsing markup string")}}});Object.defineProperty(SVGElement.prototype,"innerSVG",{get:function(){return this.innerHTML},set:function(t){this.innerHTML=t}})})()}});(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports,require("d3-array"),require("d3-brush"),require("d3-scale"),require("d3-selection"),require("d3plus-axis"),require("d3plus-common"),require("d3plus-text")):typeof define==="function"&&define.amd?define("d3plus-timeline",["exports","d3-array","d3-brush","d3-scale","d3-selection","d3plus-axis","d3plus-common","d3plus-text"],e):(t=t||self,e(t.d3plus={},t.d3Array,t.d3Brush,t.d3Scale,t.d3Selection,t.d3plusAxis,t.d3plusCommon,t.d3plusText))})(this,function(t,g,y,m,o,k,w,S){"use strict";function n(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(t,n.key,n)}}function r(t,e,r){if(e)i(t.prototype,e);if(r)i(t,r);return t}function a(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)u(t,e)}function O(t){O=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return O(t)}function u(t,e){u=Object.setPrototypeOf||function t(e,r){e.__proto__=r;return e};return u(t,e)}function e(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(t){return false}}function s(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function h(t,e){if(e&&(typeof e==="object"||typeof e==="function")){return e}return s(t)}function c(i){var a=e();return function t(){var e=O(i),r;if(a){var n=O(this).constructor;r=Reflect.construct(e,arguments,n)}else{r=e.apply(this,arguments)}return h(this,r)}}function f(t,e){while(!Object.prototype.hasOwnProperty.call(t,e)){t=O(t);if(t===null)break}return t}function C(t,e,r){if(typeof Reflect!=="undefined"&&Reflect.get){C=Reflect.get}else{C=function t(e,r,n){var i=f(e,r);if(!i)return;var a=Object.getOwnPropertyDescriptor(i,r);if(a.get){return a.get.call(n)}return a.value}}return C(t,e,r||t)}var l=function(t){a(b,t);var e=c(b);function b(){var r;n(this,b);r=e.call(this);r._barConfig=Object.assign({},r._barConfig,{"stroke-width":function t(){return r._buttonBehaviorCurrent==="buttons"?0:1}});r._brushing=true;r._brushFilter=function(){return!o.event.button&&o.event.detail<2};r._buttonAlign="middle";r._buttonBehavior="auto";r._buttonPadding=10;r._buttonHeight=30;r._domain=[2001,2010];r._gridSize=0;r._handleConfig={fill:"#444"};r._handleSize=6;r._height=100;r._labelOffset=false;r._on={};r.orient("bottom");r._scale="time";r._selectionConfig={fill:"#777","stroke-width":0};r._shape="Rect";r._shapeConfig=Object.assign({},r._shapeConfig,{labelBounds:function t(e){return r._buttonBehaviorCurrent==="buttons"?{x:e.labelBounds.x,y:-5,width:e.labelBounds.width,height:r._buttonHeight}:e.labelBounds},fill:function t(){return r._buttonBehaviorCurrent==="buttons"?"#EEE":"#444"},height:function t(e){return r._buttonBehaviorCurrent==="buttons"?r._buttonHeight:e.tick?10:0},width:function t(e){return r._buttonBehaviorCurrent==="buttons"?r._ticksWidth/r._availableTicks.length:e.tick?r._domain.map(function(t){return k.date(t).getTime()}).includes(e.id)?2:1:0},y:function t(e){return r._buttonBehaviorCurrent==="buttons"?r._align==="middle"?r._height/2:r._align==="start"?r._margin.top+r._buttonHeight/2:r._height-r._buttonHeight/2-r._margin.bottom:e.y}});r._snapping=true;return r}r(b,[{key:"_brushBrush",value:function t(){if(o.event.sourceEvent&&o.event.sourceEvent.offsetX&&o.event.selection!==null&&(!this._brushing||this._snapping)){var e=this._updateDomain();this._brushGroup.call(this._brush.move,this._updateBrushLimit(e))}this._brushStyle();if(this._on.brush)this._on.brush(this._selection)}},{key:"_brushEnd",value:function t(){if(!o.event.sourceEvent)return;var e=this._updateDomain();this._brushStyle();if(this._brushing||!this._snapping)this._brushGroup.transition(this._transition).call(this._brush.move,this._updateBrushLimit(e));if(this._on.end)this._on.end(this._selection)}},{key:"_brushStart",value:function t(){if(o.event.sourceEvent!==null&&(!this._brushing||this._snapping)){var e=this._updateDomain();this._brushGroup.call(this._brush.move,this._updateBrushLimit(e))}this._brushStyle();if(this._on.start)this._on.start()}},{key:"_brushStyle",value:function t(){var e=this._position.height;var r=this._shape==="Circle"?typeof this._shapeConfig.r==="function"?this._shapeConfig.r({tick:true})*2:this._shapeConfig.r:this._shape==="Rect"?typeof this._shapeConfig[e]==="function"?this._shapeConfig[e]({tick:true}):this._shapeConfig[e]:this._tickSize;var n=this._brushGroup.selectAll(".overlay").attr("cursor",this._brushing?"crosshair":"pointer");var i=this._brushGroup.selectAll(".selection").call(w.attrize,this._selectionConfig).attr("height",r);var a=this._brushGroup.selectAll(".handle").call(w.attrize,this._handleConfig).attr("height",this._buttonBehaviorCurrent==="buttons"?this._buttonHeight:r+this._handleSize);if(this._buttonBehaviorCurrent==="buttons"){var o=this._align==="middle"?this._height/2-this._buttonHeight/2:this._align==="start"?this._margin.top:this._height-this._buttonHeight-this._margin.bottom;a.attr("y",o);n.attr("x",this._marginLeft).attr("width",this._ticksWidth);i.attr("y",o)}}},{key:"_updateDomain",value:function t(){var e=o.mouse(this._select.node())[0];var r=o.event.selection&&this._brushing?o.event.selection:[e,e];if(this._buttonBehaviorCurrent==="ticks")r=r.map(this._d3Scale.invert);r=r.map(Number);if(o.event.type==="brush"&&this._brushing&&this._buttonBehaviorCurrent==="buttons"){var n=o.event.selection.map(function(t){return Math.abs(t-o.event.sourceEvent.offsetX)});r=n[1]<=n[0]?[o.event.selection[0],o.event.sourceEvent.offsetX].sort(function(t,e){return t-e}):[o.event.sourceEvent.offsetX,o.event.selection[1]].sort(function(t,e){return t-e})}var i=this._buttonBehaviorCurrent==="ticks"?this._availableTicks.map(Number):this._d3Scale.range();if(this._buttonBehaviorCurrent==="ticks"){r[0]=k.date(w.closest(r[0],i));r[1]=k.date(w.closest(r[1],i))}else{r[0]=w.closest(r[0],i);r[1]=w.closest(r[1],i)}var a=+r[0]===+r[1];if(o.event.type==="brush"||o.event.type==="end"){this._selection=this._buttonBehaviorCurrent==="ticks"?a?r[0]:r:a?k.date(this._availableTicks[i.indexOf(r[0])]):[k.date(this._availableTicks[i.indexOf(r[0])]),k.date(this._availableTicks[i.indexOf(r[1])])]}return r}},{key:"_updateBrushLimit",value:function t(e){var r=this._buttonBehaviorCurrent==="ticks"?e.map(k.date).map(this._d3Scale):e;if(r[0]===r[1]){r[0]-=.1;r[1]+=.1}if(this._buttonBehaviorCurrent==="buttons"){var n=.5*(this._ticksWidth/this._availableTicks.length-this._handleSize);r[0]-=n;r[1]+=n}return r}},{key:"render",value:function t(e){var u=this;var r=this._position,n=r.height,i=r.y;if(this._buttonBehavior!=="ticks"){var s=this._ticks?this._ticks.map(k.date):this._domain.map(k.date);var h=m.scaleTime().domain(s).range([0,this._width]);s=this._ticks?s:h.ticks();if(!this._tickFormat)this._tickFormat=h.tickFormat(s.length-1,this._tickSpecifier);var c=0;s.forEach(function(t,e){var r=u._shapeConfig.labelConfig.fontFamily(t,e),n=u._shapeConfig.labelConfig.fontSize(t,e);var i=S.textWrap().fontFamily(r).fontSize(n).lineHeight(u._shapeConfig.lineHeight?u._shapeConfig.lineHeight(t,e):undefined);var a=i(h.tickFormat(s.length-1,u._tickSpecifier)(t));var o=a.lines.length?Math.ceil(g.max(a.lines.map(function(t){return S.textWidth(t,{"font-family":r,"font-size":n})})))+n/4:0;if(o%2)o++;if(c<o)c=o+2*u._buttonPadding});this._ticksWidth=c*s.length}this._buttonBehaviorCurrent=this._buttonBehavior==="auto"?this._ticksWidth<this._width?"buttons":"ticks":this._buttonBehavior;if(this._buttonBehaviorCurrent==="buttons"){this._scale="ordinal";this._labelRotation=0;if(!this._brushing)this._handleSize=0;var a=m.scaleTime().domain(this._domain.map(k.date)).ticks().map(this._tickFormat).map(Number);this._domain=this._ticks?this._ticks.map(k.date):Array.from(Array(a[a.length-1]-a[0]+1),function(t,e){return a[0]+e}).map(k.date);this._ticks=this._domain;var o=.5*this._ticksWidth/this._ticks.length;this._marginLeft=this._buttonAlign==="middle"?(this._width-this._ticksWidth)/2:this._buttonAlign==="end"?this._width-this._ticksWidth:0;var f=this._buttonAlign==="middle"?(this._width+this._ticksWidth)/2:this._buttonAlign==="start"?this._ticksWidth:undefined;this._range=[this._buttonAlign==="start"?undefined:this._marginLeft+o,this._buttonAlign==="end"?undefined:f-o]}if(this._ticks)this._domain=this._buttonBehaviorCurrent==="ticks"?[this._ticks[0],this._ticks[this._ticks.length-1]]:this._ticks.map(k.date);this._labels=this._ticks;C(O(b.prototype),"render",this).call(this,e);var l=this._outerBounds[i],v=this._d3Scale.range();var d=this._brush=y.brushX().extent([[v[0],l],[v[v.length-1],l+this._outerBounds[n]]]).filter(this._brushFilter).handleSize(this._handleSize).on("start",this._brushStart.bind(this)).on("brush",this._brushBrush.bind(this)).on("end",this._brushEnd.bind(this));var p=this._buttonBehaviorCurrent==="ticks"?this._availableTicks[this._availableTicks.length-1]:v[v.length-1];var _=this._selection===void 0?[p,p]:this._selection instanceof Array?this._buttonBehaviorCurrent==="buttons"?this._selection.map(function(t){return v[u._ticks.map(Number).indexOf(+t)]}).slice():this._selection.slice():this._buttonBehaviorCurrent==="buttons"?[v[this._ticks.map(Number).indexOf(+this._selection)],v[this._ticks.map(Number).indexOf(+this._selection)]]:[this._selection,this._selection];this._updateBrushLimit(_);this._brushGroup=w.elem("g.brushGroup",{parent:this._group});this._brushGroup.call(d).transition(this._transition).call(d.move,this._buttonBehaviorCurrent==="ticks"?this._updateBrushLimit(_):_);this._outerBounds.y-=this._handleSize/2;this._outerBounds.height+=this._handleSize/2;return this}},{key:"buttonPadding",value:function t(e){return arguments.length?(this._buttonPadding=e,this):this._buttonPadding}},{key:"brushing",value:function t(e){return arguments.length?(this._brushing=e,this):this._brushing}},{key:"brushFilter",value:function t(e){return arguments.length?(this._brushFilter=e,this):this._brushFilter}},{key:"buttonAlign",value:function t(e){return arguments.length?(this._buttonAlign=e,this):this._buttonAlign}},{key:"buttonBehavior",value:function t(e){return arguments.length?(this._buttonBehavior=e,this):this._buttonBehavior}},{key:"buttonHeight",value:function t(e){return arguments.length?(this._buttonHeight=e,this):this._buttonHeight}},{key:"handleConfig",value:function t(e){return arguments.length?(this._handleConfig=Object.assign(this._handleConfig,e),this):this._handleConfig}},{key:"handleSize",value:function t(e){return arguments.length?(this._handleSize=e,this):this._handleSize}},{key:"on",value:function t(e,r){return arguments.length===2?(this._on[e]=r,this):arguments.length?typeof e==="string"?this._on[e]:(this._on=Object.assign({},this._on,e),this):this._on}},{key:"selectionConfig",value:function t(e){return arguments.length?(this._selectionConfig=Object.assign(this._selectionConfig,e),this):this._selectionConfig}},{key:"selection",value:function t(e){return arguments.length?(this._selection=e,this):this._selection}},{key:"snapping",value:function t(e){return arguments.length?(this._snapping=e,this):this._snapping}}]);return b}(k.Axis);t.Timeline=l;Object.defineProperty(t,"__esModule",{value:true})});