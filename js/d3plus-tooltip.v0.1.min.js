/*
  d3plus-tooltip v0.1.3
  A javascript-only tooltip.
  Copyright (c) 2016 D3plus - https://d3plus.org
  @license MIT
*/
!function(t,o){"object"==typeof exports&&"undefined"!=typeof module?o(exports,require("d3plus-common"),require("d3-selection"),require("d3-transition")):"function"==typeof define&&define.amd?define("d3plus-tooltip",["exports","d3plus-common","d3-selection","d3-transition"],o):o(t.d3plus=t.d3plus||{},t.d3plusCommon,t.d3Selection,t.d3Transition)}(this,function(exports,d3plusCommon,d3Selection,d3Transition){"use strict";function prefix(){return void 0!==val?val:val="-webkit-transform"in document.body.style?"-webkit-":"-moz-transform"in document.body.style?"-moz-":"-ms-transform"in document.body.style?"-ms-":"-o-transform"in document.body.style?"-o-":""}function tooltipId(t,o){return t.id||""+o}function tooltipTranslate(t){return[t.x,t.y]}function tooltip(data){function boxStyles(t){t.style("background",background).style(pre+"border-radius",borderRadius).style("pointer-events",pointerEvents).style("padding",padding).style("width",width).style("height",height).style("border",function(t,o){var e=d3.select(this).style("border");return"0px none rgb(0, 0, 0)"!==e?e:border(t,o)}).style("top",function(t,o){return translate(t,o)[1]-this.offsetHeight-offset(t,o)+"px"}).style("left",function(t,o){return translate(t,o)[0]-this.offsetWidth/2+"px"})}function cellContent(t){if("function"==typeof t){var o=d3.select(this.parentNode.parentNode).datum();return t(o,data.indexOf(o))}return t}function tooltip(callback){function divElement(cat){enter.append("div").attr("class","d3plus-tooltip-"+cat);var div=update.select(".d3plus-tooltip-"+cat).html(eval(cat));d3plusCommon.stylize(div,eval(cat+"Style"))}var tooltips=d3.select("body").selectAll("."+className).data(data,id),enter=tooltips.enter().append("div").attr("class",className).style("position","absolute").style(pre+"transform","scale(0)").style(pre+"transform-origin","50% 100%"),update=tooltips.merge(enter);divElement("title"),divElement("body");var tableEnter=enter.append("table").attr("class","d3plus-tooltip-table"),table=update.select(".d3plus-tooltip-table");d3plusCommon.stylize(table,tableStyle),tableEnter.append("thead").attr("class","d3plus-tooltip-thead");var tableHead=update.select(".d3plus-tooltip-thead");d3plusCommon.stylize(tableHead,theadStyle);var th=tableHead.selectAll("th").data(thead);th.enter().append("th").merge(th).html(cellContent),th.exit().remove(),tableEnter.append("tbody").attr("class","d3plus-tooltip-tbody");var tableBody=update.select(".d3plus-tooltip-tbody");d3plusCommon.stylize(tableBody,tbodyStyle);var tr=tableBody.selectAll("tr").data(tbody),trEnter=tr.enter().append("tr");tr.exit().remove();var trUpdate=tr.merge(trEnter),td=trUpdate.selectAll("td").data(function(t){return t});return td.enter().append("td").merge(td).html(cellContent),divElement("footer"),enter.call(boxStyles),update.attr("id",function(t,o){return"d3plus-tooltip-"+id(t,o)}).transition().duration(duration).style(pre+"transform","scale(1)").call(boxStyles),tooltips.exit().transition().duration(duration).style(pre+"transform","scale(0)").remove(),callback&&setTimeout(callback,100),tooltip}void 0===data&&(data=[]);var pre=prefix(),background=d3plusCommon.constant("rgba(255, 255, 255, 0.75)"),body=d3plusCommon.accessor("body",""),bodyStyle={"font-family":"Verdana","font-size":"10px","font-weight":"400"},border=d3plusCommon.constant("1px solid rgba(0, 0, 0, 0.1)"),borderRadius=d3plusCommon.constant("2px"),className="d3plus-tooltip",duration=d3plusCommon.constant(200),footer=d3plusCommon.accessor("footer",""),footerStyle={"font-family":"Verdana","font-size":"10px","font-weight":"400"},height=d3plusCommon.constant("auto"),id=tooltipId,offset=d3plusCommon.constant(10),padding=d3plusCommon.constant("5px"),pointerEvents=d3plusCommon.constant("auto"),tableStyle={"border-spacing":"0",width:"100%"},tbody=[],tbodyStyle={"font-family":"Verdana","font-size":"10px","text-align":"center"},thead=[],theadStyle={"font-family":"Verdana","font-size":"10px","font-weight":"600","text-align":"center"},title=d3plusCommon.accessor("title",""),titleStyle={"font-family":"Verdana","font-size":"12px","font-weight":"600","padding-bottom":"5px"},translate=tooltipTranslate,width=d3plusCommon.constant("auto");return tooltip.background=function(t){return arguments.length?(background="function"==typeof t?t:d3plusCommon.constant(t),tooltip):background},tooltip.body=function(t){return arguments.length?(body="function"==typeof t?t:d3plusCommon.constant(t),tooltip):body},tooltip.bodyStyle=function(t){return arguments.length?(bodyStyle=Object.assign(bodyStyle,t),tooltip):bodyStyle},tooltip.border=function(t){return arguments.length?(border="function"==typeof t?t:d3plusCommon.constant(t),tooltip):border},tooltip.borderRadius=function(t){return arguments.length?(borderRadius="function"==typeof t?t:d3plusCommon.constant(t),tooltip):borderRadius},tooltip.className=function(t){return arguments.length?(className=t,tooltip):className},tooltip.config=function(t){if(arguments.length){for(var o in t)({}).hasOwnProperty.call(t,o)&&tooltip[o](t[o]);return tooltip}var e={};for(var n in tooltip.prototype.constructor)"config"!==n&&{}.hasOwnProperty.call(tooltip,n)&&(e[n]=tooltip[n]());return e},tooltip.data=function(t){return arguments.length?(data=t,tooltip):data},tooltip.duration=function(t){return arguments.length?(duration="function"==typeof t?t:d3plusCommon.constant(t),tooltip):duration},tooltip.footer=function(t){return arguments.length?(footer="function"==typeof t?t:d3plusCommon.constant(t),tooltip):footer},tooltip.footerStyle=function(t){return arguments.length?(footerStyle=Object.assign(footerStyle,t),tooltip):footerStyle},tooltip.height=function(t){return arguments.length?(height="function"==typeof t?t:d3plusCommon.constant(t),tooltip):height},tooltip.id=function(t){return arguments.length?(id="function"==typeof t?t:d3plusCommon.constant(t),tooltip):id},tooltip.offset=function(t){return arguments.length?(offset="function"==typeof t?t:d3plusCommon.constant(t),tooltip):offset},tooltip.padding=function(t){return arguments.length?(padding="function"==typeof t?t:d3plusCommon.constant(t),tooltip):padding},tooltip.pointerEvents=function(t){return arguments.length?(pointerEvents="function"==typeof t?t:d3plusCommon.constant(t),tooltip):pointerEvents},tooltip.tableStyle=function(t){return arguments.length?(tableStyle=Object.assign(tableStyle,t),tooltip):tableStyle},tooltip.tbody=function(t){return arguments.length?(tbody=t,tooltip):tbody},tooltip.tbodyStyle=function(t){return arguments.length?(tbodyStyle=Object.assign(tbodyStyle,t),tooltip):tbodyStyle},tooltip.thead=function(t){return arguments.length?(thead=t,tooltip):thead},tooltip.theadStyle=function(t){return arguments.length?(theadStyle=Object.assign(theadStyle,t),tooltip):theadStyle},tooltip.title=function(t){return arguments.length?(title="function"==typeof t?t:d3plusCommon.constant(t),tooltip):title},tooltip.titleStyle=function(t){return arguments.length?(titleStyle=Object.assign(titleStyle,t),tooltip):titleStyle},tooltip.translate=function(t){return arguments.length?(translate="function"==typeof t?t:d3plusCommon.constant(t),tooltip):translate},tooltip.width=function(t){return arguments.length?(width="function"==typeof t?t:d3plusCommon.constant(t),tooltip):width},data.length?tooltip():tooltip}var val=void 0,d3={select:d3Selection.select,transition:d3Transition.transition};exports.tooltip=tooltip,Object.defineProperty(exports,"__esModule",{value:!0})});