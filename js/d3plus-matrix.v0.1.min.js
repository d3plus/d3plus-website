function _classCallCheck(t,r){if(!(t instanceof r)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(t,n.key,n)}}function _createClass(t,r,e){if(r)_defineProperties(t.prototype,r);if(e)_defineProperties(t,e);return t}function _get(t,r,e){if(typeof Reflect!=="undefined"&&Reflect.get){_get=Reflect.get}else{_get=function t(r,e,n){var i=_superPropBase(r,e);if(!i)return;var o=Object.getOwnPropertyDescriptor(i,e);if(o.get){return o.get.call(n)}return o.value}}return _get(t,r,e||t)}function _superPropBase(t,r){while(!Object.prototype.hasOwnProperty.call(t,r)){t=_getPrototypeOf(t);if(t===null)break}return t}function _inherits(t,r){if(typeof r!=="function"&&r!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:true,configurable:true}});if(r)_setPrototypeOf(t,r)}function _setPrototypeOf(t,r){_setPrototypeOf=Object.setPrototypeOf||function t(r,e){r.__proto__=e;return r};return _setPrototypeOf(t,r)}function _createSuper(i){var o=_isNativeReflectConstruct();return function t(){var r=_getPrototypeOf(i),e;if(o){var n=_getPrototypeOf(this).constructor;e=Reflect.construct(r,arguments,n)}else{e=r.apply(this,arguments)}return _possibleConstructorReturn(this,e)}}function _possibleConstructorReturn(t,r){if(r&&(_typeof(r)==="object"||typeof r==="function")){return r}return _assertThisInitialized(t)}function _assertThisInitialized(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],function(){}));return true}catch(t){return false}}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function t(r){return r.__proto__||Object.getPrototypeOf(r)};return _getPrototypeOf(t)}function _slicedToArray(t,r){return _arrayWithHoles(t)||_iterableToArrayLimit(t,r)||_unsupportedIterableToArray(t,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(t,r){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(t)))return;var e=[];var n=true;var i=false;var o=undefined;try{for(var a=t[Symbol.iterator](),u;!(n=(u=a.next()).done);n=true){e.push(u.value);if(r&&e.length===r)break}}catch(t){i=true;o=t}finally{try{if(!n&&a["return"]!=null)a["return"]()}finally{if(i)throw o}}return e}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,r){if(!t)return;if(typeof t==="string")return _arrayLikeToArray(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);if(e==="Object"&&t.constructor)e=t.constructor.name;if(e==="Map"||e==="Set")return Array.from(t);if(e==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return _arrayLikeToArray(t,r)}function _iterableToArray(t){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,r){if(r==null||r>t.length)r=t.length;for(var e=0,n=new Array(r);e<r;e++){n[e]=t[e]}return n}function _typeof(t){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function t(r){return typeof r}}else{_typeof=function t(r){return r&&typeof Symbol==="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r}}return _typeof(t)}
/*
  d3plus-matrix v0.1.3
  Row/column layouts
  Copyright (c) 2020 D3plus - https://d3plus.org
  @license MIT
*/
(function(t){typeof define==="function"&&define.amd?define(t):t()})(function(){"use strict";var t=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function r(t,r,n){return n={path:r,exports:{},require:function t(r,e){return i(r,e===undefined||e===null?n.path:e)}},t(n,n.exports),n.exports}function i(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var e=function t(r){return r&&r.Math==Math&&r};var h=e((typeof globalThis==="undefined"?"undefined":_typeof(globalThis))=="object"&&globalThis)||e((typeof window==="undefined"?"undefined":_typeof(window))=="object"&&window)||e((typeof self==="undefined"?"undefined":_typeof(self))=="object"&&self)||e(_typeof(t)=="object"&&t)||function(){return this}()||Function("return this")();var u=function t(r){try{return!!r()}catch(t){return true}};var d=!u(function(){return Object.defineProperty({},1,{get:function t(){return 7}})[1]!=7});var n={}.propertyIsEnumerable;var o=Object.getOwnPropertyDescriptor;var a=o&&!n.call({1:2},1);var c=a?function t(r){var e=o(this,r);return!!e&&e.enumerable}:n;var v={f:c};var s=function t(r,e){return{enumerable:!(r&1),configurable:!(r&2),writable:!(r&4),value:e}};var l={}.toString;var f=function t(r){return l.call(r).slice(8,-1)};var p="".split;var w=u(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return f(t)=="String"?p.call(t,""):Object(t)}:Object;var g=function t(r){if(r==undefined)throw TypeError("Can't call method on "+r);return r};var y=function t(r){return w(g(r))};var _=function t(r){return _typeof(r)==="object"?r!==null:typeof r==="function"};var m=function t(r,e){if(!_(r))return r;var n,i;if(e&&typeof(n=r.toString)=="function"&&!_(i=n.call(r)))return i;if(typeof(n=r.valueOf)=="function"&&!_(i=n.call(r)))return i;if(!e&&typeof(n=r.toString)=="function"&&!_(i=n.call(r)))return i;throw TypeError("Can't convert object to primitive value")};var b={}.hasOwnProperty;var S=function t(r,e){return b.call(r,e)};var O=h.document;var x=_(O)&&_(O.createElement);var P=function t(r){return x?O.createElement(r):{}};var A=!d&&!u(function(){return Object.defineProperty(P("div"),"a",{get:function t(){return 7}}).a!=7});var C=Object.getOwnPropertyDescriptor;var j=d?C:function t(r,e){r=y(r);e=m(e,true);if(A)try{return C(r,e)}catch(t){}if(S(r,e))return s(!v.f.call(r,e),r[e])};var T={f:j};var k=function t(r){if(!_(r)){throw TypeError(String(r)+" is not an object")}return r};var I=Object.defineProperty;var E=d?I:function t(r,e,n){k(r);e=m(e,true);k(n);if(A)try{return I(r,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");if("value"in n)r[e]=n.value;return r};var R={f:E};var M=d?function(t,r,e){return R.f(t,r,s(1,e))}:function(t,r,e){t[r]=e;return t};var z=function t(r,e){try{M(h,r,e)}catch(t){h[r]=e}return e};var L="__core-js_shared__";var q=h[L]||z(L,{});var V=q;var D=Function.toString;if(typeof V.inspectSource!="function"){V.inspectSource=function(t){return D.call(t)}}var N=V.inspectSource;var W=h.WeakMap;var F=typeof W==="function"&&/native code/.test(N(W));var H=r(function(t){(t.exports=function(t,r){return V[t]||(V[t]=r!==undefined?r:{})})("versions",[]).push({version:"3.8.0",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})});var G=0;var B=Math.random();var K=function t(r){return"Symbol("+String(r===undefined?"":r)+")_"+(++G+B).toString(36)};var U=H("keys");var X=function t(r){return U[r]||(U[r]=K(r))};var Y={};var $=h.WeakMap;var J,Q,Z;var tt=function t(r){return Z(r)?Q(r):J(r,{})};var rt=function t(e){return function(t){var r;if(!_(t)||(r=Q(t)).type!==e){throw TypeError("Incompatible receiver, "+e+" required")}return r}};if(F){var et=V.state||(V.state=new $);var nt=et.get;var it=et.has;var ot=et.set;J=function t(r,e){e.facade=r;ot.call(et,r,e);return e};Q=function t(r){return nt.call(et,r)||{}};Z=function t(r){return it.call(et,r)}}else{var at=X("state");Y[at]=true;J=function t(r,e){e.facade=r;M(r,at,e);return e};Q=function t(r){return S(r,at)?r[at]:{}};Z=function t(r){return S(r,at)}}var ut={set:J,get:Q,has:Z,enforce:tt,getterFor:rt};var ct=r(function(t){var r=ut.get;var c=ut.enforce;var s=String(String).split("String");(t.exports=function(t,r,e,n){var i=n?!!n.unsafe:false;var o=n?!!n.enumerable:false;var a=n?!!n.noTargetGet:false;var u;if(typeof e=="function"){if(typeof r=="string"&&!S(e,"name")){M(e,"name",r)}u=c(e);if(!u.source){u.source=s.join(typeof r=="string"?r:"")}}if(t===h){if(o)t[r]=e;else z(r,e);return}else if(!i){delete t[r]}else if(!a&&t[r]){o=true}if(o)t[r]=e;else M(t,r,e)})(Function.prototype,"toString",function t(){return typeof this=="function"&&r(this).source||N(this)})});var st=h;var lt=function t(r){return typeof r=="function"?r:undefined};var ft=function t(r,e){return arguments.length<2?lt(st[r])||lt(h[r]):st[r]&&st[r][e]||h[r]&&h[r][e]};var ht=Math.ceil;var dt=Math.floor;var vt=function t(r){return isNaN(r=+r)?0:(r>0?dt:ht)(r)};var pt=Math.min;var gt=function t(r){return r>0?pt(vt(r),9007199254740991):0};var yt=Math.max;var _t=Math.min;var mt=function t(r,e){var n=vt(r);return n<0?yt(n+e,0):_t(n,e)};var bt=function t(u){return function(t,r,e){var n=y(t);var i=gt(n.length);var o=mt(e,i);var a;if(u&&r!=r)while(i>o){a=n[o++];if(a!=a)return true}else for(;i>o;o++){if((u||o in n)&&n[o]===r)return u||o||0}return!u&&-1}};var wt={includes:bt(true),indexOf:bt(false)};var St=wt.indexOf;var Ot=function t(r,e){var n=y(r);var i=0;var o=[];var a;for(a in n){!S(Y,a)&&S(n,a)&&o.push(a)}while(e.length>i){if(S(n,a=e[i++])){~St(o,a)||o.push(a)}}return o};var xt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];var Pt=xt.concat("length","prototype");var At=Object.getOwnPropertyNames||function t(r){return Ot(r,Pt)};var Ct={f:At};var jt=Object.getOwnPropertySymbols;var Tt={f:jt};var kt=ft("Reflect","ownKeys")||function t(r){var e=Ct.f(k(r));var n=Tt.f;return n?e.concat(n(r)):e};var It=function t(r,e){var n=kt(e);var i=R.f;var o=T.f;for(var a=0;a<n.length;a++){var u=n[a];if(!S(r,u))i(r,u,o(e,u))}};var Et=/#|\.prototype\./;var Rt=function t(r,e){var n=zt[Mt(r)];return n==qt?true:n==Lt?false:typeof e=="function"?u(e):!!e};var Mt=Rt.normalize=function(t){return String(t).replace(Et,".").toLowerCase()};var zt=Rt.data={};var Lt=Rt.NATIVE="N";var qt=Rt.POLYFILL="P";var Vt=Rt;var Dt=T.f;var Nt=function t(r,e){var n=r.target;var i=r.global;var o=r.stat;var a,u,c,s,l,f;if(i){u=h}else if(o){u=h[n]||z(n,{})}else{u=(h[n]||{}).prototype}if(u)for(c in e){l=e[c];if(r.noTargetGet){f=Dt(u,c);s=f&&f.value}else s=u[c];a=Vt(i?c:n+(o?".":"#")+c,r.forced);if(!a&&s!==undefined){if(_typeof(l)===_typeof(s))continue;It(l,s)}if(r.sham||s&&s.sham){M(l,"sham",true)}ct(u,c,l,r)}};var Wt=function t(r){if(typeof r!="function"){throw TypeError(String(r)+" is not a function")}return r};var Ft=function t(n,i,r){Wt(n);if(i===undefined)return n;switch(r){case 0:return function(){return n.call(i)};case 1:return function(t){return n.call(i,t)};case 2:return function(t,r){return n.call(i,t,r)};case 3:return function(t,r,e){return n.call(i,t,r,e)}}return function(){return n.apply(i,arguments)}};var Ht=function t(r){return Object(g(r))};var Gt=Array.isArray||function t(r){return f(r)=="Array"};var Bt=!!Object.getOwnPropertySymbols&&!u(function(){return!String(Symbol())});var Kt=Bt&&!Symbol.sham&&_typeof(Symbol.iterator)=="symbol";var Ut=H("wks");var Xt=h.Symbol;var Yt=Kt?Xt:Xt&&Xt.withoutSetter||K;var $t=function t(r){if(!S(Ut,r)){if(Bt&&S(Xt,r))Ut[r]=Xt[r];else Ut[r]=Yt("Symbol."+r)}return Ut[r]};var Jt=$t("species");var Qt=function t(r,e){var n;if(Gt(r)){n=r.constructor;if(typeof n=="function"&&(n===Array||Gt(n.prototype)))n=undefined;else if(_(n)){n=n[Jt];if(n===null)n=undefined}}return new(n===undefined?Array:n)(e===0?0:e)};var Zt=[].push;var tr=function t(d){var v=d==1;var p=d==2;var g=d==3;var y=d==4;var _=d==6;var m=d==7;var b=d==5||_;return function(t,r,e,n){var i=Ht(t);var o=w(i);var a=Ft(r,e,3);var u=gt(o.length);var c=0;var s=n||Qt;var l=v?s(t,u):p||m?s(t,0):undefined;var f,h;for(;u>c;c++){if(b||c in o){f=o[c];h=a(f,c,i);if(d){if(v)l[c]=h;else if(h)switch(d){case 3:return true;case 5:return f;case 6:return c;case 2:Zt.call(l,f)}else switch(d){case 4:return false;case 7:Zt.call(l,f)}}}}return _?-1:g||y?y:l}};var rr={forEach:tr(0),map:tr(1),filter:tr(2),some:tr(3),every:tr(4),find:tr(5),findIndex:tr(6),filterOut:tr(7)};var er=Object.keys||function t(r){return Ot(r,xt)};var nr=d?Object.defineProperties:function t(r,e){k(r);var n=er(e);var i=n.length;var o=0;var a;while(i>o){R.f(r,a=n[o++],e[a])}return r};var ir=ft("document","documentElement");var or=">";var ar="<";var ur="prototype";var cr="script";var sr=X("IE_PROTO");var lr=function t(){};var fr=function t(r){return ar+cr+or+r+ar+"/"+cr+or};var hr=function t(r){r.write(fr(""));r.close();var e=r.parentWindow.Object;r=null;return e};var dr=function t(){var r=P("iframe");var e="java"+cr+":";var n;r.style.display="none";ir.appendChild(r);r.src=String(e);n=r.contentWindow.document;n.open();n.write(fr("document.F=Object"));n.close();return n.F};var vr;var pr=function t(){try{vr=document.domain&&new ActiveXObject("htmlfile")}catch(t){}pr=vr?hr(vr):dr();var r=xt.length;while(r--){delete pr[ur][xt[r]]}return pr()};Y[sr]=true;var gr=Object.create||function t(r,e){var n;if(r!==null){lr[ur]=k(r);n=new lr;lr[ur]=null;n[sr]=r}else n=pr();return e===undefined?n:nr(n,e)};var yr=$t("unscopables");var _r=Array.prototype;if(_r[yr]==undefined){R.f(_r,yr,{configurable:true,value:gr(null)})}var mr=function t(r){_r[yr][r]=true};var br=Object.defineProperty;var wr={};var Sr=function t(r){throw r};var Or=function t(r,e){if(S(wr,r))return wr[r];if(!e)e={};var n=[][r];var i=S(e,"ACCESSORS")?e.ACCESSORS:false;var o=S(e,0)?e[0]:Sr;var a=S(e,1)?e[1]:undefined;return wr[r]=!!n&&!u(function(){if(i&&!d)return true;var t={length:-1};if(i)br(t,1,{enumerable:true,get:Sr});else t[1]=1;n.call(t,o,a)})};var xr=rr.find;var Pr="find";var Ar=true;var Cr=Or(Pr);if(Pr in[])Array(1)[Pr](function(){Ar=false});Nt({target:"Array",proto:true,forced:Ar||!Cr},{find:function t(r){return xr(this,r,arguments.length>1?arguments[1]:undefined)}});mr(Pr);var jr=wt.includes;var Tr=Or("indexOf",{ACCESSORS:true,1:0});Nt({target:"Array",proto:true,forced:!Tr},{includes:function t(r){return jr(this,r,arguments.length>1?arguments[1]:undefined)}});mr("includes");var kr=Object.assign;var Ir=Object.defineProperty;var Er=!kr||u(function(){if(d&&kr({b:1},kr(Ir({},"a",{enumerable:true,get:function t(){Ir(this,"b",{value:3,enumerable:false})}}),{b:2})).b!==1)return true;var t={};var r={};var e=Symbol();var n="abcdefghijklmnopqrst";t[e]=7;n.split("").forEach(function(t){r[t]=t});return kr({},t)[e]!=7||er(kr({},r)).join("")!=n})?function t(r,e){var n=Ht(r);var i=arguments.length;var o=1;var a=Tt.f;var u=v.f;while(i>o){var c=w(arguments[o++]);var s=a?er(c).concat(a(c)):er(c);var l=s.length;var f=0;var h;while(l>f){h=s[f++];if(!d||u.call(c,h))n[h]=c[h]}}return n}:kr;Nt({target:"Object",stat:true,forced:Object.assign!==Er},{assign:Er});var Rr=$t("match");var Mr=function t(r){var e;return _(r)&&((e=r[Rr])!==undefined?!!e:f(r)=="RegExp")};var zr=function t(r){if(Mr(r)){throw TypeError("The method doesn't accept regular expressions")}return r};var Lr=$t("match");var qr=function t(r){var e=/./;try{"/./"[r](e)}catch(t){try{e[Lr]=false;return"/./"[r](e)}catch(t){}}return false};Nt({target:"String",proto:true,forced:!qr("includes")},{includes:function t(r){return!!~String(g(this)).indexOf(zr(r),arguments.length>1?arguments[1]:undefined)}});var Vr=T.f;var Dr="".startsWith;var Nr=Math.min;var Wr=qr("startsWith");var Fr=!Wr&&!!function(){var t=Vr(String.prototype,"startsWith");return t&&!t.writable}();Nt({target:"String",proto:true,forced:!Fr&&!Wr},{startsWith:function t(r){var e=String(g(this));zr(r);var n=gt(Nr(arguments.length>1?arguments[1]:undefined,e.length));var i=String(r);return Dr?Dr.call(e,i,n):e.slice(n,n+i.length)===i}});if(typeof window!=="undefined"){(function(){try{if(typeof SVGElement==="undefined"||Boolean(SVGElement.prototype.innerHTML)){return}}catch(t){return}function e(t){switch(t.nodeType){case 1:return i(t);case 3:return r(t);case 8:return n(t)}}function r(t){return t.textContent.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function n(t){return"\x3c!--"+t.nodeValue+"--\x3e"}function i(t){var r="";r+="<"+t.tagName;if(t.hasAttributes()){[].forEach.call(t.attributes,function(t){r+=" "+t.name+'="'+t.value+'"'})}r+=">";if(t.hasChildNodes()){[].forEach.call(t.childNodes,function(t){r+=e(t)})}r+="</"+t.tagName+">";return r}Object.defineProperty(SVGElement.prototype,"innerHTML",{get:function t(){var r="";[].forEach.call(this.childNodes,function(t){r+=e(t)});return r},set:function t(r){while(this.firstChild){this.removeChild(this.firstChild)}try{var e=new DOMParser;e.async=false;var n="<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>"+r+"</svg>";var i=e.parseFromString(n,"text/xml").documentElement;[].forEach.call(i.childNodes,function(t){this.appendChild(this.ownerDocument.importNode(t,true))}.bind(this))}catch(t){throw new Error("Error parsing markup string")}}});Object.defineProperty(SVGElement.prototype,"innerSVG",{get:function t(){return this.innerHTML},set:function t(r){this.innerHTML=r}})})()}});(function(t,r){(typeof exports==="undefined"?"undefined":_typeof(exports))==="object"&&typeof module!=="undefined"?r(exports,require("d3plus-axis"),require("d3plus-common"),require("d3plus-shape"),require("d3plus-viz"),require("d3-array"),require("d3-shape"),require("d3plus-text")):typeof define==="function"&&define.amd?define("d3plus-matrix",["exports","d3plus-axis","d3plus-common","d3plus-shape","d3plus-viz","d3-array","d3-shape","d3plus-text"],r):(t=typeof globalThis!=="undefined"?globalThis:t||self,r(t.d3plus={},t.d3plusAxis,t.d3plusCommon,t.d3plusShape,t.d3plusViz,t.d3Array,t.d3Shape,t.d3plusText))})(this,function(t,e,A,C,r,x,P,n){"use strict";function a(t,r,e){return r[t]||this["_".concat(t)](r,e)}var i=function t(r,e){var n;return(n=[]).concat.apply(n,_toConsumableArray(r.map(function(r){return e.map(function(t){return[].concat(r,t)})})))};function j(){var a=this;var u=this._filteredData;var t=A.unique(u.map(this._row)).sort(this._rowSort);var r=A.unique(u.map(this._column)).sort(this._columnSort);if(!t.length||!r.length)return this;var e=i(t,r).map(function(t){var r=_slicedToArray(t,2),e=r[0],n=r[1];var i={__d3plusTooltip__:true,__d3plus__:true,column:n,row:e};var o=u.findIndex(function(t,r){return a._row(t,r)===e&&a._column(t,r)===n});if(o>=0){i.i=o;i.data=u[o]}else{i.data={row:e,column:n}}return i});return{rowValues:t,columnValues:r,shapeData:e}}var u={align:"start",barConfig:{stroke:0},gridSize:0,paddingInner:0,paddingOuter:0,scale:"band",tickSize:0};var o=function(t){_inherits(P,t);var r=_createSuper(P);function P(){var i;_classCallCheck(this,P);i=r.call(this);i._cellPadding=2;i._column=A.accessor("column");i._columnAxis=new e.Axis;i._columnConfig=A.assign({orient:"top"},u);i._columnSort=function(t,r){return"".concat(t).localeCompare("".concat(r))};i._label=function(t,r){return"".concat(a.bind(_assertThisInitialized(i))("row",t,r)," / ").concat(a.bind(_assertThisInitialized(i))("column",t,r))};var o=i._on["mousemove.shape"];i._on["mousemove.shape"]=function(t,r){o(t,r);var e=a.bind(_assertThisInitialized(i))("row",t,r);var n=a.bind(_assertThisInitialized(i))("column",t,r);i.hover(function(t,r){return a.bind(_assertThisInitialized(i))("row",t,r)===e||a.bind(_assertThisInitialized(i))("column",t,r)===n})};i._row=A.accessor("row");i._rowAxis=new e.Axis;i._rowConfig=A.assign({orient:"left"},u);i._rowSort=function(t,r){return"".concat(t).localeCompare("".concat(r))};return i}_createClass(P,[{key:"_draw",value:function t(r){var e=j.bind(this)(this._filteredData),n=e.rowValues,i=e.columnValues,o=e.shapeData;if(!n.length||!i.length)return this;var a=this._height-this._margin.top-this._margin.bottom,u=this._select,c=this._transition,s=this._width-this._margin.left-this._margin.right;var l={opacity:0};var f={opacity:1};var h=function t(r,e){return A.elem("g.d3plus-Matrix-".concat(r),Object.assign({parent:u,transition:c},e)).node()};this._rowAxis.select(h("row",{enter:l,update:l})).domain(n).height(a).maxSize(s/2).width(s).config(this._rowConfig).render();var d=this._rowAxis.outerBounds().width-this._rowAxis.padding()*2;this._padding.left+=d;var v="translate(".concat(d+this._margin.left,", ").concat(this._margin.top,")");var p=Object.assign({transform:v},l);this._columnAxis.select(h("column",{enter:p,update:p})).domain(i).height(a).maxSize(a/2).width(s).config(this._columnConfig).render();var g=this._columnAxis.outerBounds().height-this._columnAxis.padding()*2;this._padding.top+=g;_get(_getPrototypeOf(P.prototype),"_draw",this).call(this,r);var y="translate(".concat(this._margin.left,", ").concat(g+this._margin.top,")");v="translate(".concat(d+this._margin.left,", ").concat(this._margin.top,")");var _=Object.assign({transform:v},f);this._rowAxis.select(h("row",{update:Object.assign({transform:y},f)})).height(a-this._margin.top-this._margin.bottom-g).width(d+this._rowAxis.padding()*2).render();this._columnAxis.select(h("column",{update:_})).height(g+this._columnAxis.padding()*2).width(s-this._margin.left-this._margin.right-d).render();var m=this._rowAxis._getPosition.bind(this._rowAxis);var b=this._columnAxis._getPosition.bind(this._columnAxis);var w=n.length>1?m(n[1])-m(n[0]):this._rowAxis.height();var S=i.length>1?b(i[1])-b(i[0]):this._columnAxis.width();var O="translate(".concat(this._margin.left+d,", ").concat(this._margin.top+g,")");var x=A.configPrep.bind(this)(this._shapeConfig,"shape","Rect");this._shapes.push((new C.Rect).data(o).select(A.elem("g.d3plus-Matrix-cells",{parent:this._select,enter:{transform:O},update:{transform:O}}).node()).config({height:w-this._cellPadding,width:S-this._cellPadding,x:function t(r){return b(r.column)+S/2},y:function t(r){return m(r.row)+w/2}}).config(x).render());return this}},{key:"cellPadding",value:function t(r){return arguments.length?(this._cellPadding=r,this):this._cellPadding}},{key:"column",value:function t(r){return arguments.length?(this._column=typeof r==="function"?r:A.accessor(r),this):this._column}},{key:"columnConfig",value:function t(r){return arguments.length?(this._columnConfig=A.assign(this._columnConfig,r),this):this._columnConfig}},{key:"columnSort",value:function t(r){return arguments.length?(this._columnSort=r,this):this._columnSort}},{key:"row",value:function t(r){return arguments.length?(this._row=typeof r==="function"?r:A.accessor(r),this):this._row}},{key:"rowConfig",value:function t(r){return arguments.length?(this._rowConfig=A.assign(this._rowConfig,r),this):this._rowConfig}},{key:"rowSort",value:function t(r){return arguments.length?(this._rowSort=r,this):this._rowSort}}]);return P}(r.Viz);var T=Math.PI*2;var c=function(t){_inherits(O,t);var r=_createSuper(O);function O(){var i;_classCallCheck(this,O);i=r.call(this);i._cellPadding=2;i._column=A.accessor("column");i._columnConfig={shapeConfig:{labelConfig:{fontColor:"#000",padding:5,textAnchor:function t(r){return[0,180].includes(r.angle)?"middle":[2,3].includes(r.quadrant)?"end":"start"},verticalAlign:function t(r){return[90,270].includes(r.angle)?"middle":[2,1].includes(r.quadrant)?"bottom":"top"}}}};i._columnSort=function(t,r){return"".concat(t).localeCompare("".concat(r))};i._innerRadius=function(t){return t/5};i._label=function(t,r){return"".concat(a.bind(_assertThisInitialized(i))("row",t,r)," / ").concat(a.bind(_assertThisInitialized(i))("column",t,r))};var o=i._on["mousemove.shape"];i._on["mousemove.shape"]=function(t,r){o(t,r);var e=a.bind(_assertThisInitialized(i))("row",t,r);var n=a.bind(_assertThisInitialized(i))("column",t,r);i.hover(function(t,r){return a.bind(_assertThisInitialized(i))("row",t,r)===e||a.bind(_assertThisInitialized(i))("column",t,r)===n})};i._row=A.accessor("row");i._rowSort=function(t,r){return"".concat(t).localeCompare("".concat(r))};i._columnLabels=new n.TextBox;return i}_createClass(O,[{key:"_draw",value:function t(r){var e=this;var n=j.bind(this)(this._filteredData),i=n.rowValues,o=n.columnValues,a=n.shapeData;if(!i.length||!o.length)return this;_get(_getPrototypeOf(O.prototype),"_draw",this).call(this,r);var u=this._height-this._margin.top-this._margin.bottom,c=this._select,s=this._transition,l=this._width-this._margin.left-this._margin.right;var f=50,h=100;var d=x.min([u-f*2,l-h*2])/2,v="translate(".concat(l/2+this._margin.left,", ").concat(u/2+this._margin.top,")");var p=o.slice().reverse();p.unshift(p.pop());var g=p.length;var y=p.map(function(t,r){var e=r/g*T;var n=Math.round(e*180/Math.PI);var i=Math.floor((n+90)/90%4+1);var o=[0,180].includes(n)?-h/2:[2,3].includes(i)?-h:0;var a=[90,270].includes(n)?-f/2:[2,1].includes(i)?-f:0;return{key:t,angle:n,quadrant:i,radians:e,x:d*Math.sin(e+Math.PI)+o,y:d*Math.cos(e+Math.PI)+a}});this._columnLabels.data(y).x(function(t){return t.x}).y(function(t){return t.y}).text(function(t){return t.key}).width(h).height(f).config(this._columnConfig.shapeConfig.labelConfig).select(A.elem("g.d3plus-RadialMatrix-columns",{parent:c,transition:s,enter:{transform:v},update:{transform:v}}).node()).render();var _=this._innerRadius(d);var m=(d-_)/i.length;var b=y.length>1?y[1].radians-y[0].radians:T;var w=i.slice().reverse();var S=P.arc().padAngle(this._cellPadding/d).innerRadius(function(t){return _+w.indexOf(t.row)*m+e._cellPadding/2}).outerRadius(function(t){return _+(w.indexOf(t.row)+1)*m-e._cellPadding/2}).startAngle(function(t){return y[o.indexOf(t.column)].radians-b/2}).endAngle(function(t){return y[o.indexOf(t.column)].radians+b/2});this._shapes.push((new C.Path).data(a).d(S).select(A.elem("g.d3plus-RadialMatrix-arcs",{parent:c,transition:s,enter:{transform:v},update:{transform:v}}).node()).config({id:function t(r){return e._ids(r).join("-")},x:0,y:0}).config(A.configPrep.bind(this)(this._shapeConfig,"shape","Path")).render());return this}},{key:"cellPadding",value:function t(r){return arguments.length?(this._cellPadding=r,this):this._cellPadding}},{key:"column",value:function t(r){return arguments.length?(this._column=typeof r==="function"?r:A.accessor(r),this):this._column}},{key:"columnConfig",value:function t(r){return arguments.length?(this._columnConfig=A.assign(this._columnConfig,r),this):this._columnConfig}},{key:"columnSort",value:function t(r){return arguments.length?(this._columnSort=r,this):this._columnSort}},{key:"innerRadius",value:function t(r){return arguments.length?(this._innerRadius=typeof r==="function"?r:A.constant(r),this):this._innerRadius}},{key:"row",value:function t(r){return arguments.length?(this._row=typeof r==="function"?r:A.accessor(r),this):this._row}},{key:"rowSort",value:function t(r){return arguments.length?(this._rowSort=r,this):this._rowSort}}]);return O}(r.Viz);t.Matrix=o;t.RadialMatrix=c;Object.defineProperty(t,"__esModule",{value:true})});