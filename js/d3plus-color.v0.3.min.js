!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-color"),require("d3-scale")):"function"==typeof define&&define.amd?define("d3plus-color",["exports","d3-color","d3-scale"],e):e(r.d3plus_color=r.d3plus_color||{},r.d3_color,r.d3_scale)}(this,function(r,e,n){"use strict";function o(r,n,o,t){void 0===o&&(o=1),void 0===t&&(t=1),r=e.hsl(r),n=e.hsl(n);var i=Math.abs(n.h*t-r.h*o);i>180&&(i-=360);var l=(Math.min(r.h,n.h)+i/2)%360,s=r.l+(n.l*t-r.l*o)/2,c=r.s+(n.s*t-r.s*o)/2;return 0>l&&(l+=360),e.hsl("hsl("+l+","+100*c+"%,"+100*s+"%)").toString()}function t(r,e){return void 0===e&&(e={}),r in e?e[r]:a[r]}function i(r,n){if(void 0===n&&(n={}),[null,void 0].indexOf(r)>=0)return t("missing",n);if(r===!0)return t("on",n);if(r===!1)return t("off",n);var o=e.color(r);return o?r.toString():t("scale",n)(r)}function l(r,n){void 0===n&&(n={}),r=e.rgb(r);var o=(299*r.r+587*r.g+114*r.b)/1e3;return o>=128?t("dark",n):t("light",n)}function s(r){return r=e.hsl(r),r.l>.45&&(r.s>.8&&(r.s=.8),r.l=.45),r.toString()}function c(r,n){return void 0===n&&(n=.5),r=e.hsl(r),n*=1-r.l,r.l+=n,r.s-=n,r.toString()}function f(r,n,o,t){void 0===o&&(o=1),void 0===t&&(t=1),r=e.hsl(r),n=e.hsl(n);var i=n.h*t-r.h*o;Math.abs(i)>180&&(i-=360);var l=(r.h-i)%360,s=r.l-(n.l*t-r.l*o)/2,c=r.s-(n.s*t-r.s*o)/2;return 0>l&&(l+=360),e.hsl("hsl("+l+","+100*c+"%,"+100*s+"%)").toString()}var d="0.3.0",a={dark:"#444444",light:"#f7f7f7",missing:"#cccccc",off:"#b22200",on:"#224f20",scale:n.scaleOrdinal().range(["#b22200","#282f6b","#eace3f","#b35c1e","#224f20","#5f487c","#759143","#419391","#993c88","#e89c89","#ffee8d","#afd5e8","#f7ba77","#a5c697","#c5b5e5","#d1d392","#bbefd0","#e099cf"])};r.version=d,r.add=o,r.assign=i,r.contrast=l,r.defaults=a,r.legible=s,r.lighter=c,r.subtract=f});