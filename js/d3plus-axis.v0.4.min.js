/*
  d3plus-axis v0.4.16
  Beautiful javascript scales and axes.
  Copyright (c) 2019 D3plus - https://d3plus.org
  @license MIT
*/
(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports,require("d3-array"),require("d3-time"),require("d3-time-format"),require("d3-scale"),require("d3-selection"),require("d3-transition"),require("d3plus-common"),require("d3plus-format"),require("d3plus-shape"),require("d3plus-text")):typeof define==="function"&&define.amd?define("d3plus-axis",["exports","d3-array","d3-time","d3-time-format","d3-scale","d3-selection","d3-transition","d3plus-common","d3plus-format","d3plus-shape","d3plus-text"],e):(t=t||self,e(t.d3plus={},t.d3Array,t.d3Time,t.d3TimeFormat,t.scales,t.d3Selection,t.d3Transition,t.d3plusCommon,t.d3plusFormat,t.shapes,t.d3plusText))})(this,function(t,vt,pt,_t,mt,bt,yt,St,kt,wt,Mt){"use strict";function xt(t){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){xt=function(t){return typeof t}}else{xt=function(t){return t&&typeof Symbol==="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}}return xt(t)}function n(t,e){if(!(t instanceof e)){throw new TypeError("Cannot call a class as a function")}}function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||false;n.configurable=true;if("value"in n)n.writable=true;Object.defineProperty(t,n.key,n)}}function i(t,e,i){if(e)r(t.prototype,e);if(i)r(t,i);return t}function Ot(t,e,i){if(e in t){Object.defineProperty(t,e,{value:i,enumerable:true,configurable:true,writable:true})}else{t[e]=i}return t}function a(t,e){if(typeof e!=="function"&&e!==null){throw new TypeError("Super expression must either be null or a function")}t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});if(e)s(t,e)}function o(t){o=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)};return o(t)}function s(t,e){s=Object.setPrototypeOf||function t(e,i){e.__proto__=i;return e};return s(t,e)}function u(t){if(t===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return t}function l(t,e){if(e&&(typeof e==="object"||typeof e==="function")){return e}return u(t)}function jt(t){return e(t)||c(t)||h()}function e(t){if(Array.isArray(t)){for(var e=0,i=new Array(t.length);e<t.length;e++)i[e]=t[e];return i}}function c(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function h(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function At(t){if(t.constructor===Date)return t;else if(t.constructor===Number&&"".concat(t).length>5&&t%1===0)return new Date(t);var e="".concat(t);var i=new RegExp(/^\d{1,2}[./-]\d{1,2}[./-](-*\d{1,4})$/g).exec(e),n=new RegExp(/^[A-z]{1,3} [A-z]{1,3} \d{1,2} (-*\d{1,4}) \d{1,2}:\d{1,2}:\d{1,2} [A-z]{1,3}-*\d{1,4} \([A-z]{1,3}\)/g).exec(e);if(i){var r=i[1];if(r.indexOf("-")===0)e=e.replace(r,r.substr(1));var a=new Date(e);a.setFullYear(r);return a}else if(n){var o=n[1];if(o.indexOf("-")===0)e=e.replace(o,o.substr(1));var s=new Date(e);s.setFullYear(o);return s}else if(!e.includes("/")&&!e.includes(" ")&&(!e.includes("-")||!e.indexOf("-"))){var u=new Date("".concat(e,"/01/01"));u.setFullYear(t);return u}else return new Date(e)}var Ct={"de-DE":{dateTime:"%A, der %e. %B %Y, %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],shortDays:["So","Mo","Di","Mi","Do","Fr","Sa"],months:["Januar","Februar","März","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],shortMonths:["Jan","Feb","Mrz","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"]},"en-GB":{dateTime:"%a %e %b %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},"en-US":{dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},"es-ES":{dateTime:"%A, %e de %B de %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]},"es-MX":{dateTime:"%x, %X",date:"%d/%m/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["domingo","lunes","martes","miércoles","jueves","viernes","sábado"],shortDays:["dom","lun","mar","mié","jue","vie","sáb"],months:["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"],shortMonths:["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"]},"fr-FR":{dateTime:"%A, le %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],shortDays:["dim.","lun.","mar.","mer.","jeu.","ven.","sam."],months:["janvier","février","mars","avril","mai","juin","juillet","août","septembre","octobre","novembre","décembre"],shortMonths:["janv.","févr.","mars","avr.","mai","juin","juil.","août","sept.","oct.","nov.","déc."]},"it-IT":{dateTime:"%A %e %B %Y, %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domenica","Lunedì","Martedì","Mercoledì","Giovedì","Venerdì","Sabato"],shortDays:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],shortMonths:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"]},"pt-BR":{dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]}};var f=function(t){a(e,t);function e(){var i;n(this,e);i=l(this,o(e).call(this));i._align="middle";i._barConfig={stroke:"#000","stroke-width":1};i._domain=[0,10];i._duration=600;i._gridConfig={stroke:"#ccc","stroke-width":1};i._gridLog=false;i._height=400;i._labelOffset=true;i.orient("bottom");i._outerBounds={width:0,height:0,x:0,y:0};i._padding=5;i._paddingInner=.1;i._paddingOuter=.1;i._rotateLabels=false;i._scale="linear";i._scalePadding=.5;i._shape="Line";i._shapeConfig={fill:"#000",height:function t(e){return e.tick?8:0},label:function t(e){return e.text},labelBounds:function t(e){return e.labelBounds},labelConfig:{fontColor:"#000",fontFamily:(new Mt.TextBox).fontFamily(),fontResize:false,fontSize:St.constant(10),padding:0,textAnchor:function t(){var e=Mt.rtl();return i._orient==="left"?e?"start":"end":i._orient==="right"?e?"end":"start":i._rotateLabels?i._orient==="bottom"?"end":"start":"middle"},verticalAlign:function t(){return i._orient==="bottom"?"top":i._orient==="top"?"bottom":"middle"}},r:function t(e){return e.tick?4:0},stroke:"#000",strokeWidth:1,width:function t(e){return e.tick?8:0}};i._tickSize=5;i._tickSpecifier=undefined;i._tickSuffix="normal";i._tickUnit=0;i._timeLocale=undefined;i._titleClass=new Mt.TextBox;i._titleConfig={fontSize:12,textAnchor:"middle"};i._width=400;return i}i(e,[{key:"_barPosition",value:function t(e){var i=this._position,n=i.height,r=i.x,a=i.y,o=i.opposite,s=this._getDomain(),u=this._margin[o],l=["top","left"].includes(this._orient)?this._outerBounds[a]+this._outerBounds[n]-u:this._outerBounds[a]+u;var c=this._scale==="band"?this._d3Scale.step()-this._d3Scale.bandwidth():this._scale==="point"?this._d3Scale.step()*this._d3Scale.padding():0;var h=this._scale==="band"?this._d3Scale.step():this._scale==="point"?this._d3Scale.step()*this._d3Scale.padding():0;e.call(St.attrize,this._barConfig).attr("".concat(r,"1"),this._getPosition(s[0])-c).attr("".concat(r,"2"),this._getPosition(s[s.length-1])+h).attr("".concat(a,"1"),l).attr("".concat(a,"2"),l)}},{key:"_getDomain",value:function t(){var e=[];if(this._d3ScaleNegative)e=this._d3ScaleNegative.domain();if(this._d3Scale)e=e.concat(this._d3Scale.domain());var i=["band","ordinal","point"].includes(this._scale)?e:vt.extent(e);return e[0]>e[1]?i.reverse():i}},{key:"_getPosition",value:function t(e){return e<0&&this._d3ScaleNegative?this._d3ScaleNegative(e):this._d3Scale(e)}},{key:"_getRange",value:function t(){var e=[];if(this._d3ScaleNegative)e=this._d3ScaleNegative.range();if(this._d3Scale)e=e.concat(this._d3Scale.range());return e[0]>e[1]?vt.extent(e).reverse():vt.extent(e)}},{key:"_getTicks",value:function t(){var e=mt.scaleSqrt().domain([10,400]).range([10,50]);var i=[];if(this._d3ScaleNegative){var n=this._d3ScaleNegative.range();var r=n[1]-n[0];i=this._d3ScaleNegative.ticks(Math.floor(r/e(r)))}if(this._d3Scale){var a=this._d3Scale.range();var o=a[1]-a[0];i=i.concat(this._d3Scale.ticks(Math.floor(o/e(o))))}return i}},{key:"_gridPosition",value:function t(e){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var n=this._position,r=n.height,a=n.x,o=n.y,s=n.opposite,u=this._margin[s],l=["top","left"].includes(this._orient)?this._outerBounds[o]+this._outerBounds[r]-u:this._outerBounds[o]+u,c=i?this._lastScale||this._getPosition.bind(this):this._getPosition.bind(this),h=["top","left"].includes(this._orient)?u:-u,f=this._scale==="band"?this._d3Scale.bandwidth()/2:0,d=function t(e){return c(e.id)+f};e.call(St.attrize,this._gridConfig).attr("".concat(a,"1"),d).attr("".concat(a,"2"),d).attr("".concat(o,"1"),l).attr("".concat(o,"2"),i?l:l+h)}},{key:"render",value:function t(e){var d=this,i;if(this._select===void 0){this.select(bt.select("body").append("svg").attr("width","".concat(this._width,"px")).attr("height","".concat(this._height,"px")).node())}var n=this._timeLocale||Ct[this._locale]||Ct["en-US"];_t.timeFormatDefaultLocale(n).format();var h=_t.timeFormat("%a %d"),f=_t.timeFormat("%I %p"),g=_t.timeFormat(".%L"),v=_t.timeFormat("%I:%M"),p=_t.timeFormat("%b"),_=_t.timeFormat(":%S"),m=_t.timeFormat("%b %d"),b=_t.timeFormat("%Y");var r=this._position,a=r.width,y=r.height,S=r.x,k=r.y,w=r.horizontal,M=r.opposite,o="d3plus-Axis-clip-".concat(this._uuid),x=["top","left"].includes(this._orient),O=this._padding,s=this._select,j=[O,this["_".concat(a)]-O],u=yt.transition().duration(this._duration);var l=this._shape==="Circle"?this._shapeConfig.r:this._shape==="Rect"?this._shapeConfig[a]:this._shapeConfig.strokeWidth;var A=typeof l!=="function"?function(){return l}:l;var C=this._margin={top:0,right:0,bottom:0,left:0};var P,F,T;function c(){var r=this;var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this._range;F=t?t.slice():[undefined,undefined];var e=j[0],i=j[1];if(this._range){if(this._range[0]!==undefined)e=this._range[0];if(this._range[this._range.length-1]!==undefined)i=this._range[this._range.length-1]}if(F[0]===undefined||F[0]<e)F[0]=e;if(F[1]===undefined||F[1]>i)F[1]=i;var n=i-e;if(this._scale==="ordinal"&&this._domain.length>F.length){if(t===this._range){var a=this._domain.length+1;F=vt.range(a).map(function(t){return F[0]+n*(t/(a-1))}).slice(1,a);F=F.map(function(t){return t-F[0]/2})}else{var o=this._domain.length;var s=F[1]-F[0];F=vt.range(o).map(function(t){return F[0]+s*(t/(o-1))})}}else if(t===this._range){var u=mt.scaleSqrt().domain([10,400]).range([10,50]);var l=this._scale==="time"?this._domain.map(At):this._domain;var c=vt.ticks(l[0],l[1],Math.floor(n/u(n)));T=(this._ticks?this._scale==="time"?this._ticks.map(At):this._ticks:c).slice();P=(this._labels?this._scale==="time"?this._labels.map(At):this._labels:c).slice();var h=P.length;if(h){var f=Math.ceil(n/h/2);F=[F[0]+f,F[1]-f]}}this._d3Scale=mt["scale".concat(this._scale.charAt(0).toUpperCase()).concat(this._scale.slice(1))]().domain(this._scale==="time"?this._domain.map(At):this._domain);if(this._d3Scale.round)this._d3Scale.round(true);if(this._d3Scale.padding)this._d3Scale.padding(this._scalePadding);if(this._d3Scale.paddingInner)this._d3Scale.paddingInner(this._paddingInner);if(this._d3Scale.paddingOuter)this._d3Scale.paddingOuter(this._paddingOuter);if(this._d3Scale.rangeRound)this._d3Scale.rangeRound(F);else this._d3Scale.range(F);this._d3ScaleNegative=null;if(this._scale==="log"){var d=this._d3Scale.domain();if(d[0]===0)d[0]=1;if(d[d.length-1]===0)d[d.length-1]=-1;var g=this._d3Scale.range();if(d[0]<0&&d[d.length-1]<0){this._d3ScaleNegative=this._d3Scale.copy().domain(d).range(g);this._d3Scale=null}else if(d[0]>0&&d[d.length-1]>0){this._d3Scale.domain(d).range(g)}else{var v=mt.scaleLog().domain([1,d[d[1]>0?1:0]]).range([0,1]);var p=v(Math.abs(d[d[1]<0?1:0]));var _=p/(p+1)*(g[1]-g[0]);if(d[0]>0)_=g[1]-g[0]-_;this._d3ScaleNegative=this._d3Scale.copy();(d[0]<0?this._d3Scale:this._d3ScaleNegative).domain([Math.sign(d[1]),d[1]]).range([g[0]+_,g[1]]);(d[0]<0?this._d3ScaleNegative:this._d3Scale).domain([d[0],Math.sign(d[0])]).range([g[0],g[0]+_])}}T=(this._ticks?this._scale==="time"?this._ticks.map(At):this._ticks:(this._d3Scale?this._d3Scale.ticks:this._d3ScaleNegative.ticks)?this._getTicks():this._domain).slice();P=(this._labels?this._scale==="time"?this._labels.map(At):this._labels:(this._d3Scale?this._d3Scale.ticks:this._d3ScaleNegative.ticks)?this._getTicks():T).slice();if(this._scale==="log"){P=P.filter(function(t){return Math.abs(t).toString().charAt(0)==="1"&&(r._d3Scale?t!==-1:t!==1)})}else if(this._scale==="time"){T=T.map(Number);P=P.map(Number)}T=T.sort(function(t,e){return r._getPosition(t)-r._getPosition(e)});P=P.sort(function(t,e){return r._getPosition(t)-r._getPosition(e)});if(this._scale==="linear"&&this._tickSuffix==="smallest"){var m=P.filter(function(t){return t>=1e3});if(m.length>0){var b=Math.min.apply(Math,jt(m));var y=1;while(y&&y<7){var S=Math.pow(10,3*y);if(b/S>=1){this._tickUnit=y;y+=1}else{break}}}}var k=[];this._availableTicks=T;T.forEach(function(t,e){var i=A({id:t,tick:true},e);if(r._shape==="Circle")i*=2;var n=r._getPosition(t);if(!k.length||Math.abs(St.closest(n,k)-n)>i*2)k.push(n);else k.push(false)});T=T.filter(function(t,e){return k[e]!==false});this._visibleTicks=T}c.bind(this)();function z(t){var e=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var i=t.i,n=t.position;if(this._scale==="band"){return this._d3Scale.bandwidth()}else{var r=i-e<0?j[0]:n-(n-Y[i-e].position)/2;var a=Math.abs(n-r);var o=i+e>Y.length-1?j[1]:n-(n-Y[i+e].position)/2;var s=Math.abs(n-o);return vt.min([a,s])*2}}var D=this._tickFormat?this._tickFormat:function(t){if(d._scale==="log"){var e=Math.round(Math.log(Math.abs(t))/Math.LN10);var i=Math.abs(t).toString().charAt(0);var n="10 ".concat("".concat(e).split("").map(function(t){return"⁰¹²³⁴⁵⁶⁷⁸⁹"[t]}).join(""));if(i!=="1")n="".concat(i," x ").concat(n);return t<0?"-".concat(n):n}else if(d._scale==="time"){return(pt.timeSecond(t)<t?g:pt.timeMinute(t)<t?_:pt.timeHour(t)<t?v:pt.timeDay(t)<t?f:pt.timeMonth(t)<t?pt.timeWeek(t)<t?h:m:pt.timeYear(t)<t?p:b)(t)}else if(["band","ordinal","point"].includes(d._scale)){return t}var r=d._d3Scale.tickFormat?d._d3Scale.tickFormat(P.length-1)(t):t;r=r.replace(/[^\d\.\-\+]/g,"")*1;if(isNaN(r)){return r}else if(d._scale==="linear"&&d._tickSuffix==="smallest"){var a=xt(d._locale)==="object"?d._locale:kt.formatLocale[d._locale];var o=a.separator,s=a.suffixes;var u=r>=1e3?s[d._tickUnit+8]:"";var l=r/Math.pow(10,3*d._tickUnit);var c=kt.formatAbbreviate(l,a,",.".concat(l.toString().length,"r"));return"".concat(c).concat(o).concat(u)}else{return kt.formatAbbreviate(r,d._locale)}};if(this._title){var N=this._titleConfig,L=N.fontFamily,E=N.fontSize,B=N.lineHeight;var H=Mt.textWrap().fontFamily(typeof L==="function"?L():L).fontSize(typeof E==="function"?E():E).lineHeight(typeof B==="function"?B():B).width(F[F.length-1]-F[0]-O*2).height(this["_".concat(y)]-this._tickSize-O*2);var J=H(this._title).lines.length;C[this._orient]=J*H.lineHeight()+O}var R=this._shape==="Circle"?typeof this._shapeConfig.r==="function"?this._shapeConfig.r({tick:true}):this._shapeConfig.r:this._shape==="Rect"?typeof this._shapeConfig[y]==="function"?this._shapeConfig[y]({tick:true}):this._shapeConfig[y]:this._tickSize,I=A({tick:true});if(typeof R==="function")R=vt.max(T.map(R));if(this._shape==="Rect")R/=2;if(typeof I==="function")I=vt.max(T.map(I));if(this._shape!=="Circle")I/=2;var Y=P.map(function(t,e){var i=d._shapeConfig.labelConfig.fontFamily(t,e),n=d._shapeConfig.labelConfig.fontSize(t,e),r=d._getPosition(t);var a=d._shapeConfig.lineHeight?d._shapeConfig.lineHeight(t,e):n*1.4;return{d:t,i:e,fF:i,fS:n,lineHeight:a,position:r}});function W(t){var e=t.d,i=t.i,n=t.fF,r=t.fS,a=t.rotate,o=t.space;var s=a?"width":"height",u=a?"height":"width";var l=Mt.textWrap().fontFamily(n).fontSize(r).lineHeight(this._shapeConfig.lineHeight?this._shapeConfig.lineHeight(e,i):undefined)[u](w?o:vt.min([this._maxSize,this._width])-R-O-this._margin.left-this._margin.right)[s](w?vt.min([this._maxSize,this._height])-R-O-this._margin.top-this._margin.bottom:o);var c=l(D(e));c.lines=c.lines.filter(function(t){return t!==""});c.width=c.lines.length?Math.ceil(vt.max(c.widths))+r/4:0;if(c.width%2)c.width++;c.height=c.lines.length?Math.ceil(c.lines.length*l.lineHeight())+r/4:0;if(c.height%2)c.height++;return c}Y=Y.map(function(t){t.rotate=d._labelRotation;t.space=z.bind(d)(t);var e=W.bind(d)(t);return Object.assign(e,t)});this._rotateLabels=w&&this._labelRotation===undefined?Y.some(function(t){return t.truncated}):this._labelRotation;if(this._rotateLabels){Y=Y.map(function(t){t.rotate=true;var e=W.bind(d)(t);return Object.assign(t,e)})}var q=[0,0];for(var G=0;G<2;G++){var X=Y[G?Y.length-1:0];if(!X)break;var U=X.height,V=X.position,Q=X.rotate,K=X.width;var $=G?j[1]:j[0];var Z=(Q||!w?U:K)/2;var tt=G?V+Z-$:V-Z-$;q[G]=tt}var et=F[0];var it=F[F.length-1];var nt=[et-q[0],it-q[1]];if(this._range){if(this._range[0]!==undefined)nt[0]=this._range[0];if(this._range[this._range.length-1]!==undefined)nt[1]=this._range[this._range.length-1]}if(nt[0]!==et||nt[1]!==it){c.bind(this)(nt);Y=P.map(function(t,e){var i=d._shapeConfig.labelConfig.fontFamily(t,e),n=d._shapeConfig.labelConfig.fontSize(t,e),r=d._getPosition(t);var a=d._shapeConfig.lineHeight?d._shapeConfig.lineHeight(t,e):n*1.4;return{d:t,i:e,fF:i,fS:n,lineHeight:a,position:r}});Y=Y.map(function(t){t.rotate=d._rotateLabels;t.space=z.bind(d)(t);var e=W.bind(d)(t);return Object.assign(e,t)})}var rt=vt.max(Y,function(t){return t.height})||0;this._rotateLabels=w&&this._labelRotation===undefined?Y.some(function(t){var e=t.i,i=t.height,n=t.position,r=t.truncated;var a=Y[e-1];return r||e&&a.position+a.height/2>n-i/2}):this._labelRotation;if(this._rotateLabels){var at=0;Y=Y.map(function(t){t.space=z.bind(d)(t,2);var e=W.bind(d)(t);t=Object.assign(t,e);var i=Y[t.i-1];if(!i){at=1}else if(i.position+i.height/2>t.position){if(at){t.offset=i.width;at=0}else at=1}return t})}var ot=this._labelOffset?vt.max(Y,function(t){return t.offset||0}):0;Y.forEach(function(t){return t.offset=t.offset?ot:0});var st=this._shape==="Line"?0:R;var ut=this._outerBounds=(i={},Ot(i,y,(vt.max(Y,function(t){return Math.ceil(t[t.rotate||!w?"width":"height"]+t.offset)})||0)+(Y.length?O:0)),Ot(i,a,j[j.length-1]-j[0]),Ot(i,S,j[0]),i);C[this._orient]+=R;C[M]=this._gridSize!==undefined?vt.max([this._gridSize,st]):this["_".concat(y)]-C[this._orient]-ut[y]-O;ut[y]+=C[M]+C[this._orient];ut[k]=this._align==="start"?this._padding:this._align==="end"?this["_".concat(y)]-ut[y]-this._padding:this["_".concat(y)]/2-ut[y]/2;var lt=St.elem("g#d3plus-Axis-".concat(this._uuid),{parent:s});this._group=lt;var ct=St.elem("g.grid",{parent:lt}).selectAll("line").data((this._gridSize!==0?this._grid||this._scale==="log"&&!this._gridLog?P:T:[]).map(function(t){return{id:t}}),function(t){return t.id});ct.exit().transition(u).attr("opacity",0).call(this._gridPosition.bind(this)).remove();ct.enter().append("line").attr("opacity",0).attr("clip-path","url(#".concat(o,")")).call(this._gridPosition.bind(this),true).merge(ct).transition(u).attr("opacity",1).call(this._gridPosition.bind(this));var ht=P.filter(function(t,e){return Y[e].lines.length&&!T.includes(t)});var ft=Y.some(function(t){return t.rotate});var dt=T.concat(ht).map(function(e){var t;var i=Y.find(function(t){return t.d===e});var n=d._getPosition(e);var r=i?i.space:0;var a=i?i.lines.length:1;var o=i?i.lineHeight:1;var s=i&&d._labelOffset?i.offset:0;var u=w?r:ut.width-C[d._position.opposite]-R-C[d._orient]+O;var l=C[M],c=(R+s)*(x?-1:1),h=x?ut[k]+ut[y]-l:ut[k]+l;var f=(t={id:e,labelBounds:ft&&i?{x:-i.width/2+i.fS/4,y:d._orient==="bottom"?c+O+(i.width-o*a)/2:c-O*2-(i.width+o*a)/2,width:i.width,height:i.height}:{x:w?-r/2:d._orient==="left"?-u-O+c:c+O,y:w?d._orient==="bottom"?c+O:c-O-rt:-r/2,width:w?r:u,height:w?rt:r},rotate:i?i.rotate:false,size:P.includes(e)?c:0,text:P.includes(e)?D(e):false,tick:T.includes(e)},Ot(t,S,n+(d._scale==="band"?d._d3Scale.bandwidth()/2:0)),Ot(t,k,h),t);return f});if(this._shape==="Line"){dt=dt.concat(dt.map(function(t){var e=Object.assign({},t);e[k]+=t.size;return e}))}(new wt[this._shape]).data(dt).duration(this._duration).labelConfig({ellipsis:function t(e){return e&&e.length?"".concat(e,"..."):""},rotate:function t(e){return e.rotate?-90:0}}).select(St.elem("g.ticks",{parent:lt}).node()).config(this._shapeConfig).render();var gt=lt.selectAll("line.bar").data([null]);gt.enter().append("line").attr("class","bar").attr("opacity",0).call(this._barPosition.bind(this)).merge(gt).transition(u).attr("opacity",1).call(this._barPosition.bind(this));this._titleClass.data(this._title?[{text:this._title}]:[]).duration(this._duration).height(C[this._orient]).rotate(this._orient==="left"?-90:this._orient==="right"?90:0).select(St.elem("g.d3plus-Axis-title",{parent:lt}).node()).text(function(t){return t.text}).verticalAlign("middle").width(F[F.length-1]-F[0]).x(w?F[0]:this._orient==="left"?C.left/2-(F[F.length-1]-F[0])/2+O:ut.x+ut.width-C.right/2-(F[F.length-1]-F[0])/2).y(w?this._orient==="bottom"?ut.y+ut.height-C.bottom-O:ut.y:F[0]+(F[F.length-1]-F[0])/2-C[this._orient]/2).config(this._titleConfig).render();this._lastScale=this._getPosition.bind(this);if(e)setTimeout(e,this._duration+100);return this}},{key:"align",value:function t(e){return arguments.length?(this._align=e,this):this._align}},{key:"barConfig",value:function t(e){return arguments.length?(this._barConfig=Object.assign(this._barConfig,e),this):this._barConfig}},{key:"domain",value:function t(e){return arguments.length?(this._domain=e,this):this._domain}},{key:"duration",value:function t(e){return arguments.length?(this._duration=e,this):this._duration}},{key:"grid",value:function t(e){return arguments.length?(this._grid=e,this):this._grid}},{key:"gridConfig",value:function t(e){return arguments.length?(this._gridConfig=Object.assign(this._gridConfig,e),this):this._gridConfig}},{key:"gridLog",value:function t(e){return arguments.length?(this._gridLog=e,this):this._gridLog}},{key:"gridSize",value:function t(e){return arguments.length?(this._gridSize=e,this):this._gridSize}},{key:"height",value:function t(e){return arguments.length?(this._height=e,this):this._height}},{key:"labels",value:function t(e){return arguments.length?(this._labels=e,this):this._labels}},{key:"labelOffset",value:function t(e){return arguments.length?(this._labelOffset=e,this):this._labelOffset}},{key:"labelRotation",value:function t(e){return arguments.length?(this._labelRotation=e,this):this._labelRotation}},{key:"maxSize",value:function t(e){return arguments.length?(this._maxSize=e,this):this._maxSize}},{key:"orient",value:function t(e){if(arguments.length){var i=["top","bottom"].includes(e),n={top:"bottom",right:"left",bottom:"top",left:"right"};this._position={horizontal:i,width:i?"width":"height",height:i?"height":"width",x:i?"x":"y",y:i?"y":"x",opposite:n[e]};return this._orient=e,this}return this._orient}},{key:"outerBounds",value:function t(){return this._outerBounds}},{key:"padding",value:function t(e){return arguments.length?(this._padding=e,this):this._padding}},{key:"paddingInner",value:function t(e){return arguments.length?(this._paddingInner=e,this):this._paddingInner}},{key:"paddingOuter",value:function t(e){return arguments.length?(this._paddingOuter=e,this):this._paddingOuter}},{key:"range",value:function t(e){return arguments.length?(this._range=e,this):this._range}},{key:"scale",value:function t(e){return arguments.length?(this._scale=e,this):this._scale}},{key:"scalePadding",value:function t(e){return arguments.length?(this._scalePadding=e,this):this._scalePadding}},{key:"select",value:function t(e){return arguments.length?(this._select=bt.select(e),this):this._select}},{key:"shape",value:function t(e){return arguments.length?(this._shape=e,this):this._shape}},{key:"shapeConfig",value:function t(e){return arguments.length?(this._shapeConfig=St.assign(this._shapeConfig,e),this):this._shapeConfig}},{key:"tickFormat",value:function t(e){return arguments.length?(this._tickFormat=e,this):this._tickFormat}},{key:"ticks",value:function t(e){return arguments.length?(this._ticks=e,this):this._ticks}},{key:"tickSize",value:function t(e){return arguments.length?(this._tickSize=e,this):this._tickSize}},{key:"tickSpecifier",value:function t(e){return arguments.length?(this._tickSpecifier=e,this):this._tickSpecifier}},{key:"tickSuffix",value:function t(e){return arguments.length?(this._tickSuffix=e,this):this._tickSuffix}},{key:"timeLocale",value:function t(e){return arguments.length?(this._timeLocale=e,this):this._timeLocale}},{key:"title",value:function t(e){return arguments.length?(this._title=e,this):this._title}},{key:"titleConfig",value:function t(e){return arguments.length?(this._titleConfig=Object.assign(this._titleConfig,e),this):this._titleConfig}},{key:"width",value:function t(e){return arguments.length?(this._width=e,this):this._width}}]);return e}(St.BaseClass);var d=function(t){a(e,t);function e(){var t;n(this,e);t=l(this,o(e).call(this));t.orient("bottom");return t}return e}(f);var g=function(t){a(e,t);function e(){var t;n(this,e);t=l(this,o(e).call(this));t.orient("left");return t}return e}(f);var v=function(t){a(e,t);function e(){var t;n(this,e);t=l(this,o(e).call(this));t.orient("right");return t}return e}(f);var p=function(t){a(e,t);function e(){var t;n(this,e);t=l(this,o(e).call(this));t.orient("top");return t}return e}(f);t.Axis=f;t.AxisBottom=d;t.AxisLeft=g;t.AxisRight=v;t.AxisTop=p;t.date=At;Object.defineProperty(t,"__esModule",{value:true})});(function(t){typeof define==="function"&&define.amd?define(t):t()})(function(){"use strict";var t=typeof globalThis!=="undefined"?globalThis:typeof window!=="undefined"?window:typeof global!=="undefined"?global:typeof self!=="undefined"?self:{};function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}var i="object";var n=function(t){return t&&t.Math==Math&&t};var h=n(typeof globalThis==i&&globalThis)||n(typeof window==i&&window)||n(typeof self==i&&self)||n(typeof t==i&&t)||Function("return this")();var r=function(t){try{return!!t()}catch(t){return true}};var d=!r(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7});var a={}.propertyIsEnumerable;var o=Object.getOwnPropertyDescriptor;var s=o&&!a.call({1:2},1);var u=s?function t(e){var i=o(this,e);return!!i&&i.enumerable}:a;var g={f:u};var l=function(t,e){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:e}};var c={}.toString;var f=function(t){return c.call(t).slice(8,-1)};var v="".split;var y=r(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return f(t)=="String"?v.call(t,""):Object(t)}:Object;var p=function(t){if(t==undefined)throw TypeError("Can't call method on "+t);return t};var _=function(t){return y(p(t))};var m=function(t){return typeof t==="object"?t!==null:typeof t==="function"};var b=function(t,e){if(!m(t))return t;var i,n;if(e&&typeof(i=t.toString)=="function"&&!m(n=i.call(t)))return n;if(typeof(i=t.valueOf)=="function"&&!m(n=i.call(t)))return n;if(!e&&typeof(i=t.toString)=="function"&&!m(n=i.call(t)))return n;throw TypeError("Can't convert object to primitive value")};var S={}.hasOwnProperty;var k=function(t,e){return S.call(t,e)};var w=h.document;var M=m(w)&&m(w.createElement);var x=function(t){return M?w.createElement(t):{}};var O=!d&&!r(function(){return Object.defineProperty(x("div"),"a",{get:function(){return 7}}).a!=7});var j=Object.getOwnPropertyDescriptor;var A=d?j:function t(e,i){e=_(e);i=b(i,true);if(O)try{return j(e,i)}catch(t){}if(k(e,i))return l(!g.f.call(e,i),e[i])};var C={f:A};var P=function(t){if(!m(t)){throw TypeError(String(t)+" is not an object")}return t};var F=Object.defineProperty;var T=d?F:function t(e,i,n){P(e);i=b(i,true);P(n);if(O)try{return F(e,i,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");if("value"in n)e[i]=n.value;return e};var z={f:T};var D=d?function(t,e,i){return z.f(t,e,l(1,i))}:function(t,e,i){t[e]=i;return t};var N=function(e,i){try{D(h,e,i)}catch(t){h[e]=i}return i};var L=e(function(t){var e="__core-js_shared__";var i=h[e]||N(e,{});(t.exports=function(t,e){return i[t]||(i[t]=e!==undefined?e:{})})("versions",[]).push({version:"3.1.3",mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})});var E=L("native-function-to-string",Function.toString);var B=h.WeakMap;var H=typeof B==="function"&&/native code/.test(E.call(B));var J=0;var R=Math.random();var I=function(t){return"Symbol("+String(t===undefined?"":t)+")_"+(++J+R).toString(36)};var Y=L("keys");var W=function(t){return Y[t]||(Y[t]=I(t))};var q={};var G=h.WeakMap;var X,U,V;var Q=function(t){return V(t)?U(t):X(t,{})};var K=function(i){return function(t){var e;if(!m(t)||(e=U(t)).type!==i){throw TypeError("Incompatible receiver, "+i+" required")}return e}};if(H){var $=new G;var Z=$.get;var tt=$.has;var et=$.set;X=function(t,e){et.call($,t,e);return e};U=function(t){return Z.call($,t)||{}};V=function(t){return tt.call($,t)}}else{var it=W("state");q[it]=true;X=function(t,e){D(t,it,e);return e};U=function(t){return k(t,it)?t[it]:{}};V=function(t){return k(t,it)}}var nt={set:X,get:U,has:V,enforce:Q,getterFor:K};var rt=e(function(t){var e=nt.get;var s=nt.enforce;var u=String(E).split("toString");L("inspectSource",function(t){return E.call(t)});(t.exports=function(t,e,i,n){var r=n?!!n.unsafe:false;var a=n?!!n.enumerable:false;var o=n?!!n.noTargetGet:false;if(typeof i=="function"){if(typeof e=="string"&&!k(i,"name"))D(i,"name",e);s(i).source=u.join(typeof e=="string"?e:"")}if(t===h){if(a)t[e]=i;else N(e,i);return}else if(!r){delete t[e]}else if(!o&&t[e]){a=true}if(a)t[e]=i;else D(t,e,i)})(Function.prototype,"toString",function t(){return typeof this=="function"&&e(this).source||E.call(this)})});var at=h;var ot=function(t){return typeof t=="function"?t:undefined};var st=function(t,e){return arguments.length<2?ot(at[t])||ot(h[t]):at[t]&&at[t][e]||h[t]&&h[t][e]};var ut=Math.ceil;var lt=Math.floor;var ct=function(t){return isNaN(t=+t)?0:(t>0?lt:ut)(t)};var ht=Math.min;var ft=function(t){return t>0?ht(ct(t),9007199254740991):0};var dt=Math.max;var gt=Math.min;var vt=function(t,e){var i=ct(t);return i<0?dt(i+e,0):gt(i,e)};var pt=function(s){return function(t,e,i){var n=_(t);var r=ft(n.length);var a=vt(i,r);var o;if(s&&e!=e)while(r>a){o=n[a++];if(o!=o)return true}else for(;r>a;a++){if((s||a in n)&&n[a]===e)return s||a||0}return!s&&-1}};var _t={includes:pt(true),indexOf:pt(false)};var mt=_t.indexOf;var bt=function(t,e){var i=_(t);var n=0;var r=[];var a;for(a in i)!k(q,a)&&k(i,a)&&r.push(a);while(e.length>n)if(k(i,a=e[n++])){~mt(r,a)||r.push(a)}return r};var yt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];var St=yt.concat("length","prototype");var kt=Object.getOwnPropertyNames||function t(e){return bt(e,St)};var wt={f:kt};var Mt=Object.getOwnPropertySymbols;var xt={f:Mt};var Ot=st("Reflect","ownKeys")||function t(e){var i=wt.f(P(e));var n=xt.f;return n?i.concat(n(e)):i};var jt=function(t,e){var i=Ot(e);var n=z.f;var r=C.f;for(var a=0;a<i.length;a++){var o=i[a];if(!k(t,o))n(t,o,r(e,o))}};var At=/#|\.prototype\./;var Ct=function(t,e){var i=Ft[Pt(t)];return i==zt?true:i==Tt?false:typeof e=="function"?r(e):!!e};var Pt=Ct.normalize=function(t){return String(t).replace(At,".").toLowerCase()};var Ft=Ct.data={};var Tt=Ct.NATIVE="N";var zt=Ct.POLYFILL="P";var Dt=Ct;var Nt=C.f;var Lt=function(t,e){var i=t.target;var n=t.global;var r=t.stat;var a,o,s,u,l,c;if(n){o=h}else if(r){o=h[i]||N(i,{})}else{o=(h[i]||{}).prototype}if(o)for(s in e){l=e[s];if(t.noTargetGet){c=Nt(o,s);u=c&&c.value}else u=o[s];a=Dt(n?s:i+(r?".":"#")+s,t.forced);if(!a&&u!==undefined){if(typeof l===typeof u)continue;jt(l,u)}if(t.sham||u&&u.sham){D(l,"sham",true)}rt(o,s,l,t)}};var Et=function(t){if(typeof t!="function"){throw TypeError(String(t)+" is not a function")}return t};var Bt=function(n,r,t){Et(n);if(r===undefined)return n;switch(t){case 0:return function(){return n.call(r)};case 1:return function(t){return n.call(r,t)};case 2:return function(t,e){return n.call(r,t,e)};case 3:return function(t,e,i){return n.call(r,t,e,i)}}return function(){return n.apply(r,arguments)}};var Ht=function(t){return Object(p(t))};var Jt=Array.isArray||function t(e){return f(e)=="Array"};var Rt=!!Object.getOwnPropertySymbols&&!r(function(){return!String(Symbol())});var It=h.Symbol;var Yt=L("wks");var Wt=function(t){return Yt[t]||(Yt[t]=Rt&&It[t]||(Rt?It:I)("Symbol."+t))};var qt=Wt("species");var Gt=function(t,e){var i;if(Jt(t)){i=t.constructor;if(typeof i=="function"&&(i===Array||Jt(i.prototype)))i=undefined;else if(m(i)){i=i[qt];if(i===null)i=undefined}}return new(i===undefined?Array:i)(e===0?0:e)};var Xt=[].push;var Ut=function(d){var g=d==1;var v=d==2;var p=d==3;var _=d==4;var m=d==6;var b=d==5||m;return function(t,e,i,n){var r=Ht(t);var a=y(r);var o=Bt(e,i,3);var s=ft(a.length);var u=0;var l=n||Gt;var c=g?l(t,s):v?l(t,0):undefined;var h,f;for(;s>u;u++)if(b||u in a){h=a[u];f=o(h,u,r);if(d){if(g)c[u]=f;else if(f)switch(d){case 3:return true;case 5:return h;case 6:return u;case 2:Xt.call(c,h)}else if(_)return false}}return m?-1:p||_?_:c}};var Vt={forEach:Ut(0),map:Ut(1),filter:Ut(2),some:Ut(3),every:Ut(4),find:Ut(5),findIndex:Ut(6)};var Qt=Object.keys||function t(e){return bt(e,yt)};var Kt=d?Object.defineProperties:function t(e,i){P(e);var n=Qt(i);var r=n.length;var a=0;var o;while(r>a)z.f(e,o=n[a++],i[o]);return e};var $t=st("document","documentElement");var Zt=W("IE_PROTO");var te="prototype";var ee=function(){};var ie=function(){var t=x("iframe");var e=yt.length;var i="<";var n="script";var r=">";var a="java"+n+":";var o;t.style.display="none";$t.appendChild(t);t.src=String(a);o=t.contentWindow.document;o.open();o.write(i+n+r+"document.F=Object"+i+"/"+n+r);o.close();ie=o.F;while(e--)delete ie[te][yt[e]];return ie()};var ne=Object.create||function t(e,i){var n;if(e!==null){ee[te]=P(e);n=new ee;ee[te]=null;n[Zt]=e}else n=ie();return i===undefined?n:Kt(n,i)};q[Zt]=true;var re=Wt("unscopables");var ae=Array.prototype;if(ae[re]==undefined){D(ae,re,ne(null))}var oe=function(t){ae[re][t]=true};var se=Vt.find;var ue="find";var le=true;if(ue in[])Array(1)[ue](function(){le=false});Lt({target:"Array",proto:true,forced:le},{find:function t(e){return se(this,e,arguments.length>1?arguments[1]:undefined)}});oe(ue);var ce=_t.includes;Lt({target:"Array",proto:true},{includes:function t(e){return ce(this,e,arguments.length>1?arguments[1]:undefined)}});oe("includes");var he=Object.assign;var fe=!he||r(function(){var t={};var e={};var i=Symbol();var n="abcdefghijklmnopqrst";t[i]=7;n.split("").forEach(function(t){e[t]=t});return he({},t)[i]!=7||Qt(he({},e)).join("")!=n})?function t(e,i){var n=Ht(e);var r=arguments.length;var a=1;var o=xt.f;var s=g.f;while(r>a){var u=y(arguments[a++]);var l=o?Qt(u).concat(o(u)):Qt(u);var c=l.length;var h=0;var f;while(c>h){f=l[h++];if(!d||s.call(u,f))n[f]=u[f]}}return n}:he;Lt({target:"Object",stat:true,forced:Object.assign!==fe},{assign:fe});var de=Wt("match");var ge=function(t){var e;return m(t)&&((e=t[de])!==undefined?!!e:f(t)=="RegExp")};var ve=function(t){if(ge(t)){throw TypeError("The method doesn't accept regular expressions")}return t};var pe=Wt("match");var _e=function(e){var i=/./;try{"/./"[e](i)}catch(t){try{i[pe]=false;return"/./"[e](i)}catch(t){}}return false};Lt({target:"String",proto:true,forced:!_e("includes")},{includes:function t(e){return!!~String(p(this)).indexOf(ve(e),arguments.length>1?arguments[1]:undefined)}});var me="".startsWith;var be=Math.min;Lt({target:"String",proto:true,forced:!_e("startsWith")},{startsWith:function t(e){var i=String(p(this));ve(e);var n=ft(be(arguments.length>1?arguments[1]:undefined,i.length));var r=String(e);return me?me.call(i,r,n):i.slice(n,n+r.length)===r}});if(typeof window!=="undefined"){(function(){var n=function(t,e){var i=t.nodeType;if(i===3){e.push(t.textContent.replace(/&/,"&amp;").replace(/</,"&lt;").replace(">","&gt;"))}else if(i===1){e.push("<",t.tagName);if(t.hasAttributes()){[].forEach.call(t.attributes,function(t){e.push(" ",t.item.name,"='",t.item.value,"'")})}if(t.hasChildNodes()){e.push(">");[].forEach.call(t.childNodes,function(t){n(t,e)});e.push("</",t.tagName,">")}else{e.push("/>")}}else if(i==8){e.push("\x3c!--",t.nodeValue,"--\x3e")}};Object.defineProperty(SVGElement.prototype,"innerHTML",{get:function(){var t=[];var e=this.firstChild;while(e){n(e,t);e=e.nextSibling}return t.join("")},set:function(t){while(this.firstChild){this.removeChild(this.firstChild)}try{var e=new DOMParser;e.async=false;var i="<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>"+t+"</svg>";var n=e.parseFromString(i,"text/xml").documentElement;var r=n.firstChild;while(r){this.appendChild(this.ownerDocument.importNode(r,true));r=r.nextSibling}}catch(t){}}});Object.defineProperty(SVGElement.prototype,"innerSVG",{get:function(){return this.innerHTML},set:function(t){this.innerHTML=t}})})()}});