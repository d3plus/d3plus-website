/*
  d3plus-tooltip v0.3.7
  A javascript-only tooltip.
  Copyright (c) 2019 D3plus - https://d3plus.org
  @license MIT
*/
if(typeof Object.assign!=="function"){Object.defineProperty(Object,"assign",{value:function t(e){"use strict";if(e===null){throw new TypeError("Cannot convert undefined or null to object")}var i=Object(e);for(var o=1;o<arguments.length;o++){var n=arguments[o];if(n!==null){for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){i[r]=n[r]}}}}return i},writable:true,configurable:true})}if(!Array.prototype.includes){Object.defineProperty(Array.prototype,"includes",{value:function t(e,i){var o=Object(this);var n=o.length>>>0;if(n===0)return false;var r=i|0;var s=Math.max(r>=0?r:n-Math.abs(r),0);function a(t,e){return t===e||typeof t==="number"&&typeof e==="number"&&isNaN(t)&&isNaN(e)}while(s<n){if(a(o[s],e)){return true}s++}return false}})}if(!String.prototype.includes){Object.defineProperty(String.prototype,"includes",{value:function(t,e){if(typeof e!=="number"){e=0}if(e+t.length>this.length){return false}else{return this.indexOf(t,e)!==-1}}})}if(!Array.prototype.find){Object.defineProperty(Array.prototype,"find",{value:function(t){if(this==null){throw new TypeError('"this" is null or not defined')}var e=Object(this);var i=e.length>>>0;if(typeof t!=="function"){throw new TypeError("predicate must be a function")}var o=arguments[1];var n=0;while(n<i){var r=e[n];if(t.call(o,r,n,e)){return r}n++}return undefined},configurable:true,writable:true})}if(!String.prototype.startsWith){Object.defineProperty(String.prototype,"startsWith",{value:function(t,e){e=!e||e<0?0:+e;return this.substring(e,e+t.length)===t}})}if(typeof window!=="undefined"){(function(){var o=function(t,e){var i=t.nodeType;if(i===3){e.push(t.textContent.replace(/&/,"&amp;").replace(/</,"&lt;").replace(">","&gt;"))}else if(i===1){e.push("<",t.tagName);if(t.hasAttributes()){[].forEach.call(t.attributes,function(t){e.push(" ",t.item.name,"='",t.item.value,"'")})}if(t.hasChildNodes()){e.push(">");[].forEach.call(t.childNodes,function(t){o(t,e)});e.push("</",t.tagName,">")}else{e.push("/>")}}else if(i==8){e.push("\x3c!--",t.nodeValue,"--\x3e")}};Object.defineProperty(SVGElement.prototype,"innerHTML",{get:function(){var t=[];var e=this.firstChild;while(e){o(e,t);e=e.nextSibling}return t.join("")},set:function(t){while(this.firstChild){this.removeChild(this.firstChild)}try{var e=new DOMParser;e.async=false;var i="<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'>"+t+"</svg>";var o=e.parseFromString(i,"text/xml").documentElement;var n=o.firstChild;while(n){this.appendChild(this.ownerDocument.importNode(n,true));n=n.nextSibling}}catch(t){}}});Object.defineProperty(SVGElement.prototype,"innerSVG",{get:function(){return this.innerHTML},set:function(t){this.innerHTML=t}})})()}(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports,require("d3-selection"),require("d3plus-common"),require("popper.js")):typeof define==="function"&&define.amd?define("d3plus-tooltip",["exports","d3-selection","d3plus-common","popper.js"],e):e(t.d3plus={},t.d3Selection,t.d3plusCommon,t.Popper)})(this,function(t,v,m,w){"use strict";w=w&&w.hasOwnProperty("default")?w["default"]:w;var e=function(t){function e(){t.call(this);this._arrow=m.accessor("arrow","");this._arrowStyle={content:"",background:"inherit",border:"inherit","border-width":"0 1px 1px 0",height:"10px",position:"absolute",transform:"rotate(45deg)",width:"10px","z-index":"-1"};this._background=m.constant("rgba(255, 255, 255, 1)");this._body=m.accessor("body","");this._bodyStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"12px","font-weight":"400","z-index":"1"};this._border=m.constant("1px solid rgba(0, 0, 0, 0.1)");this._borderRadius=m.constant("2px");this._className="d3plus-tooltip";this._data=[];this._footer=m.accessor("footer","");this._footerStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"12px","font-weight":"400","z-index":"1"};this._height=m.constant("auto");this._id=function(t,e){return""+e};this._offset=m.constant(5);this._padding=m.constant("5px");this._pointerEvents=m.constant("auto");this._popperClasses={};this._position=function(t){return[t.x,t.y]};this._prefix=m.prefix();this._tableStyle={"border-collapse":"collapse","border-spacing":"0",width:"100%"};this._tbody=[];this._tbodyStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"12px","text-align":"center"};this._thead=[];this._theadStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"12px","font-weight":"600","text-align":"center"};this._title=m.accessor("title","");this._titleStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"14px","font-weight":"600"};this._trStyle={"border-top":"1px solid rgba(0, 0, 0, 0.1)"};this._width=m.constant("auto")}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.render=function t(e){var h=this;var p=this;var i=v.select("body").selectAll("."+this._className).data(this._data,this._id);var o=i.enter().append("div").attr("class",this._className);var n=i.merge(o);function r(i){o.append("div").attr("class","d3plus-tooltip-"+i).attr("id",function(t,e){return"d3plus-tooltip-"+i+"-"+(t?p._id(t,e):"")});var t=n.select(".d3plus-tooltip-"+i).html(p["_"+i]);m.stylize(t,p["_"+i+"Style"])}function s(t){if(typeof t==="function"){var e=v.select(this.parentNode.parentNode).datum();return t(e,p._data.indexOf(e))}else{return t}}function a(t){t.style("background",p._background).style(p._prefix+"border-radius",p._borderRadius).style("pointer-events",p._pointerEvents).style("padding",p._padding).style("width",p._width).style("height",p._height).style("border",function(t,e){var i=v.select(this).style("border");return i!=="0px none rgb(0, 0, 0)"?i:p._border(t,e)})}r("title");r("body");var l=o.append("table").attr("class","d3plus-tooltip-table");var u=n.select(".d3plus-tooltip-table");m.stylize(u,this._tableStyle);l.append("thead").attr("class","d3plus-tooltip-thead");var c=n.select(".d3plus-tooltip-thead");m.stylize(c,this._theadStyle);var f=c.selectAll("th").data(this._thead);f.enter().append("th").merge(f).html(s);f.exit().remove();l.append("tbody").attr("class","d3plus-tooltip-tbody");var d=n.select(".d3plus-tooltip-tbody");m.stylize(d,this._tbodyStyle);var y=d.selectAll("tr").data(this._tbody);var _=y.enter().append("tr");y.exit().remove();var g=y.merge(_);m.stylize(g,this._trStyle);var b=g.selectAll("td").data(function(t){return t});b.enter().append("td").merge(b).html(s);r("footer");r("arrow");o.attr("id",function(t,e){return"d3plus-tooltip-"+(t?h._id(t,e):"")}).call(a).each(function(t,e){var i=p._id(t,e);var o=document.getElementById("d3plus-tooltip-"+i);var n=document.getElementById("d3plus-tooltip-arrow-"+i);var r=n.offsetHeight;var s=n.getBoundingClientRect().height/2;n.style.bottom="-"+r/2+"px";var a=p._position(t,e);var l=Array.isArray(a)?{clientWidth:0,clientHeight:0,getBoundingClientRect:function(){return{top:a[1],right:a[0],bottom:a[1],left:a[0],width:0,height:0}}}:a;h._popperClasses[i]=new w(l,o,{placement:"top",placements:["top","bottom","left","right"],modifiers:{arrow:{element:n},offset:{offset:"0,"+(p._offset(t,e)+s)},preventOverflow:{boundariesElement:"scrollParent"},flip:{behavior:"flip",boundariesElement:"viewport"}},onUpdate:function t(e){var i=e.arrowElement;var o=e.flipped;if(o){i.style.transform="rotate(225deg)";i.style.top="-"+r/2+"px"}else{i.style.transform="rotate(45deg)";i.style.bottom="-"+r/2+"px"}},removeOnDestroy:true})});n.each(function(t,e){var i=p._id(t,e);var o=p._position(t,e);var n=h._popperClasses[i];if(n){var r=Array.isArray(o)?{clientWidth:0,clientHeight:0,getBoundingClientRect:function(){return{top:o[1],right:o[0],bottom:o[1],left:o[0],width:0,height:0}}}:o;n.reference=r;n.scheduleUpdate()}}).call(a);i.exit().each(function(t,e){var i=p._id(t,e);var o=h._popperClasses[i];if(o){o.destroy();delete h._popperClasses[i]}}).remove();if(e){setTimeout(e,100)}return this};e.prototype.arrow=function t(e){return arguments.length?(this._arrow=typeof e==="function"?e:m.constant(e),this):this._arrow};e.prototype.arrowStyle=function t(e){return arguments.length?(this._arrowStyle=Object.assign(this._arrowStyle,e),this):this._arrowStyle};e.prototype.background=function t(e){return arguments.length?(this._background=typeof e==="function"?e:m.constant(e),this):this._background};e.prototype.body=function t(e){return arguments.length?(this._body=typeof e==="function"?e:m.constant(e),this):this._body};e.prototype.bodyStyle=function t(e){return arguments.length?(this._bodyStyle=Object.assign(this._bodyStyle,e),this):this._bodyStyle};e.prototype.border=function t(e){return arguments.length?(this._border=typeof e==="function"?e:m.constant(e),this):this._border};e.prototype.borderRadius=function t(e){return arguments.length?(this._borderRadius=typeof e==="function"?e:m.constant(e),this):this._borderRadius};e.prototype.className=function t(e){return arguments.length?(this._className=e,this):this._className};e.prototype.data=function t(e){return arguments.length?(this._data=e,this):this._data};e.prototype.footer=function t(e){return arguments.length?(this._footer=typeof e==="function"?e:m.constant(e),this):this._footer};e.prototype.footerStyle=function t(e){return arguments.length?(this._footerStyle=Object.assign(this._footerStyle,e),this):this._footerStyle};e.prototype.height=function t(e){return arguments.length?(this._height=typeof e==="function"?e:m.constant(e),this):this._height};e.prototype.id=function t(e){return arguments.length?(this._id=typeof e==="function"?e:m.constant(e),this):this._id};e.prototype.offset=function t(e){return arguments.length?(this._offset=typeof e==="function"?e:m.constant(e),this):this._offset};e.prototype.padding=function t(e){return arguments.length?(this._padding=typeof e==="function"?e:m.constant(e),this):this._padding};e.prototype.pointerEvents=function t(e){return arguments.length?(this._pointerEvents=typeof e==="function"?e:m.constant(e),this):this._pointerEvents};e.prototype.position=function t(e){return arguments.length?(this._position=typeof e==="string"?m.constant(v.select(e).node()||[0,0]):typeof e==="function"?e:m.constant(e),this):this._position};e.prototype.tableStyle=function t(e){return arguments.length?(this._tableStyle=Object.assign(this._tableStyle,e),this):this._tableStyle};e.prototype.tbody=function t(e){return arguments.length?(this._tbody=e,this):this._tbody};e.prototype.tbodyStyle=function t(e){return arguments.length?(this._tbodyStyle=Object.assign(this._tbodyStyle,e),this):this._tbodyStyle};e.prototype.thead=function t(e){return arguments.length?(this._thead=e,this):this._thead};e.prototype.theadStyle=function t(e){return arguments.length?(this._theadStyle=Object.assign(this._theadStyle,e),this):this._theadStyle};e.prototype.title=function t(e){return arguments.length?(this._title=typeof e==="function"?e:m.constant(e),this):this._title};e.prototype.titleStyle=function t(e){return arguments.length?(this._titleStyle=Object.assign(this._titleStyle,e),this):this._titleStyle};e.prototype.trStyle=function t(e){return arguments.length?(this._trStyle=Object.assign(this._trStyle,e),this):this._trStyle};e.prototype.width=function t(e){return arguments.length?(this._width=typeof e==="function"?e:m.constant(e),this):this._width};return e}(m.BaseClass);t.Tooltip=e;Object.defineProperty(t,"__esModule",{value:true})});