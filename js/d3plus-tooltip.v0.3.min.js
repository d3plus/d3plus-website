/*
  d3plus-tooltip v0.3.5
  A javascript-only tooltip.
  Copyright (c) 2019 D3plus - https://d3plus.org
  @license MIT
*/
if(typeof Object.assign!=="function"){Object.defineProperty(Object,"assign",{value:function t(e){"use strict";if(e===null){throw new TypeError("Cannot convert undefined or null to object")}var o=Object(e);for(var i=1;i<arguments.length;i++){var n=arguments[i];if(n!==null){for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){o[r]=n[r]}}}}return o},writable:true,configurable:true})}if(!Array.prototype.includes){Object.defineProperty(Array.prototype,"includes",{value:function t(e,o){var i=Object(this);var n=i.length>>>0;if(n===0)return false;var r=o|0;var s=Math.max(r>=0?r:n-Math.abs(r),0);function a(t,e){return t===e||typeof t==="number"&&typeof e==="number"&&isNaN(t)&&isNaN(e)}while(s<n){if(a(i[s],e)){return true}s++}return false}})}(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports,require("d3-selection"),require("d3-transition"),require("d3plus-common"),require("popper.js")):typeof define==="function"&&define.amd?define("d3plus-tooltip",["exports","d3-selection","d3-transition","d3plus-common","popper.js"],e):e(t.d3plus={},t.d3Selection,t.d3Transition,t.d3plusCommon,t.Popper)})(this,function(t,m,S,w,x){"use strict";x=x&&x.hasOwnProperty("default")?x["default"]:x;var e=function(t){function e(){t.call(this);this._arrow=w.accessor("arrow","");this._arrowStyle={content:"",background:"inherit",border:"inherit","border-width":"0 1px 1px 0",height:"10px",position:"absolute",transform:"rotate(45deg)",width:"10px","z-index":"-1"};this._background=w.constant("rgba(255, 255, 255, 1)");this._body=w.accessor("body","");this._bodyStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"12px","font-weight":"400","z-index":"1"};this._border=w.constant("1px solid rgba(0, 0, 0, 0.1)");this._borderRadius=w.constant("2px");this._className="d3plus-tooltip";this._data=[];this._duration=w.constant(200);this._footer=w.accessor("footer","");this._footerStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"12px","font-weight":"400","z-index":"1"};this._height=w.constant("auto");this._id=function(t,e){return t.id||""+e};this._offset=w.constant(5);this._padding=w.constant("5px");this._pointerEvents=w.constant("auto");this._popperClasses={};this._position=function(t){return[t.x,t.y]};this._prefix=w.prefix();this._tableStyle={"border-collapse":"collapse","border-spacing":"0",width:"100%"};this._tbody=[];this._tbodyStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"12px","text-align":"center"};this._thead=[];this._theadStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"12px","font-weight":"600","text-align":"center"};this._title=w.accessor("title","");this._titleStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"14px","font-weight":"600"};this._trStyle={"border-top":"1px solid rgba(0, 0, 0, 0.1)"};this._width=w.constant("auto")}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.render=function t(e){var h=this;var p=this;var o=m.select("body").selectAll("."+this._className).data(this._data,this._id);var i=o.enter().append("div").attr("class",this._className);var n=o.merge(i);function r(o){i.append("div").attr("class","d3plus-tooltip-"+o).attr("id",function(t,e){return"d3plus-tooltip-"+o+"-"+(t?p._id(t,e):"")});var t=n.select(".d3plus-tooltip-"+o).html(p["_"+o]);w.stylize(t,p["_"+o+"Style"])}function s(t){if(typeof t==="function"){var e=m.select(this.parentNode.parentNode).datum();return t(e,p._data.indexOf(e))}else{return t}}function a(t){t.style("background",p._background).style(p._prefix+"border-radius",p._borderRadius).style("pointer-events",p._pointerEvents).style("padding",p._padding).style("width",p._width).style("height",p._height).style("border",function(t,e){var o=m.select(this).style("border");return o!=="0px none rgb(0, 0, 0)"?o:p._border(t,e)})}r("title");r("body");var l=i.append("table").attr("class","d3plus-tooltip-table");var d=n.select(".d3plus-tooltip-table");w.stylize(d,this._tableStyle);l.append("thead").attr("class","d3plus-tooltip-thead");var c=n.select(".d3plus-tooltip-thead");w.stylize(c,this._theadStyle);var u=c.selectAll("th").data(this._thead);u.enter().append("th").merge(u).html(s);u.exit().remove();l.append("tbody").attr("class","d3plus-tooltip-tbody");var f=n.select(".d3plus-tooltip-tbody");w.stylize(f,this._tbodyStyle);var y=f.selectAll("tr").data(this._tbody);var _=y.enter().append("tr");y.exit().remove();var b=y.merge(_);w.stylize(b,this._trStyle);var g=b.selectAll("td").data(function(t){return t});g.enter().append("td").merge(g).html(s);r("footer");r("arrow");i.attr("id",function(t,e){return"d3plus-tooltip-"+(t?h._id(t,e):"")}).call(a).each(function(t,e){var o=p._id(t,e);var i=document.getElementById("d3plus-tooltip-"+o);var n=document.getElementById("d3plus-tooltip-arrow-"+o);var r=n.offsetHeight;var s=n.getBoundingClientRect().height/2;n.style.bottom="-"+r/2+"px";var a=p._position(t,e);var l=Array.isArray(a)?{clientWidth:0,clientHeight:0,getBoundingClientRect:function(){return{top:a[1],right:a[0],bottom:a[1],left:a[0],width:0,height:0}}}:a;h._popperClasses[o]=new x(l,i,{placement:"top",placements:["top","bottom","left","right"],modifiers:{arrow:{element:n},offset:{offset:"0,"+(p._offset(t,e)+s)},preventOverflow:{boundariesElement:"scrollParent"},flip:{behavior:"flip",boundariesElement:"viewport"}},onUpdate:function t(e){var o=e.arrowElement;var i=e.flipped;if(i){o.style.transform="rotate(225deg)";o.style.top="-"+r/2+"px"}else{o.style.transform="rotate(45deg)";o.style.bottom="-"+r/2+"px"}},removeOnDestroy:true})});var v=S.transition().duration(this._duration);n.each(function(t,e){var o=p._id(t,e);var i=p._position(t,e);var n=h._popperClasses[o];if(n){var r=Array.isArray(i)?{clientWidth:0,clientHeight:0,getBoundingClientRect:function(){return{top:i[1],right:i[0],bottom:i[1],left:i[0],width:0,height:0}}}:i;n.reference=r;n.scheduleUpdate()}}).transition(v).style("opacity",1).call(a);o.exit().transition(v).style("opacity",0).on("end",function(t,e){var o=p._id(t,e);var i=h._popperClasses[o];if(i){i.destroy();delete h._popperClasses[o]}}).remove();if(e){setTimeout(e,this._duration+100)}return this};e.prototype.arrow=function t(e){return arguments.length?(this._arrow=typeof e==="function"?e:w.constant(e),this):this._arrow};e.prototype.arrowStyle=function t(e){return arguments.length?(this._arrowStyle=Object.assign(this._arrowStyle,e),this):this._arrowStyle};e.prototype.background=function t(e){return arguments.length?(this._background=typeof e==="function"?e:w.constant(e),this):this._background};e.prototype.body=function t(e){return arguments.length?(this._body=typeof e==="function"?e:w.constant(e),this):this._body};e.prototype.bodyStyle=function t(e){return arguments.length?(this._bodyStyle=Object.assign(this._bodyStyle,e),this):this._bodyStyle};e.prototype.border=function t(e){return arguments.length?(this._border=typeof e==="function"?e:w.constant(e),this):this._border};e.prototype.borderRadius=function t(e){return arguments.length?(this._borderRadius=typeof e==="function"?e:w.constant(e),this):this._borderRadius};e.prototype.className=function t(e){return arguments.length?(this._className=e,this):this._className};e.prototype.data=function t(e){return arguments.length?(this._data=e,this):this._data};e.prototype.duration=function t(e){return arguments.length?(this._duration=typeof e==="function"?e:w.constant(e),this):this._duration};e.prototype.footer=function t(e){return arguments.length?(this._footer=typeof e==="function"?e:w.constant(e),this):this._footer};e.prototype.footerStyle=function t(e){return arguments.length?(this._footerStyle=Object.assign(this._footerStyle,e),this):this._footerStyle};e.prototype.height=function t(e){return arguments.length?(this._height=typeof e==="function"?e:w.constant(e),this):this._height};e.prototype.id=function t(e){return arguments.length?(this._id=typeof e==="function"?e:w.constant(e),this):this._id};e.prototype.offset=function t(e){return arguments.length?(this._offset=typeof e==="function"?e:w.constant(e),this):this._offset};e.prototype.padding=function t(e){return arguments.length?(this._padding=typeof e==="function"?e:w.constant(e),this):this._padding};e.prototype.pointerEvents=function t(e){return arguments.length?(this._pointerEvents=typeof e==="function"?e:w.constant(e),this):this._pointerEvents};e.prototype.position=function t(e){return arguments.length?(this._position=typeof e==="string"?w.constant(m.select(e).node()||[0,0]):typeof e==="function"?e:w.constant(e),this):this._position};e.prototype.tableStyle=function t(e){return arguments.length?(this._tableStyle=Object.assign(this._tableStyle,e),this):this._tableStyle};e.prototype.tbody=function t(e){return arguments.length?(this._tbody=e,this):this._tbody};e.prototype.tbodyStyle=function t(e){return arguments.length?(this._tbodyStyle=Object.assign(this._tbodyStyle,e),this):this._tbodyStyle};e.prototype.thead=function t(e){return arguments.length?(this._thead=e,this):this._thead};e.prototype.theadStyle=function t(e){return arguments.length?(this._theadStyle=Object.assign(this._theadStyle,e),this):this._theadStyle};e.prototype.title=function t(e){return arguments.length?(this._title=typeof e==="function"?e:w.constant(e),this):this._title};e.prototype.titleStyle=function t(e){return arguments.length?(this._titleStyle=Object.assign(this._titleStyle,e),this):this._titleStyle};e.prototype.trStyle=function t(e){return arguments.length?(this._trStyle=Object.assign(this._trStyle,e),this):this._trStyle};e.prototype.width=function t(e){return arguments.length?(this._width=typeof e==="function"?e:w.constant(e),this):this._width};return e}(w.BaseClass);t.Tooltip=e;Object.defineProperty(t,"__esModule",{value:true})});