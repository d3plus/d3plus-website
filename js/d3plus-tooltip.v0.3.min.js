/*
  d3plus-tooltip v0.3.0
  A javascript-only tooltip.
  Copyright (c) 2018 D3plus - https://d3plus.org
  @license MIT
*/
if(typeof Object.assign!=="function"){Object.defineProperty(Object,"assign",{value:function t(e){"use strict";if(e===null){throw new TypeError("Cannot convert undefined or null to object")}var o=Object(e);for(var i=1;i<arguments.length;i++){var n=arguments[i];if(n!==null){for(var r in n){if(Object.prototype.hasOwnProperty.call(n,r)){o[r]=n[r]}}}}return o},writable:true,configurable:true})}if(!Array.prototype.includes){Object.defineProperty(Array.prototype,"includes",{value:function t(e,o){var i=Object(this);var n=i.length>>>0;if(n===0)return false;var r=o|0;var s=Math.max(r>=0?r:n-Math.abs(r),0);function a(t,e){return t===e||typeof t==="number"&&typeof e==="number"&&isNaN(t)&&isNaN(e)}while(s<n){if(a(i[s],e)){return true}s++}return false}})}(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports,require("d3-selection"),require("d3-transition"),require("d3plus-common"),require("popper.js")):typeof define==="function"&&define.amd?define("d3plus-tooltip",["exports","d3-selection","d3-transition","d3plus-common","popper.js"],e):e(t.d3plus={},t.d3Selection,t.d3Transition,t.d3plusCommon,t.Popper)})(this,function(t,A,z,R,E){"use strict";E=E&&E.hasOwnProperty("default")?E["default"]:E;var e=function(t){function e(){t.call(this);this._arrow=R.accessor("arrow","");this._arrowStyle={content:"",background:"inherit",border:"inherit","border-width":"0 1px 1px 0",height:"10px",position:"absolute",transform:"rotate(45deg)",width:"10px","z-index":"-1"};this._background=R.constant("rgba(255, 255, 255, 1)");this._body=R.accessor("body","");this._bodyStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"12px","font-weight":"400","z-index":"1"};this._border=R.constant("1px solid rgba(0, 0, 0, 0.1)");this._borderRadius=R.constant("2px");this._className="d3plus-tooltip";this._data=[];this._duration=R.constant(200);this._footer=R.accessor("footer","");this._footerStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"12px","font-weight":"400","z-index":"1"};this._height=R.constant("auto");this._id=function(t,e){return t.id||""+e};this._offset=R.constant(5);this._padding=R.constant("5px");this._pointerEvents=R.constant("auto");this._position=function(t){return[t.x,t.y]};this._prefix=R.prefix();this._tableStyle={"border-spacing":"0",width:"100%"};this._tbody=[];this._tbodyStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"12px","text-align":"center"};this._thead=[];this._theadStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"12px","font-weight":"600","text-align":"center"};this._title=R.accessor("title","");this._titleStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"14px","font-weight":"600"};this._width=R.constant("auto")}if(t)e.__proto__=t;e.prototype=Object.create(t&&t.prototype);e.prototype.constructor=e;e.prototype.render=function t(e){var o=this;var i=this;var n=A.select("body").selectAll("."+this._className).data(this._data,this._id);var r=n.enter().append("div").attr("class",this._className);var s=n.merge(r);function a(o){r.append("div").attr("class","d3plus-tooltip-"+o).attr("id",function(t,e){return"d3plus-tooltip-"+o+"-"+(t?i._id(t,e):"")});var t=s.select(".d3plus-tooltip-"+o).html(i["_"+o]);R.stylize(t,i["_"+o+"Style"])}function l(t){if(typeof t==="function"){var e=A.select(this.parentNode.parentNode).datum();return t(e,i._data.indexOf(e))}else{return t}}function h(t){t.style("background",i._background).style(i._prefix+"border-radius",i._borderRadius).style("pointer-events",i._pointerEvents).style("padding",i._padding).style("width",i._width).style("height",i._height).style("border",function(t,e){var o=A.select(this).style("border");return o!=="0px none rgb(0, 0, 0)"?o:i._border(t,e)})}a("title");a("body");var p=r.append("table").attr("class","d3plus-tooltip-table");var d=s.select(".d3plus-tooltip-table");R.stylize(d,this._tableStyle);p.append("thead").attr("class","d3plus-tooltip-thead");var u=s.select(".d3plus-tooltip-thead");R.stylize(u,this._theadStyle);var c=u.selectAll("th").data(this._thead);c.enter().append("th").merge(c).html(l);c.exit().remove();p.append("tbody").attr("class","d3plus-tooltip-tbody");var f=s.select(".d3plus-tooltip-tbody");R.stylize(f,this._tbodyStyle);var y=f.selectAll("tr").data(this._tbody);var _=y.enter().append("tr");y.exit().remove();var b=y.merge(_);var g=b.selectAll("td").data(function(t){return t});g.enter().append("td").merge(g).html(l);a("footer");a("arrow");r.call(h);var v=z.transition().duration(this._duration);s.attr("id",function(t,e){return"d3plus-tooltip-"+(t?o._id(t,e):"")}).transition(v).style("opacity",1).call(h);n.exit().transition(v).style("opacity",0).remove();for(var m=0;m<this._data.length;m++){var S=i._data[m];if(S){var w=document.getElementById("d3plus-tooltip-"+i._id(S,m));var x=document.getElementById("d3plus-tooltip-arrow-"+i._id(S,m));var N=x.offsetHeight;var j=x.getBoundingClientRect().height/2;x.style.bottom="-"+N/2+"px";var O=i._position(S,m);var H=Array.isArray(O)?{clientWidth:0,clientHeight:0,getBoundingClientRect:function(){return{top:O[1],right:O[0],bottom:O[1],left:O[0],width:0,height:0}}}:i._position(S,m);new E(H,w,{placement:"top",placements:["top","bottom","left","right"],modifiers:{arrow:{element:x},offset:{offset:"0,"+(i._offset(S,m)+j)},preventOverflow:{boundariesElement:"scrollParent"},flip:{behavior:"flip",boundariesElement:"viewport"}},onCreate:function t(e){var o=e.instance;document.onmousemove=function(){o.scheduleUpdate()}},onUpdate:function t(e){var o=e.arrowElement;var i=e.flipped;if(i){o.style.transform="rotate(225deg)";o.style.top="-"+N/2+"px"}else{o.style.transform="rotate(45deg)";o.style.bottom="-"+N/2+"px"}}})}}if(e){setTimeout(e,this._duration+100)}return this};e.prototype.arrow=function t(e){return arguments.length?(this._arrow=typeof e==="function"?e:R.constant(e),this):this._arrow};e.prototype.arrowStyle=function t(e){return arguments.length?(this._arrowStyle=Object.assign(this._arrowStyle,e),this):this._arrowStyle};e.prototype.background=function t(e){return arguments.length?(this._background=typeof e==="function"?e:R.constant(e),this):this._background};e.prototype.body=function t(e){return arguments.length?(this._body=typeof e==="function"?e:R.constant(e),this):this._body};e.prototype.bodyStyle=function t(e){return arguments.length?(this._bodyStyle=Object.assign(this._bodyStyle,e),this):this._bodyStyle};e.prototype.border=function t(e){return arguments.length?(this._border=typeof e==="function"?e:R.constant(e),this):this._border};e.prototype.borderRadius=function t(e){return arguments.length?(this._borderRadius=typeof e==="function"?e:R.constant(e),this):this._borderRadius};e.prototype.className=function t(e){return arguments.length?(this._className=e,this):this._className};e.prototype.data=function t(e){return arguments.length?(this._data=e,this):this._data};e.prototype.duration=function t(e){return arguments.length?(this._duration=typeof e==="function"?e:R.constant(e),this):this._duration};e.prototype.footer=function t(e){return arguments.length?(this._footer=typeof e==="function"?e:R.constant(e),this):this._footer};e.prototype.footerStyle=function t(e){return arguments.length?(this._footerStyle=Object.assign(this._footerStyle,e),this):this._footerStyle};e.prototype.height=function t(e){return arguments.length?(this._height=typeof e==="function"?e:R.constant(e),this):this._height};e.prototype.id=function t(e){return arguments.length?(this._id=typeof e==="function"?e:R.constant(e),this):this._id};e.prototype.offset=function t(e){return arguments.length?(this._offset=typeof e==="function"?e:R.constant(e),this):this._offset};e.prototype.padding=function t(e){return arguments.length?(this._padding=typeof e==="function"?e:R.constant(e),this):this._padding};e.prototype.pointerEvents=function t(e){return arguments.length?(this._pointerEvents=typeof e==="function"?e:R.constant(e),this):this._pointerEvents};e.prototype.position=function t(e){return arguments.length?(this._position=typeof e==="function"?e:R.constant(e),this):this._position};e.prototype.tableStyle=function t(e){return arguments.length?(this._tableStyle=Object.assign(this._tableStyle,e),this):this._tableStyle};e.prototype.tbody=function t(e){return arguments.length?(this._tbody=e,this):this._tbody};e.prototype.tbodyStyle=function t(e){return arguments.length?(this._tbodyStyle=Object.assign(this._tbodyStyle,e),this):this._tbodyStyle};e.prototype.thead=function t(e){return arguments.length?(this._thead=e,this):this._thead};e.prototype.theadStyle=function t(e){return arguments.length?(this._theadStyle=Object.assign(this._theadStyle,e),this):this._theadStyle};e.prototype.title=function t(e){return arguments.length?(this._title=typeof e==="function"?e:R.constant(e),this):this._title};e.prototype.titleStyle=function t(e){return arguments.length?(this._titleStyle=Object.assign(this._titleStyle,e),this):this._titleStyle};e.prototype.width=function t(e){return arguments.length?(this._width=typeof e==="function"?e:R.constant(e),this):this._width};return e}(R.BaseClass);t.Tooltip=e;Object.defineProperty(t,"__esModule",{value:true})});