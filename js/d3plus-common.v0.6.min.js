/*
  d3plus-common v0.6.1
  Common functions and methods used across D3plus modules.
  Copyright (c) 2016 D3plus - https://d3plus.org
  @license MIT
*/
(function(e,n){typeof exports==="object"&&typeof module!=="undefined"?n(exports,require("d3-selection"),require("d3-transition"),require("i18next"),require("d3-array"),require("d3-collection")):typeof define==="function"&&define.amd?define("d3plus-common",["exports","d3-selection","d3-transition","i18next","d3-array","d3-collection"],n):n(e.d3plus=e.d3plus||{},e.d3Selection,e.d3Transition,e.i18next,e.d3Array,e.d3Collection)})(this,function(e,n,t,r,i,o){"use strict";r="default"in r?r["default"]:r;var a=function(e,n){if(n===void 0)return function(n){return n[e]};return function(t){return t[e]===void 0?n:t[e]}};var s=function(e,n){if(n===void 0)n={};for(var t in n)if({}.hasOwnProperty.call(n,t))e.attr(t,n[t])};function f(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}var u=function e(){this._on={};this._uuid=""+f()+f()+"-"+f()+"-"+f()+"-"+f()+"-"+f()+f()+f()};u.prototype.config=function e(n){var t=this;if(arguments.length){for(var r in n)if({}.hasOwnProperty.call(n,r)&&r in t)t[r](n[r]);return this}else{var e={};for(var i in this.prototype.constructor)if(i!=="config"&&{}.hasOwnProperty.call(t,i))e[i]=t[i]();return e}};u.prototype.on=function e(n,t){return arguments.length===2?(this._on[n]=t,this):arguments.length?typeof n==="string"?this._on[n]:(this._on=Object.assign({},this._on,n),this):this._on};var c=function(e,n){return n.reduce(function(n,t){return Math.abs(t-e)<Math.abs(n-e)?t:n})};var l=function(e){return function n(){return e}};var d=function(e,r){r=Object.assign({},{condition:true,enter:{},exit:{},parent:n.select("body"),transition:t.transition().duration(0),update:{}},r);var i=/\.([^#]+)/g.exec(e),o=/#([^\.]+)/g.exec(e),a=/^([^.^#]+)/g.exec(e)[1];var f=r.parent.selectAll(e).data(r.condition?[null]:[]);var u=f.enter().append(a).call(s,r.enter);if(o)u.attr("id",o[1]);if(i)u.attr("class",i[1]);f.exit().transition(r.transition).call(s,r.exit).remove();var c=u.merge(f);c.transition(r.transition).call(s,r.update);return c};var v={lowercase:["a","an","and","as","at","but","by","for","from","if","in","into","near","nor","of","on","onto","or","per","that","the","to","with","via","vs","vs."],uppercase:["CEO","CFO","CNC","COO","CPU","GDP","HVAC","ID","IT","R&D","TV","UI"]};var p={array:v};var y={lowercase:["una","y","en","pero","en","de","o","el","la","los","las","para","a","con"],uppercase:["CEO","CFO","CNC","COO","CPU","PIB","HVAC","ID","TI","I&D","TV","UI"]};var m={array:y};var h=r.init({fallbackLng:"en-US",initImmediate:false,resources:{"en-US":{translation:p},"es-ES":{translation:m}}});var g=function(e,n){if(n===void 0)n={};var t=new Set(i.merge(e.map(function(e){return o.keys(e)}))),r={};t.forEach(function(t){var o=e.map(function(e){return e[t]});var a;if(n[t])a=n[t](o);else{var s=o.map(function(e){return e?e.constructor:e}).filter(function(e){return e!==void 0});if(!s.length)a=undefined;else if(s.indexOf(Array)>=0){a=i.merge(o.map(function(e){return e.constructor===Array?e:[e]}));a=Array.from(new Set(a));if(a.length===1)a=a[0]}else if(s.indexOf(String)>=0){a=Array.from(new Set(o));if(a.length===1)a=a[0]}else if(s.indexOf(Number)>=0)a=i.sum(o);else{a=Array.from(new Set(o.filter(function(e){return e!==void 0})));if(a.length===1)a=a[0]}}r[t]=a});return r};var b=undefined;var O=function(){if(b!==void 0)return b;if("-webkit-transform"in document.body.style)b="-webkit-";else if("-moz-transform"in document.body.style)b="-moz-";else if("-ms-transform"in document.body.style)b="-ms-";else if("-o-transform"in document.body.style)b="-o-";else b="";return b};var x=function(e,n){if(n===void 0)n={};for(var t in n)if({}.hasOwnProperty.call(n,t))e.style(t,n[t])};e.accessor=a;e.attrize=s;e.BaseClass=u;e.closest=c;e.constant=l;e.elem=d;e.locale=h;e.merge=g;e.prefix=O;e.stylize=x;Object.defineProperty(e,"__esModule",{value:true})});