/*
  d3plus-common v0.6.12
  Common functions and methods used across D3plus modules.
  Copyright (c) 2016 D3plus - https://d3plus.org
  @license MIT
*/
(function(r,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports,require("d3-selection"),require("d3-transition"),require("i18next"),require("d3-array"),require("d3-collection")):typeof define==="function"&&define.amd?define("d3plus-common",["exports","d3-selection","d3-transition","i18next","d3-array","d3-collection"],e):e(r.d3plus=r.d3plus||{},r.d3Selection,r.d3Transition,r.i18next,r.d3Array,r.d3Collection)})(this,function(r,e,t,n,i,a){"use strict";n="default"in n?n["default"]:n;var o=function(r,e){if(e===void 0)return function(e){return e[r]};return function(t){return t[r]===void 0?e:t[r]}};var s=function(r){return r&&typeof r==="object"&&!Array.isArray(r)&&r!==void 0?true:false};function f(){var r=[],e=arguments.length;while(e--)r[e]=arguments[e];var t=r[0];var n=function(e){var n=r[e];Object.keys(n).forEach(function(r){var e=n[r];if(s(e)){if(t.hasOwnProperty(r)&&s(t[r]))t[r]=f(t[r],e);else t[r]=e}else if(Array.isArray(e)){if(t.hasOwnProperty(r)&&Array.isArray(t[r])){var i=t[r];e.forEach(function(r,e){if(e<i.length){var t=i[e];if(Object.is(t,r))return;if(s(t)&&s(r)||Array.isArray(t)&&Array.isArray(r)){i[e]=f(t,r)}else i[e]=r}else i.push(r)})}else t[r]=e}else t[r]=e})};for(var i=1;i<r.length;i++)n(i);return t}var u=function(r,e){if(e===void 0)e={};for(var t in e)if({}.hasOwnProperty.call(e,t))r.attr(t,e[t])};function l(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}var c=function r(){this._on={};this._uuid=""+l()+l()+"-"+l()+"-"+l()+"-"+l()+"-"+l()+l()+l()};c.prototype.config=function r(e){var t=this;if(arguments.length){for(var n in e)if({}.hasOwnProperty.call(e,n)&&n in t)t[n](e[n]);return this}else{var r={};for(var i in this.__proto__)if(i.indexOf("_")!==0&&!["config","constructor","render"].includes(i))r[i]=t[i]();return r}};c.prototype.on=function r(e,t){return arguments.length===2?(this._on[e]=t,this):arguments.length?typeof e==="string"?this._on[e]:(this._on=Object.assign({},this._on,e),this):this._on};var d=function(r,e){return e.reduce(function(e,t){return Math.abs(t-r)<Math.abs(e-r)?t:e})};var v=function(r){return function e(){return r}};var y=function(r,n){n=Object.assign({},{condition:true,enter:{},exit:{},parent:e.select("body"),transition:t.transition().duration(0),update:{}},n);var i=/\.([^#]+)/g.exec(r),a=/#([^\.]+)/g.exec(r),o=/^([^.^#]+)/g.exec(r)[1];var s=n.parent.selectAll(r).data(n.condition?[null]:[]);var f=s.enter().append(o).call(u,n.enter);if(a)f.attr("id",a[1]);if(i)f.attr("class",i[1]);s.exit().transition(n.transition).call(u,n.exit).remove();var l=f.merge(s);l.transition(n.transition).call(u,n.update);return l};var p="Back";var h="Total";var m={lowercase:["a","an","and","as","at","but","by","for","from","if","in","into","near","nor","of","on","onto","or","per","that","the","to","with","via","vs","vs."],uppercase:["CEO","CFO","CNC","COO","CPU","GDP","HVAC","ID","IT","R&D","TV","UI"]};var g={Back:p,Total:h,array:m};var O="AtrÃ¡s";var b="Total";var A={lowercase:["una","y","en","pero","en","de","o","el","la","los","las","para","a","con"],uppercase:["CEO","CFO","CNC","COO","CPU","PIB","HVAC","ID","TI","I&D","TV","UI"]};var x={Back:O,Total:b,array:A};var C=n.init({fallbackLng:"en-US",initImmediate:false,resources:{"en-US":{translation:g},"es-ES":{translation:x}}});function w(r,e){if(e===void 0)e={};var t=new Set(i.merge(r.map(function(r){return a.keys(r)}))),n={};t.forEach(function(t){var a=r.map(function(r){return r[t]});var o;if(e[t])o=e[t](a);else{var s=a.map(function(r){return r||r===false?r.constructor:r}).filter(function(r){return r!==void 0});if(!s.length)o=undefined;else if(s.indexOf(Array)>=0){o=i.merge(a.map(function(r){return r instanceof Array?r:[r]}));o=Array.from(new Set(o));if(o.length===1)o=o[0]}else if(s.indexOf(String)>=0){o=Array.from(new Set(a));if(o.length===1)o=o[0]}else if(s.indexOf(Number)>=0)o=i.sum(a);else if(s.indexOf(Object)>=0)o=w(a.filter(function(r){return r}));else{o=Array.from(new Set(a.filter(function(r){return r!==void 0})));if(o.length===1)o=o[0]}}n[t]=o});return n}var _=function(){if("-webkit-transform"in document.body.style)return"-webkit-";else if("-moz-transform"in document.body.style)return"-moz-";else if("-ms-transform"in document.body.style)return"-ms-";else if("-o-transform"in document.body.style)return"-o-";else return""};var P=function(r,e){if(e===void 0)e={};for(var t in e)if({}.hasOwnProperty.call(e,t))r.style(t,e[t])};r.accessor=o;r.assign=f;r.attrize=u;r.BaseClass=c;r.closest=d;r.constant=v;r.elem=y;r.isObject=s;r.locale=C;r.merge=w;r.prefix=_;r.stylize=P;Object.defineProperty(r,"__esModule",{value:true})});