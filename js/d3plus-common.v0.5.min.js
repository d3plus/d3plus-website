/*
  d3plus-common v0.5.19
  Common functions and methods used across D3plus modules.
  Copyright (c) 2016 D3plus - https://d3plus.org
  @license MIT
*/
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-selection"),require("d3-transition"),require("i18next"),require("d3-array"),require("d3-collection")):"function"==typeof define&&define.amd?define("d3plus-common",["exports","d3-selection","d3-transition","i18next","d3-array","d3-collection"],t):t(n.d3plus=n.d3plus||{},n.d3Selection,n.d3Transition,n.i18next,n.d3Array,n.d3Collection)}(this,function(n,t,e,r,o,i){"use strict";function a(n,t){return void 0===t?function(t){return t[n]}:function(e){return void 0===e[n]?t:e[n]}}function s(n,t){void 0===t&&(t={});for(var e in t)({}).hasOwnProperty.call(t,e)&&n.attr(e,t[e])}function u(n,t){return t.reduce(function(t,e){return Math.abs(e-n)<Math.abs(t-n)?e:t})}function c(n){return function(){return n}}function l(n,r){r=Object.assign({},{condition:!0,enter:{},exit:{},parent:t.select("body"),transition:e.transition().duration(0),update:{}},r);var o=/\.([^#]+)/g.exec(n),i=/#([^\.]+)/g.exec(n),a=/^([^.^#]+)/g.exec(n)[1],u=r.parent.selectAll(n).data(r.condition?[null]:[]),c=u.enter().append(a).call(s,r.enter);i&&c.attr("id",i[1]),o&&c.attr("class",o[1]),u.exit().transition(r.transition).call(s,r.exit).remove();var l=c.merge(u);return l.transition(r.transition).call(s,r.update),l}function f(n,t){void 0===t&&(t={});var e=new Set(o.merge(n.map(function(n){return i.keys(n)}))),r={};return e.forEach(function(e){var i,a=n.map(function(n){return n[e]});if(t[e])i=t[e](a);else{var s=a.map(function(n){return n?n.constructor:n}).filter(function(n){return void 0!==n});s.length?s.indexOf(Array)>=0?(i=o.merge(a.map(function(n){return n.constructor===Array?n:[n]})),i=Array.from(new Set(i)),1===i.length&&(i=i[0])):s.indexOf(String)>=0?(i=Array.from(new Set(a)),1===i.length&&(i=i[0])):s.indexOf(Number)>=0?i=o.sum(a):(i=Array.from(new Set(a.filter(function(n){return void 0!==n}))),1===i.length&&(i=i[0])):i=void 0}r[e]=i}),r}function d(){return void 0!==g?g:g="-webkit-transform"in document.body.style?"-webkit-":"-moz-transform"in document.body.style?"-moz-":"-ms-transform"in document.body.style?"-ms-":"-o-transform"in document.body.style?"-o-":""}function p(n,t){void 0===t&&(t={});for(var e in t)({}).hasOwnProperty.call(t,e)&&n.style(e,t[e])}r="default"in r?r.default:r;var m=function(){function n(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}this._uuid=""+n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()};m.prototype.config=function n(t){var e=this;if(arguments.length){for(var r in t)({}).hasOwnProperty.call(t,r)&&r in e&&e[r](t[r]);return this}var n={};for(var o in this.prototype.constructor)"config"!==o&&{}.hasOwnProperty.call(e,o)&&(n[o]=e[o]());return n};var y={lowercase:["a","an","and","as","at","but","by","for","from","if","in","into","near","nor","of","on","onto","or","per","that","the","to","with","via","vs","vs."],uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","GDP","HVAC","ID","IT","R&D","TV","UI"]},v={array:y},O={lowercase:["una","y","en","pero","en","de","o","el","la","los","las","para","a","con"],uppercase:["CEO","CEOs","CFO","CFOs","CNC","COO","COOs","CPU","CPUs","PIB","HVAC","ID","TI","I&D","TV","UI"]},C={array:O},h=r.init({fallbackLng:"en-US",initImmediate:!1,resources:{"en-US":{translation:v},"es-ES":{translation:C}}}),g=void 0;n.accessor=a,n.attrize=s,n.BaseClass=m,n.closest=u,n.constant=c,n.elem=l,n.locale=h,n.merge=f,n.prefix=d,n.stylize=p,Object.defineProperty(n,"__esModule",{value:!0})});