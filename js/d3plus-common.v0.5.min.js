/*
  d3plus-common v0.5.25
  Common functions and methods used across D3plus modules.
  Copyright (c) 2016 D3plus - https://d3plus.org
  @license MIT
*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-selection"),require("d3-transition"),require("i18next"),require("d3-array"),require("d3-collection")):"function"==typeof define&&define.amd?define("d3plus-common",["exports","d3-selection","d3-transition","i18next","d3-array","d3-collection"],n):n(t.d3plus=t.d3plus||{},t.d3Selection,t.d3Transition,t.i18next,t.d3Array,t.d3Collection)}(this,function(t,n,e,r,o,i){"use strict";function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}r="default"in r?r.default:r;var s=function(t,n){return void 0===n?function(n){return n[t]}:function(e){return void 0===e[t]?n:e[t]}},u=function(t,n){void 0===n&&(n={});for(var e in n)({}).hasOwnProperty.call(n,e)&&t.attr(e,n[e])},c=function(){this._on={},this._uuid=""+a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};c.prototype.config=function t(n){var e=this;if(arguments.length){for(var r in n)({}).hasOwnProperty.call(n,r)&&r in e&&e[r](n[r]);return this}var t={};for(var o in this.prototype.constructor)"config"!==o&&{}.hasOwnProperty.call(e,o)&&(t[o]=e[o]());return t},c.prototype.on=function(t,n){return 2===arguments.length?(this._on[t]=n,this):arguments.length?"string"==typeof t?this._on[t]:(this._on=Object.assign({},this._on,t),this):this._on};var l=function(t,n){return n.reduce(function(n,e){return Math.abs(e-t)<Math.abs(n-t)?e:n})},f=function(t){return function(){return t}},d=function(t,r){r=Object.assign({},{condition:!0,enter:{},exit:{},parent:n.select("body"),transition:e.transition().duration(0),update:{}},r);var o=/\.([^#]+)/g.exec(t),i=/#([^\.]+)/g.exec(t),a=/^([^.^#]+)/g.exec(t)[1],s=r.parent.selectAll(t).data(r.condition?[null]:[]),c=s.enter().append(a).call(u,r.enter);i&&c.attr("id",i[1]),o&&c.attr("class",o[1]),s.exit().transition(r.transition).call(u,r.exit).remove();var l=c.merge(s);return l.transition(r.transition).call(u,r.update),l},p={lowercase:["a","an","and","as","at","but","by","for","from","if","in","into","near","nor","of","on","onto","or","per","that","the","to","with","via","vs","vs."],uppercase:["CEO","CFO","CNC","COO","CPU","GDP","HVAC","ID","IT","R&D","TV","UI"]},y={array:p},m={lowercase:["una","y","en","pero","en","de","o","el","la","los","las","para","a","con"],uppercase:["CEO","CFO","CNC","COO","CPU","PIB","HVAC","ID","TI","I&D","TV","UI"]},h={array:m},v=r.init({fallbackLng:"en-US",initImmediate:!1,resources:{"en-US":{translation:y},"es-ES":{translation:h}}}),g=function(t,n){void 0===n&&(n={});var e=new Set(o.merge(t.map(function(t){return i.keys(t)}))),r={};return e.forEach(function(e){var i,a=t.map(function(t){return t[e]});if(n[e])i=n[e](a);else{var s=a.map(function(t){return t?t.constructor:t}).filter(function(t){return void 0!==t});s.length?s.indexOf(Array)>=0?(i=o.merge(a.map(function(t){return t.constructor===Array?t:[t]})),i=Array.from(new Set(i)),1===i.length&&(i=i[0])):s.indexOf(String)>=0?(i=Array.from(new Set(a)),1===i.length&&(i=i[0])):s.indexOf(Number)>=0?i=o.sum(a):(i=Array.from(new Set(a.filter(function(t){return void 0!==t}))),1===i.length&&(i=i[0])):i=void 0}r[e]=i}),r},b=void 0,O=function(){return void 0!==b?b:b="-webkit-transform"in document.body.style?"-webkit-":"-moz-transform"in document.body.style?"-moz-":"-ms-transform"in document.body.style?"-ms-":"-o-transform"in document.body.style?"-o-":""},x=function(t,n){void 0===n&&(n={});for(var e in n)({}).hasOwnProperty.call(n,e)&&t.style(e,n[e])};t.accessor=s,t.attrize=u,t.BaseClass=c,t.closest=l,t.constant=f,t.elem=d,t.locale=v,t.merge=g,t.prefix=O,t.stylize=x,Object.defineProperty(t,"__esModule",{value:!0})});