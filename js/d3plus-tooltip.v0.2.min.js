/*
  d3plus-tooltip v0.2.2
  A javascript-only tooltip.
  Copyright (c) 2016 D3plus - https://d3plus.org
  @license MIT
*/
(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports,require("d3-selection"),require("d3-transition"),require("d3plus-common")):typeof define==="function"&&define.amd?define("d3plus-tooltip",["exports","d3-selection","d3-transition","d3plus-common"],e):e(t.d3plus=t.d3plus||{},t.d3Selection,t.d3Transition,t.d3plusCommon)})(this,function(t,e,n,o){"use strict";var i=function(){if("-webkit-transform"in document.body.style)return"-webkit-";else if("-moz-transform"in document.body.style)return"-moz-";else if("-ms-transform"in document.body.style)return"-ms-";else if("-o-transform"in document.body.style)return"-o-";else return""};var s=function(t){function s(){t.call(this);this._background=o.constant("rgba(255, 255, 255, 0.75)");this._body=o.accessor("body","");this._bodyStyle={"font-family":"Verdana","font-size":"10px","font-weight":"400"};this._border=o.constant("1px solid rgba(0, 0, 0, 0.1)");this._borderRadius=o.constant("2px");this._className="d3plus-tooltip";this._data=[];this._duration=o.constant(200);this._footer=o.accessor("footer","");this._footerStyle={"font-family":"Verdana","font-size":"10px","font-weight":"400"};this._height=o.constant("auto");this._id=function(t,e){return t.id||""+e};this._offset=o.constant(10);this._padding=o.constant("5px");this._pointerEvents=o.constant("auto");this._prefix=i();this._tableStyle={"border-spacing":"0",width:"100%"};this._tbody=[];this._tbodyStyle={"font-family":"Verdana","font-size":"10px","text-align":"center"};this._thead=[];this._theadStyle={"font-family":"Verdana","font-size":"10px","font-weight":"600","text-align":"center"};this._title=o.accessor("title","");this._titleStyle={"font-family":"Verdana","font-size":"12px","font-weight":"600","padding-bottom":"5px"};this._translate=function(t){return[t.x,t.y]};this._width=o.constant("auto")}if(t)s.__proto__=t;s.prototype=Object.create(t&&t.prototype);s.prototype.constructor=s;s.prototype.render=function t(i){var s=this;var r=this;var a=e.select("body").selectAll("."+this._className).data(this._data,this._id);var l=a.enter().append("div").attr("class",this._className).style("position","absolute").style(this._prefix+"transform","scale(0)").style(this._prefix+"transform-origin","50% 100%");var h=a.merge(l);function d(t){l.append("div").attr("class","d3plus-tooltip-"+t);var e=h.select(".d3plus-tooltip-"+t).html(r["_"+t]);o.stylize(e,r["_"+t+"Style"])}function p(t){if(typeof t==="function"){var n=e.select(this.parentNode.parentNode).datum();return t(n,r._data.indexOf(n))}else return t}function u(t){t.style("background",r._background).style(r._prefix+"border-radius",r._borderRadius).style("pointer-events",r._pointerEvents).style("padding",r._padding).style("width",r._width).style("height",r._height).style("border",function(t,n){var o=e.select(this).style("border");return o!=="0px none rgb(0, 0, 0)"?o:r._border(t,n)}).style("top",function(t,e){return r._translate(t,e)[1]-this.offsetHeight-r._offset(t,e)+"px"}).style("left",function(t,e){return r._translate(t,e)[0]-this.offsetWidth/2+"px"})}d("title");d("body");var f=l.append("table").attr("class","d3plus-tooltip-table");var c=h.select(".d3plus-tooltip-table");o.stylize(c,this._tableStyle);f.append("thead").attr("class","d3plus-tooltip-thead");var y=h.select(".d3plus-tooltip-thead");o.stylize(y,this._theadStyle);var _=y.selectAll("th").data(this._thead);_.enter().append("th").merge(_).html(p);_.exit().remove();f.append("tbody").attr("class","d3plus-tooltip-tbody");var b=h.select(".d3plus-tooltip-tbody");o.stylize(b,this._tbodyStyle);var g=b.selectAll("tr").data(this._tbody);var m=g.enter().append("tr");g.exit().remove();var S=g.merge(m);var v=S.selectAll("td").data(function(t){return t});v.enter().append("td").merge(v).html(p);d("footer");l.call(u);var x=n.transition().duration(this._duration);h.attr("id",function(t,e){return"d3plus-tooltip-"+s._id(t,e)}).transition(x).style(this._prefix+"transform","scale(1)").call(u);a.exit().transition(x).style(this._prefix+"transform","scale(0)").remove();if(i)setTimeout(i,this._duration+100);return this};s.prototype.background=function t(e){return arguments.length?(this._background=typeof e==="function"?e:o.constant(e),this):this._background};s.prototype.body=function t(e){return arguments.length?(this._body=typeof e==="function"?e:o.constant(e),this):this._body};s.prototype.bodyStyle=function t(e){return arguments.length?(this._bodyStyle=Object.assign(this._bodyStyle,e),this):this._bodyStyle};s.prototype.border=function t(e){return arguments.length?(this._border=typeof e==="function"?e:o.constant(e),this):this._border};s.prototype.borderRadius=function t(e){return arguments.length?(this._borderRadius=typeof e==="function"?e:o.constant(e),this):this._borderRadius};s.prototype.className=function t(e){return arguments.length?(this._className=e,this):this._className};s.prototype.data=function t(e){return arguments.length?(this._data=e,this):this._data};s.prototype.duration=function t(e){return arguments.length?(this._duration=typeof e==="function"?e:o.constant(e),this):this._duration};s.prototype.footer=function t(e){return arguments.length?(this._footer=typeof e==="function"?e:o.constant(e),this):this._footer};s.prototype.footerStyle=function t(e){return arguments.length?(this._footerStyle=Object.assign(this._footerStyle,e),this):this._footerStyle};s.prototype.height=function t(e){return arguments.length?(this._height=typeof e==="function"?e:o.constant(e),this):this._height};s.prototype.id=function t(e){return arguments.length?(this._id=typeof e==="function"?e:o.constant(e),this):this._id};s.prototype.offset=function t(e){return arguments.length?(this._offset=typeof e==="function"?e:o.constant(e),this):this._offset};s.prototype.padding=function t(e){return arguments.length?(this._padding=typeof e==="function"?e:o.constant(e),this):this._padding};s.prototype.pointerEvents=function t(e){return arguments.length?(this._pointerEvents=typeof e==="function"?e:o.constant(e),this):this._pointerEvents};s.prototype.tableStyle=function t(e){return arguments.length?(this._tableStyle=Object.assign(this._tableStyle,e),this):this._tableStyle};s.prototype.tbody=function t(e){return arguments.length?(this._tbody=e,this):this._tbody};s.prototype.tbodyStyle=function t(e){return arguments.length?(this._tbodyStyle=Object.assign(this._tbodyStyle,e),this):this._tbodyStyle};s.prototype.thead=function t(e){return arguments.length?(this._thead=e,this):this._thead};s.prototype.theadStyle=function t(e){return arguments.length?(this._theadStyle=Object.assign(this._theadStyle,e),this):this._theadStyle};s.prototype.title=function t(e){return arguments.length?(this._title=typeof e==="function"?e:o.constant(e),this):this._title};s.prototype.titleStyle=function t(e){return arguments.length?(this._titleStyle=Object.assign(this._titleStyle,e),this):this._titleStyle};s.prototype.translate=function t(e){return arguments.length?(this._translate=typeof e==="function"?e:o.constant(e),this):this._translate};s.prototype.width=function t(e){return arguments.length?(this._width=typeof e==="function"?e:o.constant(e),this):this._width};return s}(o.BaseClass);t.prefix=i;t.Tooltip=s;Object.defineProperty(t,"__esModule",{value:true})});