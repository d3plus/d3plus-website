/*
  d3plus-tooltip v0.2.0
  A javascript-only tooltip.
  Copyright (c) 2016 D3plus - https://d3plus.org
  @license MIT
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3-selection"),require("d3-transition"),require("d3plus-common")):"function"==typeof define&&define.amd?define("d3plus-tooltip",["exports","d3-selection","d3-transition","d3plus-common"],e):e(t.d3plus=t.d3plus||{},t.d3Selection,t.d3Transition,t.d3plusCommon)}(this,function(t,e,n,o){"use strict";var i=function(){return"-webkit-transform"in document.body.style?"-webkit-":"-moz-transform"in document.body.style?"-moz-":"-ms-transform"in document.body.style?"-ms-":"-o-transform"in document.body.style?"-o-":""},s=function(t){function s(){t.call(this),this._background=o.constant("rgba(255, 255, 255, 0.75)"),this._body=o.accessor("body",""),this._bodyStyle={"font-family":"Verdana","font-size":"10px","font-weight":"400"},this._border=o.constant("1px solid rgba(0, 0, 0, 0.1)"),this._borderRadius=o.constant("2px"),this._className="d3plus-tooltip",this._duration=o.constant(200),this._footer=o.accessor("footer",""),this._footerStyle={"font-family":"Verdana","font-size":"10px","font-weight":"400"},this._height=o.constant("auto"),this._id=function(t,e){return t.id||""+e},this._offset=o.constant(10),this._padding=o.constant("5px"),this._pointerEvents=o.constant("auto"),this._prefix=i(),this._tableStyle={"border-spacing":"0",width:"100%"},this._tbody=[],this._tbodyStyle={"font-family":"Verdana","font-size":"10px","text-align":"center"},this._thead=[],this._theadStyle={"font-family":"Verdana","font-size":"10px","font-weight":"600","text-align":"center"},this._title=o.accessor("title",""),this._titleStyle={"font-family":"Verdana","font-size":"12px","font-weight":"600","padding-bottom":"5px"},this._translate=function(t){return[t.x,t.y]},this._width=o.constant("auto")}return t&&(s.__proto__=t),s.prototype=Object.create(t&&t.prototype),s.prototype.constructor=s,s.prototype.render=function(t){function i(t){d.append("div").attr("class","d3plus-tooltip-"+t);var e=p.select(".d3plus-tooltip-"+t).html(h["_"+t]);o.stylize(e,h["_"+t+"Style"])}function s(t){if("function"==typeof t){var n=e.select(this.parentNode.parentNode).datum();return t(n,h._data.indexOf(n))}return t}function r(t){t.style("background",h._background).style(h._prefix+"border-radius",h._borderRadius).style("pointer-events",h._pointerEvents).style("padding",h._padding).style("width",h._width).style("height",h._height).style("border",function(t,n){var o=e.select(this).style("border");return"0px none rgb(0, 0, 0)"!==o?o:h._border(t,n)}).style("top",function(t,e){return h._translate(t,e)[1]-this.offsetHeight-h._offset(t,e)+"px"}).style("left",function(t,e){return h._translate(t,e)[0]-this.offsetWidth/2+"px"})}var a=this,h=this,l=e.select("body").selectAll("."+this._className).data(this._data,this._id),d=l.enter().append("div").attr("class",this._className).style("position","absolute").style(this._prefix+"transform","scale(0)").style(this._prefix+"transform-origin","50% 100%"),p=l.merge(d);i("title"),i("body");var u=d.append("table").attr("class","d3plus-tooltip-table"),c=p.select(".d3plus-tooltip-table");o.stylize(c,this._tableStyle),u.append("thead").attr("class","d3plus-tooltip-thead");var f=p.select(".d3plus-tooltip-thead");o.stylize(f,this._theadStyle);var y=f.selectAll("th").data(this._thead);y.enter().append("th").merge(y).html(s),y.exit().remove(),u.append("tbody").attr("class","d3plus-tooltip-tbody");var _=p.select(".d3plus-tooltip-tbody");o.stylize(_,this._tbodyStyle);var b=_.selectAll("tr").data(this._tbody),g=b.enter().append("tr");b.exit().remove();var m=b.merge(g),S=m.selectAll("td").data(function(t){return t});S.enter().append("td").merge(S).html(s),i("footer"),d.call(r);var x=n.transition().duration(this._duration);return p.attr("id",function(t,e){return"d3plus-tooltip-"+a._id(t,e)}).transition(x).style(this._prefix+"transform","scale(1)").call(r),l.exit().transition(x).style(this._prefix+"transform","scale(0)").remove(),t&&setTimeout(t,this._duration+100),this},s.prototype.background=function(t){return arguments.length?(this._background="function"==typeof t?t:o.constant(t),this):this._background},s.prototype.body=function(t){return arguments.length?(this._body="function"==typeof t?t:o.constant(t),this):this._body},s.prototype.bodyStyle=function(t){return arguments.length?(this._bodyStyle=Object.assign(this._bodyStyle,t),this):this._bodyStyle},s.prototype.border=function(t){return arguments.length?(this._border="function"==typeof t?t:o.constant(t),this):this._border},s.prototype.borderRadius=function(t){return arguments.length?(this._borderRadius="function"==typeof t?t:o.constant(t),this):this._borderRadius},s.prototype.className=function(t){return arguments.length?(this._className=t,this):this._className},s.prototype.data=function(t){return arguments.length?(this._data=t,this):this._data},s.prototype.duration=function(t){return arguments.length?(this._duration="function"==typeof t?t:o.constant(t),this):this._duration},s.prototype.footer=function(t){return arguments.length?(this._footer="function"==typeof t?t:o.constant(t),this):this._footer},s.prototype.footerStyle=function(t){return arguments.length?(this._footerStyle=Object.assign(this._footerStyle,t),this):this._footerStyle},s.prototype.height=function(t){return arguments.length?(this._height="function"==typeof t?t:o.constant(t),this):this._height},s.prototype.id=function(t){return arguments.length?(this._id="function"==typeof t?t:o.constant(t),this):this._id},s.prototype.offset=function(t){return arguments.length?(this._offset="function"==typeof t?t:o.constant(t),this):this._offset},s.prototype.padding=function(t){return arguments.length?(this._padding="function"==typeof t?t:o.constant(t),this):this._padding},s.prototype.pointerEvents=function(t){return arguments.length?(this._pointerEvents="function"==typeof t?t:o.constant(t),this):this._pointerEvents},s.prototype.tableStyle=function(t){return arguments.length?(this._tableStyle=Object.assign(this._tableStyle,t),this):this._tableStyle},s.prototype.tbody=function(t){return arguments.length?(this._tbody=t,this):this._tbody},s.prototype.tbodyStyle=function(t){return arguments.length?(this._tbodyStyle=Object.assign(this._tbodyStyle,t),this):this._tbodyStyle},s.prototype.thead=function(t){return arguments.length?(this._thead=t,this):this._thead},s.prototype.theadStyle=function(t){return arguments.length?(this._theadStyle=Object.assign(this._theadStyle,t),this):this._theadStyle},s.prototype.title=function(t){return arguments.length?(this._title="function"==typeof t?t:o.constant(t),this):this._title},s.prototype.titleStyle=function(t){return arguments.length?(this._titleStyle=Object.assign(this._titleStyle,t),this):this._titleStyle},s.prototype.translate=function(t){return arguments.length?(this._translate="function"==typeof t?t:o.constant(t),this):this._translate},s.prototype.width=function(t){return arguments.length?(this._width="function"==typeof t?t:o.constant(t),this):this._width},s}(o.BaseClass);t.prefix=i,t.Tooltip=s,Object.defineProperty(t,"__esModule",{value:!0})});