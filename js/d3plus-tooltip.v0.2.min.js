/*
  d3plus-tooltip v0.2.7
  A javascript-only tooltip.
  Copyright (c) 2017 D3plus - https://d3plus.org
  @license MIT
*/
if(typeof Object.assign!=="function"){Object.defineProperty(Object,"assign",{value:function t(e){"use strict";if(e===null){throw new TypeError("Cannot convert undefined or null to object")}var i=Object(e);for(var o=1;o<arguments.length;o++){var n=arguments[o];if(n!==null){for(var s in n){if(Object.prototype.hasOwnProperty.call(n,s)){i[s]=n[s]}}}}return i},writable:true,configurable:true})}if(!Array.prototype.includes){Object.defineProperty(Array.prototype,"includes",{value:function t(e,i){var o=Object(this);var n=o.length>>>0;if(n===0)return false;var s=i|0;var r=Math.max(s>=0?s:n-Math.abs(s),0);function a(t,e){return t===e||typeof t==="number"&&typeof e==="number"&&isNaN(t)&&isNaN(e)}while(r<n){if(a(o[r],e)){return true}r++}return false}})}(function(t,e){typeof exports==="object"&&typeof module!=="undefined"?e(exports,require("d3-selection"),require("d3-transition"),require("d3plus-common")):typeof define==="function"&&define.amd?define("d3plus-tooltip",["exports","d3-selection","d3-transition","d3plus-common"],e):e(t.d3plus={},t.d3Selection,t.d3Transition,t.d3plusCommon)})(this,function(t,e,i,o){"use strict";var n=function(t){function n(){t.call(this);this._background=o.constant("rgba(255, 255, 255, 0.75)");this._body=o.accessor("body","");this._bodyStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"12px","font-weight":"400"};this._border=o.constant("1px solid rgba(0, 0, 0, 0.1)");this._borderRadius=o.constant("2px");this._className="d3plus-tooltip";this._data=[];this._duration=o.constant(200);this._footer=o.accessor("footer","");this._footerStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"12px","font-weight":"400"};this._height=o.constant("auto");this._id=function(t,e){return t.id||""+e};this._offset=o.constant(10);this._padding=o.constant("5px");this._pointerEvents=o.constant("auto");this._prefix=o.prefix();this._tableStyle={"border-spacing":"0",width:"100%"};this._tbody=[];this._tbodyStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"12px","text-align":"center"};this._thead=[];this._theadStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"12px","font-weight":"600","text-align":"center"};this._title=o.accessor("title","");this._titleStyle={"font-family":"'Roboto', 'Helvetica Neue', 'HelveticaNeue', 'Helvetica', 'Arial', sans-serif","font-size":"14px","font-weight":"600"};this._translate=function(t){return[t.x,t.y]};this._width=o.constant("auto")}if(t)n.__proto__=t;n.prototype=Object.create(t&&t.prototype);n.prototype.constructor=n;n.prototype.render=function t(n){var s=this;var r=this;var a=e.select("body").selectAll("."+this._className).data(this._data,this._id);var l=a.enter().append("div").attr("class",this._className).style("position","absolute").style(this._prefix+"transform","scale(0)").style(this._prefix+"transform-origin","50% 100%");var h=a.merge(l);function u(t){l.append("div").attr("class","d3plus-tooltip-"+t);var e=h.select(".d3plus-tooltip-"+t).html(r["_"+t]);o.stylize(e,r["_"+t+"Style"])}function c(t){if(typeof t==="function"){var i=e.select(this.parentNode.parentNode).datum();return t(i,r._data.indexOf(i))}else{return t}}function p(t){t.style("background",r._background).style(r._prefix+"border-radius",r._borderRadius).style("pointer-events",r._pointerEvents).style("padding",r._padding).style("width",r._width).style("height",r._height).style("border",function(t,i){var o=e.select(this).style("border");return o!=="0px none rgb(0, 0, 0)"?o:r._border(t,i)}).style("top",function(t,e){return r._translate(t,e)[1]-this.offsetHeight-r._offset(t,e)+"px"}).style("left",function(t,e){return r._translate(t,e)[0]-this.offsetWidth/2+"px"})}u("title");u("body");var d=l.append("table").attr("class","d3plus-tooltip-table");var f=h.select(".d3plus-tooltip-table");o.stylize(f,this._tableStyle);d.append("thead").attr("class","d3plus-tooltip-thead");var y=h.select(".d3plus-tooltip-thead");o.stylize(y,this._theadStyle);var _=y.selectAll("th").data(this._thead);_.enter().append("th").merge(_).html(c);_.exit().remove();d.append("tbody").attr("class","d3plus-tooltip-tbody");var b=h.select(".d3plus-tooltip-tbody");o.stylize(b,this._tbodyStyle);var g=b.selectAll("tr").data(this._tbody);var v=g.enter().append("tr");g.exit().remove();var m=g.merge(v);var S=m.selectAll("td").data(function(t){return t});S.enter().append("td").merge(S).html(c);u("footer");l.call(p);var x=i.transition().duration(this._duration);h.attr("id",function(t,e){return"d3plus-tooltip-"+s._id(t,e)}).transition(x).style(this._prefix+"transform","scale(1)").call(p);a.exit().transition(x).style(this._prefix+"transform","scale(0)").remove();if(n){setTimeout(n,this._duration+100)}return this};n.prototype.background=function t(e){return arguments.length?(this._background=typeof e==="function"?e:o.constant(e),this):this._background};n.prototype.body=function t(e){return arguments.length?(this._body=typeof e==="function"?e:o.constant(e),this):this._body};n.prototype.bodyStyle=function t(e){return arguments.length?(this._bodyStyle=Object.assign(this._bodyStyle,e),this):this._bodyStyle};n.prototype.border=function t(e){return arguments.length?(this._border=typeof e==="function"?e:o.constant(e),this):this._border};n.prototype.borderRadius=function t(e){return arguments.length?(this._borderRadius=typeof e==="function"?e:o.constant(e),this):this._borderRadius};n.prototype.className=function t(e){return arguments.length?(this._className=e,this):this._className};n.prototype.data=function t(e){return arguments.length?(this._data=e,this):this._data};n.prototype.duration=function t(e){return arguments.length?(this._duration=typeof e==="function"?e:o.constant(e),this):this._duration};n.prototype.footer=function t(e){return arguments.length?(this._footer=typeof e==="function"?e:o.constant(e),this):this._footer};n.prototype.footerStyle=function t(e){return arguments.length?(this._footerStyle=Object.assign(this._footerStyle,e),this):this._footerStyle};n.prototype.height=function t(e){return arguments.length?(this._height=typeof e==="function"?e:o.constant(e),this):this._height};n.prototype.id=function t(e){return arguments.length?(this._id=typeof e==="function"?e:o.constant(e),this):this._id};n.prototype.offset=function t(e){return arguments.length?(this._offset=typeof e==="function"?e:o.constant(e),this):this._offset};n.prototype.padding=function t(e){return arguments.length?(this._padding=typeof e==="function"?e:o.constant(e),this):this._padding};n.prototype.pointerEvents=function t(e){return arguments.length?(this._pointerEvents=typeof e==="function"?e:o.constant(e),this):this._pointerEvents};n.prototype.tableStyle=function t(e){return arguments.length?(this._tableStyle=Object.assign(this._tableStyle,e),this):this._tableStyle};n.prototype.tbody=function t(e){return arguments.length?(this._tbody=e,this):this._tbody};n.prototype.tbodyStyle=function t(e){return arguments.length?(this._tbodyStyle=Object.assign(this._tbodyStyle,e),this):this._tbodyStyle};n.prototype.thead=function t(e){return arguments.length?(this._thead=e,this):this._thead};n.prototype.theadStyle=function t(e){return arguments.length?(this._theadStyle=Object.assign(this._theadStyle,e),this):this._theadStyle};n.prototype.title=function t(e){return arguments.length?(this._title=typeof e==="function"?e:o.constant(e),this):this._title};n.prototype.titleStyle=function t(e){return arguments.length?(this._titleStyle=Object.assign(this._titleStyle,e),this):this._titleStyle};n.prototype.translate=function t(e){return arguments.length?(this._translate=typeof e==="function"?e:o.constant(e),this):this._translate};n.prototype.width=function t(e){return arguments.length?(this._width=typeof e==="function"?e:o.constant(e),this):this._width};return n}(o.BaseClass);t.Tooltip=n;Object.defineProperty(t,"__esModule",{value:true})});